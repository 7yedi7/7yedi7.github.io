const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./home-C0ikv4p1.js","./green-hn3UDYiG.js","./green-BG5YVs62.css","./page-DnWmNfIa.js","./index-CtwDiAOp.js","./button-Ct2sEPvU.js","./index-B6eG867p.js","./index-BlIUR322.css","./images-C_2KOGnH.js"])))=>i.map(i=>d[i]);
import{r as E,j as z,T as vv,G as eR,d as nR,a as iR,b as Zl,c as rR}from"./green-hn3UDYiG.js";import{_ as bv}from"./index-B6eG867p.js";/**
 * react-router v7.9.4
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var a0="popstate";function sR(n={}){function t(r,s){let{pathname:o="/",search:a="",hash:h=""}=Ar(r.location.hash.substring(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),Kc("",{pathname:o,search:a,hash:h},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function e(r,s){let o=r.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let h=r.location.href,f=h.indexOf("#");a=f===-1?h:h.slice(0,f)}return a+"#"+(typeof s=="string"?s:bo(s))}function i(r,s){Mn(r.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(s)})`)}return lR(t,e,i,n)}function jt(n,t){if(n===!1||n===null||typeof n>"u")throw new Error(t)}function Mn(n,t){if(!n){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function oR(){return Math.random().toString(36).substring(2,10)}function h0(n,t){return{usr:n.state,key:n.key,idx:t}}function Kc(n,t,e=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof t=="string"?Ar(t):t,state:e,key:t&&t.key||i||oR()}}function bo({pathname:n="/",search:t="",hash:e=""}){return t&&t!=="?"&&(n+=t.charAt(0)==="?"?t:"?"+t),e&&e!=="#"&&(n+=e.charAt(0)==="#"?e:"#"+e),n}function Ar(n){let t={};if(n){let e=n.indexOf("#");e>=0&&(t.hash=n.substring(e),n=n.substring(0,e));let i=n.indexOf("?");i>=0&&(t.search=n.substring(i),n=n.substring(0,i)),n&&(t.pathname=n)}return t}function lR(n,t,e,i={}){let{window:r=document.defaultView,v5Compat:s=!1}=i,o=r.history,a="POP",h=null,f=c();f==null&&(f=0,o.replaceState({...o.state,idx:f},""));function c(){return(o.state||{idx:null}).idx}function p(){a="POP";let C=c(),k=C==null?null:C-f;f=C,h&&h({action:a,location:S.location,delta:k})}function m(C,k){a="PUSH";let T=Kc(S.location,C,k);e&&e(T,C),f=c()+1;let P=h0(T,f),I=S.createHref(T);try{o.pushState(P,"",I)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;r.location.assign(I)}s&&h&&h({action:a,location:S.location,delta:1})}function y(C,k){a="REPLACE";let T=Kc(S.location,C,k);e&&e(T,C),f=c();let P=h0(T,f),I=S.createHref(T);o.replaceState(P,"",I),s&&h&&h({action:a,location:S.location,delta:0})}function v(C){return aR(C)}let S={get action(){return a},get location(){return n(r,o)},listen(C){if(h)throw new Error("A history only accepts one active listener");return r.addEventListener(a0,p),h=C,()=>{r.removeEventListener(a0,p),h=null}},createHref(C){return t(r,C)},createURL:v,encodeLocation(C){let k=v(C);return{pathname:k.pathname,search:k.search,hash:k.hash}},push:m,replace:y,go(C){return o.go(C)}};return S}function aR(n,t=!1){let e="http://localhost";typeof window<"u"&&(e=window.location.origin!=="null"?window.location.origin:window.location.href),jt(e,"No window.location.(origin|href) available to create URL");let i=typeof n=="string"?n:bo(n);return i=i.replace(/ $/,"%20"),!t&&i.startsWith("//")&&(i=e+i),new URL(i,e)}function wv(n,t,e="/"){return hR(n,t,e,!1)}function hR(n,t,e,i){let r=typeof t=="string"?Ar(t):t,s=fi(r.pathname||"/",e);if(s==null)return null;let o=Sv(n);uR(o);let a=null;for(let h=0;a==null&&h<o.length;++h){let f=wR(s);a=vR(o[h],f,i)}return a}function Sv(n,t=[],e=[],i="",r=!1){let s=(o,a,h=r,f)=>{let c={relativePath:f===void 0?o.path||"":f,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};if(c.relativePath.startsWith("/")){if(!c.relativePath.startsWith(i)&&h)return;jt(c.relativePath.startsWith(i),`Absolute route path "${c.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(i.length)}let p=ui([i,c.relativePath]),m=e.concat(c);o.children&&o.children.length>0&&(jt(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),Sv(o.children,t,m,p,h)),!(o.path==null&&!o.index)&&t.push({path:p,score:yR(p,o.index),routesMeta:m})};return n.forEach((o,a)=>{if(o.path===""||!o.path?.includes("?"))s(o,a);else for(let h of Cv(o.path))s(o,a,!0,h)}),t}function Cv(n){let t=n.split("/");if(t.length===0)return[];let[e,...i]=t,r=e.endsWith("?"),s=e.replace(/\?$/,"");if(i.length===0)return r?[s,""]:[s];let o=Cv(i.join("/")),a=[];return a.push(...o.map(h=>h===""?s:[s,h].join("/"))),r&&a.push(...o),a.map(h=>n.startsWith("/")&&h===""?"/":h)}function uR(n){n.sort((t,e)=>t.score!==e.score?e.score-t.score:xR(t.routesMeta.map(i=>i.childrenIndex),e.routesMeta.map(i=>i.childrenIndex)))}var cR=/^:[\w-]+$/,fR=3,dR=2,pR=1,mR=10,gR=-2,u0=n=>n==="*";function yR(n,t){let e=n.split("/"),i=e.length;return e.some(u0)&&(i+=gR),t&&(i+=dR),e.filter(r=>!u0(r)).reduce((r,s)=>r+(cR.test(s)?fR:s===""?pR:mR),i)}function xR(n,t){return n.length===t.length&&n.slice(0,-1).every((i,r)=>i===t[r])?n[n.length-1]-t[t.length-1]:0}function vR(n,t,e=!1){let{routesMeta:i}=n,r={},s="/",o=[];for(let a=0;a<i.length;++a){let h=i[a],f=a===i.length-1,c=s==="/"?t:t.slice(s.length)||"/",p=za({path:h.relativePath,caseSensitive:h.caseSensitive,end:f},c),m=h.route;if(!p&&f&&e&&!i[i.length-1].route.index&&(p=za({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},c)),!p)return null;Object.assign(r,p.params),o.push({params:r,pathname:ui([s,p.pathname]),pathnameBase:AR(ui([s,p.pathnameBase])),route:m}),p.pathnameBase!=="/"&&(s=ui([s,p.pathnameBase]))}return o}function za(n,t){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[e,i]=bR(n.path,n.caseSensitive,n.end),r=t.match(e);if(!r)return null;let s=r[0],o=s.replace(/(.)\/+$/,"$1"),a=r.slice(1);return{params:i.reduce((f,{paramName:c,isOptional:p},m)=>{if(c==="*"){let v=a[m]||"";o=s.slice(0,s.length-v.length).replace(/(.)\/+$/,"$1")}const y=a[m];return p&&!y?f[c]=void 0:f[c]=(y||"").replace(/%2F/g,"/"),f},{}),pathname:s,pathnameBase:o,pattern:n}}function bR(n,t=!1,e=!0){Mn(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],r="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,h)=>(i.push({paramName:a,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(i.push({paramName:"*"}),r+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):e?r+="\\/*$":n!==""&&n!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,t?void 0:"i"),i]}function wR(n){try{return n.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Mn(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),n}}function fi(n,t){if(t==="/")return n;if(!n.toLowerCase().startsWith(t.toLowerCase()))return null;let e=t.endsWith("/")?t.length-1:t.length,i=n.charAt(e);return i&&i!=="/"?null:n.slice(e)||"/"}function SR(n,t="/"){let{pathname:e,search:i="",hash:r=""}=typeof n=="string"?Ar(n):n;return{pathname:e?e.startsWith("/")?e:CR(e,t):t,search:TR(i),hash:MR(r)}}function CR(n,t){let e=t.replace(/\/+$/,"").split("/");return n.split("/").forEach(r=>{r===".."?e.length>1&&e.pop():r!=="."&&e.push(r)}),e.length>1?e.join("/"):"/"}function tc(n,t,e,i){return`Cannot include a '${n}' character in a manually specified \`to.${t}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${e}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function kR(n){return n.filter((t,e)=>e===0||t.route.path&&t.route.path.length>0)}function kv(n){let t=kR(n);return t.map((e,i)=>i===t.length-1?e.pathname:e.pathnameBase)}function Av(n,t,e,i=!1){let r;typeof n=="string"?r=Ar(n):(r={...n},jt(!r.pathname||!r.pathname.includes("?"),tc("?","pathname","search",r)),jt(!r.pathname||!r.pathname.includes("#"),tc("#","pathname","hash",r)),jt(!r.search||!r.search.includes("#"),tc("#","search","hash",r)));let s=n===""||r.pathname==="",o=s?"/":r.pathname,a;if(o==null)a=e;else{let p=t.length-1;if(!i&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),p-=1;r.pathname=m.join("/")}a=p>=0?t[p]:"/"}let h=SR(r,a),f=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&e.endsWith("/");return!h.pathname.endsWith("/")&&(f||c)&&(h.pathname+="/"),h}var ui=n=>n.join("/").replace(/\/\/+/g,"/"),AR=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),TR=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,MR=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function PR(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var Tv=["POST","PUT","PATCH","DELETE"];new Set(Tv);var DR=["GET",...Tv];new Set(DR);var ys=E.createContext(null);ys.displayName="DataRouter";var ph=E.createContext(null);ph.displayName="DataRouterState";E.createContext(!1);var Mv=E.createContext({isTransitioning:!1});Mv.displayName="ViewTransition";var RR=E.createContext(new Map);RR.displayName="Fetchers";var ER=E.createContext(null);ER.displayName="Await";var Gn=E.createContext(null);Gn.displayName="Navigation";var jo=E.createContext(null);jo.displayName="Location";var xi=E.createContext({outlet:null,matches:[],isDataRoute:!1});xi.displayName="Route";var fd=E.createContext(null);fd.displayName="RouteError";function LR(n,{relative:t}={}){jt(Ko(),"useHref() may be used only in the context of a <Router> component.");let{basename:e,navigator:i}=E.useContext(Gn),{hash:r,pathname:s,search:o}=qo(n,{relative:t}),a=s;return e!=="/"&&(a=s==="/"?e:ui([e,s])),i.createHref({pathname:a,search:o,hash:r})}function Ko(){return E.useContext(jo)!=null}function ji(){return jt(Ko(),"useLocation() may be used only in the context of a <Router> component."),E.useContext(jo).location}var Pv="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Dv(n){E.useContext(Gn).static||E.useLayoutEffect(n)}function dd(){let{isDataRoute:n}=E.useContext(xi);return n?jR():OR()}function OR(){jt(Ko(),"useNavigate() may be used only in the context of a <Router> component.");let n=E.useContext(ys),{basename:t,navigator:e}=E.useContext(Gn),{matches:i}=E.useContext(xi),{pathname:r}=ji(),s=JSON.stringify(kv(i)),o=E.useRef(!1);return Dv(()=>{o.current=!0}),E.useCallback((h,f={})=>{if(Mn(o.current,Pv),!o.current)return;if(typeof h=="number"){e.go(h);return}let c=Av(h,JSON.parse(s),r,f.relative==="path");n==null&&t!=="/"&&(c.pathname=c.pathname==="/"?t:ui([t,c.pathname])),(f.replace?e.replace:e.push)(c,f.state,f)},[t,e,s,r,n])}E.createContext(null);function qo(n,{relative:t}={}){let{matches:e}=E.useContext(xi),{pathname:i}=ji(),r=JSON.stringify(kv(e));return E.useMemo(()=>Av(n,JSON.parse(r),i,t==="path"),[n,r,i,t])}function BR(n,t){return Rv(n,t)}function Rv(n,t,e,i,r){jt(Ko(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=E.useContext(Gn),{matches:o}=E.useContext(xi),a=o[o.length-1],h=a?a.params:{},f=a?a.pathname:"/",c=a?a.pathnameBase:"/",p=a&&a.route;{let T=p&&p.path||"";Ev(f,!p||T.endsWith("*")||T.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${T}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${T}"> to <Route path="${T==="/"?"*":`${T}/*`}">.`)}let m=ji(),y;if(t){let T=typeof t=="string"?Ar(t):t;jt(c==="/"||T.pathname?.startsWith(c),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${c}" but pathname "${T.pathname}" was given in the \`location\` prop.`),y=T}else y=m;let v=y.pathname||"/",S=v;if(c!=="/"){let T=c.replace(/^\//,"").split("/");S="/"+v.replace(/^\//,"").split("/").slice(T.length).join("/")}let C=wv(n,{pathname:S});Mn(p||C!=null,`No routes matched location "${y.pathname}${y.search}${y.hash}" `),Mn(C==null||C[C.length-1].route.element!==void 0||C[C.length-1].route.Component!==void 0||C[C.length-1].route.lazy!==void 0,`Matched leaf route at location "${y.pathname}${y.search}${y.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let k=VR(C&&C.map(T=>Object.assign({},T,{params:Object.assign({},h,T.params),pathname:ui([c,s.encodeLocation?s.encodeLocation(T.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?c:ui([c,s.encodeLocation?s.encodeLocation(T.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:T.pathnameBase])})),o,e,i,r);return t&&k?E.createElement(jo.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...y},navigationType:"POP"}},k):k}function IR(){let n=$R(),t=PR(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),e=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:i},s={padding:"2px 4px",backgroundColor:i},o=null;return console.error("Error handled by React Router default ErrorBoundary:",n),o=E.createElement(E.Fragment,null,E.createElement("p",null,"ðŸ’¿ Hey developer ðŸ‘‹"),E.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",E.createElement("code",{style:s},"ErrorBoundary")," or"," ",E.createElement("code",{style:s},"errorElement")," prop on your route.")),E.createElement(E.Fragment,null,E.createElement("h2",null,"Unexpected Application Error!"),E.createElement("h3",{style:{fontStyle:"italic"}},t),e?E.createElement("pre",{style:r},e):null,o)}var _R=E.createElement(IR,null),NR=class extends E.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,t){return t.location!==n.location||t.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:t.error,location:t.location,revalidation:n.revalidation||t.revalidation}}componentDidCatch(n,t){this.props.unstable_onError?this.props.unstable_onError(n,t):console.error("React Router caught the following error during render",n)}render(){return this.state.error!==void 0?E.createElement(xi.Provider,{value:this.props.routeContext},E.createElement(fd.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function FR({routeContext:n,match:t,children:e}){let i=E.useContext(ys);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),E.createElement(xi.Provider,{value:n},e)}function VR(n,t=[],e=null,i=null,r=null){if(n==null){if(!e)return null;if(e.errors)n=e.matches;else if(t.length===0&&!e.initialized&&e.matches.length>0)n=e.matches;else return null}let s=n,o=e?.errors;if(o!=null){let f=s.findIndex(c=>c.route.id&&o?.[c.route.id]!==void 0);jt(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),s=s.slice(0,Math.min(s.length,f+1))}let a=!1,h=-1;if(e)for(let f=0;f<s.length;f++){let c=s[f];if((c.route.HydrateFallback||c.route.hydrateFallbackElement)&&(h=f),c.route.id){let{loaderData:p,errors:m}=e,y=c.route.loader&&!p.hasOwnProperty(c.route.id)&&(!m||m[c.route.id]===void 0);if(c.route.lazy||y){a=!0,h>=0?s=s.slice(0,h+1):s=[s[0]];break}}}return s.reduceRight((f,c,p)=>{let m,y=!1,v=null,S=null;e&&(m=o&&c.route.id?o[c.route.id]:void 0,v=c.route.errorElement||_R,a&&(h<0&&p===0?(Ev("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),y=!0,S=null):h===p&&(y=!0,S=c.route.hydrateFallbackElement||null)));let C=t.concat(s.slice(0,p+1)),k=()=>{let T;return m?T=v:y?T=S:c.route.Component?T=E.createElement(c.route.Component,null):c.route.element?T=c.route.element:T=f,E.createElement(FR,{match:c,routeContext:{outlet:f,matches:C,isDataRoute:e!=null},children:T})};return e&&(c.route.ErrorBoundary||c.route.errorElement||p===0)?E.createElement(NR,{location:e.location,revalidation:e.revalidation,component:v,error:m,children:k(),routeContext:{outlet:null,matches:C,isDataRoute:!0},unstable_onError:i}):k()},null)}function pd(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function WR(n){let t=E.useContext(ys);return jt(t,pd(n)),t}function HR(n){let t=E.useContext(ph);return jt(t,pd(n)),t}function zR(n){let t=E.useContext(xi);return jt(t,pd(n)),t}function md(n){let t=zR(n),e=t.matches[t.matches.length-1];return jt(e.route.id,`${n} can only be used on routes that contain a unique "id"`),e.route.id}function UR(){return md("useRouteId")}function $R(){let n=E.useContext(fd),t=HR("useRouteError"),e=md("useRouteError");return n!==void 0?n:t.errors?.[e]}function jR(){let{router:n}=WR("useNavigate"),t=md("useNavigate"),e=E.useRef(!1);return Dv(()=>{e.current=!0}),E.useCallback(async(r,s={})=>{Mn(e.current,Pv),e.current&&(typeof r=="number"?n.navigate(r):await n.navigate(r,{fromRouteId:t,...s}))},[n,t])}var c0={};function Ev(n,t,e){!t&&!c0[n]&&(c0[n]=!0,Mn(!1,e))}E.memo(KR);function KR({routes:n,future:t,state:e,unstable_onError:i}){return Rv(n,void 0,e,i,t)}function or(n){jt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function qR({basename:n="/",children:t=null,location:e,navigationType:i="POP",navigator:r,static:s=!1}){jt(!Ko(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=n.replace(/^\/*/,"/"),a=E.useMemo(()=>({basename:o,navigator:r,static:s,future:{}}),[o,r,s]);typeof e=="string"&&(e=Ar(e));let{pathname:h="/",search:f="",hash:c="",state:p=null,key:m="default"}=e,y=E.useMemo(()=>{let v=fi(h,o);return v==null?null:{location:{pathname:v,search:f,hash:c,state:p,key:m},navigationType:i}},[o,h,f,c,p,m,i]);return Mn(y!=null,`<Router basename="${o}"> is not able to match the URL "${h}${f}${c}" because it does not start with the basename, so the <Router> won't render anything.`),y==null?null:E.createElement(Gn.Provider,{value:a},E.createElement(jo.Provider,{children:t,value:y}))}function GR({children:n,location:t}){return BR(qc(n),t)}function qc(n,t=[]){let e=[];return E.Children.forEach(n,(i,r)=>{if(!E.isValidElement(i))return;let s=[...t,r];if(i.type===E.Fragment){e.push.apply(e,qc(i.props.children,s));return}jt(i.type===or,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),jt(!i.props.index||!i.props.children,"An index route cannot have child routes.");let o={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(o.children=qc(i.props.children,s)),e.push(o)}),e}var Ta="get",Ma="application/x-www-form-urlencoded";function mh(n){return n!=null&&typeof n.tagName=="string"}function YR(n){return mh(n)&&n.tagName.toLowerCase()==="button"}function XR(n){return mh(n)&&n.tagName.toLowerCase()==="form"}function JR(n){return mh(n)&&n.tagName.toLowerCase()==="input"}function ZR(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function QR(n,t){return n.button===0&&(!t||t==="_self")&&!ZR(n)}var Ql=null;function tE(){if(Ql===null)try{new FormData(document.createElement("form"),0),Ql=!1}catch{Ql=!0}return Ql}var eE=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ec(n){return n!=null&&!eE.has(n)?(Mn(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ma}"`),null):n}function nE(n,t){let e,i,r,s,o;if(XR(n)){let a=n.getAttribute("action");i=a?fi(a,t):null,e=n.getAttribute("method")||Ta,r=ec(n.getAttribute("enctype"))||Ma,s=new FormData(n)}else if(YR(n)||JR(n)&&(n.type==="submit"||n.type==="image")){let a=n.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=n.getAttribute("formaction")||a.getAttribute("action");if(i=h?fi(h,t):null,e=n.getAttribute("formmethod")||a.getAttribute("method")||Ta,r=ec(n.getAttribute("formenctype"))||ec(a.getAttribute("enctype"))||Ma,s=new FormData(a,n),!tE()){let{name:f,type:c,value:p}=n;if(c==="image"){let m=f?`${f}.`:"";s.append(`${m}x`,"0"),s.append(`${m}y`,"0")}else f&&s.append(f,p)}}else{if(mh(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');e=Ta,i=null,r=Ma,o=n}return s&&r==="text/plain"&&(o=s,s=void 0),{action:i,method:e.toLowerCase(),encType:r,formData:s,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function gd(n,t){if(n===!1||n===null||typeof n>"u")throw new Error(t)}function iE(n,t,e){let i=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return i.pathname==="/"?i.pathname=`_root.${e}`:t&&fi(i.pathname,t)==="/"?i.pathname=`${t.replace(/\/$/,"")}/_root.${e}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${e}`,i}async function rE(n,t){if(n.id in t)return t[n.id];try{let e=await import(n.module);return t[n.id]=e,e}catch(e){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(e),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function sE(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function oE(n,t,e){let i=await Promise.all(n.map(async r=>{let s=t.routes[r.route.id];if(s){let o=await rE(s,e);return o.links?o.links():[]}return[]}));return uE(i.flat(1).filter(sE).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function f0(n,t,e,i,r,s){let o=(h,f)=>e[f]?h.route.id!==e[f].route.id:!0,a=(h,f)=>e[f].pathname!==h.pathname||e[f].route.path?.endsWith("*")&&e[f].params["*"]!==h.params["*"];return s==="assets"?t.filter((h,f)=>o(h,f)||a(h,f)):s==="data"?t.filter((h,f)=>{let c=i.routes[h.route.id];if(!c||!c.hasLoader)return!1;if(o(h,f)||a(h,f))return!0;if(h.route.shouldRevalidate){let p=h.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:e[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function lE(n,t,{includeHydrateFallback:e}={}){return aE(n.map(i=>{let r=t.routes[i.route.id];if(!r)return[];let s=[r.module];return r.clientActionModule&&(s=s.concat(r.clientActionModule)),r.clientLoaderModule&&(s=s.concat(r.clientLoaderModule)),e&&r.hydrateFallbackModule&&(s=s.concat(r.hydrateFallbackModule)),r.imports&&(s=s.concat(r.imports)),s}).flat(1))}function aE(n){return[...new Set(n)]}function hE(n){let t={},e=Object.keys(n).sort();for(let i of e)t[i]=n[i];return t}function uE(n,t){let e=new Set;return new Set(t),n.reduce((i,r)=>{let s=JSON.stringify(hE(r));return e.has(s)||(e.add(s),i.push({key:s,link:r})),i},[])}function Lv(){let n=E.useContext(ys);return gd(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function cE(){let n=E.useContext(ph);return gd(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var yd=E.createContext(void 0);yd.displayName="FrameworkContext";function Ov(){let n=E.useContext(yd);return gd(n,"You must render this element inside a <HydratedRouter> element"),n}function fE(n,t){let e=E.useContext(yd),[i,r]=E.useState(!1),[s,o]=E.useState(!1),{onFocus:a,onBlur:h,onMouseEnter:f,onMouseLeave:c,onTouchStart:p}=t,m=E.useRef(null);E.useEffect(()=>{if(n==="render"&&o(!0),n==="viewport"){let S=k=>{k.forEach(T=>{o(T.isIntersecting)})},C=new IntersectionObserver(S,{threshold:.5});return m.current&&C.observe(m.current),()=>{C.disconnect()}}},[n]),E.useEffect(()=>{if(i){let S=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(S)}}},[i]);let y=()=>{r(!0)},v=()=>{r(!1),o(!1)};return e?n!=="intent"?[s,m,{}]:[s,m,{onFocus:Ks(a,y),onBlur:Ks(h,v),onMouseEnter:Ks(f,y),onMouseLeave:Ks(c,v),onTouchStart:Ks(p,y)}]:[!1,m,{}]}function Ks(n,t){return e=>{n&&n(e),e.defaultPrevented||t(e)}}function dE({page:n,...t}){let{router:e}=Lv(),i=E.useMemo(()=>wv(e.routes,n,e.basename),[e.routes,n,e.basename]);return i?E.createElement(mE,{page:n,matches:i,...t}):null}function pE(n){let{manifest:t,routeModules:e}=Ov(),[i,r]=E.useState([]);return E.useEffect(()=>{let s=!1;return oE(n,t,e).then(o=>{s||r(o)}),()=>{s=!0}},[n,t,e]),i}function mE({page:n,matches:t,...e}){let i=ji(),{manifest:r,routeModules:s}=Ov(),{basename:o}=Lv(),{loaderData:a,matches:h}=cE(),f=E.useMemo(()=>f0(n,t,h,r,i,"data"),[n,t,h,r,i]),c=E.useMemo(()=>f0(n,t,h,r,i,"assets"),[n,t,h,r,i]),p=E.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let v=new Set,S=!1;if(t.forEach(k=>{let T=r.routes[k.route.id];!T||!T.hasLoader||(!f.some(P=>P.route.id===k.route.id)&&k.route.id in a&&s[k.route.id]?.shouldRevalidate||T.hasClientLoader?S=!0:v.add(k.route.id))}),v.size===0)return[];let C=iE(n,o,"data");return S&&v.size>0&&C.searchParams.set("_routes",t.filter(k=>v.has(k.route.id)).map(k=>k.route.id).join(",")),[C.pathname+C.search]},[o,a,i,r,f,t,n,s]),m=E.useMemo(()=>lE(c,r),[c,r]),y=pE(c);return E.createElement(E.Fragment,null,p.map(v=>E.createElement("link",{key:v,rel:"prefetch",as:"fetch",href:v,...e})),m.map(v=>E.createElement("link",{key:v,rel:"modulepreload",href:v,...e})),y.map(({key:v,link:S})=>E.createElement("link",{key:v,nonce:e.nonce,...S})))}function gE(...n){return t=>{n.forEach(e=>{typeof e=="function"?e(t):e!=null&&(e.current=t)})}}var Bv=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Bv&&(window.__reactRouterVersion="7.9.4")}catch{}function yE({basename:n,children:t,window:e}){let i=E.useRef();i.current==null&&(i.current=sR({window:e,v5Compat:!0}));let r=i.current,[s,o]=E.useState({action:r.action,location:r.location}),a=E.useCallback(h=>{E.startTransition(()=>o(h))},[o]);return E.useLayoutEffect(()=>r.listen(a),[r,a]),E.createElement(qR,{basename:n,children:t,location:s.location,navigationType:s.action,navigator:r})}var Iv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,_v=E.forwardRef(function({onClick:t,discover:e="render",prefetch:i="none",relative:r,reloadDocument:s,replace:o,state:a,target:h,to:f,preventScrollReset:c,viewTransition:p,...m},y){let{basename:v}=E.useContext(Gn),S=typeof f=="string"&&Iv.test(f),C,k=!1;if(typeof f=="string"&&S&&(C=f,Bv))try{let j=new URL(window.location.href),tt=f.startsWith("//")?new URL(j.protocol+f):new URL(f),et=fi(tt.pathname,v);tt.origin===j.origin&&et!=null?f=et+tt.search+tt.hash:k=!0}catch{Mn(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let T=LR(f,{relative:r}),[P,I,L]=fE(i,m),_=wE(f,{replace:o,state:a,target:h,preventScrollReset:c,relative:r,viewTransition:p});function F(j){t&&t(j),j.defaultPrevented||_(j)}let $=E.createElement("a",{...m,...L,href:C||T,onClick:k||s?t:F,ref:gE(y,I),target:h,"data-discover":!S&&e==="render"?"true":void 0});return P&&!S?E.createElement(E.Fragment,null,$,E.createElement(dE,{page:T})):$});_v.displayName="Link";var xE=E.forwardRef(function({"aria-current":t="page",caseSensitive:e=!1,className:i="",end:r=!1,style:s,to:o,viewTransition:a,children:h,...f},c){let p=qo(o,{relative:f.relative}),m=ji(),y=E.useContext(ph),{navigator:v,basename:S}=E.useContext(Gn),C=y!=null&&TE(p)&&a===!0,k=v.encodeLocation?v.encodeLocation(p).pathname:p.pathname,T=m.pathname,P=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;e||(T=T.toLowerCase(),P=P?P.toLowerCase():null,k=k.toLowerCase()),P&&S&&(P=fi(P,S)||P);const I=k!=="/"&&k.endsWith("/")?k.length-1:k.length;let L=T===k||!r&&T.startsWith(k)&&T.charAt(I)==="/",_=P!=null&&(P===k||!r&&P.startsWith(k)&&P.charAt(k.length)==="/"),F={isActive:L,isPending:_,isTransitioning:C},$=L?t:void 0,j;typeof i=="function"?j=i(F):j=[i,L?"active":null,_?"pending":null,C?"transitioning":null].filter(Boolean).join(" ");let tt=typeof s=="function"?s(F):s;return E.createElement(_v,{...f,"aria-current":$,className:j,ref:c,style:tt,to:o,viewTransition:a},typeof h=="function"?h(F):h)});xE.displayName="NavLink";var vE=E.forwardRef(({discover:n="render",fetcherKey:t,navigate:e,reloadDocument:i,replace:r,state:s,method:o=Ta,action:a,onSubmit:h,relative:f,preventScrollReset:c,viewTransition:p,...m},y)=>{let v=kE(),S=AE(a,{relative:f}),C=o.toLowerCase()==="get"?"get":"post",k=typeof a=="string"&&Iv.test(a),T=P=>{if(h&&h(P),P.defaultPrevented)return;P.preventDefault();let I=P.nativeEvent.submitter,L=I?.getAttribute("formmethod")||o;v(I||P.currentTarget,{fetcherKey:t,method:L,navigate:e,replace:r,state:s,relative:f,preventScrollReset:c,viewTransition:p})};return E.createElement("form",{ref:y,method:C,action:S,onSubmit:i?h:T,...m,"data-discover":!k&&n==="render"?"true":void 0})});vE.displayName="Form";function bE(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Nv(n){let t=E.useContext(ys);return jt(t,bE(n)),t}function wE(n,{target:t,replace:e,state:i,preventScrollReset:r,relative:s,viewTransition:o}={}){let a=dd(),h=ji(),f=qo(n,{relative:s});return E.useCallback(c=>{if(QR(c,t)){c.preventDefault();let p=e!==void 0?e:bo(h)===bo(f);a(n,{replace:p,state:i,preventScrollReset:r,relative:s,viewTransition:o})}},[h,a,f,e,i,t,n,r,s,o])}var SE=0,CE=()=>`__${String(++SE)}__`;function kE(){let{router:n}=Nv("useSubmit"),{basename:t}=E.useContext(Gn),e=UR();return E.useCallback(async(i,r={})=>{let{action:s,method:o,encType:a,formData:h,body:f}=nE(i,t);if(r.navigate===!1){let c=r.fetcherKey||CE();await n.fetch(c,e,r.action||s,{preventScrollReset:r.preventScrollReset,formData:h,body:f,formMethod:r.method||o,formEncType:r.encType||a,flushSync:r.flushSync})}else await n.navigate(r.action||s,{preventScrollReset:r.preventScrollReset,formData:h,body:f,formMethod:r.method||o,formEncType:r.encType||a,replace:r.replace,state:r.state,fromRouteId:e,flushSync:r.flushSync,viewTransition:r.viewTransition})},[n,t,e])}function AE(n,{relative:t}={}){let{basename:e}=E.useContext(Gn),i=E.useContext(xi);jt(i,"useFormAction must be used inside a RouteContext");let[r]=i.matches.slice(-1),s={...qo(n||".",{relative:t})},o=ji();if(n==null){s.search=o.search;let a=new URLSearchParams(s.search),h=a.getAll("index");if(h.some(c=>c==="")){a.delete("index"),h.filter(p=>p).forEach(p=>a.append("index",p));let c=a.toString();s.search=c?`?${c}`:""}}return(!n||n===".")&&r.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),e!=="/"&&(s.pathname=s.pathname==="/"?e:ui([e,s.pathname])),bo(s)}function TE(n,{relative:t}={}){let e=E.useContext(Mv);jt(e!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=Nv("useViewTransitionState"),r=qo(n,{relative:t});if(!e.isTransitioning)return!1;let s=fi(e.currentLocation.pathname,i)||e.currentLocation.pathname,o=fi(e.nextLocation.pathname,i)||e.nextLocation.pathname;return za(r.pathname,o)!=null||za(r.pathname,s)!=null}const ME=""+new URL("white-DLAWHszH.png",import.meta.url).href,PE=1024;let DE=0,nc=class{constructor(t,e){this.from=t,this.to=e}};class bt{constructor(t={}){this.id=DE++,this.perNode=!!t.perNode,this.deserialize=t.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")}),this.combine=t.combine||null}add(t){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof t!="function"&&(t=He.match(t)),e=>{let i=t(e);return i===void 0?null:[this,i]}}}bt.closedBy=new bt({deserialize:n=>n.split(" ")});bt.openedBy=new bt({deserialize:n=>n.split(" ")});bt.group=new bt({deserialize:n=>n.split(" ")});bt.isolate=new bt({deserialize:n=>{if(n&&n!="rtl"&&n!="ltr"&&n!="auto")throw new RangeError("Invalid value for isolate: "+n);return n||"auto"}});bt.contextHash=new bt({perNode:!0});bt.lookAhead=new bt({perNode:!0});bt.mounted=new bt({perNode:!0});class Ua{constructor(t,e,i){this.tree=t,this.overlay=e,this.parser=i}static get(t){return t&&t.props&&t.props[bt.mounted.id]}}const RE=Object.create(null);class He{constructor(t,e,i,r=0){this.name=t,this.props=e,this.id=i,this.flags=r}static define(t){let e=t.props&&t.props.length?Object.create(null):RE,i=(t.top?1:0)|(t.skipped?2:0)|(t.error?4:0)|(t.name==null?8:0),r=new He(t.name||"",e,t.id,i);if(t.props){for(let s of t.props)if(Array.isArray(s)||(s=s(r)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");e[s[0].id]=s[1]}}return r}prop(t){return this.props[t.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(t){if(typeof t=="string"){if(this.name==t)return!0;let e=this.prop(bt.group);return e?e.indexOf(t)>-1:!1}return this.id==t}static match(t){let e=Object.create(null);for(let i in t)for(let r of i.split(" "))e[r]=t[i];return i=>{for(let r=i.prop(bt.group),s=-1;s<(r?r.length:0);s++){let o=e[s<0?i.name:r[s]];if(o)return o}}}}He.none=new He("",Object.create(null),0,8);class xd{constructor(t){this.types=t;for(let e=0;e<t.length;e++)if(t[e].id!=e)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...t){let e=[];for(let i of this.types){let r=null;for(let s of t){let o=s(i);if(o){r||(r=Object.assign({},i.props));let a=o[1],h=o[0];h.combine&&h.id in r&&(a=h.combine(r[h.id],a)),r[h.id]=a}}e.push(r?new He(i.name,r,i.id,i.flags):i)}return new xd(e)}}const ta=new WeakMap,d0=new WeakMap;var de;(function(n){n[n.ExcludeBuffers=1]="ExcludeBuffers",n[n.IncludeAnonymous=2]="IncludeAnonymous",n[n.IgnoreMounts=4]="IgnoreMounts",n[n.IgnoreOverlays=8]="IgnoreOverlays"})(de||(de={}));class $t{constructor(t,e,i,r,s){if(this.type=t,this.children=e,this.positions=i,this.length=r,this.props=null,s&&s.length){this.props=Object.create(null);for(let[o,a]of s)this.props[typeof o=="number"?o:o.id]=a}}toString(){let t=Ua.get(this);if(t&&!t.overlay)return t.tree.toString();let e="";for(let i of this.children){let r=i.toString();r&&(e&&(e+=","),e+=r)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(e.length?"("+e+")":""):e}cursor(t=0){return new Yc(this.topNode,t)}cursorAt(t,e=0,i=0){let r=ta.get(this)||this.topNode,s=new Yc(r);return s.moveTo(t,e),ta.set(this,s._tree),s}get topNode(){return new pn(this,0,0,null)}resolve(t,e=0){let i=wo(ta.get(this)||this.topNode,t,e,!1);return ta.set(this,i),i}resolveInner(t,e=0){let i=wo(d0.get(this)||this.topNode,t,e,!0);return d0.set(this,i),i}resolveStack(t,e=0){return OE(this,t,e)}iterate(t){let{enter:e,leave:i,from:r=0,to:s=this.length}=t,o=t.mode||0,a=(o&de.IncludeAnonymous)>0;for(let h=this.cursor(o|de.IncludeAnonymous);;){let f=!1;if(h.from<=s&&h.to>=r&&(!a&&h.type.isAnonymous||e(h)!==!1)){if(h.firstChild())continue;f=!0}for(;f&&i&&(a||!h.type.isAnonymous)&&i(h),!h.nextSibling();){if(!h.parent())return;f=!0}}}prop(t){return t.perNode?this.props?this.props[t.id]:void 0:this.type.prop(t)}get propValues(){let t=[];if(this.props)for(let e in this.props)t.push([+e,this.props[e]]);return t}balance(t={}){return this.children.length<=8?this:wd(He.none,this.children,this.positions,0,this.children.length,0,this.length,(e,i,r)=>new $t(this.type,e,i,r,this.propValues),t.makeTree||((e,i,r)=>new $t(He.none,e,i,r)))}static build(t){return BE(t)}}$t.empty=new $t(He.none,[],[],0);class vd{constructor(t,e){this.buffer=t,this.index=e}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new vd(this.buffer,this.index)}}class Fi{constructor(t,e,i){this.buffer=t,this.length=e,this.set=i}get type(){return He.none}toString(){let t=[];for(let e=0;e<this.buffer.length;)t.push(this.childString(e)),e=this.buffer[e+3];return t.join(",")}childString(t){let e=this.buffer[t],i=this.buffer[t+3],r=this.set.types[e],s=r.name;if(/\W/.test(s)&&!r.isError&&(s=JSON.stringify(s)),t+=4,i==t)return s;let o=[];for(;t<i;)o.push(this.childString(t)),t=this.buffer[t+3];return s+"("+o.join(",")+")"}findChild(t,e,i,r,s){let{buffer:o}=this,a=-1;for(let h=t;h!=e&&!(Fv(s,r,o[h+1],o[h+2])&&(a=h,i>0));h=o[h+3]);return a}slice(t,e,i){let r=this.buffer,s=new Uint16Array(e-t),o=0;for(let a=t,h=0;a<e;){s[h++]=r[a++],s[h++]=r[a++]-i;let f=s[h++]=r[a++]-i;s[h++]=r[a++]-t,o=Math.max(o,f)}return new Fi(s,o,this.set)}}function Fv(n,t,e,i){switch(n){case-2:return e<t;case-1:return i>=t&&e<t;case 0:return e<t&&i>t;case 1:return e<=t&&i>t;case 2:return i>t;case 4:return!0}}function wo(n,t,e,i){for(var r;n.from==n.to||(e<1?n.from>=t:n.from>t)||(e>-1?n.to<=t:n.to<t);){let o=!i&&n instanceof pn&&n.index<0?null:n.parent;if(!o)return n;n=o}let s=i?0:de.IgnoreOverlays;if(i)for(let o=n,a=o.parent;a;o=a,a=o.parent)o instanceof pn&&o.index<0&&((r=a.enter(t,e,s))===null||r===void 0?void 0:r.from)!=o.from&&(n=a);for(;;){let o=n.enter(t,e,s);if(!o)return n;n=o}}class Vv{cursor(t=0){return new Yc(this,t)}getChild(t,e=null,i=null){let r=p0(this,t,e,i);return r.length?r[0]:null}getChildren(t,e=null,i=null){return p0(this,t,e,i)}resolve(t,e=0){return wo(this,t,e,!1)}resolveInner(t,e=0){return wo(this,t,e,!0)}matchContext(t){return Gc(this.parent,t)}enterUnfinishedNodesBefore(t){let e=this.childBefore(t),i=this;for(;e;){let r=e.lastChild;if(!r||r.to!=e.to)break;r.type.isError&&r.from==r.to?(i=e,e=r.prevSibling):e=r}return i}get node(){return this}get next(){return this.parent}}class pn extends Vv{constructor(t,e,i,r){super(),this._tree=t,this.from=e,this.index=i,this._parent=r}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(t,e,i,r,s=0){for(let o=this;;){for(let{children:a,positions:h}=o._tree,f=e>0?a.length:-1;t!=f;t+=e){let c=a[t],p=h[t]+o.from;if(Fv(r,i,p,p+c.length)){if(c instanceof Fi){if(s&de.ExcludeBuffers)continue;let m=c.findChild(0,c.buffer.length,e,i-p,r);if(m>-1)return new Oi(new EE(o,c,t,p),null,m)}else if(s&de.IncludeAnonymous||!c.type.isAnonymous||bd(c)){let m;if(!(s&de.IgnoreMounts)&&(m=Ua.get(c))&&!m.overlay)return new pn(m.tree,p,t,o);let y=new pn(c,p,t,o);return s&de.IncludeAnonymous||!y.type.isAnonymous?y:y.nextChild(e<0?c.children.length-1:0,e,i,r)}}}if(s&de.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?t=o.index+e:t=e<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(t){return this.nextChild(0,1,t,2)}childBefore(t){return this.nextChild(this._tree.children.length-1,-1,t,-2)}enter(t,e,i=0){let r;if(!(i&de.IgnoreOverlays)&&(r=Ua.get(this._tree))&&r.overlay){let s=t-this.from;for(let{from:o,to:a}of r.overlay)if((e>0?o<=s:o<s)&&(e<0?a>=s:a>s))return new pn(r.tree,r.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,t,e,i)}nextSignificantParent(){let t=this;for(;t.type.isAnonymous&&t._parent;)t=t._parent;return t}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function p0(n,t,e,i){let r=n.cursor(),s=[];if(!r.firstChild())return s;if(e!=null){for(let o=!1;!o;)if(o=r.type.is(e),!r.nextSibling())return s}for(;;){if(i!=null&&r.type.is(i))return s;if(r.type.is(t)&&s.push(r.node),!r.nextSibling())return i==null?s:[]}}function Gc(n,t,e=t.length-1){for(let i=n;e>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(t[e]&&t[e]!=i.name)return!1;e--}}return!0}class EE{constructor(t,e,i,r){this.parent=t,this.buffer=e,this.index=i,this.start=r}}class Oi extends Vv{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(t,e,i){super(),this.context=t,this._parent=e,this.index=i,this.type=t.buffer.set.types[t.buffer.buffer[i]]}child(t,e,i){let{buffer:r}=this.context,s=r.findChild(this.index+4,r.buffer[this.index+3],t,e-this.context.start,i);return s<0?null:new Oi(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(t){return this.child(1,t,2)}childBefore(t){return this.child(-1,t,-2)}enter(t,e,i=0){if(i&de.ExcludeBuffers)return null;let{buffer:r}=this.context,s=r.findChild(this.index+4,r.buffer[this.index+3],e>0?1:-1,t-this.context.start,e);return s<0?null:new Oi(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(t){return this._parent?null:this.context.parent.nextChild(this.context.index+t,t,0,4)}get nextSibling(){let{buffer:t}=this.context,e=t.buffer[this.index+3];return e<(this._parent?t.buffer[this._parent.index+3]:t.buffer.length)?new Oi(this.context,this._parent,e):this.externalSibling(1)}get prevSibling(){let{buffer:t}=this.context,e=this._parent?this._parent.index+4:0;return this.index==e?this.externalSibling(-1):new Oi(this.context,this._parent,t.findChild(e,this.index,-1,0,4))}get tree(){return null}toTree(){let t=[],e=[],{buffer:i}=this.context,r=this.index+4,s=i.buffer[this.index+3];if(s>r){let o=i.buffer[this.index+1];t.push(i.slice(r,s,o)),e.push(0)}return new $t(this.type,t,e,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function Wv(n){if(!n.length)return null;let t=0,e=n[0];for(let s=1;s<n.length;s++){let o=n[s];(o.from>e.from||o.to<e.to)&&(e=o,t=s)}let i=e instanceof pn&&e.index<0?null:e.parent,r=n.slice();return i?r[t]=i:r.splice(t,1),new LE(r,e)}class LE{constructor(t,e){this.heads=t,this.node=e}get next(){return Wv(this.heads)}}function OE(n,t,e){let i=n.resolveInner(t,e),r=null;for(let s=i instanceof pn?i:i.context.parent;s;s=s.parent)if(s.index<0){let o=s.parent;(r||(r=[i])).push(o.resolve(t,e)),s=o}else{let o=Ua.get(s.tree);if(o&&o.overlay&&o.overlay[0].from<=t&&o.overlay[o.overlay.length-1].to>=t){let a=new pn(o.tree,o.overlay[0].from+s.from,-1,s);(r||(r=[i])).push(wo(a,t,e,!1))}}return r?Wv(r):i}class Yc{get name(){return this.type.name}constructor(t,e=0){if(this.mode=e,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,t instanceof pn)this.yieldNode(t);else{this._tree=t.context.parent,this.buffer=t.context;for(let i=t._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=t,this.yieldBuf(t.index)}}yieldNode(t){return t?(this._tree=t,this.type=t.type,this.from=t.from,this.to=t.to,!0):!1}yieldBuf(t,e){this.index=t;let{start:i,buffer:r}=this.buffer;return this.type=e||r.set.types[r.buffer[t]],this.from=i+r.buffer[t+1],this.to=i+r.buffer[t+2],!0}yield(t){return t?t instanceof pn?(this.buffer=null,this.yieldNode(t)):(this.buffer=t.context,this.yieldBuf(t.index,t.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(t,e,i){if(!this.buffer)return this.yield(this._tree.nextChild(t<0?this._tree._tree.children.length-1:0,t,e,i,this.mode));let{buffer:r}=this.buffer,s=r.findChild(this.index+4,r.buffer[this.index+3],t,e-this.buffer.start,i);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(t){return this.enterChild(1,t,2)}childBefore(t){return this.enterChild(-1,t,-2)}enter(t,e,i=this.mode){return this.buffer?i&de.ExcludeBuffers?!1:this.enterChild(1,t,e):this.yield(this._tree.enter(t,e,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&de.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let t=this.mode&de.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(t)}sibling(t){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+t,t,0,4,this.mode)):!1;let{buffer:e}=this.buffer,i=this.stack.length-1;if(t<0){let r=i<0?0:this.stack[i]+4;if(this.index!=r)return this.yieldBuf(e.findChild(r,this.index,-1,0,4))}else{let r=e.buffer[this.index+3];if(r<(i<0?e.buffer.length:e.buffer[this.stack[i]+3]))return this.yieldBuf(r)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+t,t,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(t){let e,i,{buffer:r}=this;if(r){if(t>0){if(this.index<r.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(r.buffer.buffer[s+3]<this.index)return!1;({index:e,parent:i}=r)}else({index:e,_parent:i}=this._tree);for(;i;{index:e,_parent:i}=i)if(e>-1)for(let s=e+t,o=t<0?-1:i._tree.children.length;s!=o;s+=t){let a=i._tree.children[s];if(this.mode&de.IncludeAnonymous||a instanceof Fi||!a.type.isAnonymous||bd(a))return!1}return!0}move(t,e){if(e&&this.enterChild(t,0,4))return!0;for(;;){if(this.sibling(t))return!0;if(this.atLastNode(t)||!this.parent())return!1}}next(t=!0){return this.move(1,t)}prev(t=!0){return this.move(-1,t)}moveTo(t,e=0){for(;(this.from==this.to||(e<1?this.from>=t:this.from>t)||(e>-1?this.to<=t:this.to<t))&&this.parent(););for(;this.enterChild(1,t,e););return this}get node(){if(!this.buffer)return this._tree;let t=this.bufferNode,e=null,i=0;if(t&&t.context==this.buffer)t:for(let r=this.index,s=this.stack.length;s>=0;){for(let o=t;o;o=o._parent)if(o.index==r){if(r==this.index)return o;e=o,i=s+1;break t}r=this.stack[--s]}for(let r=i;r<this.stack.length;r++)e=new Oi(this.buffer,e,this.stack[r]);return this.bufferNode=new Oi(this.buffer,e,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(t,e){for(let i=0;;){let r=!1;if(this.type.isAnonymous||t(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(r=!0)}for(;;){if(r&&e&&e(this),r=this.type.isAnonymous,!i)return;if(this.nextSibling())break;this.parent(),i--,r=!0}}}matchContext(t){if(!this.buffer)return Gc(this.node.parent,t);let{buffer:e}=this.buffer,{types:i}=e.set;for(let r=t.length-1,s=this.stack.length-1;r>=0;s--){if(s<0)return Gc(this._tree,t,r);let o=i[e.buffer[this.stack[s]]];if(!o.isAnonymous){if(t[r]&&t[r]!=o.name)return!1;r--}}return!0}}function bd(n){return n.children.some(t=>t instanceof Fi||!t.type.isAnonymous||bd(t))}function BE(n){var t;let{buffer:e,nodeSet:i,maxBufferLength:r=PE,reused:s=[],minRepeatType:o=i.types.length}=n,a=Array.isArray(e)?new vd(e,e.length):e,h=i.types,f=0,c=0;function p(L,_,F,$,j,tt){let{id:et,start:Z,end:lt,size:at}=a,wt=c,Kt=f;if(at<0)if(a.next(),at==-1){let Pt=s[et];F.push(Pt),$.push(Z-L);return}else if(at==-3){f=et;return}else if(at==-4){c=et;return}else throw new RangeError(`Unrecognized record size: ${at}`);let ht=h[et],gt,yt,Tt=Z-L;if(lt-Z<=r&&(yt=C(a.pos-_,j))){let Pt=new Uint16Array(yt.size-yt.skip),oe=a.pos-yt.size,Ze=Pt.length;for(;a.pos>oe;)Ze=k(yt.start,Pt,Ze);gt=new Fi(Pt,lt-yt.start,i),Tt=yt.start-L}else{let Pt=a.pos-at;a.next();let oe=[],Ze=[],Jn=et>=o?et:-1,ze=0,Zn=lt;for(;a.pos>Pt;)Jn>=0&&a.id==Jn&&a.size>=0?(a.end<=Zn-r&&(v(oe,Ze,Z,ze,a.end,Zn,Jn,wt,Kt),ze=oe.length,Zn=a.end),a.next()):tt>2500?m(Z,Pt,oe,Ze):p(Z,Pt,oe,Ze,Jn,tt+1);if(Jn>=0&&ze>0&&ze<oe.length&&v(oe,Ze,Z,ze,Z,Zn,Jn,wt,Kt),oe.reverse(),Ze.reverse(),Jn>-1&&ze>0){let ol=y(ht,Kt);gt=wd(ht,oe,Ze,0,oe.length,0,lt-Z,ol,ol)}else gt=S(ht,oe,Ze,lt-Z,wt-lt,Kt)}F.push(gt),$.push(Tt)}function m(L,_,F,$){let j=[],tt=0,et=-1;for(;a.pos>_;){let{id:Z,start:lt,end:at,size:wt}=a;if(wt>4)a.next();else{if(et>-1&&lt<et)break;et<0&&(et=at-r),j.push(Z,lt,at),tt++,a.next()}}if(tt){let Z=new Uint16Array(tt*4),lt=j[j.length-2];for(let at=j.length-3,wt=0;at>=0;at-=3)Z[wt++]=j[at],Z[wt++]=j[at+1]-lt,Z[wt++]=j[at+2]-lt,Z[wt++]=wt;F.push(new Fi(Z,j[2]-lt,i)),$.push(lt-L)}}function y(L,_){return(F,$,j)=>{let tt=0,et=F.length-1,Z,lt;if(et>=0&&(Z=F[et])instanceof $t){if(!et&&Z.type==L&&Z.length==j)return Z;(lt=Z.prop(bt.lookAhead))&&(tt=$[et]+Z.length+lt)}return S(L,F,$,j,tt,_)}}function v(L,_,F,$,j,tt,et,Z,lt){let at=[],wt=[];for(;L.length>$;)at.push(L.pop()),wt.push(_.pop()+F-j);L.push(S(i.types[et],at,wt,tt-j,Z-tt,lt)),_.push(j-F)}function S(L,_,F,$,j,tt,et){if(tt){let Z=[bt.contextHash,tt];et=et?[Z].concat(et):[Z]}if(j>25){let Z=[bt.lookAhead,j];et=et?[Z].concat(et):[Z]}return new $t(L,_,F,$,et)}function C(L,_){let F=a.fork(),$=0,j=0,tt=0,et=F.end-r,Z={size:0,start:0,skip:0};t:for(let lt=F.pos-L;F.pos>lt;){let at=F.size;if(F.id==_&&at>=0){Z.size=$,Z.start=j,Z.skip=tt,tt+=4,$+=4,F.next();continue}let wt=F.pos-at;if(at<0||wt<lt||F.start<et)break;let Kt=F.id>=o?4:0,ht=F.start;for(F.next();F.pos>wt;){if(F.size<0)if(F.size==-3)Kt+=4;else break t;else F.id>=o&&(Kt+=4);F.next()}j=ht,$+=at,tt+=Kt}return(_<0||$==L)&&(Z.size=$,Z.start=j,Z.skip=tt),Z.size>4?Z:void 0}function k(L,_,F){let{id:$,start:j,end:tt,size:et}=a;if(a.next(),et>=0&&$<o){let Z=F;if(et>4){let lt=a.pos-(et-4);for(;a.pos>lt;)F=k(L,_,F)}_[--F]=Z,_[--F]=tt-L,_[--F]=j-L,_[--F]=$}else et==-3?f=$:et==-4&&(c=$);return F}let T=[],P=[];for(;a.pos>0;)p(n.start||0,n.bufferStart||0,T,P,-1,0);let I=(t=n.length)!==null&&t!==void 0?t:T.length?P[0]+T[0].length:0;return new $t(h[n.topID],T.reverse(),P.reverse(),I)}const m0=new WeakMap;function Pa(n,t){if(!n.isAnonymous||t instanceof Fi||t.type!=n)return 1;let e=m0.get(t);if(e==null){e=1;for(let i of t.children){if(i.type!=n||!(i instanceof $t)){e=1;break}e+=Pa(n,i)}m0.set(t,e)}return e}function wd(n,t,e,i,r,s,o,a,h){let f=0;for(let v=i;v<r;v++)f+=Pa(n,t[v]);let c=Math.ceil(f*1.5/8),p=[],m=[];function y(v,S,C,k,T){for(let P=C;P<k;){let I=P,L=S[P],_=Pa(n,v[P]);for(P++;P<k;P++){let F=Pa(n,v[P]);if(_+F>=c)break;_+=F}if(P==I+1){if(_>c){let F=v[I];y(F.children,F.positions,0,F.children.length,S[I]+T);continue}p.push(v[I])}else{let F=S[P-1]+v[P-1].length-L;p.push(wd(n,v,S,I,P,L,F,null,h))}m.push(L+T-s)}}return y(t,e,i,r,0),(a||h)(p,m,o)}class mr{constructor(t,e,i,r,s=!1,o=!1){this.from=t,this.to=e,this.tree=i,this.offset=r,this.open=(s?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(t,e=[],i=!1){let r=[new mr(0,t.length,t,0,!1,i)];for(let s of e)s.to>t.length&&r.push(s);return r}static applyChanges(t,e,i=128){if(!e.length)return t;let r=[],s=1,o=t.length?t[0]:null;for(let a=0,h=0,f=0;;a++){let c=a<e.length?e[a]:null,p=c?c.fromA:1e9;if(p-h>=i)for(;o&&o.from<p;){let m=o;if(h>=m.from||p<=m.to||f){let y=Math.max(m.from,h)-f,v=Math.min(m.to,p)-f;m=y>=v?null:new mr(y,v,m.tree,m.offset+f,a>0,!!c)}if(m&&r.push(m),o.to>p)break;o=s<t.length?t[s++]:null}if(!c)break;h=c.toA,f=c.toA-c.toB}return r}}class Hv{startParse(t,e,i){return typeof t=="string"&&(t=new IE(t)),i=i?i.length?i.map(r=>new nc(r.from,r.to)):[new nc(0,0)]:[new nc(0,t.length)],this.createParse(t,e||[],i)}parse(t,e,i){let r=this.startParse(t,e,i);for(;;){let s=r.advance();if(s)return s}}}class IE{constructor(t){this.string=t}get length(){return this.string.length}chunk(t){return this.string.slice(t)}get lineChunks(){return!1}read(t,e){return this.string.slice(t,e)}}new bt({perNode:!0});let Xc=[],zv=[];(()=>{let n="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(t=>t?parseInt(t,36):1);for(let t=0,e=0;t<n.length;t++)(t%2?zv:Xc).push(e=e+n[t])})();function _E(n){if(n<768)return!1;for(let t=0,e=Xc.length;;){let i=t+e>>1;if(n<Xc[i])e=i;else if(n>=zv[i])t=i+1;else return!0;if(t==e)return!1}}function g0(n){return n>=127462&&n<=127487}const y0=8205;function NE(n,t,e=!0,i=!0){return(e?Uv:FE)(n,t,i)}function Uv(n,t,e){if(t==n.length)return t;t&&$v(n.charCodeAt(t))&&jv(n.charCodeAt(t-1))&&t--;let i=ic(n,t);for(t+=x0(i);t<n.length;){let r=ic(n,t);if(i==y0||r==y0||e&&_E(r))t+=x0(r),i=r;else if(g0(r)){let s=0,o=t-2;for(;o>=0&&g0(ic(n,o));)s++,o-=2;if(s%2==0)break;t+=2}else break}return t}function FE(n,t,e){for(;t>0;){let i=Uv(n,t-2,e);if(i<t)return i;t--}return 0}function ic(n,t){let e=n.charCodeAt(t);if(!jv(e)||t+1==n.length)return e;let i=n.charCodeAt(t+1);return $v(i)?(e-55296<<10)+(i-56320)+65536:e}function $v(n){return n>=56320&&n<57344}function jv(n){return n>=55296&&n<56320}function x0(n){return n<65536?1:2}class At{lineAt(t){if(t<0||t>this.length)throw new RangeError(`Invalid position ${t} in document of length ${this.length}`);return this.lineInner(t,!1,1,0)}line(t){if(t<1||t>this.lines)throw new RangeError(`Invalid line number ${t} in ${this.lines}-line document`);return this.lineInner(t,!0,1,0)}replace(t,e,i){[t,e]=os(this,t,e);let r=[];return this.decompose(0,t,r,2),i.length&&i.decompose(0,i.length,r,3),this.decompose(e,this.length,r,1),Vn.from(r,this.length-(e-t)+i.length)}append(t){return this.replace(this.length,this.length,t)}slice(t,e=this.length){[t,e]=os(this,t,e);let i=[];return this.decompose(t,e,i,0),Vn.from(i,e-t)}eq(t){if(t==this)return!0;if(t.length!=this.length||t.lines!=this.lines)return!1;let e=this.scanIdentical(t,1),i=this.length-this.scanIdentical(t,-1),r=new lo(this),s=new lo(t);for(let o=e,a=e;;){if(r.next(o),s.next(o),o=0,r.lineBreak!=s.lineBreak||r.done!=s.done||r.value!=s.value)return!1;if(a+=r.value.length,r.done||a>=i)return!0}}iter(t=1){return new lo(this,t)}iterRange(t,e=this.length){return new Kv(this,t,e)}iterLines(t,e){let i;if(t==null)i=this.iter();else{e==null&&(e=this.lines+1);let r=this.line(t).from;i=this.iterRange(r,Math.max(r,e==this.lines+1?this.length:e<=1?0:this.line(e-1).to))}return new qv(i)}toString(){return this.sliceString(0)}toJSON(){let t=[];return this.flatten(t),t}constructor(){}static of(t){if(t.length==0)throw new RangeError("A document must have at least one line");return t.length==1&&!t[0]?At.empty:t.length<=32?new Zt(t):Vn.from(Zt.split(t,[]))}}class Zt extends At{constructor(t,e=VE(t)){super(),this.text=t,this.length=e}get lines(){return this.text.length}get children(){return null}lineInner(t,e,i,r){for(let s=0;;s++){let o=this.text[s],a=r+o.length;if((e?i:a)>=t)return new WE(r,a,i,o);r=a+1,i++}}decompose(t,e,i,r){let s=t<=0&&e>=this.length?this:new Zt(v0(this.text,t,e),Math.min(e,this.length)-Math.max(0,t));if(r&1){let o=i.pop(),a=Da(s.text,o.text.slice(),0,s.length);if(a.length<=32)i.push(new Zt(a,o.length+s.length));else{let h=a.length>>1;i.push(new Zt(a.slice(0,h)),new Zt(a.slice(h)))}}else i.push(s)}replace(t,e,i){if(!(i instanceof Zt))return super.replace(t,e,i);[t,e]=os(this,t,e);let r=Da(this.text,Da(i.text,v0(this.text,0,t)),e),s=this.length+i.length-(e-t);return r.length<=32?new Zt(r,s):Vn.from(Zt.split(r,[]),s)}sliceString(t,e=this.length,i=`
`){[t,e]=os(this,t,e);let r="";for(let s=0,o=0;s<=e&&o<this.text.length;o++){let a=this.text[o],h=s+a.length;s>t&&o&&(r+=i),t<h&&e>s&&(r+=a.slice(Math.max(0,t-s),e-s)),s=h+1}return r}flatten(t){for(let e of this.text)t.push(e)}scanIdentical(){return 0}static split(t,e){let i=[],r=-1;for(let s of t)i.push(s),r+=s.length+1,i.length==32&&(e.push(new Zt(i,r)),i=[],r=-1);return r>-1&&e.push(new Zt(i,r)),e}}class Vn extends At{constructor(t,e){super(),this.children=t,this.length=e,this.lines=0;for(let i of t)this.lines+=i.lines}lineInner(t,e,i,r){for(let s=0;;s++){let o=this.children[s],a=r+o.length,h=i+o.lines-1;if((e?h:a)>=t)return o.lineInner(t,e,i,r);r=a+1,i=h+1}}decompose(t,e,i,r){for(let s=0,o=0;o<=e&&s<this.children.length;s++){let a=this.children[s],h=o+a.length;if(t<=h&&e>=o){let f=r&((o<=t?1:0)|(h>=e?2:0));o>=t&&h<=e&&!f?i.push(a):a.decompose(t-o,e-o,i,f)}o=h+1}}replace(t,e,i){if([t,e]=os(this,t,e),i.lines<this.lines)for(let r=0,s=0;r<this.children.length;r++){let o=this.children[r],a=s+o.length;if(t>=s&&e<=a){let h=o.replace(t-s,e-s,i),f=this.lines-o.lines+h.lines;if(h.lines<f>>4&&h.lines>f>>6){let c=this.children.slice();return c[r]=h,new Vn(c,this.length-(e-t)+i.length)}return super.replace(s,a,h)}s=a+1}return super.replace(t,e,i)}sliceString(t,e=this.length,i=`
`){[t,e]=os(this,t,e);let r="";for(let s=0,o=0;s<this.children.length&&o<=e;s++){let a=this.children[s],h=o+a.length;o>t&&s&&(r+=i),t<h&&e>o&&(r+=a.sliceString(t-o,e-o,i)),o=h+1}return r}flatten(t){for(let e of this.children)e.flatten(t)}scanIdentical(t,e){if(!(t instanceof Vn))return 0;let i=0,[r,s,o,a]=e>0?[0,0,this.children.length,t.children.length]:[this.children.length-1,t.children.length-1,-1,-1];for(;;r+=e,s+=e){if(r==o||s==a)return i;let h=this.children[r],f=t.children[s];if(h!=f)return i+h.scanIdentical(f,e);i+=h.length+1}}static from(t,e=t.reduce((i,r)=>i+r.length+1,-1)){let i=0;for(let y of t)i+=y.lines;if(i<32){let y=[];for(let v of t)v.flatten(y);return new Zt(y,e)}let r=Math.max(32,i>>5),s=r<<1,o=r>>1,a=[],h=0,f=-1,c=[];function p(y){let v;if(y.lines>s&&y instanceof Vn)for(let S of y.children)p(S);else y.lines>o&&(h>o||!h)?(m(),a.push(y)):y instanceof Zt&&h&&(v=c[c.length-1])instanceof Zt&&y.lines+v.lines<=32?(h+=y.lines,f+=y.length+1,c[c.length-1]=new Zt(v.text.concat(y.text),v.length+1+y.length)):(h+y.lines>r&&m(),h+=y.lines,f+=y.length+1,c.push(y))}function m(){h!=0&&(a.push(c.length==1?c[0]:Vn.from(c,f)),f=-1,h=c.length=0)}for(let y of t)p(y);return m(),a.length==1?a[0]:new Vn(a,e)}}At.empty=new Zt([""],0);function VE(n){let t=-1;for(let e of n)t+=e.length+1;return t}function Da(n,t,e=0,i=1e9){for(let r=0,s=0,o=!0;s<n.length&&r<=i;s++){let a=n[s],h=r+a.length;h>=e&&(h>i&&(a=a.slice(0,i-r)),r<e&&(a=a.slice(e-r)),o?(t[t.length-1]+=a,o=!1):t.push(a)),r=h+1}return t}function v0(n,t,e){return Da(n,[""],t,e)}class lo{constructor(t,e=1){this.dir=e,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[t],this.offsets=[e>0?1:(t instanceof Zt?t.text.length:t.children.length)<<1]}nextInner(t,e){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,r=this.nodes[i],s=this.offsets[i],o=s>>1,a=r instanceof Zt?r.text.length:r.children.length;if(o==(e>0?a:0)){if(i==0)return this.done=!0,this.value="",this;e>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(e>0?0:1)){if(this.offsets[i]+=e,t==0)return this.lineBreak=!0,this.value=`
`,this;t--}else if(r instanceof Zt){let h=r.text[o+(e<0?-1:0)];if(this.offsets[i]+=e,h.length>Math.max(0,t))return this.value=t==0?h:e>0?h.slice(t):h.slice(0,h.length-t),this;t-=h.length}else{let h=r.children[o+(e<0?-1:0)];t>h.length?(t-=h.length,this.offsets[i]+=e):(e<0&&this.offsets[i]--,this.nodes.push(h),this.offsets.push(e>0?1:(h instanceof Zt?h.text.length:h.children.length)<<1))}}}next(t=0){return t<0&&(this.nextInner(-t,-this.dir),t=this.value.length),this.nextInner(t,this.dir)}}class Kv{constructor(t,e,i){this.value="",this.done=!1,this.cursor=new lo(t,e>i?-1:1),this.pos=e>i?t.length:0,this.from=Math.min(e,i),this.to=Math.max(e,i)}nextInner(t,e){if(e<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;t+=Math.max(0,e<0?this.pos-this.to:this.from-this.pos);let i=e<0?this.pos-this.from:this.to-this.pos;t>i&&(t=i),i-=t;let{value:r}=this.cursor.next(t);return this.pos+=(r.length+t)*e,this.value=r.length<=i?r:e<0?r.slice(r.length-i):r.slice(0,i),this.done=!this.value,this}next(t=0){return t<0?t=Math.max(t,this.from-this.pos):t>0&&(t=Math.min(t,this.to-this.pos)),this.nextInner(t,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class qv{constructor(t){this.inner=t,this.afterBreak=!0,this.value="",this.done=!1}next(t=0){let{done:e,lineBreak:i,value:r}=this.inner.next(t);return e&&this.afterBreak?(this.value="",this.afterBreak=!1):e?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=r,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(At.prototype[Symbol.iterator]=function(){return this.iter()},lo.prototype[Symbol.iterator]=Kv.prototype[Symbol.iterator]=qv.prototype[Symbol.iterator]=function(){return this});class WE{constructor(t,e,i,r){this.from=t,this.to=e,this.number=i,this.text=r}get length(){return this.to-this.from}}function os(n,t,e){return t=Math.max(0,Math.min(n.length,t)),[t,Math.max(t,Math.min(n.length,e))]}function me(n,t,e=!0,i=!0){return NE(n,t,e,i)}function HE(n){return n>=56320&&n<57344}function zE(n){return n>=55296&&n<56320}function _e(n,t){let e=n.charCodeAt(t);if(!zE(e)||t+1==n.length)return e;let i=n.charCodeAt(t+1);return HE(i)?(e-55296<<10)+(i-56320)+65536:e}function Sd(n){return n<=65535?String.fromCharCode(n):(n-=65536,String.fromCharCode((n>>10)+55296,(n&1023)+56320))}function Wn(n){return n<65536?1:2}const Jc=/\r\n?|\n/;var Pe=(function(n){return n[n.Simple=0]="Simple",n[n.TrackDel=1]="TrackDel",n[n.TrackBefore=2]="TrackBefore",n[n.TrackAfter=3]="TrackAfter",n})(Pe||(Pe={}));class $n{constructor(t){this.sections=t}get length(){let t=0;for(let e=0;e<this.sections.length;e+=2)t+=this.sections[e];return t}get newLength(){let t=0;for(let e=0;e<this.sections.length;e+=2){let i=this.sections[e+1];t+=i<0?this.sections[e]:i}return t}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(t){for(let e=0,i=0,r=0;e<this.sections.length;){let s=this.sections[e++],o=this.sections[e++];o<0?(t(i,r,s),r+=s):r+=o,i+=s}}iterChangedRanges(t,e=!1){Zc(this,t,e)}get invertedDesc(){let t=[];for(let e=0;e<this.sections.length;){let i=this.sections[e++],r=this.sections[e++];r<0?t.push(i,r):t.push(r,i)}return new $n(t)}composeDesc(t){return this.empty?t:t.empty?this:Gv(this,t)}mapDesc(t,e=!1){return t.empty?this:Qc(this,t,e)}mapPos(t,e=-1,i=Pe.Simple){let r=0,s=0;for(let o=0;o<this.sections.length;){let a=this.sections[o++],h=this.sections[o++],f=r+a;if(h<0){if(f>t)return s+(t-r);s+=a}else{if(i!=Pe.Simple&&f>=t&&(i==Pe.TrackDel&&r<t&&f>t||i==Pe.TrackBefore&&r<t||i==Pe.TrackAfter&&f>t))return null;if(f>t||f==t&&e<0&&!a)return t==r||e<0?s:s+h;s+=h}r=f}if(t>r)throw new RangeError(`Position ${t} is out of range for changeset of length ${r}`);return s}touchesRange(t,e=t){for(let i=0,r=0;i<this.sections.length&&r<=e;){let s=this.sections[i++],o=this.sections[i++],a=r+s;if(o>=0&&r<=e&&a>=t)return r<t&&a>e?"cover":!0;r=a}return!1}toString(){let t="";for(let e=0;e<this.sections.length;){let i=this.sections[e++],r=this.sections[e++];t+=(t?" ":"")+i+(r>=0?":"+r:"")}return t}toJSON(){return this.sections}static fromJSON(t){if(!Array.isArray(t)||t.length%2||t.some(e=>typeof e!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new $n(t)}static create(t){return new $n(t)}}class re extends $n{constructor(t,e){super(t),this.inserted=e}apply(t){if(this.length!=t.length)throw new RangeError("Applying change set to a document with the wrong length");return Zc(this,(e,i,r,s,o)=>t=t.replace(r,r+(i-e),o),!1),t}mapDesc(t,e=!1){return Qc(this,t,e,!0)}invert(t){let e=this.sections.slice(),i=[];for(let r=0,s=0;r<e.length;r+=2){let o=e[r],a=e[r+1];if(a>=0){e[r]=a,e[r+1]=o;let h=r>>1;for(;i.length<h;)i.push(At.empty);i.push(o?t.slice(s,s+o):At.empty)}s+=o}return new re(e,i)}compose(t){return this.empty?t:t.empty?this:Gv(this,t,!0)}map(t,e=!1){return t.empty?this:Qc(this,t,e,!0)}iterChanges(t,e=!1){Zc(this,t,e)}get desc(){return $n.create(this.sections)}filter(t){let e=[],i=[],r=[],s=new So(this);t:for(let o=0,a=0;;){let h=o==t.length?1e9:t[o++];for(;a<h||a==h&&s.len==0;){if(s.done)break t;let c=Math.min(s.len,h-a);ve(r,c,-1);let p=s.ins==-1?-1:s.off==0?s.ins:0;ve(e,c,p),p>0&&Bi(i,e,s.text),s.forward(c),a+=c}let f=t[o++];for(;a<f;){if(s.done)break t;let c=Math.min(s.len,f-a);ve(e,c,-1),ve(r,c,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(c),a+=c}}return{changes:new re(e,i),filtered:$n.create(r)}}toJSON(){let t=[];for(let e=0;e<this.sections.length;e+=2){let i=this.sections[e],r=this.sections[e+1];r<0?t.push(i):r==0?t.push([i]):t.push([i].concat(this.inserted[e>>1].toJSON()))}return t}static of(t,e,i){let r=[],s=[],o=0,a=null;function h(c=!1){if(!c&&!r.length)return;o<e&&ve(r,e-o,-1);let p=new re(r,s);a=a?a.compose(p.map(a)):p,r=[],s=[],o=0}function f(c){if(Array.isArray(c))for(let p of c)f(p);else if(c instanceof re){if(c.length!=e)throw new RangeError(`Mismatched change set length (got ${c.length}, expected ${e})`);h(),a=a?a.compose(c.map(a)):c}else{let{from:p,to:m=p,insert:y}=c;if(p>m||p<0||m>e)throw new RangeError(`Invalid change range ${p} to ${m} (in doc of length ${e})`);let v=y?typeof y=="string"?At.of(y.split(i||Jc)):y:At.empty,S=v.length;if(p==m&&S==0)return;p<o&&h(),p>o&&ve(r,p-o,-1),ve(r,m-p,S),Bi(s,r,v),o=m}}return f(t),h(!a),a}static empty(t){return new re(t?[t,-1]:[],[])}static fromJSON(t){if(!Array.isArray(t))throw new RangeError("Invalid JSON representation of ChangeSet");let e=[],i=[];for(let r=0;r<t.length;r++){let s=t[r];if(typeof s=="number")e.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((o,a)=>a&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)e.push(s[0],0);else{for(;i.length<r;)i.push(At.empty);i[r]=At.of(s.slice(1)),e.push(s[0],i[r].length)}}}return new re(e,i)}static createSet(t,e){return new re(t,e)}}function ve(n,t,e,i=!1){if(t==0&&e<=0)return;let r=n.length-2;r>=0&&e<=0&&e==n[r+1]?n[r]+=t:r>=0&&t==0&&n[r]==0?n[r+1]+=e:i?(n[r]+=t,n[r+1]+=e):n.push(t,e)}function Bi(n,t,e){if(e.length==0)return;let i=t.length-2>>1;if(i<n.length)n[n.length-1]=n[n.length-1].append(e);else{for(;n.length<i;)n.push(At.empty);n.push(e)}}function Zc(n,t,e){let i=n.inserted;for(let r=0,s=0,o=0;o<n.sections.length;){let a=n.sections[o++],h=n.sections[o++];if(h<0)r+=a,s+=a;else{let f=r,c=s,p=At.empty;for(;f+=a,c+=h,h&&i&&(p=p.append(i[o-2>>1])),!(e||o==n.sections.length||n.sections[o+1]<0);)a=n.sections[o++],h=n.sections[o++];t(r,f,s,c,p),r=f,s=c}}}function Qc(n,t,e,i=!1){let r=[],s=i?[]:null,o=new So(n),a=new So(t);for(let h=-1;;){if(o.done&&a.len||a.done&&o.len)throw new Error("Mismatched change set lengths");if(o.ins==-1&&a.ins==-1){let f=Math.min(o.len,a.len);ve(r,f,-1),o.forward(f),a.forward(f)}else if(a.ins>=0&&(o.ins<0||h==o.i||o.off==0&&(a.len<o.len||a.len==o.len&&!e))){let f=a.len;for(ve(r,a.ins,-1);f;){let c=Math.min(o.len,f);o.ins>=0&&h<o.i&&o.len<=c&&(ve(r,0,o.ins),s&&Bi(s,r,o.text),h=o.i),o.forward(c),f-=c}a.next()}else if(o.ins>=0){let f=0,c=o.len;for(;c;)if(a.ins==-1){let p=Math.min(c,a.len);f+=p,c-=p,a.forward(p)}else if(a.ins==0&&a.len<c)c-=a.len,a.next();else break;ve(r,f,h<o.i?o.ins:0),s&&h<o.i&&Bi(s,r,o.text),h=o.i,o.forward(o.len-c)}else{if(o.done&&a.done)return s?re.createSet(r,s):$n.create(r);throw new Error("Mismatched change set lengths")}}}function Gv(n,t,e=!1){let i=[],r=e?[]:null,s=new So(n),o=new So(t);for(let a=!1;;){if(s.done&&o.done)return r?re.createSet(i,r):$n.create(i);if(s.ins==0)ve(i,s.len,0,a),s.next();else if(o.len==0&&!o.done)ve(i,0,o.ins,a),r&&Bi(r,i,o.text),o.next();else{if(s.done||o.done)throw new Error("Mismatched change set lengths");{let h=Math.min(s.len2,o.len),f=i.length;if(s.ins==-1){let c=o.ins==-1?-1:o.off?0:o.ins;ve(i,h,c,a),r&&c&&Bi(r,i,o.text)}else o.ins==-1?(ve(i,s.off?0:s.len,h,a),r&&Bi(r,i,s.textBit(h))):(ve(i,s.off?0:s.len,o.off?0:o.ins,a),r&&!o.off&&Bi(r,i,o.text));a=(s.ins>h||o.ins>=0&&o.len>h)&&(a||i.length>f),s.forward2(h),o.forward(h)}}}}class So{constructor(t){this.set=t,this.i=0,this.next()}next(){let{sections:t}=this.set;this.i<t.length?(this.len=t[this.i++],this.ins=t[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:t}=this.set,e=this.i-2>>1;return e>=t.length?At.empty:t[e]}textBit(t){let{inserted:e}=this.set,i=this.i-2>>1;return i>=e.length&&!t?At.empty:e[i].slice(this.off,t==null?void 0:this.off+t)}forward(t){t==this.len?this.next():(this.len-=t,this.off+=t)}forward2(t){this.ins==-1?this.forward(t):t==this.ins?this.next():(this.ins-=t,this.off+=t)}}class cr{constructor(t,e,i){this.from=t,this.to=e,this.flags=i}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let t=this.flags&7;return t==7?null:t}get goalColumn(){let t=this.flags>>6;return t==16777215?void 0:t}map(t,e=-1){let i,r;return this.empty?i=r=t.mapPos(this.from,e):(i=t.mapPos(this.from,1),r=t.mapPos(this.to,-1)),i==this.from&&r==this.to?this:new cr(i,r,this.flags)}extend(t,e=t){if(t<=this.anchor&&e>=this.anchor)return H.range(t,e);let i=Math.abs(t-this.anchor)>Math.abs(e-this.anchor)?t:e;return H.range(this.anchor,i)}eq(t,e=!1){return this.anchor==t.anchor&&this.head==t.head&&(!e||!this.empty||this.assoc==t.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(t){if(!t||typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return H.range(t.anchor,t.head)}static create(t,e,i){return new cr(t,e,i)}}class H{constructor(t,e){this.ranges=t,this.mainIndex=e}map(t,e=-1){return t.empty?this:H.create(this.ranges.map(i=>i.map(t,e)),this.mainIndex)}eq(t,e=!1){if(this.ranges.length!=t.ranges.length||this.mainIndex!=t.mainIndex)return!1;for(let i=0;i<this.ranges.length;i++)if(!this.ranges[i].eq(t.ranges[i],e))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new H([this.main],0)}addRange(t,e=!0){return H.create([t].concat(this.ranges),e?0:this.mainIndex+1)}replaceRange(t,e=this.mainIndex){let i=this.ranges.slice();return i[e]=t,H.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(t=>t.toJSON()),main:this.mainIndex}}static fromJSON(t){if(!t||!Array.isArray(t.ranges)||typeof t.main!="number"||t.main>=t.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new H(t.ranges.map(e=>cr.fromJSON(e)),t.main)}static single(t,e=t){return new H([H.range(t,e)],0)}static create(t,e=0){if(t.length==0)throw new RangeError("A selection needs at least one range");for(let i=0,r=0;r<t.length;r++){let s=t[r];if(s.empty?s.from<=i:s.from<i)return H.normalized(t.slice(),e);i=s.to}return new H(t,e)}static cursor(t,e=0,i,r){return cr.create(t,t,(e==0?0:e<0?8:16)|(i==null?7:Math.min(6,i))|(r??16777215)<<6)}static range(t,e,i,r){let s=(i??16777215)<<6|(r==null?7:Math.min(6,r));return e<t?cr.create(e,t,48|s):cr.create(t,e,(e>t?8:0)|s)}static normalized(t,e=0){let i=t[e];t.sort((r,s)=>r.from-s.from),e=t.indexOf(i);for(let r=1;r<t.length;r++){let s=t[r],o=t[r-1];if(s.empty?s.from<=o.to:s.from<o.to){let a=o.from,h=Math.max(s.to,o.to);r<=e&&e--,t.splice(--r,2,s.anchor>s.head?H.range(h,a):H.range(a,h))}}return new H(t,e)}}function Yv(n,t){for(let e of n.ranges)if(e.to>t)throw new RangeError("Selection points outside of document")}let Cd=0;class X{constructor(t,e,i,r,s){this.combine=t,this.compareInput=e,this.compare=i,this.isStatic=r,this.id=Cd++,this.default=t([]),this.extensions=typeof s=="function"?s(this):s}get reader(){return this}static define(t={}){return new X(t.combine||(e=>e),t.compareInput||((e,i)=>e===i),t.compare||(t.combine?(e,i)=>e===i:kd),!!t.static,t.enables)}of(t){return new Ra([],this,0,t)}compute(t,e){if(this.isStatic)throw new Error("Can't compute a static facet");return new Ra(t,this,1,e)}computeN(t,e){if(this.isStatic)throw new Error("Can't compute a static facet");return new Ra(t,this,2,e)}from(t,e){return e||(e=i=>i),this.compute([t],i=>e(i.field(t)))}}function kd(n,t){return n==t||n.length==t.length&&n.every((e,i)=>e===t[i])}class Ra{constructor(t,e,i,r){this.dependencies=t,this.facet=e,this.type=i,this.value=r,this.id=Cd++}dynamicSlot(t){var e;let i=this.value,r=this.facet.compareInput,s=this.id,o=t[s]>>1,a=this.type==2,h=!1,f=!1,c=[];for(let p of this.dependencies)p=="doc"?h=!0:p=="selection"?f=!0:(((e=t[p.id])!==null&&e!==void 0?e:1)&1)==0&&c.push(t[p.id]);return{create(p){return p.values[o]=i(p),1},update(p,m){if(h&&m.docChanged||f&&(m.docChanged||m.selection)||tf(p,c)){let y=i(p);if(a?!b0(y,p.values[o],r):!r(y,p.values[o]))return p.values[o]=y,1}return 0},reconfigure:(p,m)=>{let y,v=m.config.address[s];if(v!=null){let S=ja(m,v);if(this.dependencies.every(C=>C instanceof X?m.facet(C)===p.facet(C):C instanceof ge?m.field(C,!1)==p.field(C,!1):!0)||(a?b0(y=i(p),S,r):r(y=i(p),S)))return p.values[o]=S,0}else y=i(p);return p.values[o]=y,1}}}}function b0(n,t,e){if(n.length!=t.length)return!1;for(let i=0;i<n.length;i++)if(!e(n[i],t[i]))return!1;return!0}function tf(n,t){let e=!1;for(let i of t)ao(n,i)&1&&(e=!0);return e}function UE(n,t,e){let i=e.map(h=>n[h.id]),r=e.map(h=>h.type),s=i.filter(h=>!(h&1)),o=n[t.id]>>1;function a(h){let f=[];for(let c=0;c<i.length;c++){let p=ja(h,i[c]);if(r[c]==2)for(let m of p)f.push(m);else f.push(p)}return t.combine(f)}return{create(h){for(let f of i)ao(h,f);return h.values[o]=a(h),1},update(h,f){if(!tf(h,s))return 0;let c=a(h);return t.compare(c,h.values[o])?0:(h.values[o]=c,1)},reconfigure(h,f){let c=tf(h,i),p=f.config.facets[t.id],m=f.facet(t);if(p&&!c&&kd(e,p))return h.values[o]=m,0;let y=a(h);return t.compare(y,m)?(h.values[o]=m,0):(h.values[o]=y,1)}}}const ea=X.define({static:!0});class ge{constructor(t,e,i,r,s){this.id=t,this.createF=e,this.updateF=i,this.compareF=r,this.spec=s,this.provides=void 0}static define(t){let e=new ge(Cd++,t.create,t.update,t.compare||((i,r)=>i===r),t);return t.provide&&(e.provides=t.provide(e)),e}create(t){let e=t.facet(ea).find(i=>i.field==this);return(e?.create||this.createF)(t)}slot(t){let e=t[this.id]>>1;return{create:i=>(i.values[e]=this.create(i),1),update:(i,r)=>{let s=i.values[e],o=this.updateF(s,r);return this.compareF(s,o)?0:(i.values[e]=o,1)},reconfigure:(i,r)=>{let s=i.facet(ea),o=r.facet(ea),a;return(a=s.find(h=>h.field==this))&&a!=o.find(h=>h.field==this)?(i.values[e]=a.create(i),1):r.config.address[this.id]!=null?(i.values[e]=r.field(this),0):(i.values[e]=this.create(i),1)}}}init(t){return[this,ea.of({field:this,create:t})]}get extension(){return this}}const hr={lowest:4,low:3,default:2,high:1,highest:0};function qs(n){return t=>new Xv(t,n)}const Tr={highest:qs(hr.highest),high:qs(hr.high),default:qs(hr.default),low:qs(hr.low),lowest:qs(hr.lowest)};class Xv{constructor(t,e){this.inner=t,this.prec=e}}class gh{of(t){return new ef(this,t)}reconfigure(t){return gh.reconfigure.of({compartment:this,extension:t})}get(t){return t.config.compartments.get(this)}}class ef{constructor(t,e){this.compartment=t,this.inner=e}}class $a{constructor(t,e,i,r,s,o){for(this.base=t,this.compartments=e,this.dynamicSlots=i,this.address=r,this.staticValues=s,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(t){let e=this.address[t.id];return e==null?t.default:this.staticValues[e>>1]}static resolve(t,e,i){let r=[],s=Object.create(null),o=new Map;for(let m of $E(t,e,o))m instanceof ge?r.push(m):(s[m.facet.id]||(s[m.facet.id]=[])).push(m);let a=Object.create(null),h=[],f=[];for(let m of r)a[m.id]=f.length<<1,f.push(y=>m.slot(y));let c=i?.config.facets;for(let m in s){let y=s[m],v=y[0].facet,S=c&&c[m]||[];if(y.every(C=>C.type==0))if(a[v.id]=h.length<<1|1,kd(S,y))h.push(i.facet(v));else{let C=v.combine(y.map(k=>k.value));h.push(i&&v.compare(C,i.facet(v))?i.facet(v):C)}else{for(let C of y)C.type==0?(a[C.id]=h.length<<1|1,h.push(C.value)):(a[C.id]=f.length<<1,f.push(k=>C.dynamicSlot(k)));a[v.id]=f.length<<1,f.push(C=>UE(C,v,y))}}let p=f.map(m=>m(a));return new $a(t,o,p,a,h,s)}}function $E(n,t,e){let i=[[],[],[],[],[]],r=new Map;function s(o,a){let h=r.get(o);if(h!=null){if(h<=a)return;let f=i[h].indexOf(o);f>-1&&i[h].splice(f,1),o instanceof ef&&e.delete(o.compartment)}if(r.set(o,a),Array.isArray(o))for(let f of o)s(f,a);else if(o instanceof ef){if(e.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let f=t.get(o.compartment)||o.inner;e.set(o.compartment,f),s(f,a)}else if(o instanceof Xv)s(o.inner,o.prec);else if(o instanceof ge)i[a].push(o),o.provides&&s(o.provides,a);else if(o instanceof Ra)i[a].push(o),o.facet.extensions&&s(o.facet.extensions,hr.default);else{let f=o.extension;if(!f)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(f,a)}}return s(n,hr.default),i.reduce((o,a)=>o.concat(a))}function ao(n,t){if(t&1)return 2;let e=t>>1,i=n.status[e];if(i==4)throw new Error("Cyclic dependency between fields and/or facets");if(i&2)return i;n.status[e]=4;let r=n.computeSlot(n,n.config.dynamicSlots[e]);return n.status[e]=2|r}function ja(n,t){return t&1?n.config.staticValues[t>>1]:n.values[t>>1]}const Jv=X.define(),nf=X.define({combine:n=>n.some(t=>t),static:!0}),Zv=X.define({combine:n=>n.length?n[0]:void 0,static:!0}),Qv=X.define(),tb=X.define(),eb=X.define(),nb=X.define({combine:n=>n.length?n[0]:!1});class Yn{constructor(t,e){this.type=t,this.value=e}static define(){return new jE}}class jE{of(t){return new Yn(this,t)}}class KE{constructor(t){this.map=t}of(t){return new ft(this,t)}}class ft{constructor(t,e){this.type=t,this.value=e}map(t){let e=this.type.map(this.value,t);return e===void 0?void 0:e==this.value?this:new ft(this.type,e)}is(t){return this.type==t}static define(t={}){return new KE(t.map||(e=>e))}static mapEffects(t,e){if(!t.length)return t;let i=[];for(let r of t){let s=r.map(e);s&&i.push(s)}return i}}ft.reconfigure=ft.define();ft.appendConfig=ft.define();class se{constructor(t,e,i,r,s,o){this.startState=t,this.changes=e,this.selection=i,this.effects=r,this.annotations=s,this.scrollIntoView=o,this._doc=null,this._state=null,i&&Yv(i,e.newLength),s.some(a=>a.type==se.time)||(this.annotations=s.concat(se.time.of(Date.now())))}static create(t,e,i,r,s,o){return new se(t,e,i,r,s,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(t){for(let e of this.annotations)if(e.type==t)return e.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(t){let e=this.annotation(se.userEvent);return!!(e&&(e==t||e.length>t.length&&e.slice(0,t.length)==t&&e[t.length]=="."))}}se.time=Yn.define();se.userEvent=Yn.define();se.addToHistory=Yn.define();se.remote=Yn.define();function qE(n,t){let e=[];for(let i=0,r=0;;){let s,o;if(i<n.length&&(r==t.length||t[r]>=n[i]))s=n[i++],o=n[i++];else if(r<t.length)s=t[r++],o=t[r++];else return e;!e.length||e[e.length-1]<s?e.push(s,o):e[e.length-1]<o&&(e[e.length-1]=o)}}function ib(n,t,e){var i;let r,s,o;return e?(r=t.changes,s=re.empty(t.changes.length),o=n.changes.compose(t.changes)):(r=t.changes.map(n.changes),s=n.changes.mapDesc(t.changes,!0),o=n.changes.compose(r)),{changes:o,selection:t.selection?t.selection.map(s):(i=n.selection)===null||i===void 0?void 0:i.map(r),effects:ft.mapEffects(n.effects,r).concat(ft.mapEffects(t.effects,s)),annotations:n.annotations.length?n.annotations.concat(t.annotations):t.annotations,scrollIntoView:n.scrollIntoView||t.scrollIntoView}}function rf(n,t,e){let i=t.selection,r=ts(t.annotations);return t.userEvent&&(r=r.concat(se.userEvent.of(t.userEvent))),{changes:t.changes instanceof re?t.changes:re.of(t.changes||[],e,n.facet(Zv)),selection:i&&(i instanceof H?i:H.single(i.anchor,i.head)),effects:ts(t.effects),annotations:r,scrollIntoView:!!t.scrollIntoView}}function rb(n,t,e){let i=rf(n,t.length?t[0]:{},n.doc.length);t.length&&t[0].filter===!1&&(e=!1);for(let s=1;s<t.length;s++){t[s].filter===!1&&(e=!1);let o=!!t[s].sequential;i=ib(i,rf(n,t[s],o?i.changes.newLength:n.doc.length),o)}let r=se.create(n,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return YE(e?GE(r):r)}function GE(n){let t=n.startState,e=!0;for(let r of t.facet(Qv)){let s=r(n);if(s===!1){e=!1;break}Array.isArray(s)&&(e=e===!0?s:qE(e,s))}if(e!==!0){let r,s;if(e===!1)s=n.changes.invertedDesc,r=re.empty(t.doc.length);else{let o=n.changes.filter(e);r=o.changes,s=o.filtered.mapDesc(o.changes).invertedDesc}n=se.create(t,r,n.selection&&n.selection.map(s),ft.mapEffects(n.effects,s),n.annotations,n.scrollIntoView)}let i=t.facet(tb);for(let r=i.length-1;r>=0;r--){let s=i[r](n);s instanceof se?n=s:Array.isArray(s)&&s.length==1&&s[0]instanceof se?n=s[0]:n=rb(t,ts(s),!1)}return n}function YE(n){let t=n.startState,e=t.facet(eb),i=n;for(let r=e.length-1;r>=0;r--){let s=e[r](n);s&&Object.keys(s).length&&(i=ib(i,rf(t,s,n.changes.newLength),!0))}return i==n?n:se.create(t,n.changes,n.selection,i.effects,i.annotations,i.scrollIntoView)}const XE=[];function ts(n){return n==null?XE:Array.isArray(n)?n:[n]}var Wt=(function(n){return n[n.Word=0]="Word",n[n.Space=1]="Space",n[n.Other=2]="Other",n})(Wt||(Wt={}));const JE=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let sf;try{sf=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function ZE(n){if(sf)return sf.test(n);for(let t=0;t<n.length;t++){let e=n[t];if(/\w/.test(e)||e>"Â€"&&(e.toUpperCase()!=e.toLowerCase()||JE.test(e)))return!0}return!1}function QE(n){return t=>{if(!/\S/.test(t))return Wt.Space;if(ZE(t))return Wt.Word;for(let e=0;e<n.length;e++)if(t.indexOf(n[e])>-1)return Wt.Word;return Wt.Other}}class Ct{constructor(t,e,i,r,s,o){this.config=t,this.doc=e,this.selection=i,this.values=r,this.status=t.statusTemplate.slice(),this.computeSlot=s,o&&(o._state=this);for(let a=0;a<this.config.dynamicSlots.length;a++)ao(this,a<<1);this.computeSlot=null}field(t,e=!0){let i=this.config.address[t.id];if(i==null){if(e)throw new RangeError("Field is not present in this state");return}return ao(this,i),ja(this,i)}update(...t){return rb(this,t,!0)}applyTransaction(t){let e=this.config,{base:i,compartments:r}=e;for(let a of t.effects)a.is(gh.reconfigure)?(e&&(r=new Map,e.compartments.forEach((h,f)=>r.set(f,h)),e=null),r.set(a.value.compartment,a.value.extension)):a.is(ft.reconfigure)?(e=null,i=a.value):a.is(ft.appendConfig)&&(e=null,i=ts(i).concat(a.value));let s;e?s=t.startState.values.slice():(e=$a.resolve(i,r,this),s=new Ct(e,this.doc,this.selection,e.dynamicSlots.map(()=>null),(h,f)=>f.reconfigure(h,this),null).values);let o=t.startState.facet(nf)?t.newSelection:t.newSelection.asSingle();new Ct(e,t.newDoc,o,s,(a,h)=>h.update(a,t),t)}replaceSelection(t){return typeof t=="string"&&(t=this.toText(t)),this.changeByRange(e=>({changes:{from:e.from,to:e.to,insert:t},range:H.cursor(e.from+t.length)}))}changeByRange(t){let e=this.selection,i=t(e.ranges[0]),r=this.changes(i.changes),s=[i.range],o=ts(i.effects);for(let a=1;a<e.ranges.length;a++){let h=t(e.ranges[a]),f=this.changes(h.changes),c=f.map(r);for(let m=0;m<a;m++)s[m]=s[m].map(c);let p=r.mapDesc(f,!0);s.push(h.range.map(p)),r=r.compose(c),o=ft.mapEffects(o,c).concat(ft.mapEffects(ts(h.effects),p))}return{changes:r,selection:H.create(s,e.mainIndex),effects:o}}changes(t=[]){return t instanceof re?t:re.of(t,this.doc.length,this.facet(Ct.lineSeparator))}toText(t){return At.of(t.split(this.facet(Ct.lineSeparator)||Jc))}sliceDoc(t=0,e=this.doc.length){return this.doc.sliceString(t,e,this.lineBreak)}facet(t){let e=this.config.address[t.id];return e==null?t.default:(ao(this,e),ja(this,e))}toJSON(t){let e={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(t)for(let i in t){let r=t[i];r instanceof ge&&this.config.address[r.id]!=null&&(e[i]=r.spec.toJSON(this.field(t[i]),this))}return e}static fromJSON(t,e={},i){if(!t||typeof t.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let r=[];if(i){for(let s in i)if(Object.prototype.hasOwnProperty.call(t,s)){let o=i[s],a=t[s];r.push(o.init(h=>o.spec.fromJSON(a,h)))}}return Ct.create({doc:t.doc,selection:H.fromJSON(t.selection),extensions:e.extensions?r.concat([e.extensions]):r})}static create(t={}){let e=$a.resolve(t.extensions||[],new Map),i=t.doc instanceof At?t.doc:At.of((t.doc||"").split(e.staticFacet(Ct.lineSeparator)||Jc)),r=t.selection?t.selection instanceof H?t.selection:H.single(t.selection.anchor,t.selection.head):H.single(0);return Yv(r,i.length),e.staticFacet(nf)||(r=r.asSingle()),new Ct(e,i,r,e.dynamicSlots.map(()=>null),(s,o)=>o.create(s),null)}get tabSize(){return this.facet(Ct.tabSize)}get lineBreak(){return this.facet(Ct.lineSeparator)||`
`}get readOnly(){return this.facet(nb)}phrase(t,...e){for(let i of this.facet(Ct.phrases))if(Object.prototype.hasOwnProperty.call(i,t)){t=i[t];break}return e.length&&(t=t.replace(/\$(\$|\d*)/g,(i,r)=>{if(r=="$")return"$";let s=+(r||1);return!s||s>e.length?i:e[s-1]})),t}languageDataAt(t,e,i=-1){let r=[];for(let s of this.facet(Jv))for(let o of s(this,e,i))Object.prototype.hasOwnProperty.call(o,t)&&r.push(o[t]);return r}charCategorizer(t){return QE(this.languageDataAt("wordChars",t).join(""))}wordAt(t){let{text:e,from:i,length:r}=this.doc.lineAt(t),s=this.charCategorizer(t),o=t-i,a=t-i;for(;o>0;){let h=me(e,o,!1);if(s(e.slice(h,o))!=Wt.Word)break;o=h}for(;a<r;){let h=me(e,a);if(s(e.slice(a,h))!=Wt.Word)break;a=h}return o==a?null:H.range(o+i,a+i)}}Ct.allowMultipleSelections=nf;Ct.tabSize=X.define({combine:n=>n.length?n[0]:4});Ct.lineSeparator=Zv;Ct.readOnly=nb;Ct.phrases=X.define({compare(n,t){let e=Object.keys(n),i=Object.keys(t);return e.length==i.length&&e.every(r=>n[r]==t[r])}});Ct.languageData=Jv;Ct.changeFilter=Qv;Ct.transactionFilter=tb;Ct.transactionExtender=eb;gh.reconfigure=ft.define();function Xn(n,t,e={}){let i={};for(let r of n)for(let s of Object.keys(r)){let o=r[s],a=i[s];if(a===void 0)i[s]=o;else if(!(a===o||o===void 0))if(Object.hasOwnProperty.call(e,s))i[s]=e[s](a,o);else throw new Error("Config merge conflict for field "+s)}for(let r in t)i[r]===void 0&&(i[r]=t[r]);return i}class vr{eq(t){return this==t}range(t,e=t){return Co.create(t,e,this)}}vr.prototype.startSide=vr.prototype.endSide=0;vr.prototype.point=!1;vr.prototype.mapMode=Pe.TrackDel;class Co{constructor(t,e,i){this.from=t,this.to=e,this.value=i}static create(t,e,i){return new Co(t,e,i)}}function of(n,t){return n.from-t.from||n.value.startSide-t.value.startSide}class Ad{constructor(t,e,i,r){this.from=t,this.to=e,this.value=i,this.maxPoint=r}get length(){return this.to[this.to.length-1]}findIndex(t,e,i,r=0){let s=i?this.to:this.from;for(let o=r,a=s.length;;){if(o==a)return o;let h=o+a>>1,f=s[h]-t||(i?this.value[h].endSide:this.value[h].startSide)-e;if(h==o)return f>=0?o:a;f>=0?a=h:o=h+1}}between(t,e,i,r){for(let s=this.findIndex(e,-1e9,!0),o=this.findIndex(i,1e9,!1,s);s<o;s++)if(r(this.from[s]+t,this.to[s]+t,this.value[s])===!1)return!1}map(t,e){let i=[],r=[],s=[],o=-1,a=-1;for(let h=0;h<this.value.length;h++){let f=this.value[h],c=this.from[h]+t,p=this.to[h]+t,m,y;if(c==p){let v=e.mapPos(c,f.startSide,f.mapMode);if(v==null||(m=y=v,f.startSide!=f.endSide&&(y=e.mapPos(c,f.endSide),y<m)))continue}else if(m=e.mapPos(c,f.startSide),y=e.mapPos(p,f.endSide),m>y||m==y&&f.startSide>0&&f.endSide<=0)continue;(y-m||f.endSide-f.startSide)<0||(o<0&&(o=m),f.point&&(a=Math.max(a,y-m)),i.push(f),r.push(m-o),s.push(y-o))}return{mapped:i.length?new Ad(r,s,i,a):null,pos:o}}}class kt{constructor(t,e,i,r){this.chunkPos=t,this.chunk=e,this.nextLayer=i,this.maxPoint=r}static create(t,e,i,r){return new kt(t,e,i,r)}get length(){let t=this.chunk.length-1;return t<0?0:Math.max(this.chunkEnd(t),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let t=this.nextLayer.size;for(let e of this.chunk)t+=e.value.length;return t}chunkEnd(t){return this.chunkPos[t]+this.chunk[t].length}update(t){let{add:e=[],sort:i=!1,filterFrom:r=0,filterTo:s=this.length}=t,o=t.filter;if(e.length==0&&!o)return this;if(i&&(e=e.slice().sort(of)),this.isEmpty)return e.length?kt.of(e):this;let a=new sb(this,null,-1).goto(0),h=0,f=[],c=new di;for(;a.value||h<e.length;)if(h<e.length&&(a.from-e[h].from||a.startSide-e[h].value.startSide)>=0){let p=e[h++];c.addInner(p.from,p.to,p.value)||f.push(p)}else a.rangeIndex==1&&a.chunkIndex<this.chunk.length&&(h==e.length||this.chunkEnd(a.chunkIndex)<e[h].from)&&(!o||r>this.chunkEnd(a.chunkIndex)||s<this.chunkPos[a.chunkIndex])&&c.addChunk(this.chunkPos[a.chunkIndex],this.chunk[a.chunkIndex])?a.nextChunk():((!o||r>a.to||s<a.from||o(a.from,a.to,a.value))&&(c.addInner(a.from,a.to,a.value)||f.push(Co.create(a.from,a.to,a.value))),a.next());return c.finishInner(this.nextLayer.isEmpty&&!f.length?kt.empty:this.nextLayer.update({add:f,filter:o,filterFrom:r,filterTo:s}))}map(t){if(t.empty||this.isEmpty)return this;let e=[],i=[],r=-1;for(let o=0;o<this.chunk.length;o++){let a=this.chunkPos[o],h=this.chunk[o],f=t.touchesRange(a,a+h.length);if(f===!1)r=Math.max(r,h.maxPoint),e.push(h),i.push(t.mapPos(a));else if(f===!0){let{mapped:c,pos:p}=h.map(a,t);c&&(r=Math.max(r,c.maxPoint),e.push(c),i.push(p))}}let s=this.nextLayer.map(t);return e.length==0?s:new kt(i,e,s||kt.empty,r)}between(t,e,i){if(!this.isEmpty){for(let r=0;r<this.chunk.length;r++){let s=this.chunkPos[r],o=this.chunk[r];if(e>=s&&t<=s+o.length&&o.between(s,t-s,e-s,i)===!1)return}this.nextLayer.between(t,e,i)}}iter(t=0){return ko.from([this]).goto(t)}get isEmpty(){return this.nextLayer==this}static iter(t,e=0){return ko.from(t).goto(e)}static compare(t,e,i,r,s=-1){let o=t.filter(p=>p.maxPoint>0||!p.isEmpty&&p.maxPoint>=s),a=e.filter(p=>p.maxPoint>0||!p.isEmpty&&p.maxPoint>=s),h=w0(o,a,i),f=new Gs(o,h,s),c=new Gs(a,h,s);i.iterGaps((p,m,y)=>S0(f,p,c,m,y,r)),i.empty&&i.length==0&&S0(f,0,c,0,0,r)}static eq(t,e,i=0,r){r==null&&(r=999999999);let s=t.filter(c=>!c.isEmpty&&e.indexOf(c)<0),o=e.filter(c=>!c.isEmpty&&t.indexOf(c)<0);if(s.length!=o.length)return!1;if(!s.length)return!0;let a=w0(s,o),h=new Gs(s,a,0).goto(i),f=new Gs(o,a,0).goto(i);for(;;){if(h.to!=f.to||!lf(h.active,f.active)||h.point&&(!f.point||!h.point.eq(f.point)))return!1;if(h.to>r)return!0;h.next(),f.next()}}static spans(t,e,i,r,s=-1){let o=new Gs(t,null,s).goto(e),a=e,h=o.openStart;for(;;){let f=Math.min(o.to,i);if(o.point){let c=o.activeForPoint(o.to),p=o.pointFrom<e?c.length+1:o.point.startSide<0?c.length:Math.min(c.length,h);r.point(a,f,o.point,c,p,o.pointRank),h=Math.min(o.openEnd(f),c.length)}else f>a&&(r.span(a,f,o.active,h),h=o.openEnd(f));if(o.to>i)return h+(o.point&&o.to>i?1:0);a=o.to,o.next()}}static of(t,e=!1){let i=new di;for(let r of t instanceof Co?[t]:e?tL(t):t)i.add(r.from,r.to,r.value);return i.finish()}static join(t){if(!t.length)return kt.empty;let e=t[t.length-1];for(let i=t.length-2;i>=0;i--)for(let r=t[i];r!=kt.empty;r=r.nextLayer)e=new kt(r.chunkPos,r.chunk,e,Math.max(r.maxPoint,e.maxPoint));return e}}kt.empty=new kt([],[],null,-1);function tL(n){if(n.length>1)for(let t=n[0],e=1;e<n.length;e++){let i=n[e];if(of(t,i)>0)return n.slice().sort(of);t=i}return n}kt.empty.nextLayer=kt.empty;class di{finishChunk(t){this.chunks.push(new Ad(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,t&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(t,e,i){this.addInner(t,e,i)||(this.nextLayer||(this.nextLayer=new di)).add(t,e,i)}addInner(t,e,i){let r=t-this.lastTo||i.startSide-this.last.endSide;if(r<=0&&(t-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return r<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=t),this.from.push(t-this.chunkStart),this.to.push(e-this.chunkStart),this.last=i,this.lastFrom=t,this.lastTo=e,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,e-t)),!0)}addChunk(t,e){if((t-this.lastTo||e.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,e.maxPoint),this.chunks.push(e),this.chunkPos.push(t);let i=e.value.length-1;return this.last=e.value[i],this.lastFrom=e.from[i]+t,this.lastTo=e.to[i]+t,!0}finish(){return this.finishInner(kt.empty)}finishInner(t){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return t;let e=kt.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(t):t,this.setMaxPoint);return this.from=null,e}}function w0(n,t,e){let i=new Map;for(let s of n)for(let o=0;o<s.chunk.length;o++)s.chunk[o].maxPoint<=0&&i.set(s.chunk[o],s.chunkPos[o]);let r=new Set;for(let s of t)for(let o=0;o<s.chunk.length;o++){let a=i.get(s.chunk[o]);a!=null&&(e?e.mapPos(a):a)==s.chunkPos[o]&&!e?.touchesRange(a,a+s.chunk[o].length)&&r.add(s.chunk[o])}return r}class sb{constructor(t,e,i,r=0){this.layer=t,this.skip=e,this.minPoint=i,this.rank=r}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(t,e=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(t,e,!1),this}gotoInner(t,e,i){for(;this.chunkIndex<this.layer.chunk.length;){let r=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(r)||this.layer.chunkEnd(this.chunkIndex)<t||r.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let r=this.layer.chunk[this.chunkIndex].findIndex(t-this.layer.chunkPos[this.chunkIndex],e,!0);(!i||this.rangeIndex<r)&&this.setRangeIndex(r)}this.next()}forward(t,e){(this.to-t||this.endSide-e)<0&&this.gotoInner(t,e,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let t=this.layer.chunkPos[this.chunkIndex],e=this.layer.chunk[this.chunkIndex],i=t+e.from[this.rangeIndex];if(this.from=i,this.to=t+e.to[this.rangeIndex],this.value=e.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(t){if(t==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=t}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(t){return this.from-t.from||this.startSide-t.startSide||this.rank-t.rank||this.to-t.to||this.endSide-t.endSide}}class ko{constructor(t){this.heap=t}static from(t,e=null,i=-1){let r=[];for(let s=0;s<t.length;s++)for(let o=t[s];!o.isEmpty;o=o.nextLayer)o.maxPoint>=i&&r.push(new sb(o,e,i,s));return r.length==1?r[0]:new ko(r)}get startSide(){return this.value?this.value.startSide:0}goto(t,e=-1e9){for(let i of this.heap)i.goto(t,e);for(let i=this.heap.length>>1;i>=0;i--)rc(this.heap,i);return this.next(),this}forward(t,e){for(let i of this.heap)i.forward(t,e);for(let i=this.heap.length>>1;i>=0;i--)rc(this.heap,i);(this.to-t||this.value.endSide-e)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let t=this.heap[0];this.from=t.from,this.to=t.to,this.value=t.value,this.rank=t.rank,t.value&&t.next(),rc(this.heap,0)}}}function rc(n,t){for(let e=n[t];;){let i=(t<<1)+1;if(i>=n.length)break;let r=n[i];if(i+1<n.length&&r.compare(n[i+1])>=0&&(r=n[i+1],i++),e.compare(r)<0)break;n[i]=e,n[t]=r,t=i}}class Gs{constructor(t,e,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=ko.from(t,e,i)}goto(t,e=-1e9){return this.cursor.goto(t,e),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=t,this.endSide=e,this.openStart=-1,this.next(),this}forward(t,e){for(;this.minActive>-1&&(this.activeTo[this.minActive]-t||this.active[this.minActive].endSide-e)<0;)this.removeActive(this.minActive);this.cursor.forward(t,e)}removeActive(t){na(this.active,t),na(this.activeTo,t),na(this.activeRank,t),this.minActive=C0(this.active,this.activeTo)}addActive(t){let e=0,{value:i,to:r,rank:s}=this.cursor;for(;e<this.activeRank.length&&(s-this.activeRank[e]||r-this.activeTo[e])>0;)e++;ia(this.active,e,i),ia(this.activeTo,e,r),ia(this.activeRank,e,s),t&&ia(t,e,this.cursor.from),this.minActive=C0(this.active,this.activeTo)}next(){let t=this.to,e=this.point;this.point=null;let i=this.openStart<0?[]:null;for(;;){let r=this.minActive;if(r>-1&&(this.activeTo[r]-this.cursor.from||this.active[r].endSide-this.cursor.startSide)<0){if(this.activeTo[r]>t){this.to=this.activeTo[r],this.endSide=this.active[r].endSide;break}this.removeActive(r),i&&na(i,r)}else if(this.cursor.value)if(this.cursor.from>t){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(i),this.cursor.next();else if(e&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(i){this.openStart=0;for(let r=i.length-1;r>=0&&i[r]<t;r--)this.openStart++}}activeForPoint(t){if(!this.active.length)return this.active;let e=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>t||this.activeTo[i]==t&&this.active[i].endSide>=this.point.endSide)&&e.push(this.active[i]);return e.reverse()}openEnd(t){let e=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>t;i--)e++;return e}}function S0(n,t,e,i,r,s){n.goto(t),e.goto(i);let o=i+r,a=i,h=i-t;for(;;){let f=n.to+h-e.to,c=f||n.endSide-e.endSide,p=c<0?n.to+h:e.to,m=Math.min(p,o);if(n.point||e.point?n.point&&e.point&&(n.point==e.point||n.point.eq(e.point))&&lf(n.activeForPoint(n.to),e.activeForPoint(e.to))||s.comparePoint(a,m,n.point,e.point):m>a&&!lf(n.active,e.active)&&s.compareRange(a,m,n.active,e.active),p>o)break;(f||n.openEnd!=e.openEnd)&&s.boundChange&&s.boundChange(p),a=p,c<=0&&n.next(),c>=0&&e.next()}}function lf(n,t){if(n.length!=t.length)return!1;for(let e=0;e<n.length;e++)if(n[e]!=t[e]&&!n[e].eq(t[e]))return!1;return!0}function na(n,t){for(let e=t,i=n.length-1;e<i;e++)n[e]=n[e+1];n.pop()}function ia(n,t,e){for(let i=n.length-1;i>=t;i--)n[i+1]=n[i];n[t]=e}function C0(n,t){let e=-1,i=1e9;for(let r=0;r<t.length;r++)(t[r]-i||n[r].endSide-n[e].endSide)<0&&(e=r,i=t[r]);return e}function xs(n,t,e=n.length){let i=0;for(let r=0;r<e&&r<n.length;)n.charCodeAt(r)==9?(i+=t-i%t,r++):(i++,r=me(n,r));return i}function af(n,t,e,i){for(let r=0,s=0;;){if(s>=t)return r;if(r==n.length)break;s+=n.charCodeAt(r)==9?e-s%e:1,r=me(n,r)}return i===!0?-1:n.length}const hf="Í¼",k0=typeof Symbol>"u"?"__"+hf:Symbol.for(hf),uf=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),A0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class Vi{constructor(t,e){this.rules=[];let{finish:i}=e||{};function r(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function s(o,a,h,f){let c=[],p=/^@(\w+)\b/.exec(o[0]),m=p&&p[1]=="keyframes";if(p&&a==null)return h.push(o[0]+";");for(let y in a){let v=a[y];if(/&/.test(y))s(y.split(/,\s*/).map(S=>o.map(C=>S.replace(/&/,C))).reduce((S,C)=>S.concat(C)),v,h);else if(v&&typeof v=="object"){if(!p)throw new RangeError("The value of a property ("+y+") should be a primitive value.");s(r(y),v,c,m)}else v!=null&&c.push(y.replace(/_.*/,"").replace(/[A-Z]/g,S=>"-"+S.toLowerCase())+": "+v+";")}(c.length||m)&&h.push((i&&!p&&!f?o.map(i):o).join(", ")+" {"+c.join(" ")+"}")}for(let o in t)s(r(o),t[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let t=A0[k0]||1;return A0[k0]=t+1,hf+t.toString(36)}static mount(t,e,i){let r=t[uf],s=i&&i.nonce;r?s&&r.setNonce(s):r=new eL(t,s),r.mount(Array.isArray(e)?e:[e],t)}}let T0=new Map;class eL{constructor(t,e){let i=t.ownerDocument||t,r=i.defaultView;if(!t.head&&t.adoptedStyleSheets&&r.CSSStyleSheet){let s=T0.get(i);if(s)return t[uf]=s;this.sheet=new r.CSSStyleSheet,T0.set(i,this)}else this.styleTag=i.createElement("style"),e&&this.styleTag.setAttribute("nonce",e);this.modules=[],t[uf]=this}mount(t,e){let i=this.sheet,r=0,s=0;for(let o=0;o<t.length;o++){let a=t[o],h=this.modules.indexOf(a);if(h<s&&h>-1&&(this.modules.splice(h,1),s--,h=-1),h==-1){if(this.modules.splice(s++,0,a),i)for(let f=0;f<a.rules.length;f++)i.insertRule(a.rules[f],r++)}else{for(;s<h;)r+=this.modules[s++].rules.length;r+=a.rules.length,s++}}if(i)e.adoptedStyleSheets.indexOf(this.sheet)<0&&(e.adoptedStyleSheets=[this.sheet,...e.adoptedStyleSheets]);else{let o="";for(let h=0;h<this.modules.length;h++)o+=this.modules[h].getRules()+`
`;this.styleTag.textContent=o;let a=e.head||e;this.styleTag.parentNode!=a&&a.insertBefore(this.styleTag,a.firstChild)}}setNonce(t){this.styleTag&&this.styleTag.getAttribute("nonce")!=t&&this.styleTag.setAttribute("nonce",t)}}var Wi={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Ao={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},nL=typeof navigator<"u"&&/Mac/.test(navigator.platform),iL=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var pe=0;pe<10;pe++)Wi[48+pe]=Wi[96+pe]=String(pe);for(var pe=1;pe<=24;pe++)Wi[pe+111]="F"+pe;for(var pe=65;pe<=90;pe++)Wi[pe]=String.fromCharCode(pe+32),Ao[pe]=String.fromCharCode(pe);for(var sc in Wi)Ao.hasOwnProperty(sc)||(Ao[sc]=Wi[sc]);function rL(n){var t=nL&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||iL&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",e=!t&&n.key||(n.shiftKey?Ao:Wi)[n.keyCode]||n.key||"Unidentified";return e=="Esc"&&(e="Escape"),e=="Del"&&(e="Delete"),e=="Left"&&(e="ArrowLeft"),e=="Up"&&(e="ArrowUp"),e=="Right"&&(e="ArrowRight"),e=="Down"&&(e="ArrowDown"),e}function Ot(){var n=arguments[0];typeof n=="string"&&(n=document.createElement(n));var t=1,e=arguments[1];if(e&&typeof e=="object"&&e.nodeType==null&&!Array.isArray(e)){for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var r=e[i];typeof r=="string"?n.setAttribute(i,r):r!=null&&(n[i]=r)}t++}for(;t<arguments.length;t++)ob(n,arguments[t]);return n}function ob(n,t){if(typeof t=="string")n.appendChild(document.createTextNode(t));else if(t!=null)if(t.nodeType!=null)n.appendChild(t);else if(Array.isArray(t))for(var e=0;e<t.length;e++)ob(n,t[e]);else throw new RangeError("Unsupported child node: "+t)}let Me=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},cf=typeof document<"u"?document:{documentElement:{style:{}}};const ff=/Edge\/(\d+)/.exec(Me.userAgent),lb=/MSIE \d/.test(Me.userAgent),df=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Me.userAgent),yh=!!(lb||df||ff),M0=!yh&&/gecko\/(\d+)/i.test(Me.userAgent),oc=!yh&&/Chrome\/(\d+)/.exec(Me.userAgent),sL="webkitFontSmoothing"in cf.documentElement.style,pf=!yh&&/Apple Computer/.test(Me.vendor),P0=pf&&(/Mobile\/\w+/.test(Me.userAgent)||Me.maxTouchPoints>2);var Y={mac:P0||/Mac/.test(Me.platform),windows:/Win/.test(Me.platform),linux:/Linux|X11/.test(Me.platform),ie:yh,ie_version:lb?cf.documentMode||6:df?+df[1]:ff?+ff[1]:0,gecko:M0,gecko_version:M0?+(/Firefox\/(\d+)/.exec(Me.userAgent)||[0,0])[1]:0,chrome:!!oc,chrome_version:oc?+oc[1]:0,ios:P0,android:/Android\b/.test(Me.userAgent),webkit_version:sL?+(/\bAppleWebKit\/(\d+)/.exec(Me.userAgent)||[0,0])[1]:0,safari:pf,safari_version:pf?+(/\bVersion\/(\d+(\.\d+)?)/.exec(Me.userAgent)||[0,0])[1]:0,tabSize:cf.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};function To(n){let t;return n.nodeType==11?t=n.getSelection?n:n.ownerDocument:t=n,t.getSelection()}function mf(n,t){return t?n==t||n.contains(t.nodeType!=1?t.parentNode:t):!1}function Ea(n,t){if(!t.anchorNode)return!1;try{return mf(n,t.anchorNode)}catch{return!1}}function ls(n){return n.nodeType==3?wr(n,0,n.nodeValue.length).getClientRects():n.nodeType==1?n.getClientRects():[]}function ho(n,t,e,i){return e?D0(n,t,e,i,-1)||D0(n,t,e,i,1):!1}function br(n){for(var t=0;;t++)if(n=n.previousSibling,!n)return t}function Ka(n){return n.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(n.nodeName)}function D0(n,t,e,i,r){for(;;){if(n==e&&t==i)return!0;if(t==(r<0?0:qn(n))){if(n.nodeName=="DIV")return!1;let s=n.parentNode;if(!s||s.nodeType!=1)return!1;t=br(n)+(r<0?0:1),n=s}else if(n.nodeType==1){if(n=n.childNodes[t+(r<0?-1:0)],n.nodeType==1&&n.contentEditable=="false")return!1;t=r<0?qn(n):0}else return!1}}function qn(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function Go(n,t){let e=t?n.left:n.right;return{left:e,right:e,top:n.top,bottom:n.bottom}}function oL(n){let t=n.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:n.innerWidth,top:0,bottom:n.innerHeight}}function ab(n,t){let e=t.width/n.offsetWidth,i=t.height/n.offsetHeight;return(e>.995&&e<1.005||!isFinite(e)||Math.abs(t.width-n.offsetWidth)<1)&&(e=1),(i>.995&&i<1.005||!isFinite(i)||Math.abs(t.height-n.offsetHeight)<1)&&(i=1),{scaleX:e,scaleY:i}}function lL(n,t,e,i,r,s,o,a){let h=n.ownerDocument,f=h.defaultView||window;for(let c=n,p=!1;c&&!p;)if(c.nodeType==1){let m,y=c==h.body,v=1,S=1;if(y)m=oL(f);else{if(/^(fixed|sticky)$/.test(getComputedStyle(c).position)&&(p=!0),c.scrollHeight<=c.clientHeight&&c.scrollWidth<=c.clientWidth){c=c.assignedSlot||c.parentNode;continue}let T=c.getBoundingClientRect();({scaleX:v,scaleY:S}=ab(c,T)),m={left:T.left,right:T.left+c.clientWidth*v,top:T.top,bottom:T.top+c.clientHeight*S}}let C=0,k=0;if(r=="nearest")t.top<m.top?(k=t.top-(m.top+o),e>0&&t.bottom>m.bottom+k&&(k=t.bottom-m.bottom+o)):t.bottom>m.bottom&&(k=t.bottom-m.bottom+o,e<0&&t.top-k<m.top&&(k=t.top-(m.top+o)));else{let T=t.bottom-t.top,P=m.bottom-m.top;k=(r=="center"&&T<=P?t.top+T/2-P/2:r=="start"||r=="center"&&e<0?t.top-o:t.bottom-P+o)-m.top}if(i=="nearest"?t.left<m.left?(C=t.left-(m.left+s),e>0&&t.right>m.right+C&&(C=t.right-m.right+s)):t.right>m.right&&(C=t.right-m.right+s,e<0&&t.left<m.left+C&&(C=t.left-(m.left+s))):C=(i=="center"?t.left+(t.right-t.left)/2-(m.right-m.left)/2:i=="start"==a?t.left-s:t.right-(m.right-m.left)+s)-m.left,C||k)if(y)f.scrollBy(C,k);else{let T=0,P=0;if(k){let I=c.scrollTop;c.scrollTop+=k/S,P=(c.scrollTop-I)*S}if(C){let I=c.scrollLeft;c.scrollLeft+=C/v,T=(c.scrollLeft-I)*v}t={left:t.left-T,top:t.top-P,right:t.right-T,bottom:t.bottom-P},T&&Math.abs(T-C)<1&&(i="nearest"),P&&Math.abs(P-k)<1&&(r="nearest")}if(y)break;(t.top<m.top||t.bottom>m.bottom||t.left<m.left||t.right>m.right)&&(t={left:Math.max(t.left,m.left),right:Math.min(t.right,m.right),top:Math.max(t.top,m.top),bottom:Math.min(t.bottom,m.bottom)}),c=c.assignedSlot||c.parentNode}else if(c.nodeType==11)c=c.host;else break}function aL(n){let t=n.ownerDocument,e,i;for(let r=n.parentNode;r&&!(r==t.body||e&&i);)if(r.nodeType==1)!i&&r.scrollHeight>r.clientHeight&&(i=r),!e&&r.scrollWidth>r.clientWidth&&(e=r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;return{x:e,y:i}}class hL{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(t){return this.anchorNode==t.anchorNode&&this.anchorOffset==t.anchorOffset&&this.focusNode==t.focusNode&&this.focusOffset==t.focusOffset}setRange(t){let{anchorNode:e,focusNode:i}=t;this.set(e,Math.min(t.anchorOffset,e?qn(e):0),i,Math.min(t.focusOffset,i?qn(i):0))}set(t,e,i,r){this.anchorNode=t,this.anchorOffset=e,this.focusNode=i,this.focusOffset=r}}let lr=null;Y.safari&&Y.safari_version>=26&&(lr=!1);function hb(n){if(n.setActive)return n.setActive();if(lr)return n.focus(lr);let t=[];for(let e=n;e&&(t.push(e,e.scrollTop,e.scrollLeft),e!=e.ownerDocument);e=e.parentNode);if(n.focus(lr==null?{get preventScroll(){return lr={preventScroll:!0},!0}}:void 0),!lr){lr=!1;for(let e=0;e<t.length;){let i=t[e++],r=t[e++],s=t[e++];i.scrollTop!=r&&(i.scrollTop=r),i.scrollLeft!=s&&(i.scrollLeft=s)}}}let R0;function wr(n,t,e=t){let i=R0||(R0=document.createRange());return i.setEnd(n,e),i.setStart(n,t),i}function es(n,t,e,i){let r={key:t,code:t,keyCode:e,which:e,cancelable:!0};i&&({altKey:r.altKey,ctrlKey:r.ctrlKey,shiftKey:r.shiftKey,metaKey:r.metaKey}=i);let s=new KeyboardEvent("keydown",r);s.synthetic=!0,n.dispatchEvent(s);let o=new KeyboardEvent("keyup",r);return o.synthetic=!0,n.dispatchEvent(o),s.defaultPrevented||o.defaultPrevented}function uL(n){for(;n;){if(n&&(n.nodeType==9||n.nodeType==11&&n.host))return n;n=n.assignedSlot||n.parentNode}return null}function ub(n){for(;n.attributes.length;)n.removeAttributeNode(n.attributes[0])}function cL(n,t){let e=t.focusNode,i=t.focusOffset;if(!e||t.anchorNode!=e||t.anchorOffset!=i)return!1;for(i=Math.min(i,qn(e));;)if(i){if(e.nodeType!=1)return!1;let r=e.childNodes[i-1];r.contentEditable=="false"?i--:(e=r,i=qn(e))}else{if(e==n)return!0;i=br(e),e=e.parentNode}}function cb(n){return n.scrollTop>Math.max(1,n.scrollHeight-n.clientHeight-4)}function fb(n,t){for(let e=n,i=t;;){if(e.nodeType==3&&i>0)return{node:e,offset:i};if(e.nodeType==1&&i>0){if(e.contentEditable=="false")return null;e=e.childNodes[i-1],i=qn(e)}else if(e.parentNode&&!Ka(e))i=br(e),e=e.parentNode;else return null}}function db(n,t){for(let e=n,i=t;;){if(e.nodeType==3&&i<e.nodeValue.length)return{node:e,offset:i};if(e.nodeType==1&&i<e.childNodes.length){if(e.contentEditable=="false")return null;e=e.childNodes[i],i=0}else if(e.parentNode&&!Ka(e))i=br(e)+1,e=e.parentNode;else return null}}class be{constructor(t,e,i=!0){this.node=t,this.offset=e,this.precise=i}static before(t,e){return new be(t.parentNode,br(t),e)}static after(t,e){return new be(t.parentNode,br(t)+1,e)}}const Td=[];class Et{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(t){let e=this.posAtStart;for(let i of this.children){if(i==t)return e;e+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(t){return this.posBefore(t)+t.length}sync(t,e){if(this.flags&2){let i=this.dom,r=null,s;for(let o of this.children){if(o.flags&7){if(!o.dom&&(s=r?r.nextSibling:i.firstChild)){let a=Et.get(s);(!a||!a.parent&&a.canReuseDOM(o))&&o.reuseDOM(s)}o.sync(t,e),o.flags&=-8}if(s=r?r.nextSibling:i.firstChild,e&&!e.written&&e.node==i&&s!=o.dom&&(e.written=!0),o.dom.parentNode==i)for(;s&&s!=o.dom;)s=E0(s);else i.insertBefore(o.dom,s);r=o.dom}for(s=r?r.nextSibling:i.firstChild,s&&e&&e.node==i&&(e.written=!0);s;)s=E0(s)}else if(this.flags&1)for(let i of this.children)i.flags&7&&(i.sync(t,e),i.flags&=-8)}reuseDOM(t){}localPosFromDOM(t,e){let i;if(t==this.dom)i=this.dom.childNodes[e];else{let r=qn(t)==0?0:e==0?-1:1;for(;;){let s=t.parentNode;if(s==this.dom)break;r==0&&s.firstChild!=s.lastChild&&(t==s.firstChild?r=-1:r=1),t=s}r<0?i=t:i=t.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!Et.get(i);)i=i.nextSibling;if(!i)return this.length;for(let r=0,s=0;;r++){let o=this.children[r];if(o.dom==i)return s;s+=o.length+o.breakAfter}}domBoundsAround(t,e,i=0){let r=-1,s=-1,o=-1,a=-1;for(let h=0,f=i,c=i;h<this.children.length;h++){let p=this.children[h],m=f+p.length;if(f<t&&m>e)return p.domBoundsAround(t,e,f);if(m>=t&&r==-1&&(r=h,s=f),f>e&&p.dom.parentNode==this.dom){o=h,a=c;break}c=m,f=m+p.breakAfter}return{from:s,to:a<0?i+this.length:a,startDOM:(r?this.children[r-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(t=!1){this.flags|=2,this.markParentsDirty(t)}markParentsDirty(t){for(let e=this.parent;e;e=e.parent){if(t&&(e.flags|=2),e.flags&1)return;e.flags|=1,t=!1}}setParent(t){this.parent!=t&&(this.parent=t,this.flags&7&&this.markParentsDirty(!0))}setDOM(t){this.dom!=t&&(this.dom&&(this.dom.cmView=null),this.dom=t,t.cmView=this)}get rootView(){for(let t=this;;){let e=t.parent;if(!e)return t;t=e}}replaceChildren(t,e,i=Td){this.markDirty();for(let r=t;r<e;r++){let s=this.children[r];s.parent==this&&i.indexOf(s)<0&&s.destroy()}i.length<250?this.children.splice(t,e-t,...i):this.children=[].concat(this.children.slice(0,t),i,this.children.slice(e));for(let r=0;r<i.length;r++)i[r].setParent(this)}ignoreMutation(t){return!1}ignoreEvent(t){return!1}childCursor(t=this.length){return new pb(this.children,t,this.children.length)}childPos(t,e=1){return this.childCursor().findPos(t,e)}toString(){let t=this.constructor.name.replace("View","");return t+(this.children.length?"("+this.children.join()+")":this.length?"["+(t=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(t){return t.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(t,e,i,r,s,o){return!1}become(t){return!1}canReuseDOM(t){return t.constructor==this.constructor&&!((this.flags|t.flags)&8)}getSide(){return 0}destroy(){for(let t of this.children)t.parent==this&&t.destroy();this.parent=null}}Et.prototype.breakAfter=0;function E0(n){let t=n.nextSibling;return n.parentNode.removeChild(n),t}class pb{constructor(t,e,i){this.children=t,this.pos=e,this.i=i,this.off=0}findPos(t,e=1){for(;;){if(t>this.pos||t==this.pos&&(e>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=t-this.pos,this;let i=this.children[--this.i];this.pos-=i.length+i.breakAfter}}}function mb(n,t,e,i,r,s,o,a,h){let{children:f}=n,c=f.length?f[t]:null,p=s.length?s[s.length-1]:null,m=p?p.breakAfter:o;if(!(t==i&&c&&!o&&!m&&s.length<2&&c.merge(e,r,s.length?p:null,e==0,a,h))){if(i<f.length){let y=f[i];y&&(r<y.length||y.breakAfter&&p?.breakAfter)?(t==i&&(y=y.split(r),r=0),!m&&p&&y.merge(0,r,p,!0,0,h)?s[s.length-1]=y:((r||y.children.length&&!y.children[0].length)&&y.merge(0,r,null,!1,0,h),s.push(y))):y?.breakAfter&&(p?p.breakAfter=1:o=1),i++}for(c&&(c.breakAfter=o,e>0&&(!o&&s.length&&c.merge(e,c.length,s[0],!1,a,0)?c.breakAfter=s.shift().breakAfter:(e<c.length||c.children.length&&c.children[c.children.length-1].length==0)&&c.merge(e,c.length,null,!1,a,0),t++));t<i&&s.length;)if(f[i-1].become(s[s.length-1]))i--,s.pop(),h=s.length?0:a;else if(f[t].become(s[0]))t++,s.shift(),a=s.length?0:h;else break;!s.length&&t&&i<f.length&&!f[t-1].breakAfter&&f[i].merge(0,0,f[t-1],!1,a,h)&&t--,(t<i||s.length)&&n.replaceChildren(t,i,s)}}function gb(n,t,e,i,r,s){let o=n.childCursor(),{i:a,off:h}=o.findPos(e,1),{i:f,off:c}=o.findPos(t,-1),p=t-e;for(let m of i)p+=m.length;n.length+=p,mb(n,f,c,a,h,i,0,r,s)}const fL=256;class Pn extends Et{constructor(t){super(),this.text=t}get length(){return this.text.length}createDOM(t){this.setDOM(t||document.createTextNode(this.text))}sync(t,e){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(e&&e.node==this.dom&&(e.written=!0),this.dom.nodeValue=this.text)}reuseDOM(t){t.nodeType==3&&this.createDOM(t)}merge(t,e,i){return this.flags&8||i&&(!(i instanceof Pn)||this.length-(e-t)+i.length>fL||i.flags&8)?!1:(this.text=this.text.slice(0,t)+(i?i.text:"")+this.text.slice(e),this.markDirty(),!0)}split(t){let e=new Pn(this.text.slice(t));return this.text=this.text.slice(0,t),this.markDirty(),e.flags|=this.flags&8,e}localPosFromDOM(t,e){return t==this.dom?e:e?this.text.length:0}domAtPos(t){return new be(this.dom,t)}domBoundsAround(t,e,i){return{from:i,to:i+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(t,e){return dL(this.dom,t,e)}}class pi extends Et{constructor(t,e=[],i=0){super(),this.mark=t,this.children=e,this.length=i;for(let r of e)r.setParent(this)}setAttrs(t){if(ub(t),this.mark.class&&(t.className=this.mark.class),this.mark.attrs)for(let e in this.mark.attrs)t.setAttribute(e,this.mark.attrs[e]);return t}canReuseDOM(t){return super.canReuseDOM(t)&&!((this.flags|t.flags)&8)}reuseDOM(t){t.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(t),this.flags|=6)}sync(t,e){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(t,e)}merge(t,e,i,r,s,o){return i&&(!(i instanceof pi&&i.mark.eq(this.mark))||t&&s<=0||e<this.length&&o<=0)?!1:(gb(this,t,e,i?i.children.slice():[],s-1,o-1),this.markDirty(),!0)}split(t){let e=[],i=0,r=-1,s=0;for(let a of this.children){let h=i+a.length;h>t&&e.push(i<t?a.split(t-i):a),r<0&&i>=t&&(r=s),i=h,s++}let o=this.length-t;return this.length=t,r>-1&&(this.children.length=r,this.markDirty()),new pi(this.mark,e,o)}domAtPos(t){return yb(this,t)}coordsAt(t,e){return vb(this,t,e)}}function dL(n,t,e){let i=n.nodeValue.length;t>i&&(t=i);let r=t,s=t,o=0;t==0&&e<0||t==i&&e>=0?Y.chrome||Y.gecko||(t?(r--,o=1):s<i&&(s++,o=-1)):e<0?r--:s<i&&s++;let a=wr(n,r,s).getClientRects();if(!a.length)return null;let h=a[(o?o<0:e>=0)?0:a.length-1];return Y.safari&&!o&&h.width==0&&(h=Array.prototype.find.call(a,f=>f.width)||h),o?Go(h,o<0):h||null}class Ii extends Et{static create(t,e,i){return new Ii(t,e,i)}constructor(t,e,i){super(),this.widget=t,this.length=e,this.side=i,this.prevWidget=null}split(t){let e=Ii.create(this.widget,this.length-t,this.side);return this.length-=t,e}sync(t){(!this.dom||!this.widget.updateDOM(this.dom,t))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(t)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(t,e,i,r,s,o){return i&&(!(i instanceof Ii)||!this.widget.compare(i.widget)||t>0&&s<=0||e<this.length&&o<=0)?!1:(this.length=t+(i?i.length:0)+(this.length-e),!0)}become(t){return t instanceof Ii&&t.side==this.side&&this.widget.constructor==t.widget.constructor?(this.widget.compare(t.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=t.widget,this.length=t.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(t){return this.widget.ignoreEvent(t)}get overrideDOMText(){if(this.length==0)return At.empty;let t=this;for(;t.parent;)t=t.parent;let{view:e}=t,i=e&&e.state.doc,r=this.posAtStart;return i?i.slice(r,r+this.length):At.empty}domAtPos(t){return(this.length?t==0:this.side>0)?be.before(this.dom):be.after(this.dom,t==this.length)}domBoundsAround(){return null}coordsAt(t,e){let i=this.widget.coordsAt(this.dom,t,e);if(i)return i;let r=this.dom.getClientRects(),s=null;if(!r.length)return null;let o=this.side?this.side<0:t>0;for(let a=o?r.length-1:0;s=r[a],!(t>0?a==0:a==r.length-1||s.top<s.bottom);a+=o?-1:1);return Go(s,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class as extends Et{constructor(t){super(),this.side=t}get length(){return 0}merge(){return!1}become(t){return t instanceof as&&t.side==this.side}split(){return new as(this.side)}sync(){if(!this.dom){let t=document.createElement("img");t.className="cm-widgetBuffer",t.setAttribute("aria-hidden","true"),this.setDOM(t)}}getSide(){return this.side}domAtPos(t){return this.side>0?be.before(this.dom):be.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(t){return this.dom.getBoundingClientRect()}get overrideDOMText(){return At.empty}get isHidden(){return!0}}Pn.prototype.children=Ii.prototype.children=as.prototype.children=Td;function yb(n,t){let e=n.dom,{children:i}=n,r=0;for(let s=0;r<i.length;r++){let o=i[r],a=s+o.length;if(!(a==s&&o.getSide()<=0)){if(t>s&&t<a&&o.dom.parentNode==e)return o.domAtPos(t-s);if(t<=s)break;s=a}}for(let s=r;s>0;s--){let o=i[s-1];if(o.dom.parentNode==e)return o.domAtPos(o.length)}for(let s=r;s<i.length;s++){let o=i[s];if(o.dom.parentNode==e)return o.domAtPos(0)}return new be(e,0)}function xb(n,t,e){let i,{children:r}=n;e>0&&t instanceof pi&&r.length&&(i=r[r.length-1])instanceof pi&&i.mark.eq(t.mark)?xb(i,t.children[0],e-1):(r.push(t),t.setParent(n)),n.length+=t.length}function vb(n,t,e){let i=null,r=-1,s=null,o=-1;function a(f,c){for(let p=0,m=0;p<f.children.length&&m<=c;p++){let y=f.children[p],v=m+y.length;v>=c&&(y.children.length?a(y,c-m):(!s||s.isHidden&&(e>0||mL(s,y)))&&(v>c||m==v&&y.getSide()>0)?(s=y,o=c-m):(m<c||m==v&&y.getSide()<0&&!y.isHidden)&&(i=y,r=c-m)),m=v}}a(n,t);let h=(e<0?i:s)||i||s;return h?h.coordsAt(Math.max(0,h==i?r:o),e):pL(n)}function pL(n){let t=n.dom.lastChild;if(!t)return n.dom.getBoundingClientRect();let e=ls(t);return e[e.length-1]||null}function mL(n,t){let e=n.coordsAt(0,1),i=t.coordsAt(0,1);return e&&i&&i.top<e.bottom}function gf(n,t){for(let e in n)e=="class"&&t.class?t.class+=" "+n.class:e=="style"&&t.style?t.style+=";"+n.style:t[e]=n[e];return t}const L0=Object.create(null);function qa(n,t,e){if(n==t)return!0;n||(n=L0),t||(t=L0);let i=Object.keys(n),r=Object.keys(t);if(i.length-(e&&i.indexOf(e)>-1?1:0)!=r.length-(e&&r.indexOf(e)>-1?1:0))return!1;for(let s of i)if(s!=e&&(r.indexOf(s)==-1||n[s]!==t[s]))return!1;return!0}function yf(n,t,e){let i=!1;if(t)for(let r in t)e&&r in e||(i=!0,r=="style"?n.style.cssText="":n.removeAttribute(r));if(e)for(let r in e)t&&t[r]==e[r]||(i=!0,r=="style"?n.style.cssText=e[r]:n.setAttribute(r,e[r]));return i}function gL(n){let t=Object.create(null);for(let e=0;e<n.attributes.length;e++){let i=n.attributes[e];t[i.name]=i.value}return t}class vi{eq(t){return!1}updateDOM(t,e){return!1}compare(t){return this==t||this.constructor==t.constructor&&this.eq(t)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(t){return!0}coordsAt(t,e,i){return null}get isHidden(){return!1}get editable(){return!1}destroy(t){}}var Re=(function(n){return n[n.Text=0]="Text",n[n.WidgetBefore=1]="WidgetBefore",n[n.WidgetAfter=2]="WidgetAfter",n[n.WidgetRange=3]="WidgetRange",n})(Re||(Re={}));class nt extends vr{constructor(t,e,i,r){super(),this.startSide=t,this.endSide=e,this.widget=i,this.spec=r}get heightRelevant(){return!1}static mark(t){return new Yo(t)}static widget(t){let e=Math.max(-1e4,Math.min(1e4,t.side||0)),i=!!t.block;return e+=i&&!t.inlineOrder?e>0?3e8:-4e8:e>0?1e8:-1e8,new Hi(t,e,e,i,t.widget||null,!1)}static replace(t){let e=!!t.block,i,r;if(t.isBlockGap)i=-5e8,r=4e8;else{let{start:s,end:o}=bb(t,e);i=(s?e?-3e8:-1:5e8)-1,r=(o?e?2e8:1:-6e8)+1}return new Hi(t,i,r,e,t.widget||null,!0)}static line(t){return new Xo(t)}static set(t,e=!1){return kt.of(t,e)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}nt.none=kt.empty;class Yo extends nt{constructor(t){let{start:e,end:i}=bb(t);super(e?-1:5e8,i?1:-6e8,null,t),this.tagName=t.tagName||"span",this.class=t.class||"",this.attrs=t.attributes||null}eq(t){var e,i;return this==t||t instanceof Yo&&this.tagName==t.tagName&&(this.class||((e=this.attrs)===null||e===void 0?void 0:e.class))==(t.class||((i=t.attrs)===null||i===void 0?void 0:i.class))&&qa(this.attrs,t.attrs,"class")}range(t,e=t){if(t>=e)throw new RangeError("Mark decorations may not be empty");return super.range(t,e)}}Yo.prototype.point=!1;class Xo extends nt{constructor(t){super(-2e8,-2e8,null,t)}eq(t){return t instanceof Xo&&this.spec.class==t.spec.class&&qa(this.spec.attributes,t.spec.attributes)}range(t,e=t){if(e!=t)throw new RangeError("Line decoration ranges must be zero-length");return super.range(t,e)}}Xo.prototype.mapMode=Pe.TrackBefore;Xo.prototype.point=!0;class Hi extends nt{constructor(t,e,i,r,s,o){super(e,i,s,t),this.block=r,this.isReplace=o,this.mapMode=r?e<=0?Pe.TrackBefore:Pe.TrackAfter:Pe.TrackDel}get type(){return this.startSide!=this.endSide?Re.WidgetRange:this.startSide<=0?Re.WidgetBefore:Re.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(t){return t instanceof Hi&&yL(this.widget,t.widget)&&this.block==t.block&&this.startSide==t.startSide&&this.endSide==t.endSide}range(t,e=t){if(this.isReplace&&(t>e||t==e&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&e!=t)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(t,e)}}Hi.prototype.point=!0;function bb(n,t=!1){let{inclusiveStart:e,inclusiveEnd:i}=n;return e==null&&(e=n.inclusive),i==null&&(i=n.inclusive),{start:e??t,end:i??t}}function yL(n,t){return n==t||!!(n&&t&&n.compare(t))}function La(n,t,e,i=0){let r=e.length-1;r>=0&&e[r]+i>=n?e[r]=Math.max(e[r],t):e.push(n,t)}class te extends Et{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(t,e,i,r,s,o){if(i){if(!(i instanceof te))return!1;this.dom||i.transferDOM(this)}return r&&this.setDeco(i?i.attrs:null),gb(this,t,e,i?i.children.slice():[],s,o),!0}split(t){let e=new te;if(e.breakAfter=this.breakAfter,this.length==0)return e;let{i,off:r}=this.childPos(t);r&&(e.append(this.children[i].split(r),0),this.children[i].merge(r,this.children[i].length,null,!1,0,0),i++);for(let s=i;s<this.children.length;s++)e.append(this.children[s],0);for(;i>0&&this.children[i-1].length==0;)this.children[--i].destroy();return this.children.length=i,this.markDirty(),this.length=t,e}transferDOM(t){this.dom&&(this.markDirty(),t.setDOM(this.dom),t.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(t){qa(this.attrs,t)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=t)}append(t,e){xb(this,t,e)}addLineDeco(t){let e=t.spec.attributes,i=t.spec.class;e&&(this.attrs=gf(e,this.attrs||{})),i&&(this.attrs=gf({class:i},this.attrs||{}))}domAtPos(t){return yb(this,t)}reuseDOM(t){t.nodeName=="DIV"&&(this.setDOM(t),this.flags|=6)}sync(t,e){var i;this.dom?this.flags&4&&(ub(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(yf(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(t,e);let r=this.dom.lastChild;for(;r&&Et.get(r)instanceof pi;)r=r.lastChild;if(!r||!this.length||r.nodeName!="BR"&&((i=Et.get(r))===null||i===void 0?void 0:i.isEditable)==!1&&(!Y.ios||!this.children.some(s=>s instanceof Pn))){let s=document.createElement("BR");s.cmIgnore=!0,this.dom.appendChild(s)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let t=0,e;for(let i of this.children){if(!(i instanceof Pn)||/[^ -~]/.test(i.text))return null;let r=ls(i.dom);if(r.length!=1)return null;t+=r[0].width,e=r[0].height}return t?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:t/this.length,textHeight:e}:null}coordsAt(t,e){let i=vb(this,t,e);if(!this.children.length&&i&&this.parent){let{heightOracle:r}=this.parent.view.viewState,s=i.bottom-i.top;if(Math.abs(s-r.lineHeight)<2&&r.textHeight<s){let o=(s-r.textHeight)/2;return{top:i.top+o,bottom:i.bottom-o,left:i.left,right:i.left}}}return i}become(t){return t instanceof te&&this.children.length==0&&t.children.length==0&&qa(this.attrs,t.attrs)&&this.breakAfter==t.breakAfter}covers(){return!0}static find(t,e){for(let i=0,r=0;i<t.children.length;i++){let s=t.children[i],o=r+s.length;if(o>=e){if(s instanceof te)return s;if(o>e)break}r=o+s.breakAfter}return null}}class ci extends Et{constructor(t,e,i){super(),this.widget=t,this.length=e,this.deco=i,this.breakAfter=0,this.prevWidget=null}merge(t,e,i,r,s,o){return i&&(!(i instanceof ci)||!this.widget.compare(i.widget)||t>0&&s<=0||e<this.length&&o<=0)?!1:(this.length=t+(i?i.length:0)+(this.length-e),!0)}domAtPos(t){return t==0?be.before(this.dom):be.after(this.dom,t==this.length)}split(t){let e=this.length-t;this.length=t;let i=new ci(this.widget,e,this.deco);return i.breakAfter=this.breakAfter,i}get children(){return Td}sync(t){(!this.dom||!this.widget.updateDOM(this.dom,t))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(t)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):At.empty}domBoundsAround(){return null}become(t){return t instanceof ci&&t.widget.constructor==this.widget.constructor?(t.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=t.widget,this.length=t.length,this.deco=t.deco,this.breakAfter=t.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(t){return this.widget.ignoreEvent(t)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(t,e){let i=this.widget.coordsAt(this.dom,t,e);return i||(this.widget instanceof xf?null:Go(this.dom.getBoundingClientRect(),this.length?t==0:e<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(t){let{startSide:e,endSide:i}=this.deco;return e==i?!1:t<0?e<0:i>0}}class xf extends vi{constructor(t){super(),this.height=t}toDOM(){let t=document.createElement("div");return t.className="cm-gap",this.updateDOM(t),t}eq(t){return t.height==this.height}updateDOM(t){return t.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class uo{constructor(t,e,i,r){this.doc=t,this.pos=e,this.end=i,this.disallowBlockEffectsFor=r,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=t.iter(),this.skip=e}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let t=this.content[this.content.length-1];return!(t.breakAfter||t instanceof ci&&t.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new te),this.atCursorPos=!0),this.curLine}flushBuffer(t=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(ra(new as(-1),t),t.length),this.pendingBuffer=0)}addBlockWidget(t){this.flushBuffer(),this.curLine=null,this.content.push(t)}finish(t){this.pendingBuffer&&t<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(t&&this.content.length&&this.content[this.content.length-1]instanceof ci)&&this.getLine()}buildText(t,e,i){for(;t>0;){if(this.textOff==this.text.length){let{value:o,lineBreak:a,done:h}=this.cursor.next(this.skip);if(this.skip=0,h)throw new Error("Ran out of text content when drawing inline views");if(a){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,t--;continue}else this.text=o,this.textOff=0}let r=Math.min(this.text.length-this.textOff,t),s=Math.min(r,512);this.flushBuffer(e.slice(e.length-i)),this.getLine().append(ra(new Pn(this.text.slice(this.textOff,this.textOff+s)),e),i),this.atCursorPos=!0,this.textOff+=s,t-=s,i=r<=s?0:e.length}}span(t,e,i,r){this.buildText(e-t,i,r),this.pos=e,this.openStart<0&&(this.openStart=r)}point(t,e,i,r,s,o){if(this.disallowBlockEffectsFor[o]&&i instanceof Hi){if(i.block)throw new RangeError("Block decorations may not be specified via plugins");if(e>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let a=e-t;if(i instanceof Hi)if(i.block)i.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new ci(i.widget||hs.block,a,i));else{let h=Ii.create(i.widget||hs.inline,a,a?0:i.startSide),f=this.atCursorPos&&!h.isEditable&&s<=r.length&&(t<e||i.startSide>0),c=!h.isEditable&&(t<e||s>r.length||i.startSide<=0),p=this.getLine();this.pendingBuffer==2&&!f&&!h.isEditable&&(this.pendingBuffer=0),this.flushBuffer(r),f&&(p.append(ra(new as(1),r),s),s=r.length+Math.max(0,s-r.length)),p.append(ra(h,r),s),this.atCursorPos=c,this.pendingBuffer=c?t<e||s>r.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=r.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(i);a&&(this.textOff+a<=this.text.length?this.textOff+=a:(this.skip+=a-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=e),this.openStart<0&&(this.openStart=s)}static build(t,e,i,r,s){let o=new uo(t,e,i,s);return o.openEnd=kt.spans(r,e,i,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function ra(n,t){for(let e of t)n=new pi(e,[n],n.length);return n}class hs extends vi{constructor(t){super(),this.tag=t}eq(t){return t.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(t){return t.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}hs.inline=new hs("span");hs.block=new hs("div");var Ft=(function(n){return n[n.LTR=0]="LTR",n[n.RTL=1]="RTL",n})(Ft||(Ft={}));const Sr=Ft.LTR,Md=Ft.RTL;function wb(n){let t=[];for(let e=0;e<n.length;e++)t.push(1<<+n[e]);return t}const xL=wb("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),vL=wb("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),vf=Object.create(null),In=[];for(let n of["()","[]","{}"]){let t=n.charCodeAt(0),e=n.charCodeAt(1);vf[t]=e,vf[e]=-t}function Sb(n){return n<=247?xL[n]:1424<=n&&n<=1524?2:1536<=n&&n<=1785?vL[n-1536]:1774<=n&&n<=2220?4:8192<=n&&n<=8204?256:64336<=n&&n<=65023?4:1}const bL=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class _i{get dir(){return this.level%2?Md:Sr}constructor(t,e,i){this.from=t,this.to=e,this.level=i}side(t,e){return this.dir==e==t?this.to:this.from}forward(t,e){return t==(this.dir==e)}static find(t,e,i,r){let s=-1;for(let o=0;o<t.length;o++){let a=t[o];if(a.from<=e&&a.to>=e){if(a.level==i)return o;(s<0||(r!=0?r<0?a.from<e:a.to>e:t[s].level>a.level))&&(s=o)}}if(s<0)throw new RangeError("Index out of range");return s}}function Cb(n,t){if(n.length!=t.length)return!1;for(let e=0;e<n.length;e++){let i=n[e],r=t[e];if(i.from!=r.from||i.to!=r.to||i.direction!=r.direction||!Cb(i.inner,r.inner))return!1}return!0}const Bt=[];function wL(n,t,e,i,r){for(let s=0;s<=i.length;s++){let o=s?i[s-1].to:t,a=s<i.length?i[s].from:e,h=s?256:r;for(let f=o,c=h,p=h;f<a;f++){let m=Sb(n.charCodeAt(f));m==512?m=c:m==8&&p==4&&(m=16),Bt[f]=m==4?2:m,m&7&&(p=m),c=m}for(let f=o,c=h,p=h;f<a;f++){let m=Bt[f];if(m==128)f<a-1&&c==Bt[f+1]&&c&24?m=Bt[f]=c:Bt[f]=256;else if(m==64){let y=f+1;for(;y<a&&Bt[y]==64;)y++;let v=f&&c==8||y<e&&Bt[y]==8?p==1?1:8:256;for(let S=f;S<y;S++)Bt[S]=v;f=y-1}else m==8&&p==1&&(Bt[f]=1);c=m,m&7&&(p=m)}}}function SL(n,t,e,i,r){let s=r==1?2:1;for(let o=0,a=0,h=0;o<=i.length;o++){let f=o?i[o-1].to:t,c=o<i.length?i[o].from:e;for(let p=f,m,y,v;p<c;p++)if(y=vf[m=n.charCodeAt(p)])if(y<0){for(let S=a-3;S>=0;S-=3)if(In[S+1]==-y){let C=In[S+2],k=C&2?r:C&4?C&1?s:r:0;k&&(Bt[p]=Bt[In[S]]=k),a=S;break}}else{if(In.length==189)break;In[a++]=p,In[a++]=m,In[a++]=h}else if((v=Bt[p])==2||v==1){let S=v==r;h=S?0:1;for(let C=a-3;C>=0;C-=3){let k=In[C+2];if(k&2)break;if(S)In[C+2]|=2;else{if(k&4)break;In[C+2]|=4}}}}}function CL(n,t,e,i){for(let r=0,s=i;r<=e.length;r++){let o=r?e[r-1].to:n,a=r<e.length?e[r].from:t;for(let h=o;h<a;){let f=Bt[h];if(f==256){let c=h+1;for(;;)if(c==a){if(r==e.length)break;c=e[r++].to,a=r<e.length?e[r].from:t}else if(Bt[c]==256)c++;else break;let p=s==1,m=(c<t?Bt[c]:i)==1,y=p==m?p?1:2:i;for(let v=c,S=r,C=S?e[S-1].to:n;v>h;)v==C&&(v=e[--S].from,C=S?e[S-1].to:n),Bt[--v]=y;h=c}else s=f,h++}}}function bf(n,t,e,i,r,s,o){let a=i%2?2:1;if(i%2==r%2)for(let h=t,f=0;h<e;){let c=!0,p=!1;if(f==s.length||h<s[f].from){let S=Bt[h];S!=a&&(c=!1,p=S==16)}let m=!c&&a==1?[]:null,y=c?i:i+1,v=h;t:for(;;)if(f<s.length&&v==s[f].from){if(p)break t;let S=s[f];if(!c)for(let C=S.to,k=f+1;;){if(C==e)break t;if(k<s.length&&s[k].from==C)C=s[k++].to;else{if(Bt[C]==a)break t;break}}if(f++,m)m.push(S);else{S.from>h&&o.push(new _i(h,S.from,y));let C=S.direction==Sr!=!(y%2);wf(n,C?i+1:i,r,S.inner,S.from,S.to,o),h=S.to}v=S.to}else{if(v==e||(c?Bt[v]!=a:Bt[v]==a))break;v++}m?bf(n,h,v,i+1,r,m,o):h<v&&o.push(new _i(h,v,y)),h=v}else for(let h=e,f=s.length;h>t;){let c=!0,p=!1;if(!f||h>s[f-1].to){let S=Bt[h-1];S!=a&&(c=!1,p=S==16)}let m=!c&&a==1?[]:null,y=c?i:i+1,v=h;t:for(;;)if(f&&v==s[f-1].to){if(p)break t;let S=s[--f];if(!c)for(let C=S.from,k=f;;){if(C==t)break t;if(k&&s[k-1].to==C)C=s[--k].from;else{if(Bt[C-1]==a)break t;break}}if(m)m.push(S);else{S.to<h&&o.push(new _i(S.to,h,y));let C=S.direction==Sr!=!(y%2);wf(n,C?i+1:i,r,S.inner,S.from,S.to,o),h=S.from}v=S.from}else{if(v==t||(c?Bt[v-1]!=a:Bt[v-1]==a))break;v--}m?bf(n,v,h,i+1,r,m,o):v<h&&o.push(new _i(v,h,y)),h=v}}function wf(n,t,e,i,r,s,o){let a=t%2?2:1;wL(n,r,s,i,a),SL(n,r,s,i,a),CL(r,s,i,a),bf(n,r,s,t,e,i,o)}function kL(n,t,e){if(!n)return[new _i(0,0,t==Md?1:0)];if(t==Sr&&!e.length&&!bL.test(n))return kb(n.length);if(e.length)for(;n.length>Bt.length;)Bt[Bt.length]=256;let i=[],r=t==Sr?0:1;return wf(n,r,r,e,0,n.length,i),i}function kb(n){return[new _i(0,n,0)]}let Ab="";function AL(n,t,e,i,r){var s;let o=i.head-n.from,a=_i.find(t,o,(s=i.bidiLevel)!==null&&s!==void 0?s:-1,i.assoc),h=t[a],f=h.side(r,e);if(o==f){let m=a+=r?1:-1;if(m<0||m>=t.length)return null;h=t[a=m],o=h.side(!r,e),f=h.side(r,e)}let c=me(n.text,o,h.forward(r,e));(c<h.from||c>h.to)&&(c=f),Ab=n.text.slice(Math.min(o,c),Math.max(o,c));let p=a==(r?t.length-1:0)?null:t[a+(r?1:-1)];return p&&c==f&&p.level+(r?0:1)<h.level?H.cursor(p.side(!r,e)+n.from,p.forward(r,e)?1:-1,p.level):H.cursor(c+n.from,h.forward(r,e)?-1:1,h.level)}function TL(n,t,e){for(let i=t;i<e;i++){let r=Sb(n.charCodeAt(i));if(r==1)return Sr;if(r==2||r==4)return Md}return Sr}const Tb=X.define(),Mb=X.define(),Pb=X.define(),Db=X.define(),Sf=X.define(),Rb=X.define(),Eb=X.define(),Pd=X.define(),Dd=X.define(),Lb=X.define({combine:n=>n.some(t=>t)}),Ob=X.define({combine:n=>n.some(t=>t)}),Bb=X.define();class ns{constructor(t,e="nearest",i="nearest",r=5,s=5,o=!1){this.range=t,this.y=e,this.x=i,this.yMargin=r,this.xMargin=s,this.isSnapshot=o}map(t){return t.empty?this:new ns(this.range.map(t),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(t){return this.range.to<=t.doc.length?this:new ns(H.cursor(t.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const sa=ft.define({map:(n,t)=>n.map(t)}),Ib=ft.define();function Fe(n,t,e){let i=n.facet(Db);i.length?i[0](t):window.onerror&&window.onerror(String(t),e,void 0,void 0,t)||(e?console.error(e+":",t):console.error(t))}const hi=X.define({combine:n=>n.length?n[0]:!0});let ML=0;const jr=X.define({combine(n){return n.filter((t,e)=>{for(let i=0;i<e;i++)if(n[i].plugin==t.plugin)return!1;return!0})}});class Qt{constructor(t,e,i,r,s){this.id=t,this.create=e,this.domEventHandlers=i,this.domEventObservers=r,this.baseExtensions=s(this),this.extension=this.baseExtensions.concat(jr.of({plugin:this,arg:void 0}))}of(t){return this.baseExtensions.concat(jr.of({plugin:this,arg:t}))}static define(t,e){const{eventHandlers:i,eventObservers:r,provide:s,decorations:o}=e||{};return new Qt(ML++,t,i,r,a=>{let h=[];return o&&h.push(Mo.of(f=>{let c=f.plugin(a);return c?o(c):nt.none})),s&&h.push(s(a)),h})}static fromClass(t,e){return Qt.define((i,r)=>new t(i,r),e)}}class lc{constructor(t){this.spec=t,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(t){if(this.value){if(this.mustUpdate){let e=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(e)}catch(i){if(Fe(e.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(t,this.spec.arg)}catch(e){Fe(t.state,e,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(t){var e;if(!((e=this.value)===null||e===void 0)&&e.destroy)try{this.value.destroy()}catch(i){Fe(t.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const _b=X.define(),Rd=X.define(),Mo=X.define(),Nb=X.define(),Jo=X.define(),Fb=X.define();function O0(n,t){let e=n.state.facet(Fb);if(!e.length)return e;let i=e.map(s=>s instanceof Function?s(n):s),r=[];return kt.spans(i,t.from,t.to,{point(){},span(s,o,a,h){let f=s-t.from,c=o-t.from,p=r;for(let m=a.length-1;m>=0;m--,h--){let y=a[m].spec.bidiIsolate,v;if(y==null&&(y=TL(t.text,f,c)),h>0&&p.length&&(v=p[p.length-1]).to==f&&v.direction==y)v.to=c,p=v.inner;else{let S={from:f,to:c,direction:y,inner:[]};p.push(S),p=S.inner}}}}),r}const Vb=X.define();function Ed(n){let t=0,e=0,i=0,r=0;for(let s of n.state.facet(Vb)){let o=s(n);o&&(o.left!=null&&(t=Math.max(t,o.left)),o.right!=null&&(e=Math.max(e,o.right)),o.top!=null&&(i=Math.max(i,o.top)),o.bottom!=null&&(r=Math.max(r,o.bottom)))}return{left:t,right:e,top:i,bottom:r}}const eo=X.define();class mn{constructor(t,e,i,r){this.fromA=t,this.toA=e,this.fromB=i,this.toB=r}join(t){return new mn(Math.min(this.fromA,t.fromA),Math.max(this.toA,t.toA),Math.min(this.fromB,t.fromB),Math.max(this.toB,t.toB))}addToSet(t){let e=t.length,i=this;for(;e>0;e--){let r=t[e-1];if(!(r.fromA>i.toA)){if(r.toA<i.fromA)break;i=i.join(r),t.splice(e-1,1)}}return t.splice(e,0,i),t}static extendWithRanges(t,e){if(e.length==0)return t;let i=[];for(let r=0,s=0,o=0,a=0;;r++){let h=r==t.length?null:t[r],f=o-a,c=h?h.fromB:1e9;for(;s<e.length&&e[s]<c;){let p=e[s],m=e[s+1],y=Math.max(a,p),v=Math.min(c,m);if(y<=v&&new mn(y+f,v+f,y,v).addToSet(i),m>c)break;s+=2}if(!h)return i;new mn(h.fromA,h.toA,h.fromB,h.toB).addToSet(i),o=h.toA,a=h.toB}}}class Ga{constructor(t,e,i){this.view=t,this.state=e,this.transactions=i,this.flags=0,this.startState=t.state,this.changes=re.empty(this.startState.doc.length);for(let s of i)this.changes=this.changes.compose(s.changes);let r=[];this.changes.iterChangedRanges((s,o,a,h)=>r.push(new mn(s,o,a,h))),this.changedRanges=r}static create(t,e,i){return new Ga(t,e,i)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(t=>t.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class B0 extends Et{get length(){return this.view.state.doc.length}constructor(t){super(),this.view=t,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=nt.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(t.contentDOM),this.children=[new te],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new mn(0,0,0,t.state.doc.length)],0,null)}update(t){var e;let i=t.changedRanges;this.minWidth>0&&i.length&&(i.every(({fromA:f,toA:c})=>c<this.minWidthFrom||f>this.minWidthTo)?(this.minWidthFrom=t.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=t.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(t);let r=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((e=this.domChanged)===null||e===void 0)&&e.newSel?r=this.domChanged.newSel.head:!BL(t.changes,this.hasComposition)&&!t.selectionSet&&(r=t.state.selection.main.head));let s=r>-1?DL(this.view,t.changes,r):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:f,to:c}=this.hasComposition;i=new mn(f,c,t.changes.mapPos(f,-1),t.changes.mapPos(c,1)).addToSet(i.slice())}this.hasComposition=s?{from:s.range.fromB,to:s.range.toB}:null,(Y.ie||Y.chrome)&&!s&&t&&t.state.doc.lines!=t.startState.doc.lines&&(this.forceSelection=!0);let o=this.decorations,a=this.updateDeco(),h=LL(o,a,t.changes);return i=mn.extendWithRanges(i,h),!(this.flags&7)&&i.length==0?!1:(this.updateInner(i,t.startState.doc.length,s),t.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(t,e,i){this.view.viewState.mustMeasureContent=!0,this.updateChildren(t,e,i);let{observer:r}=this.view;r.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=Y.chrome||Y.ios?{node:r.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,o),this.flags&=-8,o&&(o.written||r.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(o=>o.flags&=-9);let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof ci&&o.widget instanceof xf&&s.push(o.dom);r.updateGaps(s)}updateChildren(t,e,i){let r=i?i.range.addToSet(t.slice()):t,s=this.childCursor(e);for(let o=r.length-1;;o--){let a=o>=0?r[o]:null;if(!a)break;let{fromA:h,toA:f,fromB:c,toB:p}=a,m,y,v,S;if(i&&i.range.fromB<p&&i.range.toB>c){let I=uo.build(this.view.state.doc,c,i.range.fromB,this.decorations,this.dynamicDecorationMap),L=uo.build(this.view.state.doc,i.range.toB,p,this.decorations,this.dynamicDecorationMap);y=I.breakAtStart,v=I.openStart,S=L.openEnd;let _=this.compositionView(i);L.breakAtStart?_.breakAfter=1:L.content.length&&_.merge(_.length,_.length,L.content[0],!1,L.openStart,0)&&(_.breakAfter=L.content[0].breakAfter,L.content.shift()),I.content.length&&_.merge(0,0,I.content[I.content.length-1],!0,0,I.openEnd)&&I.content.pop(),m=I.content.concat(_).concat(L.content)}else({content:m,breakAtStart:y,openStart:v,openEnd:S}=uo.build(this.view.state.doc,c,p,this.decorations,this.dynamicDecorationMap));let{i:C,off:k}=s.findPos(f,1),{i:T,off:P}=s.findPos(h,-1);mb(this,T,P,C,k,m,y,v,S)}i&&this.fixCompositionDOM(i)}updateEditContextFormatting(t){this.editContextFormatting=this.editContextFormatting.map(t.changes);for(let e of t.transactions)for(let i of e.effects)i.is(Ib)&&(this.editContextFormatting=i.value)}compositionView(t){let e=new Pn(t.text.nodeValue);e.flags|=8;for(let{deco:r}of t.marks)e=new pi(r,[e],e.length);let i=new te;return i.append(e,0),i}fixCompositionDOM(t){let e=(s,o)=>{o.flags|=8|(o.children.some(h=>h.flags&7)?1:0),this.markedForComposition.add(o);let a=Et.get(s);a&&a!=o&&(a.dom=null),o.setDOM(s)},i=this.childPos(t.range.fromB,1),r=this.children[i.i];e(t.line,r);for(let s=t.marks.length-1;s>=-1;s--)i=r.childPos(i.off,1),r=r.children[i.i],e(s>=0?t.marks[s].node:t.text,r)}updateSelection(t=!1,e=!1){(t||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let i=this.view.root.activeElement,r=i==this.dom,s=!r&&!(this.view.state.facet(hi)||this.dom.tabIndex>-1)&&Ea(this.dom,this.view.observer.selectionRange)&&!(i&&this.dom.contains(i));if(!(r||e||s))return;let o=this.forceSelection;this.forceSelection=!1;let a=this.view.state.selection.main,h=this.moveToLine(this.domAtPos(a.anchor)),f=a.empty?h:this.moveToLine(this.domAtPos(a.head));if(Y.gecko&&a.empty&&!this.hasComposition&&PL(h)){let p=document.createTextNode("");this.view.observer.ignore(()=>h.node.insertBefore(p,h.node.childNodes[h.offset]||null)),h=f=new be(p,0),o=!0}let c=this.view.observer.selectionRange;(o||!c.focusNode||(!ho(h.node,h.offset,c.anchorNode,c.anchorOffset)||!ho(f.node,f.offset,c.focusNode,c.focusOffset))&&!this.suppressWidgetCursorChange(c,a))&&(this.view.observer.ignore(()=>{Y.android&&Y.chrome&&this.dom.contains(c.focusNode)&&OL(c.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let p=To(this.view.root);if(p)if(a.empty){if(Y.gecko){let m=RL(h.node,h.offset);if(m&&m!=3){let y=(m==1?fb:db)(h.node,h.offset);y&&(h=new be(y.node,y.offset))}}p.collapse(h.node,h.offset),a.bidiLevel!=null&&p.caretBidiLevel!==void 0&&(p.caretBidiLevel=a.bidiLevel)}else if(p.extend){p.collapse(h.node,h.offset);try{p.extend(f.node,f.offset)}catch{}}else{let m=document.createRange();a.anchor>a.head&&([h,f]=[f,h]),m.setEnd(f.node,f.offset),m.setStart(h.node,h.offset),p.removeAllRanges(),p.addRange(m)}s&&this.view.root.activeElement==this.dom&&(this.dom.blur(),i&&i.focus())}),this.view.observer.setSelectionRange(h,f)),this.impreciseAnchor=h.precise?null:new be(c.anchorNode,c.anchorOffset),this.impreciseHead=f.precise?null:new be(c.focusNode,c.focusOffset)}suppressWidgetCursorChange(t,e){return this.hasComposition&&e.empty&&ho(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)&&this.posFromDOM(t.focusNode,t.focusOffset)==e.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:t}=this,e=t.state.selection.main,i=To(t.root),{anchorNode:r,anchorOffset:s}=t.observer.selectionRange;if(!i||!e.empty||!e.assoc||!i.modify)return;let o=te.find(this,e.head);if(!o)return;let a=o.posAtStart;if(e.head==a||e.head==a+o.length)return;let h=this.coordsAt(e.head,-1),f=this.coordsAt(e.head,1);if(!h||!f||h.bottom>f.top)return;let c=this.domAtPos(e.head+e.assoc);i.collapse(c.node,c.offset),i.modify("move",e.assoc<0?"forward":"backward","lineboundary"),t.observer.readSelectionRange();let p=t.observer.selectionRange;t.docView.posFromDOM(p.anchorNode,p.anchorOffset)!=e.from&&i.collapse(r,s)}moveToLine(t){let e=this.dom,i;if(t.node!=e)return t;for(let r=t.offset;!i&&r<e.childNodes.length;r++){let s=Et.get(e.childNodes[r]);s instanceof te&&(i=s.domAtPos(0))}for(let r=t.offset-1;!i&&r>=0;r--){let s=Et.get(e.childNodes[r]);s instanceof te&&(i=s.domAtPos(s.length))}return i?new be(i.node,i.offset,!0):t}nearest(t){for(let e=t;e;){let i=Et.get(e);if(i&&i.rootView==this)return i;e=e.parentNode}return null}posFromDOM(t,e){let i=this.nearest(t);if(!i)throw new RangeError("Trying to find position for a DOM position outside of the document");return i.localPosFromDOM(t,e)+i.posAtStart}domAtPos(t){let{i:e,off:i}=this.childCursor().findPos(t,-1);for(;e<this.children.length-1;){let r=this.children[e];if(i<r.length||r instanceof te)break;e++,i=0}return this.children[e].domAtPos(i)}coordsAt(t,e){let i=null,r=0;for(let s=this.length,o=this.children.length-1;o>=0;o--){let a=this.children[o],h=s-a.breakAfter,f=h-a.length;if(h<t)break;if(f<=t&&(f<t||a.covers(-1))&&(h>t||a.covers(1))&&(!i||a instanceof te&&!(i instanceof te&&e>=0)))i=a,r=f;else if(i&&f==t&&h==t&&a instanceof ci&&Math.abs(e)<2){if(a.deco.startSide<0)break;o&&(i=null)}s=f}return i?i.coordsAt(t-r,e):null}coordsForChar(t){let{i:e,off:i}=this.childPos(t,1),r=this.children[e];if(!(r instanceof te))return null;for(;r.children.length;){let{i:a,off:h}=r.childPos(i,1);for(;;a++){if(a==r.children.length)return null;if((r=r.children[a]).length)break}i=h}if(!(r instanceof Pn))return null;let s=me(r.text,i);if(s==i)return null;let o=wr(r.dom,i,s).getClientRects();for(let a=0;a<o.length;a++){let h=o[a];if(a==o.length-1||h.top<h.bottom&&h.left<h.right)return h}return null}measureVisibleLineHeights(t){let e=[],{from:i,to:r}=t,s=this.view.contentDOM.clientWidth,o=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,a=-1,h=this.view.textDirection==Ft.LTR;for(let f=0,c=0;c<this.children.length;c++){let p=this.children[c],m=f+p.length;if(m>r)break;if(f>=i){let y=p.dom.getBoundingClientRect();if(e.push(y.height),o){let v=p.dom.lastChild,S=v?ls(v):[];if(S.length){let C=S[S.length-1],k=h?C.right-y.left:y.right-C.left;k>a&&(a=k,this.minWidth=s,this.minWidthFrom=f,this.minWidthTo=m)}}}f=m+p.breakAfter}return e}textDirectionAt(t){let{i:e}=this.childPos(t,1);return getComputedStyle(this.children[e].dom).direction=="rtl"?Ft.RTL:Ft.LTR}measureTextSize(){for(let s of this.children)if(s instanceof te){let o=s.measureTextSize();if(o)return o}let t=document.createElement("div"),e,i,r;return t.className="cm-line",t.style.width="99999px",t.style.position="absolute",t.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(t);let s=ls(t.firstChild)[0];e=t.getBoundingClientRect().height,i=s?s.width/27:7,r=s?s.height:e,t.remove()}),{lineHeight:e,charWidth:i,textHeight:r}}childCursor(t=this.length){let e=this.children.length;return e&&(t-=this.children[--e].length),new pb(this.children,t,e)}computeBlockGapDeco(){let t=[],e=this.view.viewState;for(let i=0,r=0;;r++){let s=r==e.viewports.length?null:e.viewports[r],o=s?s.from-1:this.length;if(o>i){let a=(e.lineBlockAt(o).bottom-e.lineBlockAt(i).top)/this.view.scaleY;t.push(nt.replace({widget:new xf(a),block:!0,inclusive:!0,isBlockGap:!0}).range(i,o))}if(!s)break;i=s.to+1}return nt.set(t)}updateDeco(){let t=1,e=this.view.state.facet(Mo).map(s=>(this.dynamicDecorationMap[t++]=typeof s=="function")?s(this.view):s),i=!1,r=this.view.state.facet(Nb).map((s,o)=>{let a=typeof s=="function";return a&&(i=!0),a?s(this.view):s});for(r.length&&(this.dynamicDecorationMap[t++]=i,e.push(kt.join(r))),this.decorations=[this.editContextFormatting,...e,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];t<this.decorations.length;)this.dynamicDecorationMap[t++]=!1;return this.decorations}scrollIntoView(t){if(t.isSnapshot){let f=this.view.viewState.lineBlockAt(t.range.head);this.view.scrollDOM.scrollTop=f.top-t.yMargin,this.view.scrollDOM.scrollLeft=t.xMargin;return}for(let f of this.view.state.facet(Bb))try{if(f(this.view,t.range,t))return!0}catch(c){Fe(this.view.state,c,"scroll handler")}let{range:e}=t,i=this.coordsAt(e.head,e.empty?e.assoc:e.head>e.anchor?-1:1),r;if(!i)return;!e.empty&&(r=this.coordsAt(e.anchor,e.anchor>e.head?-1:1))&&(i={left:Math.min(i.left,r.left),top:Math.min(i.top,r.top),right:Math.max(i.right,r.right),bottom:Math.max(i.bottom,r.bottom)});let s=Ed(this.view),o={left:i.left-s.left,top:i.top-s.top,right:i.right+s.right,bottom:i.bottom+s.bottom},{offsetWidth:a,offsetHeight:h}=this.view.scrollDOM;lL(this.view.scrollDOM,o,e.head<e.anchor?-1:1,t.x,t.y,Math.max(Math.min(t.xMargin,a),-a),Math.max(Math.min(t.yMargin,h),-h),this.view.textDirection==Ft.LTR)}}function PL(n){return n.node.nodeType==1&&n.node.firstChild&&(n.offset==0||n.node.childNodes[n.offset-1].contentEditable=="false")&&(n.offset==n.node.childNodes.length||n.node.childNodes[n.offset].contentEditable=="false")}function Wb(n,t){let e=n.observer.selectionRange;if(!e.focusNode)return null;let i=fb(e.focusNode,e.focusOffset),r=db(e.focusNode,e.focusOffset),s=i||r;if(r&&i&&r.node!=i.node){let a=Et.get(r.node);if(!a||a instanceof Pn&&a.text!=r.node.nodeValue)s=r;else if(n.docView.lastCompositionAfterCursor){let h=Et.get(i.node);!h||h instanceof Pn&&h.text!=i.node.nodeValue||(s=r)}}if(n.docView.lastCompositionAfterCursor=s!=i,!s)return null;let o=t-s.offset;return{from:o,to:o+s.node.nodeValue.length,node:s.node}}function DL(n,t,e){let i=Wb(n,e);if(!i)return null;let{node:r,from:s,to:o}=i,a=r.nodeValue;if(/[\n\r]/.test(a)||n.state.doc.sliceString(i.from,i.to)!=a)return null;let h=t.invertedDesc,f=new mn(h.mapPos(s),h.mapPos(o),s,o),c=[];for(let p=r.parentNode;;p=p.parentNode){let m=Et.get(p);if(m instanceof pi)c.push({node:p,deco:m.mark});else{if(m instanceof te||p.nodeName=="DIV"&&p.parentNode==n.contentDOM)return{range:f,text:r,marks:c,line:p};if(p!=n.contentDOM)c.push({node:p,deco:new Yo({inclusive:!0,attributes:gL(p),tagName:p.tagName.toLowerCase()})});else return null}}}function RL(n,t){return n.nodeType!=1?0:(t&&n.childNodes[t-1].contentEditable=="false"?1:0)|(t<n.childNodes.length&&n.childNodes[t].contentEditable=="false"?2:0)}let EL=class{constructor(){this.changes=[]}compareRange(t,e){La(t,e,this.changes)}comparePoint(t,e){La(t,e,this.changes)}boundChange(t){La(t,t,this.changes)}};function LL(n,t,e){let i=new EL;return kt.compare(n,t,e,i),i.changes}function OL(n,t){for(let e=n;e&&e!=t;e=e.assignedSlot||e.parentNode)if(e.nodeType==1&&e.contentEditable=="false")return!0;return!1}function BL(n,t){let e=!1;return t&&n.iterChangedRanges((i,r)=>{i<t.to&&r>t.from&&(e=!0)}),e}function IL(n,t,e=1){let i=n.charCategorizer(t),r=n.doc.lineAt(t),s=t-r.from;if(r.length==0)return H.cursor(t);s==0?e=1:s==r.length&&(e=-1);let o=s,a=s;e<0?o=me(r.text,s,!1):a=me(r.text,s);let h=i(r.text.slice(o,a));for(;o>0;){let f=me(r.text,o,!1);if(i(r.text.slice(f,o))!=h)break;o=f}for(;a<r.length;){let f=me(r.text,a);if(i(r.text.slice(a,f))!=h)break;a=f}return H.range(o+r.from,a+r.from)}function _L(n,t){return t.left>n?t.left-n:Math.max(0,n-t.right)}function NL(n,t){return t.top>n?t.top-n:Math.max(0,n-t.bottom)}function ac(n,t){return n.top<t.bottom-1&&n.bottom>t.top+1}function I0(n,t){return t<n.top?{top:t,left:n.left,right:n.right,bottom:n.bottom}:n}function _0(n,t){return t>n.bottom?{top:n.top,left:n.left,right:n.right,bottom:t}:n}function Cf(n,t,e){let i,r,s,o,a=!1,h,f,c,p;for(let v=n.firstChild;v;v=v.nextSibling){let S=ls(v);for(let C=0;C<S.length;C++){let k=S[C];r&&ac(r,k)&&(k=I0(_0(k,r.bottom),r.top));let T=_L(t,k),P=NL(e,k);if(T==0&&P==0)return v.nodeType==3?N0(v,t,e):Cf(v,t,e);(!i||o>P||o==P&&s>T)&&(i=v,r=k,s=T,o=P,a=T?t<k.left?C>0:C<S.length-1:!0),T==0?e>k.bottom&&(!c||c.bottom<k.bottom)?(h=v,c=k):e<k.top&&(!p||p.top>k.top)&&(f=v,p=k):c&&ac(c,k)?c=_0(c,k.bottom):p&&ac(p,k)&&(p=I0(p,k.top))}}if(c&&c.bottom>=e?(i=h,r=c):p&&p.top<=e&&(i=f,r=p),!i)return{node:n,offset:0};let m=Math.max(r.left,Math.min(r.right,t));if(i.nodeType==3)return N0(i,m,e);if(a&&i.contentEditable!="false")return Cf(i,m,e);let y=Array.prototype.indexOf.call(n.childNodes,i)+(t>=(r.left+r.right)/2?1:0);return{node:n,offset:y}}function N0(n,t,e){let i=n.nodeValue.length,r=-1,s=1e9,o=0;for(let a=0;a<i;a++){let h=wr(n,a,a+1).getClientRects();for(let f=0;f<h.length;f++){let c=h[f];if(c.top==c.bottom)continue;o||(o=t-c.left);let p=(c.top>e?c.top-e:e-c.bottom)-1;if(c.left-1<=t&&c.right+1>=t&&p<s){let m=t>=(c.left+c.right)/2,y=m;if((Y.chrome||Y.gecko)&&wr(n,a).getBoundingClientRect().left==c.right&&(y=!m),p<=0)return{node:n,offset:a+(y?1:0)};r=a+(y?1:0),s=p}}}return{node:n,offset:r>-1?r:o>0?n.nodeValue.length:0}}function Hb(n,t,e,i=-1){var r,s;let o=n.contentDOM.getBoundingClientRect(),a=o.top+n.viewState.paddingTop,h,{docHeight:f}=n.viewState,{x:c,y:p}=t,m=p-a;if(m<0)return 0;if(m>f)return n.state.doc.length;for(let I=n.viewState.heightOracle.textHeight/2,L=!1;h=n.elementAtHeight(m),h.type!=Re.Text;)for(;m=i>0?h.bottom+I:h.top-I,!(m>=0&&m<=f);){if(L)return e?null:0;L=!0,i=-i}p=a+m;let y=h.from;if(y<n.viewport.from)return n.viewport.from==0?0:e?null:F0(n,o,h,c,p);if(y>n.viewport.to)return n.viewport.to==n.state.doc.length?n.state.doc.length:e?null:F0(n,o,h,c,p);let v=n.dom.ownerDocument,S=n.root.elementFromPoint?n.root:v,C=S.elementFromPoint(c,p);C&&!n.contentDOM.contains(C)&&(C=null),C||(c=Math.max(o.left+1,Math.min(o.right-1,c)),C=S.elementFromPoint(c,p),C&&!n.contentDOM.contains(C)&&(C=null));let k,T=-1;if(C&&((r=n.docView.nearest(C))===null||r===void 0?void 0:r.isEditable)!=!1){if(v.caretPositionFromPoint){let I=v.caretPositionFromPoint(c,p);I&&({offsetNode:k,offset:T}=I)}else if(v.caretRangeFromPoint){let I=v.caretRangeFromPoint(c,p);I&&({startContainer:k,startOffset:T}=I)}k&&(!n.contentDOM.contains(k)||Y.safari&&FL(k,T,c)||Y.chrome&&VL(k,T,c))&&(k=void 0),k&&(T=Math.min(qn(k),T))}if(!k||!n.docView.dom.contains(k)){let I=te.find(n.docView,y);if(!I)return m>h.top+h.height/2?h.to:h.from;({node:k,offset:T}=Cf(I.dom,c,p))}let P=n.docView.nearest(k);if(!P)return null;if(P.isWidget&&((s=P.dom)===null||s===void 0?void 0:s.nodeType)==1){let I=P.dom.getBoundingClientRect();return t.y<I.top||t.y<=I.bottom&&t.x<=(I.left+I.right)/2?P.posAtStart:P.posAtEnd}else return P.localPosFromDOM(k,T)+P.posAtStart}function F0(n,t,e,i,r){let s=Math.round((i-t.left)*n.defaultCharacterWidth);if(n.lineWrapping&&e.height>n.defaultLineHeight*1.5){let a=n.viewState.heightOracle.textHeight,h=Math.floor((r-e.top-(n.defaultLineHeight-a)*.5)/a);s+=h*n.viewState.heightOracle.lineLength}let o=n.state.sliceDoc(e.from,e.to);return e.from+af(o,s,n.state.tabSize)}function zb(n,t,e){let i,r=n;if(n.nodeType!=3||t!=(i=n.nodeValue.length))return!1;for(;;){let s=r.nextSibling;if(s){if(s.nodeName=="BR")break;return!1}else{let o=r.parentNode;if(!o||o.nodeName=="DIV")break;r=o}}return wr(n,i-1,i).getBoundingClientRect().right>e}function FL(n,t,e){return zb(n,t,e)}function VL(n,t,e){if(t!=0)return zb(n,t,e);for(let r=n;;){let s=r.parentNode;if(!s||s.nodeType!=1||s.firstChild!=r)return!1;if(s.classList.contains("cm-line"))break;r=s}let i=n.nodeType==1?n.getBoundingClientRect():wr(n,0,Math.max(n.nodeValue.length,1)).getBoundingClientRect();return e-i.left>5}function kf(n,t,e){let i=n.lineBlockAt(t);if(Array.isArray(i.type)){let r;for(let s of i.type){if(s.from>t)break;if(!(s.to<t)){if(s.from<t&&s.to>t)return s;(!r||s.type==Re.Text&&(r.type!=s.type||(e<0?s.from<t:s.to>t)))&&(r=s)}}return r||i}return i}function WL(n,t,e,i){let r=kf(n,t.head,t.assoc||-1),s=!i||r.type!=Re.Text||!(n.lineWrapping||r.widgetLineBreaks)?null:n.coordsAtPos(t.assoc<0&&t.head>r.from?t.head-1:t.head);if(s){let o=n.dom.getBoundingClientRect(),a=n.textDirectionAt(r.from),h=n.posAtCoords({x:e==(a==Ft.LTR)?o.right-1:o.left+1,y:(s.top+s.bottom)/2});if(h!=null)return H.cursor(h,e?-1:1)}return H.cursor(e?r.to:r.from,e?-1:1)}function V0(n,t,e,i){let r=n.state.doc.lineAt(t.head),s=n.bidiSpans(r),o=n.textDirectionAt(r.from);for(let a=t,h=null;;){let f=AL(r,s,o,a,e),c=Ab;if(!f){if(r.number==(e?n.state.doc.lines:1))return a;c=`
`,r=n.state.doc.line(r.number+(e?1:-1)),s=n.bidiSpans(r),f=n.visualLineSide(r,!e)}if(h){if(!h(c))return a}else{if(!i)return f;h=i(c)}a=f}}function HL(n,t,e){let i=n.state.charCategorizer(t),r=i(e);return s=>{let o=i(s);return r==Wt.Space&&(r=o),r==o}}function zL(n,t,e,i){let r=t.head,s=e?1:-1;if(r==(e?n.state.doc.length:0))return H.cursor(r,t.assoc);let o=t.goalColumn,a,h=n.contentDOM.getBoundingClientRect(),f=n.coordsAtPos(r,t.assoc||-1),c=n.documentTop;if(f)o==null&&(o=f.left-h.left),a=s<0?f.top:f.bottom;else{let y=n.viewState.lineBlockAt(r);o==null&&(o=Math.min(h.right-h.left,n.defaultCharacterWidth*(r-y.from))),a=(s<0?y.top:y.bottom)+c}let p=h.left+o,m=i??n.viewState.heightOracle.textHeight>>1;for(let y=0;;y+=10){let v=a+(m+y)*s,S=Hb(n,{x:p,y:v},!1,s);if(v<h.top||v>h.bottom||(s<0?S<r:S>r)){let C=n.docView.coordsForChar(S),k=!C||v<C.top?-1:1;return H.cursor(S,k,void 0,o)}}}function co(n,t,e){for(;;){let i=0;for(let r of n)r.between(t-1,t+1,(s,o,a)=>{if(t>s&&t<o){let h=i||e||(t-s<o-t?-1:1);t=h<0?s:o,i=h}});if(!i)return t}}function Ub(n,t){let e=null;for(let i=0;i<t.ranges.length;i++){let r=t.ranges[i],s=null;if(r.empty){let o=co(n,r.from,0);o!=r.from&&(s=H.cursor(o,-1))}else{let o=co(n,r.from,-1),a=co(n,r.to,1);(o!=r.from||a!=r.to)&&(s=H.range(r.from==r.anchor?o:a,r.from==r.head?o:a))}s&&(e||(e=t.ranges.slice()),e[i]=s)}return e?H.create(e,t.mainIndex):t}function hc(n,t,e){let i=co(n.state.facet(Jo).map(r=>r(n)),e.from,t.head>e.from?-1:1);return i==e.from?e:H.cursor(i,i<e.from?1:-1)}const no="ï¿¿";class UL{constructor(t,e){this.points=t,this.text="",this.lineSeparator=e.facet(Ct.lineSeparator)}append(t){this.text+=t}lineBreak(){this.text+=no}readRange(t,e){if(!t)return this;let i=t.parentNode;for(let r=t;;){this.findPointBefore(i,r);let s=this.text.length;this.readNode(r);let o=r.nextSibling;if(o==e)break;let a=Et.get(r),h=Et.get(o);(a&&h?a.breakAfter:(a?a.breakAfter:Ka(r))||Ka(o)&&(r.nodeName!="BR"||r.cmIgnore)&&this.text.length>s)&&!jL(o,e)&&this.lineBreak(),r=o}return this.findPointBefore(i,e),this}readTextNode(t){let e=t.nodeValue;for(let i of this.points)i.node==t&&(i.pos=this.text.length+Math.min(i.offset,e.length));for(let i=0,r=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,o=1,a;if(this.lineSeparator?(s=e.indexOf(this.lineSeparator,i),o=this.lineSeparator.length):(a=r.exec(e))&&(s=a.index,o=a[0].length),this.append(e.slice(i,s<0?e.length:s)),s<0)break;if(this.lineBreak(),o>1)for(let h of this.points)h.node==t&&h.pos>this.text.length&&(h.pos-=o-1);i=s+o}}readNode(t){if(t.cmIgnore)return;let e=Et.get(t),i=e&&e.overrideDOMText;if(i!=null){this.findPointInside(t,i.length);for(let r=i.iter();!r.next().done;)r.lineBreak?this.lineBreak():this.append(r.value)}else t.nodeType==3?this.readTextNode(t):t.nodeName=="BR"?t.nextSibling&&this.lineBreak():t.nodeType==1&&this.readRange(t.firstChild,null)}findPointBefore(t,e){for(let i of this.points)i.node==t&&t.childNodes[i.offset]==e&&(i.pos=this.text.length)}findPointInside(t,e){for(let i of this.points)(t.nodeType==3?i.node==t:t.contains(i.node))&&(i.pos=this.text.length+($L(t,i.node,i.offset)?e:0))}}function $L(n,t,e){for(;;){if(!t||e<qn(t))return!1;if(t==n)return!0;e=br(t)+1,t=t.parentNode}}function jL(n,t){let e;for(;!(n==t||!n);n=n.nextSibling){let i=Et.get(n);if(!(i?.isWidget||n.cmIgnore))return!1;i&&(e||(e=[])).push(i)}if(e)for(let i of e){let r=i.overrideDOMText;if(r?.length)return!1}return!0}class W0{constructor(t,e){this.node=t,this.offset=e,this.pos=-1}}class KL{constructor(t,e,i,r){this.typeOver=r,this.bounds=null,this.text="",this.domChanged=e>-1;let{impreciseHead:s,impreciseAnchor:o}=t.docView;if(t.state.readOnly&&e>-1)this.newSel=null;else if(e>-1&&(this.bounds=t.docView.domBoundsAround(e,i,0))){let a=s||o?[]:GL(t),h=new UL(a,t.state);h.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=h.text,this.newSel=YL(a,this.bounds.from)}else{let a=t.observer.selectionRange,h=s&&s.node==a.focusNode&&s.offset==a.focusOffset||!mf(t.contentDOM,a.focusNode)?t.state.selection.main.head:t.docView.posFromDOM(a.focusNode,a.focusOffset),f=o&&o.node==a.anchorNode&&o.offset==a.anchorOffset||!mf(t.contentDOM,a.anchorNode)?t.state.selection.main.anchor:t.docView.posFromDOM(a.anchorNode,a.anchorOffset),c=t.viewport;if((Y.ios||Y.chrome)&&t.state.selection.main.empty&&h!=f&&(c.from>0||c.to<t.state.doc.length)){let p=Math.min(h,f),m=Math.max(h,f),y=c.from-p,v=c.to-m;(y==0||y==1||p==0)&&(v==0||v==-1||m==t.state.doc.length)&&(h=0,f=t.state.doc.length)}this.newSel=H.single(f,h)}}}function $b(n,t){let e,{newSel:i}=t,r=n.state.selection.main,s=n.inputState.lastKeyTime>Date.now()-100?n.inputState.lastKeyCode:-1;if(t.bounds){let{from:o,to:a}=t.bounds,h=r.from,f=null;(s===8||Y.android&&t.text.length<a-o)&&(h=r.to,f="end");let c=jb(n.state.doc.sliceString(o,a,no),t.text,h-o,f);c&&(Y.chrome&&s==13&&c.toB==c.from+2&&t.text.slice(c.from,c.toB)==no+no&&c.toB--,e={from:o+c.from,to:o+c.toA,insert:At.of(t.text.slice(c.from,c.toB).split(no))})}else i&&(!n.hasFocus&&n.state.facet(hi)||i.main.eq(r))&&(i=null);if(!e&&!i)return!1;if(!e&&t.typeOver&&!r.empty&&i&&i.main.empty?e={from:r.from,to:r.to,insert:n.state.doc.slice(r.from,r.to)}:(Y.mac||Y.android)&&e&&e.from==e.to&&e.from==r.head-1&&/^\. ?$/.test(e.insert.toString())&&n.contentDOM.getAttribute("autocorrect")=="off"?(i&&e.insert.length==2&&(i=H.single(i.main.anchor-1,i.main.head-1)),e={from:e.from,to:e.to,insert:At.of([e.insert.toString().replace("."," ")])}):e&&e.from>=r.from&&e.to<=r.to&&(e.from!=r.from||e.to!=r.to)&&r.to-r.from-(e.to-e.from)<=4?e={from:r.from,to:r.to,insert:n.state.doc.slice(r.from,e.from).append(e.insert).append(n.state.doc.slice(e.to,r.to))}:Y.chrome&&e&&e.from==e.to&&e.from==r.head&&e.insert.toString()==`
 `&&n.lineWrapping&&(i&&(i=H.single(i.main.anchor-1,i.main.head-1)),e={from:r.from,to:r.to,insert:At.of([" "])}),e)return Ld(n,e,i,s);if(i&&!i.main.eq(r)){let o=!1,a="select";return n.inputState.lastSelectionTime>Date.now()-50&&(n.inputState.lastSelectionOrigin=="select"&&(o=!0),a=n.inputState.lastSelectionOrigin,a=="select.pointer"&&(i=Ub(n.state.facet(Jo).map(h=>h(n)),i))),n.dispatch({selection:i,scrollIntoView:o,userEvent:a}),!0}else return!1}function Ld(n,t,e,i=-1){if(Y.ios&&n.inputState.flushIOSKey(t))return!0;let r=n.state.selection.main;if(Y.android&&(t.to==r.to&&(t.from==r.from||t.from==r.from-1&&n.state.sliceDoc(t.from,r.from)==" ")&&t.insert.length==1&&t.insert.lines==2&&es(n.contentDOM,"Enter",13)||(t.from==r.from-1&&t.to==r.to&&t.insert.length==0||i==8&&t.insert.length<t.to-t.from&&t.to>r.head)&&es(n.contentDOM,"Backspace",8)||t.from==r.from&&t.to==r.to+1&&t.insert.length==0&&es(n.contentDOM,"Delete",46)))return!0;let s=t.insert.toString();n.inputState.composing>=0&&n.inputState.composing++;let o,a=()=>o||(o=qL(n,t,e));return n.state.facet(Rb).some(h=>h(n,t.from,t.to,s,a))||n.dispatch(a()),!0}function qL(n,t,e){let i,r=n.state,s=r.selection.main,o=-1;if(t.from==t.to&&t.from<s.from||t.from>s.to){let h=t.from<s.from?-1:1,f=h<0?s.from:s.to,c=co(r.facet(Jo).map(p=>p(n)),f,h);t.from==c&&(o=c)}if(o>-1)i={changes:t,selection:H.cursor(t.from+t.insert.length,-1)};else if(t.from>=s.from&&t.to<=s.to&&t.to-t.from>=(s.to-s.from)/3&&(!e||e.main.empty&&e.main.from==t.from+t.insert.length)&&n.inputState.composing<0){let h=s.from<t.from?r.sliceDoc(s.from,t.from):"",f=s.to>t.to?r.sliceDoc(t.to,s.to):"";i=r.replaceSelection(n.state.toText(h+t.insert.sliceString(0,void 0,n.state.lineBreak)+f))}else{let h=r.changes(t),f=e&&e.main.to<=h.newLength?e.main:void 0;if(r.selection.ranges.length>1&&n.inputState.composing>=0&&t.to<=s.to&&t.to>=s.to-10){let c=n.state.sliceDoc(t.from,t.to),p,m=e&&Wb(n,e.main.head);if(m){let S=t.insert.length-(t.to-t.from);p={from:m.from,to:m.to-S}}else p=n.state.doc.lineAt(s.head);let y=s.to-t.to,v=s.to-s.from;i=r.changeByRange(S=>{if(S.from==s.from&&S.to==s.to)return{changes:h,range:f||S.map(h)};let C=S.to-y,k=C-c.length;if(S.to-S.from!=v||n.state.sliceDoc(k,C)!=c||S.to>=p.from&&S.from<=p.to)return{range:S};let T=r.changes({from:k,to:C,insert:t.insert}),P=S.to-s.to;return{changes:T,range:f?H.range(Math.max(0,f.anchor+P),Math.max(0,f.head+P)):S.map(T)}})}else i={changes:h,selection:f&&r.selection.replaceRange(f)}}let a="input.type";return(n.composing||n.inputState.compositionPendingChange&&n.inputState.compositionEndedAt>Date.now()-50)&&(n.inputState.compositionPendingChange=!1,a+=".compose",n.inputState.compositionFirstChange&&(a+=".start",n.inputState.compositionFirstChange=!1)),r.update(i,{userEvent:a,scrollIntoView:!0})}function jb(n,t,e,i){let r=Math.min(n.length,t.length),s=0;for(;s<r&&n.charCodeAt(s)==t.charCodeAt(s);)s++;if(s==r&&n.length==t.length)return null;let o=n.length,a=t.length;for(;o>0&&a>0&&n.charCodeAt(o-1)==t.charCodeAt(a-1);)o--,a--;if(i=="end"){let h=Math.max(0,s-Math.min(o,a));e-=o+h-s}if(o<s&&n.length<t.length){let h=e<=s&&e>=o?s-e:0;s-=h,a=s+(a-o),o=s}else if(a<s){let h=e<=s&&e>=a?s-e:0;s-=h,o=s+(o-a),a=s}return{from:s,toA:o,toB:a}}function GL(n){let t=[];if(n.root.activeElement!=n.contentDOM)return t;let{anchorNode:e,anchorOffset:i,focusNode:r,focusOffset:s}=n.observer.selectionRange;return e&&(t.push(new W0(e,i)),(r!=e||s!=i)&&t.push(new W0(r,s))),t}function YL(n,t){if(n.length==0)return null;let e=n[0].pos,i=n.length==2?n[1].pos:e;return e>-1&&i>-1?H.single(e+t,i+t):null}class XL{setSelectionOrigin(t){this.lastSelectionOrigin=t,this.lastSelectionTime=Date.now()}constructor(t){this.view=t,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=t.hasFocus,Y.safari&&t.contentDOM.addEventListener("input",()=>null),Y.gecko&&fO(t.contentDOM.ownerDocument)}handleEvent(t){!rO(this.view,t)||this.ignoreDuringComposition(t)||t.type=="keydown"&&this.keydown(t)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(t.type,t)):this.runHandlers(t.type,t))}runHandlers(t,e){let i=this.handlers[t];if(i){for(let r of i.observers)r(this.view,e);for(let r of i.handlers){if(e.defaultPrevented)break;if(r(this.view,e)){e.preventDefault();break}}}}ensureHandlers(t){let e=JL(t),i=this.handlers,r=this.view.contentDOM;for(let s in e)if(s!="scroll"){let o=!e[s].handlers.length,a=i[s];a&&o!=!a.handlers.length&&(r.removeEventListener(s,this.handleEvent),a=null),a||r.addEventListener(s,this.handleEvent,{passive:o})}for(let s in i)s!="scroll"&&!e[s]&&r.removeEventListener(s,this.handleEvent);this.handlers=e}keydown(t){if(this.lastKeyCode=t.keyCode,this.lastKeyTime=Date.now(),t.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&t.keyCode!=27&&qb.indexOf(t.keyCode)<0&&(this.tabFocusMode=-1),Y.android&&Y.chrome&&!t.synthetic&&(t.keyCode==13||t.keyCode==8))return this.view.observer.delayAndroidKey(t.key,t.keyCode),!0;let e;return Y.ios&&!t.synthetic&&!t.altKey&&!t.metaKey&&((e=Kb.find(i=>i.keyCode==t.keyCode))&&!t.ctrlKey||ZL.indexOf(t.key)>-1&&t.ctrlKey&&!t.shiftKey)?(this.pendingIOSKey=e||t,setTimeout(()=>this.flushIOSKey(),250),!0):(t.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(t){let e=this.pendingIOSKey;return!e||e.key=="Enter"&&t&&t.from<t.to&&/^\S+$/.test(t.insert.toString())?!1:(this.pendingIOSKey=void 0,es(this.view.contentDOM,e.key,e.keyCode,e instanceof KeyboardEvent?e:void 0))}ignoreDuringComposition(t){return!/^key/.test(t.type)||t.synthetic?!1:this.composing>0?!0:Y.safari&&!Y.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1}startMouseSelection(t){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=t}update(t){this.view.observer.update(t),this.mouseSelection&&this.mouseSelection.update(t),this.draggedContent&&t.docChanged&&(this.draggedContent=this.draggedContent.map(t.changes)),t.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function H0(n,t){return(e,i)=>{try{return t.call(n,i,e)}catch(r){Fe(e.state,r)}}}function JL(n){let t=Object.create(null);function e(i){return t[i]||(t[i]={observers:[],handlers:[]})}for(let i of n){let r=i.spec,s=r&&r.plugin.domEventHandlers,o=r&&r.plugin.domEventObservers;if(s)for(let a in s){let h=s[a];h&&e(a).handlers.push(H0(i.value,h))}if(o)for(let a in o){let h=o[a];h&&e(a).observers.push(H0(i.value,h))}}for(let i in Dn)e(i).handlers.push(Dn[i]);for(let i in yn)e(i).observers.push(yn[i]);return t}const Kb=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],ZL="dthko",qb=[16,17,18,20,91,92,224,225],oa=6;function la(n){return Math.max(0,n)*.7+8}function QL(n,t){return Math.max(Math.abs(n.clientX-t.clientX),Math.abs(n.clientY-t.clientY))}class tO{constructor(t,e,i,r){this.view=t,this.startEvent=e,this.style=i,this.mustSelect=r,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=e,this.scrollParents=aL(t.contentDOM),this.atoms=t.state.facet(Jo).map(o=>o(t));let s=t.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=e.shiftKey,this.multiple=t.state.facet(Ct.allowMultipleSelections)&&eO(t,e),this.dragging=iO(t,e)&&Xb(e)==1?null:!1}start(t){this.dragging===!1&&this.select(t)}move(t){if(t.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&QL(this.startEvent,t)<10)return;this.select(this.lastEvent=t);let e=0,i=0,r=0,s=0,o=this.view.win.innerWidth,a=this.view.win.innerHeight;this.scrollParents.x&&({left:r,right:o}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:s,bottom:a}=this.scrollParents.y.getBoundingClientRect());let h=Ed(this.view);t.clientX-h.left<=r+oa?e=-la(r-t.clientX):t.clientX+h.right>=o-oa&&(e=la(t.clientX-o)),t.clientY-h.top<=s+oa?i=-la(s-t.clientY):t.clientY+h.bottom>=a-oa&&(i=la(t.clientY-a)),this.setScrollSpeed(e,i)}up(t){this.dragging==null&&this.select(this.lastEvent),this.dragging||t.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let t=this.view.contentDOM.ownerDocument;t.removeEventListener("mousemove",this.move),t.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(t,e){this.scrollSpeed={x:t,y:e},t||e?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:t,y:e}=this.scrollSpeed;t&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=t,t=0),e&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=e,e=0),(t||e)&&this.view.win.scrollBy(t,e),this.dragging===!1&&this.select(this.lastEvent)}select(t){let{view:e}=this,i=Ub(this.atoms,this.style.get(t,this.extend,this.multiple));(this.mustSelect||!i.eq(e.state.selection,this.dragging===!1))&&this.view.dispatch({selection:i,userEvent:"select.pointer"}),this.mustSelect=!1}update(t){t.transactions.some(e=>e.isUserEvent("input.type"))?this.destroy():this.style.update(t)&&setTimeout(()=>this.select(this.lastEvent),20)}}function eO(n,t){let e=n.state.facet(Tb);return e.length?e[0](t):Y.mac?t.metaKey:t.ctrlKey}function nO(n,t){let e=n.state.facet(Mb);return e.length?e[0](t):Y.mac?!t.altKey:!t.ctrlKey}function iO(n,t){let{main:e}=n.state.selection;if(e.empty)return!1;let i=To(n.root);if(!i||i.rangeCount==0)return!0;let r=i.getRangeAt(0).getClientRects();for(let s=0;s<r.length;s++){let o=r[s];if(o.left<=t.clientX&&o.right>=t.clientX&&o.top<=t.clientY&&o.bottom>=t.clientY)return!0}return!1}function rO(n,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let e=t.target,i;e!=n.contentDOM;e=e.parentNode)if(!e||e.nodeType==11||(i=Et.get(e))&&i.ignoreEvent(t))return!1;return!0}const Dn=Object.create(null),yn=Object.create(null),Gb=Y.ie&&Y.ie_version<15||Y.ios&&Y.webkit_version<604;function sO(n){let t=n.dom.parentNode;if(!t)return;let e=t.appendChild(document.createElement("textarea"));e.style.cssText="position: fixed; left: -10000px; top: 10px",e.focus(),setTimeout(()=>{n.focus(),e.remove(),Yb(n,e.value)},50)}function xh(n,t,e){for(let i of n.facet(t))e=i(e,n);return e}function Yb(n,t){t=xh(n.state,Pd,t);let{state:e}=n,i,r=1,s=e.toText(t),o=s.lines==e.selection.ranges.length;if(Af!=null&&e.selection.ranges.every(h=>h.empty)&&Af==s.toString()){let h=-1;i=e.changeByRange(f=>{let c=e.doc.lineAt(f.from);if(c.from==h)return{range:f};h=c.from;let p=e.toText((o?s.line(r++).text:t)+e.lineBreak);return{changes:{from:c.from,insert:p},range:H.cursor(f.from+p.length)}})}else o?i=e.changeByRange(h=>{let f=s.line(r++);return{changes:{from:h.from,to:h.to,insert:f.text},range:H.cursor(h.from+f.length)}}):i=e.replaceSelection(s);n.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}yn.scroll=n=>{n.inputState.lastScrollTop=n.scrollDOM.scrollTop,n.inputState.lastScrollLeft=n.scrollDOM.scrollLeft};Dn.keydown=(n,t)=>(n.inputState.setSelectionOrigin("select"),t.keyCode==27&&n.inputState.tabFocusMode!=0&&(n.inputState.tabFocusMode=Date.now()+2e3),!1);yn.touchstart=(n,t)=>{n.inputState.lastTouchTime=Date.now(),n.inputState.setSelectionOrigin("select.pointer")};yn.touchmove=n=>{n.inputState.setSelectionOrigin("select.pointer")};Dn.mousedown=(n,t)=>{if(n.observer.flush(),n.inputState.lastTouchTime>Date.now()-2e3)return!1;let e=null;for(let i of n.state.facet(Pb))if(e=i(n,t),e)break;if(!e&&t.button==0&&(e=aO(n,t)),e){let i=!n.hasFocus;n.inputState.startMouseSelection(new tO(n,t,e,i)),i&&n.observer.ignore(()=>{hb(n.contentDOM);let s=n.root.activeElement;s&&!s.contains(n.contentDOM)&&s.blur()});let r=n.inputState.mouseSelection;if(r)return r.start(t),r.dragging===!1}else n.inputState.setSelectionOrigin("select.pointer");return!1};function z0(n,t,e,i){if(i==1)return H.cursor(t,e);if(i==2)return IL(n.state,t,e);{let r=te.find(n.docView,t),s=n.state.doc.lineAt(r?r.posAtEnd:t),o=r?r.posAtStart:s.from,a=r?r.posAtEnd:s.to;return a<n.state.doc.length&&a==s.to&&a++,H.range(o,a)}}let U0=(n,t,e)=>t>=e.top&&t<=e.bottom&&n>=e.left&&n<=e.right;function oO(n,t,e,i){let r=te.find(n.docView,t);if(!r)return 1;let s=t-r.posAtStart;if(s==0)return 1;if(s==r.length)return-1;let o=r.coordsAt(s,-1);if(o&&U0(e,i,o))return-1;let a=r.coordsAt(s,1);return a&&U0(e,i,a)?1:o&&o.bottom>=i?-1:1}function $0(n,t){let e=n.posAtCoords({x:t.clientX,y:t.clientY},!1);return{pos:e,bias:oO(n,e,t.clientX,t.clientY)}}const lO=Y.ie&&Y.ie_version<=11;let j0=null,K0=0,q0=0;function Xb(n){if(!lO)return n.detail;let t=j0,e=q0;return j0=n,q0=Date.now(),K0=!t||e>Date.now()-400&&Math.abs(t.clientX-n.clientX)<2&&Math.abs(t.clientY-n.clientY)<2?(K0+1)%3:1}function aO(n,t){let e=$0(n,t),i=Xb(t),r=n.state.selection;return{update(s){s.docChanged&&(e.pos=s.changes.mapPos(e.pos),r=r.map(s.changes))},get(s,o,a){let h=$0(n,s),f,c=z0(n,h.pos,h.bias,i);if(e.pos!=h.pos&&!o){let p=z0(n,e.pos,e.bias,i),m=Math.min(p.from,c.from),y=Math.max(p.to,c.to);c=m<c.from?H.range(m,y):H.range(y,m)}return o?r.replaceRange(r.main.extend(c.from,c.to)):a&&i==1&&r.ranges.length>1&&(f=hO(r,h.pos))?f:a?r.addRange(c):H.create([c])}}}function hO(n,t){for(let e=0;e<n.ranges.length;e++){let{from:i,to:r}=n.ranges[e];if(i<=t&&r>=t)return H.create(n.ranges.slice(0,e).concat(n.ranges.slice(e+1)),n.mainIndex==e?0:n.mainIndex-(n.mainIndex>e?1:0))}return null}Dn.dragstart=(n,t)=>{let{selection:{main:e}}=n.state;if(t.target.draggable){let r=n.docView.nearest(t.target);if(r&&r.isWidget){let s=r.posAtStart,o=s+r.length;(s>=e.to||o<=e.from)&&(e=H.range(s,o))}}let{inputState:i}=n;return i.mouseSelection&&(i.mouseSelection.dragging=!0),i.draggedContent=e,t.dataTransfer&&(t.dataTransfer.setData("Text",xh(n.state,Dd,n.state.sliceDoc(e.from,e.to))),t.dataTransfer.effectAllowed="copyMove"),!1};Dn.dragend=n=>(n.inputState.draggedContent=null,!1);function G0(n,t,e,i){if(e=xh(n.state,Pd,e),!e)return;let r=n.posAtCoords({x:t.clientX,y:t.clientY},!1),{draggedContent:s}=n.inputState,o=i&&s&&nO(n,t)?{from:s.from,to:s.to}:null,a={from:r,insert:e},h=n.state.changes(o?[o,a]:a);n.focus(),n.dispatch({changes:h,selection:{anchor:h.mapPos(r,-1),head:h.mapPos(r,1)},userEvent:o?"move.drop":"input.drop"}),n.inputState.draggedContent=null}Dn.drop=(n,t)=>{if(!t.dataTransfer)return!1;if(n.state.readOnly)return!0;let e=t.dataTransfer.files;if(e&&e.length){let i=Array(e.length),r=0,s=()=>{++r==e.length&&G0(n,t,i.filter(o=>o!=null).join(n.state.lineBreak),!1)};for(let o=0;o<e.length;o++){let a=new FileReader;a.onerror=s,a.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(a.result)||(i[o]=a.result),s()},a.readAsText(e[o])}return!0}else{let i=t.dataTransfer.getData("Text");if(i)return G0(n,t,i,!0),!0}return!1};Dn.paste=(n,t)=>{if(n.state.readOnly)return!0;n.observer.flush();let e=Gb?null:t.clipboardData;return e?(Yb(n,e.getData("text/plain")||e.getData("text/uri-list")),!0):(sO(n),!1)};function uO(n,t){let e=n.dom.parentNode;if(!e)return;let i=e.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=t,i.focus(),i.selectionEnd=t.length,i.selectionStart=0,setTimeout(()=>{i.remove(),n.focus()},50)}function cO(n){let t=[],e=[],i=!1;for(let r of n.selection.ranges)r.empty||(t.push(n.sliceDoc(r.from,r.to)),e.push(r));if(!t.length){let r=-1;for(let{from:s}of n.selection.ranges){let o=n.doc.lineAt(s);o.number>r&&(t.push(o.text),e.push({from:o.from,to:Math.min(n.doc.length,o.to+1)})),r=o.number}i=!0}return{text:xh(n,Dd,t.join(n.lineBreak)),ranges:e,linewise:i}}let Af=null;Dn.copy=Dn.cut=(n,t)=>{let{text:e,ranges:i,linewise:r}=cO(n.state);if(!e&&!r)return!1;Af=r?e:null,t.type=="cut"&&!n.state.readOnly&&n.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"});let s=Gb?null:t.clipboardData;return s?(s.clearData(),s.setData("text/plain",e),!0):(uO(n,e),!1)};const Jb=Yn.define();function Zb(n,t){let e=[];for(let i of n.facet(Eb)){let r=i(n,t);r&&e.push(r)}return e.length?n.update({effects:e,annotations:Jb.of(!0)}):null}function Qb(n){setTimeout(()=>{let t=n.hasFocus;if(t!=n.inputState.notifiedFocused){let e=Zb(n.state,t);e?n.dispatch(e):n.update([])}},10)}yn.focus=n=>{n.inputState.lastFocusTime=Date.now(),!n.scrollDOM.scrollTop&&(n.inputState.lastScrollTop||n.inputState.lastScrollLeft)&&(n.scrollDOM.scrollTop=n.inputState.lastScrollTop,n.scrollDOM.scrollLeft=n.inputState.lastScrollLeft),Qb(n)};yn.blur=n=>{n.observer.clearSelectionRange(),Qb(n)};yn.compositionstart=yn.compositionupdate=n=>{n.observer.editContext||(n.inputState.compositionFirstChange==null&&(n.inputState.compositionFirstChange=!0),n.inputState.composing<0&&(n.inputState.composing=0))};yn.compositionend=n=>{n.observer.editContext||(n.inputState.composing=-1,n.inputState.compositionEndedAt=Date.now(),n.inputState.compositionPendingKey=!0,n.inputState.compositionPendingChange=n.observer.pendingRecords().length>0,n.inputState.compositionFirstChange=null,Y.chrome&&Y.android?n.observer.flushSoon():n.inputState.compositionPendingChange?Promise.resolve().then(()=>n.observer.flush()):setTimeout(()=>{n.inputState.composing<0&&n.docView.hasComposition&&n.update([])},50))};yn.contextmenu=n=>{n.inputState.lastContextMenu=Date.now()};Dn.beforeinput=(n,t)=>{var e,i;if(t.inputType=="insertReplacementText"&&n.observer.editContext){let s=(e=t.dataTransfer)===null||e===void 0?void 0:e.getData("text/plain"),o=t.getTargetRanges();if(s&&o.length){let a=o[0],h=n.posAtDOM(a.startContainer,a.startOffset),f=n.posAtDOM(a.endContainer,a.endOffset);return Ld(n,{from:h,to:f,insert:n.state.toText(s)},null),!0}}let r;if(Y.chrome&&Y.android&&(r=Kb.find(s=>s.inputType==t.inputType))&&(n.observer.delayAndroidKey(r.key,r.keyCode),r.key=="Backspace"||r.key=="Delete")){let s=((i=window.visualViewport)===null||i===void 0?void 0:i.height)||0;setTimeout(()=>{var o;(((o=window.visualViewport)===null||o===void 0?void 0:o.height)||0)>s+10&&n.hasFocus&&(n.contentDOM.blur(),n.focus())},100)}return Y.ios&&t.inputType=="deleteContentForward"&&n.observer.flushSoon(),Y.safari&&t.inputType=="insertText"&&n.inputState.composing>=0&&setTimeout(()=>yn.compositionend(n,t),20),!1};const Y0=new Set;function fO(n){Y0.has(n)||(Y0.add(n),n.addEventListener("copy",()=>{}),n.addEventListener("cut",()=>{}))}const X0=["pre-wrap","normal","pre-line","break-spaces"];let us=!1;function J0(){us=!1}class dO{constructor(t){this.lineWrapping=t,this.doc=At.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(t,e){let i=this.doc.lineAt(e).number-this.doc.lineAt(t).number+1;return this.lineWrapping&&(i+=Math.max(0,Math.ceil((e-t-i*this.lineLength*.5)/this.lineLength))),this.lineHeight*i}heightForLine(t){return this.lineWrapping?(1+Math.max(0,Math.ceil((t-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(t){return this.doc=t,this}mustRefreshForWrapping(t){return X0.indexOf(t)>-1!=this.lineWrapping}mustRefreshForHeights(t){let e=!1;for(let i=0;i<t.length;i++){let r=t[i];r<0?i++:this.heightSamples[Math.floor(r*10)]||(e=!0,this.heightSamples[Math.floor(r*10)]=!0)}return e}refresh(t,e,i,r,s,o){let a=X0.indexOf(t)>-1,h=Math.round(e)!=Math.round(this.lineHeight)||this.lineWrapping!=a;if(this.lineWrapping=a,this.lineHeight=e,this.charWidth=i,this.textHeight=r,this.lineLength=s,h){this.heightSamples={};for(let f=0;f<o.length;f++){let c=o[f];c<0?f++:this.heightSamples[Math.floor(c*10)]=!0}}return h}}class pO{constructor(t,e){this.from=t,this.heights=e,this.index=0}get more(){return this.index<this.heights.length}}class Hn{constructor(t,e,i,r,s){this.from=t,this.length=e,this.top=i,this.height=r,this._content=s}get type(){return typeof this._content=="number"?Re.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof Hi?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(t){let e=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(t._content)?t._content:[t]);return new Hn(this.from,this.length+t.length,this.top,this.height+t.height,e)}}var Nt=(function(n){return n[n.ByPos=0]="ByPos",n[n.ByHeight=1]="ByHeight",n[n.ByPosNoHeight=2]="ByPosNoHeight",n})(Nt||(Nt={}));const Oa=.001;class Ee{constructor(t,e,i=2){this.length=t,this.height=e,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(t){this.flags=(t?2:0)|this.flags&-3}setHeight(t){this.height!=t&&(Math.abs(this.height-t)>Oa&&(us=!0),this.height=t)}replace(t,e,i){return Ee.of(i)}decomposeLeft(t,e){e.push(this)}decomposeRight(t,e){e.push(this)}applyChanges(t,e,i,r){let s=this,o=i.doc;for(let a=r.length-1;a>=0;a--){let{fromA:h,toA:f,fromB:c,toB:p}=r[a],m=s.lineAt(h,Nt.ByPosNoHeight,i.setDoc(e),0,0),y=m.to>=f?m:s.lineAt(f,Nt.ByPosNoHeight,i,0,0);for(p+=y.to-f,f=y.to;a>0&&m.from<=r[a-1].toA;)h=r[a-1].fromA,c=r[a-1].fromB,a--,h<m.from&&(m=s.lineAt(h,Nt.ByPosNoHeight,i,0,0));c+=m.from-h,h=m.from;let v=Od.build(i.setDoc(o),t,c,p);s=Ya(s,s.replace(h,f,v))}return s.updateHeight(i,0)}static empty(){return new Xe(0,0)}static of(t){if(t.length==1)return t[0];let e=0,i=t.length,r=0,s=0;for(;;)if(e==i)if(r>s*2){let a=t[e-1];a.break?t.splice(--e,1,a.left,null,a.right):t.splice(--e,1,a.left,a.right),i+=1+a.break,r-=a.size}else if(s>r*2){let a=t[i];a.break?t.splice(i,1,a.left,null,a.right):t.splice(i,1,a.left,a.right),i+=2+a.break,s-=a.size}else break;else if(r<s){let a=t[e++];a&&(r+=a.size)}else{let a=t[--i];a&&(s+=a.size)}let o=0;return t[e-1]==null?(o=1,e--):t[e]==null&&(o=1,i++),new mO(Ee.of(t.slice(0,e)),o,Ee.of(t.slice(i)))}}function Ya(n,t){return n==t?n:(n.constructor!=t.constructor&&(us=!0),t)}Ee.prototype.size=1;class t1 extends Ee{constructor(t,e,i){super(t,e),this.deco=i}blockAt(t,e,i,r){return new Hn(r,this.length,i,this.height,this.deco||0)}lineAt(t,e,i,r,s){return this.blockAt(0,i,r,s)}forEachLine(t,e,i,r,s,o){t<=s+this.length&&e>=s&&o(this.blockAt(0,i,r,s))}updateHeight(t,e=0,i=!1,r){return r&&r.from<=e&&r.more&&this.setHeight(r.heights[r.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Xe extends t1{constructor(t,e){super(t,e,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(t,e,i,r){return new Hn(r,this.length,i,this.height,this.breaks)}replace(t,e,i){let r=i[0];return i.length==1&&(r instanceof Xe||r instanceof fe&&r.flags&4)&&Math.abs(this.length-r.length)<10?(r instanceof fe?r=new Xe(r.length,this.height):r.height=this.height,this.outdated||(r.outdated=!1),r):Ee.of(i)}updateHeight(t,e=0,i=!1,r){return r&&r.from<=e&&r.more?this.setHeight(r.heights[r.index++]):(i||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,t.heightForLine(this.length-this.collapsed))+this.breaks*t.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class fe extends Ee{constructor(t){super(t,0)}heightMetrics(t,e){let i=t.doc.lineAt(e).number,r=t.doc.lineAt(e+this.length).number,s=r-i+1,o,a=0;if(t.lineWrapping){let h=Math.min(this.height,t.lineHeight*s);o=h/s,this.length>s+1&&(a=(this.height-h)/(this.length-s-1))}else o=this.height/s;return{firstLine:i,lastLine:r,perLine:o,perChar:a}}blockAt(t,e,i,r){let{firstLine:s,lastLine:o,perLine:a,perChar:h}=this.heightMetrics(e,r);if(e.lineWrapping){let f=r+(t<e.lineHeight?0:Math.round(Math.max(0,Math.min(1,(t-i)/this.height))*this.length)),c=e.doc.lineAt(f),p=a+c.length*h,m=Math.max(i,t-p/2);return new Hn(c.from,c.length,m,p,0)}else{let f=Math.max(0,Math.min(o-s,Math.floor((t-i)/a))),{from:c,length:p}=e.doc.line(s+f);return new Hn(c,p,i+a*f,a,0)}}lineAt(t,e,i,r,s){if(e==Nt.ByHeight)return this.blockAt(t,i,r,s);if(e==Nt.ByPosNoHeight){let{from:y,to:v}=i.doc.lineAt(t);return new Hn(y,v-y,0,0,0)}let{firstLine:o,perLine:a,perChar:h}=this.heightMetrics(i,s),f=i.doc.lineAt(t),c=a+f.length*h,p=f.number-o,m=r+a*p+h*(f.from-s-p);return new Hn(f.from,f.length,Math.max(r,Math.min(m,r+this.height-c)),c,0)}forEachLine(t,e,i,r,s,o){t=Math.max(t,s),e=Math.min(e,s+this.length);let{firstLine:a,perLine:h,perChar:f}=this.heightMetrics(i,s);for(let c=t,p=r;c<=e;){let m=i.doc.lineAt(c);if(c==t){let v=m.number-a;p+=h*v+f*(t-s-v)}let y=h+f*m.length;o(new Hn(m.from,m.length,p,y,0)),p+=y,c=m.to+1}}replace(t,e,i){let r=this.length-e;if(r>0){let s=i[i.length-1];s instanceof fe?i[i.length-1]=new fe(s.length+r):i.push(null,new fe(r-1))}if(t>0){let s=i[0];s instanceof fe?i[0]=new fe(t+s.length):i.unshift(new fe(t-1),null)}return Ee.of(i)}decomposeLeft(t,e){e.push(new fe(t-1),null)}decomposeRight(t,e){e.push(null,new fe(this.length-t-1))}updateHeight(t,e=0,i=!1,r){let s=e+this.length;if(r&&r.from<=e+this.length&&r.more){let o=[],a=Math.max(e,r.from),h=-1;for(r.from>e&&o.push(new fe(r.from-e-1).updateHeight(t,e));a<=s&&r.more;){let c=t.doc.lineAt(a).length;o.length&&o.push(null);let p=r.heights[r.index++];h==-1?h=p:Math.abs(p-h)>=Oa&&(h=-2);let m=new Xe(c,p);m.outdated=!1,o.push(m),a+=c+1}a<=s&&o.push(null,new fe(s-a).updateHeight(t,a));let f=Ee.of(o);return(h<0||Math.abs(f.height-this.height)>=Oa||Math.abs(h-this.heightMetrics(t,e).perLine)>=Oa)&&(us=!0),Ya(this,f)}else(i||this.outdated)&&(this.setHeight(t.heightForGap(e,e+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class mO extends Ee{constructor(t,e,i){super(t.length+e+i.length,t.height+i.height,e|(t.outdated||i.outdated?2:0)),this.left=t,this.right=i,this.size=t.size+i.size}get break(){return this.flags&1}blockAt(t,e,i,r){let s=i+this.left.height;return t<s?this.left.blockAt(t,e,i,r):this.right.blockAt(t,e,s,r+this.left.length+this.break)}lineAt(t,e,i,r,s){let o=r+this.left.height,a=s+this.left.length+this.break,h=e==Nt.ByHeight?t<o:t<a,f=h?this.left.lineAt(t,e,i,r,s):this.right.lineAt(t,e,i,o,a);if(this.break||(h?f.to<a:f.from>a))return f;let c=e==Nt.ByPosNoHeight?Nt.ByPosNoHeight:Nt.ByPos;return h?f.join(this.right.lineAt(a,c,i,o,a)):this.left.lineAt(a,c,i,r,s).join(f)}forEachLine(t,e,i,r,s,o){let a=r+this.left.height,h=s+this.left.length+this.break;if(this.break)t<h&&this.left.forEachLine(t,e,i,r,s,o),e>=h&&this.right.forEachLine(t,e,i,a,h,o);else{let f=this.lineAt(h,Nt.ByPos,i,r,s);t<f.from&&this.left.forEachLine(t,f.from-1,i,r,s,o),f.to>=t&&f.from<=e&&o(f),e>f.to&&this.right.forEachLine(f.to+1,e,i,a,h,o)}}replace(t,e,i){let r=this.left.length+this.break;if(e<r)return this.balanced(this.left.replace(t,e,i),this.right);if(t>this.left.length)return this.balanced(this.left,this.right.replace(t-r,e-r,i));let s=[];t>0&&this.decomposeLeft(t,s);let o=s.length;for(let a of i)s.push(a);if(t>0&&Z0(s,o-1),e<this.length){let a=s.length;this.decomposeRight(e,s),Z0(s,a)}return Ee.of(s)}decomposeLeft(t,e){let i=this.left.length;if(t<=i)return this.left.decomposeLeft(t,e);e.push(this.left),this.break&&(i++,t>=i&&e.push(null)),t>i&&this.right.decomposeLeft(t-i,e)}decomposeRight(t,e){let i=this.left.length,r=i+this.break;if(t>=r)return this.right.decomposeRight(t-r,e);t<i&&this.left.decomposeRight(t,e),this.break&&t<r&&e.push(null),e.push(this.right)}balanced(t,e){return t.size>2*e.size||e.size>2*t.size?Ee.of(this.break?[t,null,e]:[t,e]):(this.left=Ya(this.left,t),this.right=Ya(this.right,e),this.setHeight(t.height+e.height),this.outdated=t.outdated||e.outdated,this.size=t.size+e.size,this.length=t.length+this.break+e.length,this)}updateHeight(t,e=0,i=!1,r){let{left:s,right:o}=this,a=e+s.length+this.break,h=null;return r&&r.from<=e+s.length&&r.more?h=s=s.updateHeight(t,e,i,r):s.updateHeight(t,e,i),r&&r.from<=a+o.length&&r.more?h=o=o.updateHeight(t,a,i,r):o.updateHeight(t,a,i),h?this.balanced(s,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function Z0(n,t){let e,i;n[t]==null&&(e=n[t-1])instanceof fe&&(i=n[t+1])instanceof fe&&n.splice(t-1,3,new fe(e.length+1+i.length))}const gO=5;class Od{constructor(t,e){this.pos=t,this.oracle=e,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=t}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(t,e){if(this.lineStart>-1){let i=Math.min(e,this.lineEnd),r=this.nodes[this.nodes.length-1];r instanceof Xe?r.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new Xe(i-this.pos,-1)),this.writtenTo=i,e>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=e}point(t,e,i){if(t<e||i.heightRelevant){let r=i.widget?i.widget.estimatedHeight:0,s=i.widget?i.widget.lineBreaks:0;r<0&&(r=this.oracle.lineHeight);let o=e-t;i.block?this.addBlock(new t1(o,r,i)):(o||s||r>=gO)&&this.addLineDeco(r,s,o)}else e>t&&this.span(t,e);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:t,to:e}=this.oracle.doc.lineAt(this.pos);this.lineStart=t,this.lineEnd=e,this.writtenTo<t&&((this.writtenTo<t-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,t-1)),this.nodes.push(null)),this.pos>t&&this.nodes.push(new Xe(this.pos-t,-1)),this.writtenTo=this.pos}blankContent(t,e){let i=new fe(e-t);return this.oracle.doc.lineAt(t).to==e&&(i.flags|=4),i}ensureLine(){this.enterLine();let t=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(t instanceof Xe)return t;let e=new Xe(0,-1);return this.nodes.push(e),e}addBlock(t){this.enterLine();let e=t.deco;e&&e.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(t),this.writtenTo=this.pos=this.pos+t.length,e&&e.endSide>0&&(this.covering=t)}addLineDeco(t,e,i){let r=this.ensureLine();r.length+=i,r.collapsed+=i,r.widgetHeight=Math.max(r.widgetHeight,t),r.breaks+=e,this.writtenTo=this.pos=this.pos+i}finish(t){let e=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(e instanceof Xe)&&!this.isCovered?this.nodes.push(new Xe(0,-1)):(this.writtenTo<this.pos||e==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=t;for(let r of this.nodes)r instanceof Xe&&r.updateHeight(this.oracle,i),i+=r?r.length:1;return this.nodes}static build(t,e,i,r){let s=new Od(i,t);return kt.spans(e,i,r,s,0),s.finish(i)}}function yO(n,t,e){let i=new xO;return kt.compare(n,t,e,i,0),i.changes}class xO{constructor(){this.changes=[]}compareRange(){}comparePoint(t,e,i,r){(t<e||i&&i.heightRelevant||r&&r.heightRelevant)&&La(t,e,this.changes,5)}}function vO(n,t){let e=n.getBoundingClientRect(),i=n.ownerDocument,r=i.defaultView||window,s=Math.max(0,e.left),o=Math.min(r.innerWidth,e.right),a=Math.max(0,e.top),h=Math.min(r.innerHeight,e.bottom);for(let f=n.parentNode;f&&f!=i.body;)if(f.nodeType==1){let c=f,p=window.getComputedStyle(c);if((c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth)&&p.overflow!="visible"){let m=c.getBoundingClientRect();s=Math.max(s,m.left),o=Math.min(o,m.right),a=Math.max(a,m.top),h=Math.min(f==n.parentNode?r.innerHeight:h,m.bottom)}f=p.position=="absolute"||p.position=="fixed"?c.offsetParent:c.parentNode}else if(f.nodeType==11)f=f.host;else break;return{left:s-e.left,right:Math.max(s,o)-e.left,top:a-(e.top+t),bottom:Math.max(a,h)-(e.top+t)}}function bO(n){let t=n.getBoundingClientRect(),e=n.ownerDocument.defaultView||window;return t.left<e.innerWidth&&t.right>0&&t.top<e.innerHeight&&t.bottom>0}function wO(n,t){let e=n.getBoundingClientRect();return{left:0,right:e.right-e.left,top:t,bottom:e.bottom-(e.top+t)}}class uc{constructor(t,e,i,r){this.from=t,this.to=e,this.size=i,this.displaySize=r}static same(t,e){if(t.length!=e.length)return!1;for(let i=0;i<t.length;i++){let r=t[i],s=e[i];if(r.from!=s.from||r.to!=s.to||r.size!=s.size)return!1}return!0}draw(t,e){return nt.replace({widget:new SO(this.displaySize*(e?t.scaleY:t.scaleX),e)}).range(this.from,this.to)}}class SO extends vi{constructor(t,e){super(),this.size=t,this.vertical=e}eq(t){return t.size==this.size&&t.vertical==this.vertical}toDOM(){let t=document.createElement("div");return this.vertical?t.style.height=this.size+"px":(t.style.width=this.size+"px",t.style.height="2px",t.style.display="inline-block"),t}get estimatedHeight(){return this.vertical?this.size:-1}}class Q0{constructor(t){this.state=t,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=ty,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Ft.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let e=t.facet(Rd).some(i=>typeof i!="function"&&i.class=="cm-lineWrapping");this.heightOracle=new dO(e),this.stateDeco=t.facet(Mo).filter(i=>typeof i!="function"),this.heightMap=Ee.empty().applyChanges(this.stateDeco,At.empty,this.heightOracle.setDoc(t.doc),[new mn(0,0,0,t.doc.length)]);for(let i=0;i<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());i++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=nt.set(this.lineGaps.map(i=>i.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let t=[this.viewport],{main:e}=this.state.selection;for(let i=0;i<=1;i++){let r=i?e.head:e.anchor;if(!t.some(({from:s,to:o})=>r>=s&&r<=o)){let{from:s,to:o}=this.lineBlockAt(r);t.push(new aa(s,o))}}return this.viewports=t.sort((i,r)=>i.from-r.from),this.updateScaler()}updateScaler(){let t=this.scaler;return this.scaler=this.heightMap.height<=7e6?ty:new Bd(this.heightOracle,this.heightMap,this.viewports),t.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,t=>{this.viewportLines.push(io(t,this.scaler))})}update(t,e=null){this.state=t.state;let i=this.stateDeco;this.stateDeco=this.state.facet(Mo).filter(c=>typeof c!="function");let r=t.changedRanges,s=mn.extendWithRanges(r,yO(i,this.stateDeco,t?t.changes:re.empty(this.state.doc.length))),o=this.heightMap.height,a=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);J0(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,t.startState.doc,this.heightOracle.setDoc(this.state.doc),s),(this.heightMap.height!=o||us)&&(t.flags|=2),a?(this.scrollAnchorPos=t.changes.mapPos(a.from,-1),this.scrollAnchorHeight=a.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=o);let h=s.length?this.mapViewport(this.viewport,t.changes):this.viewport;(e&&(e.range.head<h.from||e.range.head>h.to)||!this.viewportIsAppropriate(h))&&(h=this.getViewport(0,e));let f=h.from!=this.viewport.from||h.to!=this.viewport.to;this.viewport=h,t.flags|=this.updateForViewport(),(f||!t.changes.empty||t.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,t.changes))),t.flags|=this.computeVisibleRanges(t.changes),e&&(this.scrollTarget=e),!this.mustEnforceCursorAssoc&&t.selectionSet&&t.view.lineWrapping&&t.state.selection.main.empty&&t.state.selection.main.assoc&&!t.state.facet(Ob)&&(this.mustEnforceCursorAssoc=!0)}measure(t){let e=t.contentDOM,i=window.getComputedStyle(e),r=this.heightOracle,s=i.whiteSpace;this.defaultTextDirection=i.direction=="rtl"?Ft.RTL:Ft.LTR;let o=this.heightOracle.mustRefreshForWrapping(s),a=e.getBoundingClientRect(),h=o||this.mustMeasureContent||this.contentDOMHeight!=a.height;this.contentDOMHeight=a.height,this.mustMeasureContent=!1;let f=0,c=0;if(a.width&&a.height){let{scaleX:I,scaleY:L}=ab(e,a);(I>.005&&Math.abs(this.scaleX-I)>.005||L>.005&&Math.abs(this.scaleY-L)>.005)&&(this.scaleX=I,this.scaleY=L,f|=16,o=h=!0)}let p=(parseInt(i.paddingTop)||0)*this.scaleY,m=(parseInt(i.paddingBottom)||0)*this.scaleY;(this.paddingTop!=p||this.paddingBottom!=m)&&(this.paddingTop=p,this.paddingBottom=m,f|=18),this.editorWidth!=t.scrollDOM.clientWidth&&(r.lineWrapping&&(h=!0),this.editorWidth=t.scrollDOM.clientWidth,f|=16);let y=t.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=y&&(this.scrollAnchorHeight=-1,this.scrollTop=y),this.scrolledToBottom=cb(t.scrollDOM);let v=(this.printing?wO:vO)(e,this.paddingTop),S=v.top-this.pixelViewport.top,C=v.bottom-this.pixelViewport.bottom;this.pixelViewport=v;let k=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(k!=this.inView&&(this.inView=k,k&&(h=!0)),!this.inView&&!this.scrollTarget&&!bO(t.dom))return 0;let T=a.width;if((this.contentDOMWidth!=T||this.editorHeight!=t.scrollDOM.clientHeight)&&(this.contentDOMWidth=a.width,this.editorHeight=t.scrollDOM.clientHeight,f|=16),h){let I=t.docView.measureVisibleLineHeights(this.viewport);if(r.mustRefreshForHeights(I)&&(o=!0),o||r.lineWrapping&&Math.abs(T-this.contentDOMWidth)>r.charWidth){let{lineHeight:L,charWidth:_,textHeight:F}=t.docView.measureTextSize();o=L>0&&r.refresh(s,L,_,F,Math.max(5,T/_),I),o&&(t.docView.minWidth=0,f|=16)}S>0&&C>0?c=Math.max(S,C):S<0&&C<0&&(c=Math.min(S,C)),J0();for(let L of this.viewports){let _=L.from==this.viewport.from?I:t.docView.measureVisibleLineHeights(L);this.heightMap=(o?Ee.empty().applyChanges(this.stateDeco,At.empty,this.heightOracle,[new mn(0,0,0,t.state.doc.length)]):this.heightMap).updateHeight(r,0,o,new pO(L.from,_))}us&&(f|=2)}let P=!this.viewportIsAppropriate(this.viewport,c)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return P&&(f&2&&(f|=this.updateScaler()),this.viewport=this.getViewport(c,this.scrollTarget),f|=this.updateForViewport()),(f&2||P)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,t)),f|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,t.docView.enforceCursorAssoc()),f}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(t,e){let i=.5-Math.max(-.5,Math.min(.5,t/1e3/2)),r=this.heightMap,s=this.heightOracle,{visibleTop:o,visibleBottom:a}=this,h=new aa(r.lineAt(o-i*1e3,Nt.ByHeight,s,0,0).from,r.lineAt(a+(1-i)*1e3,Nt.ByHeight,s,0,0).to);if(e){let{head:f}=e.range;if(f<h.from||f>h.to){let c=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),p=r.lineAt(f,Nt.ByPos,s,0,0),m;e.y=="center"?m=(p.top+p.bottom)/2-c/2:e.y=="start"||e.y=="nearest"&&f<h.from?m=p.top:m=p.bottom-c,h=new aa(r.lineAt(m-1e3/2,Nt.ByHeight,s,0,0).from,r.lineAt(m+c+1e3/2,Nt.ByHeight,s,0,0).to)}}return h}mapViewport(t,e){let i=e.mapPos(t.from,-1),r=e.mapPos(t.to,1);return new aa(this.heightMap.lineAt(i,Nt.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(r,Nt.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:t,to:e},i=0){if(!this.inView)return!0;let{top:r}=this.heightMap.lineAt(t,Nt.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(e,Nt.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:a}=this;return(t==0||r<=o-Math.max(10,Math.min(-i,250)))&&(e==this.state.doc.length||s>=a+Math.max(10,Math.min(i,250)))&&r>o-2*1e3&&s<a+2*1e3}mapLineGaps(t,e){if(!t.length||e.empty)return t;let i=[];for(let r of t)e.touchesRange(r.from,r.to)||i.push(new uc(e.mapPos(r.from),e.mapPos(r.to),r.size,r.displaySize));return i}ensureLineGaps(t,e){let i=this.heightOracle.lineWrapping,r=i?1e4:2e3,s=r>>1,o=r<<1;if(this.defaultTextDirection!=Ft.LTR&&!i)return[];let a=[],h=(c,p,m,y)=>{if(p-c<s)return;let v=this.state.selection.main,S=[v.from];v.empty||S.push(v.to);for(let k of S)if(k>c&&k<p){h(c,k-10,m,y),h(k+10,p,m,y);return}let C=kO(t,k=>k.from>=m.from&&k.to<=m.to&&Math.abs(k.from-c)<s&&Math.abs(k.to-p)<s&&!S.some(T=>k.from<T&&k.to>T));if(!C){if(p<m.to&&e&&i&&e.visibleRanges.some(P=>P.from<=p&&P.to>=p)){let P=e.moveToLineBoundary(H.cursor(p),!1,!0).head;P>c&&(p=P)}let k=this.gapSize(m,c,p,y),T=i||k<2e6?k:2e6;C=new uc(c,p,k,T)}a.push(C)},f=c=>{if(c.length<o||c.type!=Re.Text)return;let p=CO(c.from,c.to,this.stateDeco);if(p.total<o)return;let m=this.scrollTarget?this.scrollTarget.range.head:null,y,v;if(i){let S=r/this.heightOracle.lineLength*this.heightOracle.lineHeight,C,k;if(m!=null){let T=ua(p,m),P=((this.visibleBottom-this.visibleTop)/2+S)/c.height;C=T-P,k=T+P}else C=(this.visibleTop-c.top-S)/c.height,k=(this.visibleBottom-c.top+S)/c.height;y=ha(p,C),v=ha(p,k)}else{let S=p.total*this.heightOracle.charWidth,C=r*this.heightOracle.charWidth,k=0;if(S>2e6)for(let _ of t)_.from>=c.from&&_.from<c.to&&_.size!=_.displaySize&&_.from*this.heightOracle.charWidth+k<this.pixelViewport.left&&(k=_.size-_.displaySize);let T=this.pixelViewport.left+k,P=this.pixelViewport.right+k,I,L;if(m!=null){let _=ua(p,m),F=((P-T)/2+C)/S;I=_-F,L=_+F}else I=(T-C)/S,L=(P+C)/S;y=ha(p,I),v=ha(p,L)}y>c.from&&h(c.from,y,c,p),v<c.to&&h(v,c.to,c,p)};for(let c of this.viewportLines)Array.isArray(c.type)?c.type.forEach(f):f(c);return a}gapSize(t,e,i,r){let s=ua(r,i)-ua(r,e);return this.heightOracle.lineWrapping?t.height*s:r.total*this.heightOracle.charWidth*s}updateLineGaps(t){uc.same(t,this.lineGaps)||(this.lineGaps=t,this.lineGapDeco=nt.set(t.map(e=>e.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(t){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let i=[];kt.spans(e,this.viewport.from,this.viewport.to,{span(s,o){i.push({from:s,to:o})},point(){}},20);let r=0;if(i.length!=this.visibleRanges.length)r=12;else for(let s=0;s<i.length&&!(r&8);s++){let o=this.visibleRanges[s],a=i[s];(o.from!=a.from||o.to!=a.to)&&(r|=4,t&&t.mapPos(o.from,-1)==a.from&&t.mapPos(o.to,1)==a.to||(r|=8))}return this.visibleRanges=i,r}lineBlockAt(t){return t>=this.viewport.from&&t<=this.viewport.to&&this.viewportLines.find(e=>e.from<=t&&e.to>=t)||io(this.heightMap.lineAt(t,Nt.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(t){return t>=this.viewportLines[0].top&&t<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(e=>e.top<=t&&e.bottom>=t)||io(this.heightMap.lineAt(this.scaler.fromDOM(t),Nt.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(t){let e=this.lineBlockAtHeight(t+8);return e.from>=this.viewport.from||this.viewportLines[0].top-t>200?e:this.viewportLines[0]}elementAtHeight(t){return io(this.heightMap.blockAt(this.scaler.fromDOM(t),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class aa{constructor(t,e){this.from=t,this.to=e}}function CO(n,t,e){let i=[],r=n,s=0;return kt.spans(e,n,t,{span(){},point(o,a){o>r&&(i.push({from:r,to:o}),s+=o-r),r=a}},20),r<t&&(i.push({from:r,to:t}),s+=t-r),{total:s,ranges:i}}function ha({total:n,ranges:t},e){if(e<=0)return t[0].from;if(e>=1)return t[t.length-1].to;let i=Math.floor(n*e);for(let r=0;;r++){let{from:s,to:o}=t[r],a=o-s;if(i<=a)return s+i;i-=a}}function ua(n,t){let e=0;for(let{from:i,to:r}of n.ranges){if(t<=r){e+=t-i;break}e+=r-i}return e/n.total}function kO(n,t){for(let e of n)if(t(e))return e}const ty={toDOM(n){return n},fromDOM(n){return n},scale:1,eq(n){return n==this}};class Bd{constructor(t,e,i){let r=0,s=0,o=0;this.viewports=i.map(({from:a,to:h})=>{let f=e.lineAt(a,Nt.ByPos,t,0,0).top,c=e.lineAt(h,Nt.ByPos,t,0,0).bottom;return r+=c-f,{from:a,to:h,top:f,bottom:c,domTop:0,domBottom:0}}),this.scale=(7e6-r)/(e.height-r);for(let a of this.viewports)a.domTop=o+(a.top-s)*this.scale,o=a.domBottom=a.domTop+(a.bottom-a.top),s=a.bottom}toDOM(t){for(let e=0,i=0,r=0;;e++){let s=e<this.viewports.length?this.viewports[e]:null;if(!s||t<s.top)return r+(t-i)*this.scale;if(t<=s.bottom)return s.domTop+(t-s.top);i=s.bottom,r=s.domBottom}}fromDOM(t){for(let e=0,i=0,r=0;;e++){let s=e<this.viewports.length?this.viewports[e]:null;if(!s||t<s.domTop)return i+(t-r)/this.scale;if(t<=s.domBottom)return s.top+(t-s.domTop);i=s.bottom,r=s.domBottom}}eq(t){return t instanceof Bd?this.scale==t.scale&&this.viewports.length==t.viewports.length&&this.viewports.every((e,i)=>e.from==t.viewports[i].from&&e.to==t.viewports[i].to):!1}}function io(n,t){if(t.scale==1)return n;let e=t.toDOM(n.top),i=t.toDOM(n.bottom);return new Hn(n.from,n.length,e,i-e,Array.isArray(n._content)?n._content.map(r=>io(r,t)):n._content)}const ca=X.define({combine:n=>n.join(" ")}),Tf=X.define({combine:n=>n.indexOf(!0)>-1}),Mf=Vi.newName(),e1=Vi.newName(),n1=Vi.newName(),i1={"&light":"."+e1,"&dark":"."+n1};function Pf(n,t,e){return new Vi(t,{finish(i){return/&/.test(i)?i.replace(/&\w*/,r=>{if(r=="&")return n;if(!e||!e[r])throw new RangeError(`Unsupported selector: ${r}`);return e[r]}):n+" "+i}})}const AO=Pf("."+Mf,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},i1),TO={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},cc=Y.ie&&Y.ie_version<=11;class MO{constructor(t){this.view=t,this.active=!1,this.editContext=null,this.selectionRange=new hL,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=t.contentDOM,this.observer=new MutationObserver(e=>{for(let i of e)this.queue.push(i);(Y.ie&&Y.ie_version<=11||Y.ios&&t.composing)&&e.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&Y.android&&t.constructor.EDIT_CONTEXT!==!1&&!(Y.chrome&&Y.chrome_version<126)&&(this.editContext=new DO(t),t.state.facet(hi)&&(t.contentDOM.editContext=this.editContext.editContext)),cc&&(this.onCharData=e=>{this.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var e;((e=this.view.docView)===null||e===void 0?void 0:e.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(t.scrollDOM)),this.addWindowListeners(this.win=t.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(e=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),e.length>0&&e[e.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(e=>{e.length>0&&e[e.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(t){this.view.inputState.runHandlers("scroll",t),this.intersecting&&this.view.measure()}onScroll(t){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(t)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(t){(t.type=="change"||!t.type)&&!t.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(t){if(this.gapIntersection&&(t.length!=this.gaps.length||this.gaps.some((e,i)=>e!=t[i]))){this.gapIntersection.disconnect();for(let e of t)this.gapIntersection.observe(e);this.gaps=t}}onSelectionChange(t){let e=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:i}=this,r=this.selectionRange;if(i.state.facet(hi)?i.root.activeElement!=this.dom:!Ea(this.dom,r))return;let s=r.anchorNode&&i.docView.nearest(r.anchorNode);if(s&&s.ignoreEvent(t)){e||(this.selectionChanged=!1);return}(Y.ie&&Y.ie_version<=11||Y.android&&Y.chrome)&&!i.state.selection.main.empty&&r.focusNode&&ho(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:t}=this,e=To(t.root);if(!e)return!1;let i=Y.safari&&t.root.nodeType==11&&t.root.activeElement==this.dom&&PO(this.view,e)||e;if(!i||this.selectionRange.eq(i))return!1;let r=Ea(this.dom,i);return r&&!this.selectionChanged&&t.inputState.lastFocusTime>Date.now()-200&&t.inputState.lastTouchTime<Date.now()-300&&cL(this.dom,i)?(this.view.inputState.lastFocusTime=0,t.docView.updateSelection(),!1):(this.selectionRange.setRange(i),r&&(this.selectionChanged=!0),!0)}setSelectionRange(t,e){this.selectionRange.set(t.node,t.offset,e.node,e.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let t=0,e=null;for(let i=this.dom;i;)if(i.nodeType==1)!e&&t<this.scrollTargets.length&&this.scrollTargets[t]==i?t++:e||(e=this.scrollTargets.slice(0,t)),e&&e.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(t<this.scrollTargets.length&&!e&&(e=this.scrollTargets.slice(0,t)),e){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=e)i.addEventListener("scroll",this.onScroll)}}ignore(t){if(!this.active)return t();try{return this.stop(),t()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,TO),cc&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),cc&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(t,e){var i;if(!this.delayedAndroidKey){let r=()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=s.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&s.force&&es(this.dom,s.key,s.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(r)}(!this.delayedAndroidKey||t=="Enter")&&(this.delayedAndroidKey={key:t,keyCode:e,force:this.lastChange<Date.now()-50||!!(!((i=this.delayedAndroidKey)===null||i===void 0)&&i.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let t of this.observer.takeRecords())this.queue.push(t);return this.queue}processRecords(){let t=this.pendingRecords();t.length&&(this.queue=[]);let e=-1,i=-1,r=!1;for(let s of t){let o=this.readMutation(s);o&&(o.typeOver&&(r=!0),e==-1?{from:e,to:i}=o:(e=Math.min(o.from,e),i=Math.max(o.to,i)))}return{from:e,to:i,typeOver:r}}readChange(){let{from:t,to:e,typeOver:i}=this.processRecords(),r=this.selectionChanged&&Ea(this.dom,this.selectionRange);if(t<0&&!r)return null;t>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let s=new KL(this.view,t,e,i);return this.view.docView.domChanged={newSel:s.newSel?s.newSel.main:null},s}flush(t=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;t&&this.readSelectionRange();let e=this.readChange();if(!e)return this.view.requestMeasure(),!1;let i=this.view.state,r=$b(this.view,e);return this.view.state==i&&(e.domChanged||e.newSel&&!e.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),r}readMutation(t){let e=this.view.docView.nearest(t.target);if(!e||e.ignoreMutation(t))return null;if(e.markDirty(t.type=="attributes"),t.type=="attributes"&&(e.flags|=4),t.type=="childList"){let i=ey(e,t.previousSibling||t.target.previousSibling,-1),r=ey(e,t.nextSibling||t.target.nextSibling,1);return{from:i?e.posAfter(i):e.posAtStart,to:r?e.posBefore(r):e.posAtEnd,typeOver:!1}}else return t.type=="characterData"?{from:e.posAtStart,to:e.posAtEnd,typeOver:t.target.nodeValue==t.oldValue}:null}setWindow(t){t!=this.win&&(this.removeWindowListeners(this.win),this.win=t,this.addWindowListeners(this.win))}addWindowListeners(t){t.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):t.addEventListener("beforeprint",this.onPrint),t.addEventListener("scroll",this.onScroll),t.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(t){t.removeEventListener("scroll",this.onScroll),t.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):t.removeEventListener("beforeprint",this.onPrint),t.document.removeEventListener("selectionchange",this.onSelectionChange)}update(t){this.editContext&&(this.editContext.update(t),t.startState.facet(hi)!=t.state.facet(hi)&&(t.view.contentDOM.editContext=t.state.facet(hi)?this.editContext.editContext:null))}destroy(){var t,e,i;this.stop(),(t=this.intersection)===null||t===void 0||t.disconnect(),(e=this.gapIntersection)===null||e===void 0||e.disconnect(),(i=this.resizeScroll)===null||i===void 0||i.disconnect();for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function ey(n,t,e){for(;t;){let i=Et.get(t);if(i&&i.parent==n)return i;let r=t.parentNode;t=r!=n.dom?r:e>0?t.nextSibling:t.previousSibling}return null}function ny(n,t){let e=t.startContainer,i=t.startOffset,r=t.endContainer,s=t.endOffset,o=n.docView.domAtPos(n.state.selection.main.anchor);return ho(o.node,o.offset,r,s)&&([e,i,r,s]=[r,s,e,i]),{anchorNode:e,anchorOffset:i,focusNode:r,focusOffset:s}}function PO(n,t){if(t.getComposedRanges){let r=t.getComposedRanges(n.root)[0];if(r)return ny(n,r)}let e=null;function i(r){r.preventDefault(),r.stopImmediatePropagation(),e=r.getTargetRanges()[0]}return n.contentDOM.addEventListener("beforeinput",i,!0),n.dom.ownerDocument.execCommand("indent"),n.contentDOM.removeEventListener("beforeinput",i,!0),e?ny(n,e):null}class DO{constructor(t){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(t.state);let e=this.editContext=new window.EditContext({text:t.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,t.state.selection.main.anchor))),selectionEnd:this.toContextPos(t.state.selection.main.head)});this.handlers.textupdate=i=>{let r=t.state.selection.main,{anchor:s,head:o}=r,a=this.toEditorPos(i.updateRangeStart),h=this.toEditorPos(i.updateRangeEnd);t.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:i.updateRangeStart,editorBase:a,drifted:!1});let f=h-a>i.text.length;a==this.from&&s<this.from?a=s:h==this.to&&s>this.to&&(h=s);let c=jb(t.state.sliceDoc(a,h),i.text,(f?r.from:r.to)-a,f?"end":null);if(!c){let m=H.single(this.toEditorPos(i.selectionStart),this.toEditorPos(i.selectionEnd));m.main.eq(r)||t.dispatch({selection:m,userEvent:"select"});return}let p={from:c.from+a,to:c.toA+a,insert:At.of(i.text.slice(c.from,c.toB).split(`
`))};if((Y.mac||Y.android)&&p.from==o-1&&/^\. ?$/.test(i.text)&&t.contentDOM.getAttribute("autocorrect")=="off"&&(p={from:a,to:h,insert:At.of([i.text.replace("."," ")])}),this.pendingContextChange=p,!t.state.readOnly){let m=this.to-this.from+(p.to-p.from+p.insert.length);Ld(t,p,H.single(this.toEditorPos(i.selectionStart,m),this.toEditorPos(i.selectionEnd,m)))}this.pendingContextChange&&(this.revertPending(t.state),this.setSelection(t.state)),p.from<p.to&&!p.insert.length&&t.inputState.composing>=0&&!/[\\p{Alphabetic}\\p{Number}_]/.test(e.text.slice(Math.max(0,i.updateRangeStart-1),Math.min(e.text.length,i.updateRangeStart+1)))&&this.handlers.compositionend(i)},this.handlers.characterboundsupdate=i=>{let r=[],s=null;for(let o=this.toEditorPos(i.rangeStart),a=this.toEditorPos(i.rangeEnd);o<a;o++){let h=t.coordsForChar(o);s=h&&new DOMRect(h.left,h.top,h.right-h.left,h.bottom-h.top)||s||new DOMRect,r.push(s)}e.updateCharacterBounds(i.rangeStart,r)},this.handlers.textformatupdate=i=>{let r=[];for(let s of i.getTextFormats()){let o=s.underlineStyle,a=s.underlineThickness;if(!/none/i.test(o)&&!/none/i.test(a)){let h=this.toEditorPos(s.rangeStart),f=this.toEditorPos(s.rangeEnd);if(h<f){let c=`text-decoration: underline ${/^[a-z]/.test(o)?o+" ":o=="Dashed"?"dashed ":o=="Squiggle"?"wavy ":""}${/thin/i.test(a)?1:2}px`;r.push(nt.mark({attributes:{style:c}}).range(h,f))}}}t.dispatch({effects:Ib.of(nt.set(r))})},this.handlers.compositionstart=()=>{t.inputState.composing<0&&(t.inputState.composing=0,t.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(t.inputState.composing=-1,t.inputState.compositionFirstChange=null,this.composing){let{drifted:i}=this.composing;this.composing=null,i&&this.reset(t.state)}};for(let i in this.handlers)e.addEventListener(i,this.handlers[i]);this.measureReq={read:i=>{this.editContext.updateControlBounds(i.contentDOM.getBoundingClientRect());let r=To(i.root);r&&r.rangeCount&&this.editContext.updateSelectionBounds(r.getRangeAt(0).getBoundingClientRect())}}}applyEdits(t){let e=0,i=!1,r=this.pendingContextChange;return t.changes.iterChanges((s,o,a,h,f)=>{if(i)return;let c=f.length-(o-s);if(r&&o>=r.to)if(r.from==s&&r.to==o&&r.insert.eq(f)){r=this.pendingContextChange=null,e+=c,this.to+=c;return}else r=null,this.revertPending(t.state);if(s+=e,o+=e,o<=this.from)this.from+=c,this.to+=c;else if(s<this.to){if(s<this.from||o>this.to||this.to-this.from+f.length>3e4){i=!0;return}this.editContext.updateText(this.toContextPos(s),this.toContextPos(o),f.toString()),this.to+=c}e+=c}),r&&!i&&this.revertPending(t.state),!i}update(t){let e=this.pendingContextChange,i=t.startState.selection.main;this.composing&&(this.composing.drifted||!t.changes.touchesRange(i.from,i.to)&&t.transactions.some(r=>!r.isUserEvent("input.type")&&r.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=t.changes.mapPos(this.composing.editorBase)):!this.applyEdits(t)||!this.rangeIsValid(t.state)?(this.pendingContextChange=null,this.reset(t.state)):(t.docChanged||t.selectionSet||e)&&this.setSelection(t.state),(t.geometryChanged||t.docChanged||t.selectionSet)&&t.view.requestMeasure(this.measureReq)}resetRange(t){let{head:e}=t.selection.main;this.from=Math.max(0,e-1e4),this.to=Math.min(t.doc.length,e+1e4)}reset(t){this.resetRange(t),this.editContext.updateText(0,this.editContext.text.length,t.doc.sliceString(this.from,this.to)),this.setSelection(t)}revertPending(t){let e=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(e.from),this.toContextPos(e.from+e.insert.length),t.doc.sliceString(e.from,e.to))}setSelection(t){let{main:e}=t.selection,i=this.toContextPos(Math.max(this.from,Math.min(this.to,e.anchor))),r=this.toContextPos(e.head);(this.editContext.selectionStart!=i||this.editContext.selectionEnd!=r)&&this.editContext.updateSelection(i,r)}rangeIsValid(t){let{head:e}=t.selection.main;return!(this.from>0&&e-this.from<500||this.to<t.doc.length&&this.to-e<500||this.to-this.from>1e4*3)}toEditorPos(t,e=this.to-this.from){t=Math.min(t,e);let i=this.composing;return i&&i.drifted?i.editorBase+(t-i.contextBase):t+this.from}toContextPos(t){let e=this.composing;return e&&e.drifted?e.contextBase+(t-e.editorBase):t-this.from}destroy(){for(let t in this.handlers)this.editContext.removeEventListener(t,this.handlers[t])}}class q{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(t={}){var e;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),t.parent&&t.parent.appendChild(this.dom);let{dispatch:i}=t;this.dispatchTransactions=t.dispatchTransactions||i&&(r=>r.forEach(s=>i(s,this)))||(r=>this.update(r)),this.dispatch=this.dispatch.bind(this),this._root=t.root||uL(t.parent)||document,this.viewState=new Q0(t.state||Ct.create(t)),t.scrollTo&&t.scrollTo.is(sa)&&(this.viewState.scrollTarget=t.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(jr).map(r=>new lc(r));for(let r of this.plugins)r.update(this);this.observer=new MO(this),this.inputState=new XL(this),this.inputState.ensureHandlers(this.plugins),this.docView=new B0(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((e=document.fonts)===null||e===void 0)&&e.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...t){let e=t.length==1&&t[0]instanceof se?t:t.length==1&&Array.isArray(t[0])?t[0]:[this.state.update(...t)];this.dispatchTransactions(e,this)}update(t){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let e=!1,i=!1,r,s=this.state;for(let m of t){if(m.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=m.state}if(this.destroyed){this.viewState.state=s;return}let o=this.hasFocus,a=0,h=null;t.some(m=>m.annotation(Jb))?(this.inputState.notifiedFocused=o,a=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,h=Zb(s,o),h||(a=1));let f=this.observer.delayedAndroidKey,c=null;if(f?(this.observer.clearDelayedAndroidKey(),c=this.observer.readChange(),(c&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(c=null)):this.observer.clear(),s.facet(Ct.phrases)!=this.state.facet(Ct.phrases))return this.setState(s);r=Ga.create(this,s,t),r.flags|=a;let p=this.viewState.scrollTarget;try{this.updateState=2;for(let m of t){if(p&&(p=p.map(m.changes)),m.scrollIntoView){let{main:y}=m.state.selection;p=new ns(y.empty?y:H.cursor(y.head,y.head>y.anchor?-1:1))}for(let y of m.effects)y.is(sa)&&(p=y.value.clip(this.state))}this.viewState.update(r,p),this.bidiCache=Xa.update(this.bidiCache,r.changes),r.empty||(this.updatePlugins(r),this.inputState.update(r)),e=this.docView.update(r),this.state.facet(eo)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(t),this.docView.updateSelection(e,t.some(m=>m.isUserEvent("select.pointer")))}finally{this.updateState=0}if(r.startState.facet(ca)!=r.state.facet(ca)&&(this.viewState.mustMeasureContent=!0),(e||i||p||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),e&&this.docViewUpdate(),!r.empty)for(let m of this.state.facet(Sf))try{m(r)}catch(y){Fe(this.state,y,"update listener")}(h||c)&&Promise.resolve().then(()=>{h&&this.state==h.startState&&this.dispatch(h),c&&!$b(this,c)&&f.force&&es(this.contentDOM,f.key,f.keyCode)})}setState(t){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=t;return}this.updateState=2;let e=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new Q0(t),this.plugins=t.facet(jr).map(i=>new lc(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView.destroy(),this.docView=new B0(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}e&&this.focus(),this.requestMeasure()}updatePlugins(t){let e=t.startState.facet(jr),i=t.state.facet(jr);if(e!=i){let r=[];for(let s of i){let o=e.indexOf(s);if(o<0)r.push(new lc(s));else{let a=this.plugins[o];a.mustUpdate=t,r.push(a)}}for(let s of this.plugins)s.mustUpdate!=t&&s.destroy(this);this.plugins=r,this.pluginMap.clear()}else for(let r of this.plugins)r.mustUpdate=t;for(let r=0;r<this.plugins.length;r++)this.plugins[r].update(this);e!=i&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let t of this.plugins){let e=t.value;if(e&&e.docViewUpdate)try{e.docViewUpdate(this)}catch(i){Fe(this.state,i,"doc view update listener")}}}measure(t=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,t&&this.observer.forceFlush();let e=null,i=this.scrollDOM,r=i.scrollTop*this.scaleY,{scrollAnchorPos:s,scrollAnchorHeight:o}=this.viewState;Math.abs(r-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let a=0;;a++){if(o<0)if(cb(i))s=-1,o=this.viewState.heightMap.height;else{let y=this.viewState.scrollAnchorAt(r);s=y.from,o=y.top}this.updateState=1;let h=this.viewState.measure(this);if(!h&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(a>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let f=[];h&4||([this.measureRequests,f]=[f,this.measureRequests]);let c=f.map(y=>{try{return y.read(this)}catch(v){return Fe(this.state,v),iy}}),p=Ga.create(this,this.state,[]),m=!1;p.flags|=h,e?e.flags|=h:e=p,this.updateState=2,p.empty||(this.updatePlugins(p),this.inputState.update(p),this.updateAttrs(),m=this.docView.update(p),m&&this.docViewUpdate());for(let y=0;y<f.length;y++)if(c[y]!=iy)try{let v=f[y];v.write&&v.write(c[y],this)}catch(v){Fe(this.state,v)}if(m&&this.docView.updateSelection(!0),!p.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}else{let v=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-o;if(v>1||v<-1){r=r+v,i.scrollTop=r/this.scaleY,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(e&&!e.empty)for(let a of this.state.facet(Sf))a(e)}get themeClasses(){return Mf+" "+(this.state.facet(Tf)?n1:e1)+" "+this.state.facet(ca)}updateAttrs(){let t=ry(this,_b,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),e={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(hi)?"true":"false",class:"cm-content",style:`${Y.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(e["aria-readonly"]="true"),ry(this,Rd,e);let i=this.observer.ignore(()=>{let r=yf(this.contentDOM,this.contentAttrs,e),s=yf(this.dom,this.editorAttrs,t);return r||s});return this.editorAttrs=t,this.contentAttrs=e,i}showAnnouncements(t){let e=!0;for(let i of t)for(let r of i.effects)if(r.is(q.announce)){e&&(this.announceDOM.textContent=""),e=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=r.value}}mountStyles(){this.styleModules=this.state.facet(eo);let t=this.state.facet(q.cspNonce);Vi.mount(this.root,this.styleModules.concat(AO).reverse(),t?{nonce:t}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(t){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),t){if(this.measureRequests.indexOf(t)>-1)return;if(t.key!=null){for(let e=0;e<this.measureRequests.length;e++)if(this.measureRequests[e].key===t.key){this.measureRequests[e]=t;return}}this.measureRequests.push(t)}}plugin(t){let e=this.pluginMap.get(t);return(e===void 0||e&&e.plugin!=t)&&this.pluginMap.set(t,e=this.plugins.find(i=>i.plugin==t)||null),e&&e.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(t){return this.readMeasured(),this.viewState.elementAtHeight(t)}lineBlockAtHeight(t){return this.readMeasured(),this.viewState.lineBlockAtHeight(t)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(t){return this.viewState.lineBlockAt(t)}get contentHeight(){return this.viewState.contentHeight}moveByChar(t,e,i){return hc(this,t,V0(this,t,e,i))}moveByGroup(t,e){return hc(this,t,V0(this,t,e,i=>HL(this,t.head,i)))}visualLineSide(t,e){let i=this.bidiSpans(t),r=this.textDirectionAt(t.from),s=i[e?i.length-1:0];return H.cursor(s.side(e,r)+t.from,s.forward(!e,r)?1:-1)}moveToLineBoundary(t,e,i=!0){return WL(this,t,e,i)}moveVertically(t,e,i){return hc(this,t,zL(this,t,e,i))}domAtPos(t){return this.docView.domAtPos(t)}posAtDOM(t,e=0){return this.docView.posFromDOM(t,e)}posAtCoords(t,e=!0){return this.readMeasured(),Hb(this,t,e)}coordsAtPos(t,e=1){this.readMeasured();let i=this.docView.coordsAt(t,e);if(!i||i.left==i.right)return i;let r=this.state.doc.lineAt(t),s=this.bidiSpans(r),o=s[_i.find(s,t-r.from,-1,e)];return Go(i,o.dir==Ft.LTR==e>0)}coordsForChar(t){return this.readMeasured(),this.docView.coordsForChar(t)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(t){return!this.state.facet(Lb)||t<this.viewport.from||t>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(t))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(t){if(t.length>RO)return kb(t.length);let e=this.textDirectionAt(t.from),i;for(let s of this.bidiCache)if(s.from==t.from&&s.dir==e&&(s.fresh||Cb(s.isolates,i=O0(this,t))))return s.order;i||(i=O0(this,t));let r=kL(t.text,e,i);return this.bidiCache.push(new Xa(t.from,t.to,e,i,!0,r)),r}get hasFocus(){var t;return(this.dom.ownerDocument.hasFocus()||Y.safari&&((t=this.inputState)===null||t===void 0?void 0:t.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{hb(this.contentDOM),this.docView.updateSelection()})}setRoot(t){this._root!=t&&(this._root=t,this.observer.setWindow((t.nodeType==9?t:t.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let t of this.plugins)t.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(t,e={}){return sa.of(new ns(typeof t=="number"?H.cursor(t):t,e.y,e.x,e.yMargin,e.xMargin))}scrollSnapshot(){let{scrollTop:t,scrollLeft:e}=this.scrollDOM,i=this.viewState.scrollAnchorAt(t);return sa.of(new ns(H.cursor(i.from),"start","start",i.top-t,e,!0))}setTabFocusMode(t){t==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof t=="boolean"?this.inputState.tabFocusMode=t?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+t)}static domEventHandlers(t){return Qt.define(()=>({}),{eventHandlers:t})}static domEventObservers(t){return Qt.define(()=>({}),{eventObservers:t})}static theme(t,e){let i=Vi.newName(),r=[ca.of(i),eo.of(Pf(`.${i}`,t))];return e&&e.dark&&r.push(Tf.of(!0)),r}static baseTheme(t){return Tr.lowest(eo.of(Pf("."+Mf,t,i1)))}static findFromDOM(t){var e;let i=t.querySelector(".cm-content"),r=i&&Et.get(i)||Et.get(t);return((e=r?.rootView)===null||e===void 0?void 0:e.view)||null}}q.styleModule=eo;q.inputHandler=Rb;q.clipboardInputFilter=Pd;q.clipboardOutputFilter=Dd;q.scrollHandler=Bb;q.focusChangeEffect=Eb;q.perLineTextDirection=Lb;q.exceptionSink=Db;q.updateListener=Sf;q.editable=hi;q.mouseSelectionStyle=Pb;q.dragMovesSelection=Mb;q.clickAddsSelectionRange=Tb;q.decorations=Mo;q.outerDecorations=Nb;q.atomicRanges=Jo;q.bidiIsolatedRanges=Fb;q.scrollMargins=Vb;q.darkTheme=Tf;q.cspNonce=X.define({combine:n=>n.length?n[0]:""});q.contentAttributes=Rd;q.editorAttributes=_b;q.lineWrapping=q.contentAttributes.of({class:"cm-lineWrapping"});q.announce=ft.define();const RO=4096,iy={};class Xa{constructor(t,e,i,r,s,o){this.from=t,this.to=e,this.dir=i,this.isolates=r,this.fresh=s,this.order=o}static update(t,e){if(e.empty&&!t.some(s=>s.fresh))return t;let i=[],r=t.length?t[t.length-1].dir:Ft.LTR;for(let s=Math.max(0,t.length-10);s<t.length;s++){let o=t[s];o.dir==r&&!e.touchesRange(o.from,o.to)&&i.push(new Xa(e.mapPos(o.from,1),e.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return i}}function ry(n,t,e){for(let i=n.state.facet(t),r=i.length-1;r>=0;r--){let s=i[r],o=typeof s=="function"?s(n):s;o&&gf(o,e)}return e}const EO=Y.mac?"mac":Y.windows?"win":Y.linux?"linux":"key";function LO(n,t){const e=n.split(/-(?!$)/);let i=e[e.length-1];i=="Space"&&(i=" ");let r,s,o,a;for(let h=0;h<e.length-1;++h){const f=e[h];if(/^(cmd|meta|m)$/i.test(f))a=!0;else if(/^a(lt)?$/i.test(f))r=!0;else if(/^(c|ctrl|control)$/i.test(f))s=!0;else if(/^s(hift)?$/i.test(f))o=!0;else if(/^mod$/i.test(f))t=="mac"?a=!0:s=!0;else throw new Error("Unrecognized modifier name: "+f)}return r&&(i="Alt-"+i),s&&(i="Ctrl-"+i),a&&(i="Meta-"+i),o&&(i="Shift-"+i),i}function fa(n,t,e){return t.altKey&&(n="Alt-"+n),t.ctrlKey&&(n="Ctrl-"+n),t.metaKey&&(n="Meta-"+n),e!==!1&&t.shiftKey&&(n="Shift-"+n),n}const OO=Tr.default(q.domEventHandlers({keydown(n,t){return s1(r1(t.state),n,t,"editor")}})),vh=X.define({enables:OO}),sy=new WeakMap;function r1(n){let t=n.facet(vh),e=sy.get(t);return e||sy.set(t,e=_O(t.reduce((i,r)=>i.concat(r),[]))),e}function BO(n,t,e){return s1(r1(n.state),t,n,e)}let Li=null;const IO=4e3;function _O(n,t=EO){let e=Object.create(null),i=Object.create(null),r=(o,a)=>{let h=i[o];if(h==null)i[o]=a;else if(h!=a)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},s=(o,a,h,f,c)=>{var p,m;let y=e[o]||(e[o]=Object.create(null)),v=a.split(/ (?!$)/).map(k=>LO(k,t));for(let k=1;k<v.length;k++){let T=v.slice(0,k).join(" ");r(T,!0),y[T]||(y[T]={preventDefault:!0,stopPropagation:!1,run:[P=>{let I=Li={view:P,prefix:T,scope:o};return setTimeout(()=>{Li==I&&(Li=null)},IO),!0}]})}let S=v.join(" ");r(S,!1);let C=y[S]||(y[S]={preventDefault:!1,stopPropagation:!1,run:((m=(p=y._any)===null||p===void 0?void 0:p.run)===null||m===void 0?void 0:m.slice())||[]});h&&C.run.push(h),f&&(C.preventDefault=!0),c&&(C.stopPropagation=!0)};for(let o of n){let a=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let f of a){let c=e[f]||(e[f]=Object.create(null));c._any||(c._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:p}=o;for(let m in c)c[m].run.push(y=>p(y,Df))}let h=o[t]||o.key;if(h)for(let f of a)s(f,h,o.run,o.preventDefault,o.stopPropagation),o.shift&&s(f,"Shift-"+h,o.shift,o.preventDefault,o.stopPropagation)}return e}let Df=null;function s1(n,t,e,i){Df=t;let r=rL(t),s=_e(r,0),o=Wn(s)==r.length&&r!=" ",a="",h=!1,f=!1,c=!1;Li&&Li.view==e&&Li.scope==i&&(a=Li.prefix+" ",qb.indexOf(t.keyCode)<0&&(f=!0,Li=null));let p=new Set,m=C=>{if(C){for(let k of C.run)if(!p.has(k)&&(p.add(k),k(e)))return C.stopPropagation&&(c=!0),!0;C.preventDefault&&(C.stopPropagation&&(c=!0),f=!0)}return!1},y=n[i],v,S;return y&&(m(y[a+fa(r,t,!o)])?h=!0:o&&(t.altKey||t.metaKey||t.ctrlKey)&&!(Y.windows&&t.ctrlKey&&t.altKey)&&!(Y.mac&&t.altKey&&!(t.ctrlKey||t.metaKey))&&(v=Wi[t.keyCode])&&v!=r?(m(y[a+fa(v,t,!0)])||t.shiftKey&&(S=Ao[t.keyCode])!=r&&S!=v&&m(y[a+fa(S,t,!1)]))&&(h=!0):o&&t.shiftKey&&m(y[a+fa(r,t,!0)])&&(h=!0),!h&&m(y._any)&&(h=!0)),f&&(h=!0),h&&c&&t.stopPropagation(),Df=null,h}class Zo{constructor(t,e,i,r,s){this.className=t,this.left=e,this.top=i,this.width=r,this.height=s}draw(){let t=document.createElement("div");return t.className=this.className,this.adjust(t),t}update(t,e){return e.className!=this.className?!1:(this.adjust(t),!0)}adjust(t){t.style.left=this.left+"px",t.style.top=this.top+"px",this.width!=null&&(t.style.width=this.width+"px"),t.style.height=this.height+"px"}eq(t){return this.left==t.left&&this.top==t.top&&this.width==t.width&&this.height==t.height&&this.className==t.className}static forRange(t,e,i){if(i.empty){let r=t.coordsAtPos(i.head,i.assoc||1);if(!r)return[];let s=o1(t);return[new Zo(e,r.left-s.left,r.top-s.top,null,r.bottom-r.top)]}else return NO(t,e,i)}}function o1(n){let t=n.scrollDOM.getBoundingClientRect();return{left:(n.textDirection==Ft.LTR?t.left:t.right-n.scrollDOM.clientWidth*n.scaleX)-n.scrollDOM.scrollLeft*n.scaleX,top:t.top-n.scrollDOM.scrollTop*n.scaleY}}function oy(n,t,e,i){let r=n.coordsAtPos(t,e*2);if(!r)return i;let s=n.dom.getBoundingClientRect(),o=(r.top+r.bottom)/2,a=n.posAtCoords({x:s.left+1,y:o}),h=n.posAtCoords({x:s.right-1,y:o});return a==null||h==null?i:{from:Math.max(i.from,Math.min(a,h)),to:Math.min(i.to,Math.max(a,h))}}function NO(n,t,e){if(e.to<=n.viewport.from||e.from>=n.viewport.to)return[];let i=Math.max(e.from,n.viewport.from),r=Math.min(e.to,n.viewport.to),s=n.textDirection==Ft.LTR,o=n.contentDOM,a=o.getBoundingClientRect(),h=o1(n),f=o.querySelector(".cm-line"),c=f&&window.getComputedStyle(f),p=a.left+(c?parseInt(c.paddingLeft)+Math.min(0,parseInt(c.textIndent)):0),m=a.right-(c?parseInt(c.paddingRight):0),y=kf(n,i,1),v=kf(n,r,-1),S=y.type==Re.Text?y:null,C=v.type==Re.Text?v:null;if(S&&(n.lineWrapping||y.widgetLineBreaks)&&(S=oy(n,i,1,S)),C&&(n.lineWrapping||v.widgetLineBreaks)&&(C=oy(n,r,-1,C)),S&&C&&S.from==C.from&&S.to==C.to)return T(P(e.from,e.to,S));{let L=S?P(e.from,null,S):I(y,!1),_=C?P(null,e.to,C):I(v,!0),F=[];return(S||y).to<(C||v).from-(S&&C?1:0)||y.widgetLineBreaks>1&&L.bottom+n.defaultLineHeight/2<_.top?F.push(k(p,L.bottom,m,_.top)):L.bottom<_.top&&n.elementAtHeight((L.bottom+_.top)/2).type==Re.Text&&(L.bottom=_.top=(L.bottom+_.top)/2),T(L).concat(F).concat(T(_))}function k(L,_,F,$){return new Zo(t,L-h.left,_-h.top,F-L,$-_)}function T({top:L,bottom:_,horizontal:F}){let $=[];for(let j=0;j<F.length;j+=2)$.push(k(F[j],L,F[j+1],_));return $}function P(L,_,F){let $=1e9,j=-1e9,tt=[];function et(at,wt,Kt,ht,gt){let yt=n.coordsAtPos(at,at==F.to?-2:2),Tt=n.coordsAtPos(Kt,Kt==F.from?2:-2);!yt||!Tt||($=Math.min(yt.top,Tt.top,$),j=Math.max(yt.bottom,Tt.bottom,j),gt==Ft.LTR?tt.push(s&&wt?p:yt.left,s&&ht?m:Tt.right):tt.push(!s&&ht?p:Tt.left,!s&&wt?m:yt.right))}let Z=L??F.from,lt=_??F.to;for(let at of n.visibleRanges)if(at.to>Z&&at.from<lt)for(let wt=Math.max(at.from,Z),Kt=Math.min(at.to,lt);;){let ht=n.state.doc.lineAt(wt);for(let gt of n.bidiSpans(ht)){let yt=gt.from+ht.from,Tt=gt.to+ht.from;if(yt>=Kt)break;Tt>wt&&et(Math.max(yt,wt),L==null&&yt<=Z,Math.min(Tt,Kt),_==null&&Tt>=lt,gt.dir)}if(wt=ht.to+1,wt>=Kt)break}return tt.length==0&&et(Z,L==null,lt,_==null,n.textDirection),{top:$,bottom:j,horizontal:tt}}function I(L,_){let F=a.top+(_?L.top:L.bottom);return{top:F,bottom:F,horizontal:[]}}}function FO(n,t){return n.constructor==t.constructor&&n.eq(t)}class VO{constructor(t,e){this.view=t,this.layer=e,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=t.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),e.above&&this.dom.classList.add("cm-layer-above"),e.class&&this.dom.classList.add(e.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(t.state),t.requestMeasure(this.measureReq),e.mount&&e.mount(this.dom,t)}update(t){t.startState.facet(Ba)!=t.state.facet(Ba)&&this.setOrder(t.state),(this.layer.update(t,this.dom)||t.geometryChanged)&&(this.scale(),t.view.requestMeasure(this.measureReq))}docViewUpdate(t){this.layer.updateOnDocViewUpdate!==!1&&t.requestMeasure(this.measureReq)}setOrder(t){let e=0,i=t.facet(Ba);for(;e<i.length&&i[e]!=this.layer;)e++;this.dom.style.zIndex=String((this.layer.above?150:-1)-e)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:t,scaleY:e}=this.view;(t!=this.scaleX||e!=this.scaleY)&&(this.scaleX=t,this.scaleY=e,this.dom.style.transform=`scale(${1/t}, ${1/e})`)}draw(t){if(t.length!=this.drawn.length||t.some((e,i)=>!FO(e,this.drawn[i]))){let e=this.dom.firstChild,i=0;for(let r of t)r.update&&e&&r.constructor&&this.drawn[i].constructor&&r.update(e,this.drawn[i])?(e=e.nextSibling,i++):this.dom.insertBefore(r.draw(),e);for(;e;){let r=e.nextSibling;e.remove(),e=r}this.drawn=t,Y.safari&&Y.safari_version>=26&&(this.dom.style.display=this.dom.firstChild?"":"none")}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const Ba=X.define();function l1(n){return[Qt.define(t=>new VO(t,n)),Ba.of(n)]}const Po=X.define({combine(n){return Xn(n,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(t,e)=>Math.min(t,e),drawRangeCursor:(t,e)=>t||e})}});function WO(n={}){return[Po.of(n),HO,zO,UO,Ob.of(!0)]}function a1(n){return n.startState.facet(Po)!=n.state.facet(Po)}const HO=l1({above:!0,markers(n){let{state:t}=n,e=t.facet(Po),i=[];for(let r of t.selection.ranges){let s=r==t.selection.main;if(r.empty||e.drawRangeCursor){let o=s?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",a=r.empty?r:H.cursor(r.head,r.head>r.anchor?-1:1);for(let h of Zo.forRange(n,o,a))i.push(h)}}return i},update(n,t){n.transactions.some(i=>i.selection)&&(t.style.animationName=t.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let e=a1(n);return e&&ly(n.state,t),n.docChanged||n.selectionSet||e},mount(n,t){ly(t.state,n)},class:"cm-cursorLayer"});function ly(n,t){t.style.animationDuration=n.facet(Po).cursorBlinkRate+"ms"}const zO=l1({above:!1,markers(n){return n.state.selection.ranges.map(t=>t.empty?[]:Zo.forRange(n,"cm-selectionBackground",t)).reduce((t,e)=>t.concat(e))},update(n,t){return n.docChanged||n.selectionSet||n.viewportChanged||a1(n)},class:"cm-selectionLayer"}),UO=Tr.highest(q.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}})),h1=ft.define({map(n,t){return n==null?null:t.mapPos(n)}}),ro=ge.define({create(){return null},update(n,t){return n!=null&&(n=t.changes.mapPos(n)),t.effects.reduce((e,i)=>i.is(h1)?i.value:e,n)}}),$O=Qt.fromClass(class{constructor(n){this.view=n,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(n){var t;let e=n.state.field(ro);e==null?this.cursor!=null&&((t=this.cursor)===null||t===void 0||t.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(n.startState.field(ro)!=e||n.docChanged||n.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:n}=this,t=n.state.field(ro),e=t!=null&&n.coordsAtPos(t);if(!e)return null;let i=n.scrollDOM.getBoundingClientRect();return{left:e.left-i.left+n.scrollDOM.scrollLeft*n.scaleX,top:e.top-i.top+n.scrollDOM.scrollTop*n.scaleY,height:e.bottom-e.top}}drawCursor(n){if(this.cursor){let{scaleX:t,scaleY:e}=this.view;n?(this.cursor.style.left=n.left/t+"px",this.cursor.style.top=n.top/e+"px",this.cursor.style.height=n.height/e+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(n){this.view.state.field(ro)!=n&&this.view.dispatch({effects:h1.of(n)})}},{eventObservers:{dragover(n){this.setDropPos(this.view.posAtCoords({x:n.clientX,y:n.clientY}))},dragleave(n){(n.target==this.view.contentDOM||!this.view.contentDOM.contains(n.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function jO(){return[ro,$O]}function ay(n,t,e,i,r){t.lastIndex=0;for(let s=n.iterRange(e,i),o=e,a;!s.next().done;o+=s.value.length)if(!s.lineBreak)for(;a=t.exec(s.value);)r(o+a.index,a)}function KO(n,t){let e=n.visibleRanges;if(e.length==1&&e[0].from==n.viewport.from&&e[0].to==n.viewport.to)return e;let i=[];for(let{from:r,to:s}of e)r=Math.max(n.state.doc.lineAt(r).from,r-t),s=Math.min(n.state.doc.lineAt(s).to,s+t),i.length&&i[i.length-1].to>=r?i[i.length-1].to=s:i.push({from:r,to:s});return i}class qO{constructor(t){const{regexp:e,decoration:i,decorate:r,boundary:s,maxLength:o=1e3}=t;if(!e.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=e,r)this.addMatch=(a,h,f,c)=>r(c,f,f+a[0].length,a,h);else if(typeof i=="function")this.addMatch=(a,h,f,c)=>{let p=i(a,h,f);p&&c(f,f+a[0].length,p)};else if(i)this.addMatch=(a,h,f,c)=>c(f,f+a[0].length,i);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=s,this.maxLength=o}createDeco(t){let e=new di,i=e.add.bind(e);for(let{from:r,to:s}of KO(t,this.maxLength))ay(t.state.doc,this.regexp,r,s,(o,a)=>this.addMatch(a,t,o,i));return e.finish()}updateDeco(t,e){let i=1e9,r=-1;return t.docChanged&&t.changes.iterChanges((s,o,a,h)=>{h>=t.view.viewport.from&&a<=t.view.viewport.to&&(i=Math.min(a,i),r=Math.max(h,r))}),t.viewportMoved||r-i>1e3?this.createDeco(t.view):r>-1?this.updateRange(t.view,e.map(t.changes),i,r):e}updateRange(t,e,i,r){for(let s of t.visibleRanges){let o=Math.max(s.from,i),a=Math.min(s.to,r);if(a>=o){let h=t.state.doc.lineAt(o),f=h.to<a?t.state.doc.lineAt(a):h,c=Math.max(s.from,h.from),p=Math.min(s.to,f.to);if(this.boundary){for(;o>h.from;o--)if(this.boundary.test(h.text[o-1-h.from])){c=o;break}for(;a<f.to;a++)if(this.boundary.test(f.text[a-f.from])){p=a;break}}let m=[],y,v=(S,C,k)=>m.push(k.range(S,C));if(h==f)for(this.regexp.lastIndex=c-h.from;(y=this.regexp.exec(h.text))&&y.index<p-h.from;)this.addMatch(y,t,y.index+h.from,v);else ay(t.state.doc,this.regexp,c,p,(S,C)=>this.addMatch(C,t,S,v));e=e.update({filterFrom:c,filterTo:p,filter:(S,C)=>S<c||C>p,add:m})}}return e}}const Rf=/x/.unicode!=null?"gu":"g",GO=new RegExp(`[\0-\b
--ÂŸÂ­Øœâ€‹â€Žâ€\u2028\u2029â€­â€®â¦â§â©\uFEFFï¿¹-ï¿¼]`,Rf),YO={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let fc=null;function XO(){var n;if(fc==null&&typeof document<"u"&&document.body){let t=document.body.style;fc=((n=t.tabSize)!==null&&n!==void 0?n:t.MozTabSize)!=null}return fc||!1}const Ia=X.define({combine(n){let t=Xn(n,{render:null,specialChars:GO,addSpecialChars:null});return(t.replaceTabs=!XO())&&(t.specialChars=new RegExp("	|"+t.specialChars.source,Rf)),t.addSpecialChars&&(t.specialChars=new RegExp(t.specialChars.source+"|"+t.addSpecialChars.source,Rf)),t}});function JO(n={}){return[Ia.of(n),ZO()]}let hy=null;function ZO(){return hy||(hy=Qt.fromClass(class{constructor(n){this.view=n,this.decorations=nt.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(n.state.facet(Ia)),this.decorations=this.decorator.createDeco(n)}makeDecorator(n){return new qO({regexp:n.specialChars,decoration:(t,e,i)=>{let{doc:r}=e.state,s=_e(t[0],0);if(s==9){let o=r.lineAt(i),a=e.state.tabSize,h=xs(o.text,a,i-o.from);return nt.replace({widget:new nB((a-h%a)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[s]||(this.decorationCache[s]=nt.replace({widget:new eB(n,s)}))},boundary:n.replaceTabs?void 0:/[^]/})}update(n){let t=n.state.facet(Ia);n.startState.facet(Ia)!=t?(this.decorator=this.makeDecorator(t),this.decorations=this.decorator.createDeco(n.view)):this.decorations=this.decorator.updateDeco(n,this.decorations)}},{decorations:n=>n.decorations}))}const QO="â€¢";function tB(n){return n>=32?QO:n==10?"â¤":String.fromCharCode(9216+n)}class eB extends vi{constructor(t,e){super(),this.options=t,this.code=e}eq(t){return t.code==this.code}toDOM(t){let e=tB(this.code),i=t.state.phrase("Control character")+" "+(YO[this.code]||"0x"+this.code.toString(16)),r=this.options.render&&this.options.render(this.code,i,e);if(r)return r;let s=document.createElement("span");return s.textContent=e,s.title=i,s.setAttribute("aria-label",i),s.className="cm-specialChar",s}ignoreEvent(){return!1}}class nB extends vi{constructor(t){super(),this.width=t}eq(t){return t.width==this.width}toDOM(){let t=document.createElement("span");return t.textContent="	",t.className="cm-tab",t.style.width=this.width+"px",t}ignoreEvent(){return!1}}function iB(){return sB}const rB=nt.line({class:"cm-activeLine"}),sB=Qt.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.docChanged||n.selectionSet)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let t=-1,e=[];for(let i of n.state.selection.ranges){let r=n.lineBlockAt(i.head);r.from>t&&(e.push(rB.range(r.from)),t=r.from)}return nt.set(e)}},{decorations:n=>n.decorations});class oB extends vi{constructor(t){super(),this.content=t}toDOM(t){let e=document.createElement("span");return e.className="cm-placeholder",e.style.pointerEvents="none",e.appendChild(typeof this.content=="string"?document.createTextNode(this.content):typeof this.content=="function"?this.content(t):this.content.cloneNode(!0)),e.setAttribute("aria-hidden","true"),e}coordsAt(t){let e=t.firstChild?ls(t.firstChild):[];if(!e.length)return null;let i=window.getComputedStyle(t.parentNode),r=Go(e[0],i.direction!="rtl"),s=parseInt(i.lineHeight);return r.bottom-r.top>s*1.5?{left:r.left,right:r.right,top:r.top,bottom:r.top+s}:r}ignoreEvent(){return!1}}function lB(n){let t=Qt.fromClass(class{constructor(e){this.view=e,this.placeholder=n?nt.set([nt.widget({widget:new oB(n),side:1}).range(0)]):nt.none}get decorations(){return this.view.state.doc.length?nt.none:this.placeholder}},{decorations:e=>e.decorations});return typeof n=="string"?[t,q.contentAttributes.of({"aria-placeholder":n})]:t}const Ef=2e3;function aB(n,t,e){let i=Math.min(t.line,e.line),r=Math.max(t.line,e.line),s=[];if(t.off>Ef||e.off>Ef||t.col<0||e.col<0){let o=Math.min(t.off,e.off),a=Math.max(t.off,e.off);for(let h=i;h<=r;h++){let f=n.doc.line(h);f.length<=a&&s.push(H.range(f.from+o,f.to+a))}}else{let o=Math.min(t.col,e.col),a=Math.max(t.col,e.col);for(let h=i;h<=r;h++){let f=n.doc.line(h),c=af(f.text,o,n.tabSize,!0);if(c<0)s.push(H.cursor(f.to));else{let p=af(f.text,a,n.tabSize);s.push(H.range(f.from+c,f.from+p))}}}return s}function hB(n,t){let e=n.coordsAtPos(n.viewport.from);return e?Math.round(Math.abs((e.left-t)/n.defaultCharacterWidth)):-1}function uy(n,t){let e=n.posAtCoords({x:t.clientX,y:t.clientY},!1),i=n.state.doc.lineAt(e),r=e-i.from,s=r>Ef?-1:r==i.length?hB(n,t.clientX):xs(i.text,n.state.tabSize,e-i.from);return{line:i.number,col:s,off:r}}function uB(n,t){let e=uy(n,t),i=n.state.selection;return e?{update(r){if(r.docChanged){let s=r.changes.mapPos(r.startState.doc.line(e.line).from),o=r.state.doc.lineAt(s);e={line:o.number,col:e.col,off:Math.min(e.off,o.length)},i=i.map(r.changes)}},get(r,s,o){let a=uy(n,r);if(!a)return i;let h=aB(n.state,e,a);return h.length?o?H.create(h.concat(i.ranges)):H.create(h):i}}:null}function cB(n){let t=(e=>e.altKey&&e.button==0);return q.mouseSelectionStyle.of((e,i)=>t(i)?uB(e,i):null)}const fB={Alt:[18,n=>!!n.altKey],Control:[17,n=>!!n.ctrlKey],Shift:[16,n=>!!n.shiftKey],Meta:[91,n=>!!n.metaKey]},dB={style:"cursor: crosshair"};function pB(n={}){let[t,e]=fB[n.key||"Alt"],i=Qt.fromClass(class{constructor(r){this.view=r,this.isDown=!1}set(r){this.isDown!=r&&(this.isDown=r,this.view.update([]))}},{eventObservers:{keydown(r){this.set(r.keyCode==t||e(r))},keyup(r){(r.keyCode==t||!e(r))&&this.set(!1)},mousemove(r){this.set(e(r))}}});return[i,q.contentAttributes.of(r=>{var s;return!((s=r.plugin(i))===null||s===void 0)&&s.isDown?dB:null})]}const Ys="-10000px";class u1{constructor(t,e,i,r){this.facet=e,this.createTooltipView=i,this.removeTooltipView=r,this.input=t.state.facet(e),this.tooltips=this.input.filter(o=>o);let s=null;this.tooltipViews=this.tooltips.map(o=>s=i(o,s))}update(t,e){var i;let r=t.state.facet(this.facet),s=r.filter(h=>h);if(r===this.input){for(let h of this.tooltipViews)h.update&&h.update(t);return!1}let o=[],a=e?[]:null;for(let h=0;h<s.length;h++){let f=s[h],c=-1;if(f){for(let p=0;p<this.tooltips.length;p++){let m=this.tooltips[p];m&&m.create==f.create&&(c=p)}if(c<0)o[h]=this.createTooltipView(f,h?o[h-1]:null),a&&(a[h]=!!f.above);else{let p=o[h]=this.tooltipViews[c];a&&(a[h]=e[c]),p.update&&p.update(t)}}}for(let h of this.tooltipViews)o.indexOf(h)<0&&(this.removeTooltipView(h),(i=h.destroy)===null||i===void 0||i.call(h));return e&&(a.forEach((h,f)=>e[f]=h),e.length=a.length),this.input=r,this.tooltips=s,this.tooltipViews=o,!0}}function mB(n){let t=n.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:t.clientHeight,right:t.clientWidth}}const dc=X.define({combine:n=>{var t,e,i;return{position:Y.ios?"absolute":((t=n.find(r=>r.position))===null||t===void 0?void 0:t.position)||"fixed",parent:((e=n.find(r=>r.parent))===null||e===void 0?void 0:e.parent)||null,tooltipSpace:((i=n.find(r=>r.tooltipSpace))===null||i===void 0?void 0:i.tooltipSpace)||mB}}}),cy=new WeakMap,Id=Qt.fromClass(class{constructor(n){this.view=n,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let t=n.state.facet(dc);this.position=t.position,this.parent=t.parent,this.classes=n.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new u1(n,_d,(e,i)=>this.createTooltip(e,i),e=>{this.resizeObserver&&this.resizeObserver.unobserve(e.dom),e.dom.remove()}),this.above=this.manager.tooltips.map(e=>!!e.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(e=>{Date.now()>this.lastTransaction-50&&e.length>0&&e[e.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),n.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let n of this.manager.tooltipViews)this.intersectionObserver.observe(n.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(n){n.transactions.length&&(this.lastTransaction=Date.now());let t=this.manager.update(n,this.above);t&&this.observeIntersection();let e=t||n.geometryChanged,i=n.state.facet(dc);if(i.position!=this.position&&!this.madeAbsolute){this.position=i.position;for(let r of this.manager.tooltipViews)r.dom.style.position=this.position;e=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(let r of this.manager.tooltipViews)this.container.appendChild(r.dom);e=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);e&&this.maybeMeasure()}createTooltip(n,t){let e=n.create(this.view),i=t?t.dom:null;if(e.dom.classList.add("cm-tooltip"),n.arrow&&!e.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let r=document.createElement("div");r.className="cm-tooltip-arrow",e.dom.appendChild(r)}return e.dom.style.position=this.position,e.dom.style.top=Ys,e.dom.style.left="0px",this.container.insertBefore(e.dom,i),e.mount&&e.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(e.dom),e}destroy(){var n,t,e;this.view.win.removeEventListener("resize",this.measureSoon);for(let i of this.manager.tooltipViews)i.dom.remove(),(n=i.destroy)===null||n===void 0||n.call(i);this.parent&&this.container.remove(),(t=this.resizeObserver)===null||t===void 0||t.disconnect(),(e=this.intersectionObserver)===null||e===void 0||e.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let n=1,t=1,e=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:s}=this.manager.tooltipViews[0];if(Y.gecko)e=s.offsetParent!=this.container.ownerDocument.body;else if(s.style.top==Ys&&s.style.left=="0px"){let o=s.getBoundingClientRect();e=Math.abs(o.top+1e4)>1||Math.abs(o.left)>1}}if(e||this.position=="absolute")if(this.parent){let s=this.parent.getBoundingClientRect();s.width&&s.height&&(n=s.width/this.parent.offsetWidth,t=s.height/this.parent.offsetHeight)}else({scaleX:n,scaleY:t}=this.view.viewState);let i=this.view.scrollDOM.getBoundingClientRect(),r=Ed(this.view);return{visible:{left:i.left+r.left,top:i.top+r.top,right:i.right-r.right,bottom:i.bottom-r.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((s,o)=>{let a=this.manager.tooltipViews[o];return a.getCoords?a.getCoords(s.pos):this.view.coordsAtPos(s.pos)}),size:this.manager.tooltipViews.map(({dom:s})=>s.getBoundingClientRect()),space:this.view.state.facet(dc).tooltipSpace(this.view),scaleX:n,scaleY:t,makeAbsolute:e}}writeMeasure(n){var t;if(n.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let a of this.manager.tooltipViews)a.dom.style.position="absolute"}let{visible:e,space:i,scaleX:r,scaleY:s}=n,o=[];for(let a=0;a<this.manager.tooltips.length;a++){let h=this.manager.tooltips[a],f=this.manager.tooltipViews[a],{dom:c}=f,p=n.pos[a],m=n.size[a];if(!p||h.clip!==!1&&(p.bottom<=Math.max(e.top,i.top)||p.top>=Math.min(e.bottom,i.bottom)||p.right<Math.max(e.left,i.left)-.1||p.left>Math.min(e.right,i.right)+.1)){c.style.top=Ys;continue}let y=h.arrow?f.dom.querySelector(".cm-tooltip-arrow"):null,v=y?7:0,S=m.right-m.left,C=(t=cy.get(f))!==null&&t!==void 0?t:m.bottom-m.top,k=f.offset||yB,T=this.view.textDirection==Ft.LTR,P=m.width>i.right-i.left?T?i.left:i.right-m.width:T?Math.max(i.left,Math.min(p.left-(y?14:0)+k.x,i.right-S)):Math.min(Math.max(i.left,p.left-S+(y?14:0)-k.x),i.right-S),I=this.above[a];!h.strictSide&&(I?p.top-C-v-k.y<i.top:p.bottom+C+v+k.y>i.bottom)&&I==i.bottom-p.bottom>p.top-i.top&&(I=this.above[a]=!I);let L=(I?p.top-i.top:i.bottom-p.bottom)-v;if(L<C&&f.resize!==!1){if(L<this.view.defaultLineHeight){c.style.top=Ys;continue}cy.set(f,C),c.style.height=(C=L)/s+"px"}else c.style.height&&(c.style.height="");let _=I?p.top-C-v-k.y:p.bottom+v+k.y,F=P+S;if(f.overlap!==!0)for(let $ of o)$.left<F&&$.right>P&&$.top<_+C&&$.bottom>_&&(_=I?$.top-C-2-v:$.bottom+v+2);if(this.position=="absolute"?(c.style.top=(_-n.parent.top)/s+"px",fy(c,(P-n.parent.left)/r)):(c.style.top=_/s+"px",fy(c,P/r)),y){let $=p.left+(T?k.x:-k.x)-(P+14-7);y.style.left=$/r+"px"}f.overlap!==!0&&o.push({left:P,top:_,right:F,bottom:_+C}),c.classList.toggle("cm-tooltip-above",I),c.classList.toggle("cm-tooltip-below",!I),f.positioned&&f.positioned(n.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let n of this.manager.tooltipViews)n.dom.style.top=Ys}},{eventObservers:{scroll(){this.maybeMeasure()}}});function fy(n,t){let e=parseInt(n.style.left,10);(isNaN(e)||Math.abs(t-e)>1)&&(n.style.left=t+"px")}const gB=q.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:"14px",position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),yB={x:0,y:0},_d=X.define({enables:[Id,gB]}),Ja=X.define({combine:n=>n.reduce((t,e)=>t.concat(e),[])});class bh{static create(t){return new bh(t)}constructor(t){this.view=t,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new u1(t,Ja,(e,i)=>this.createHostedView(e,i),e=>e.dom.remove())}createHostedView(t,e){let i=t.create(this.view);return i.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(i.dom,e?e.dom.nextSibling:this.dom.firstChild),this.mounted&&i.mount&&i.mount(this.view),i}mount(t){for(let e of this.manager.tooltipViews)e.mount&&e.mount(t);this.mounted=!0}positioned(t){for(let e of this.manager.tooltipViews)e.positioned&&e.positioned(t)}update(t){this.manager.update(t)}destroy(){var t;for(let e of this.manager.tooltipViews)(t=e.destroy)===null||t===void 0||t.call(e)}passProp(t){let e;for(let i of this.manager.tooltipViews){let r=i[t];if(r!==void 0){if(e===void 0)e=r;else if(e!==r)return}}return e}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const xB=_d.compute([Ja],n=>{let t=n.facet(Ja);return t.length===0?null:{pos:Math.min(...t.map(e=>e.pos)),end:Math.max(...t.map(e=>{var i;return(i=e.end)!==null&&i!==void 0?i:e.pos})),create:bh.create,above:t[0].above,arrow:t.some(e=>e.arrow)}});class vB{constructor(t,e,i,r,s){this.view=t,this.source=e,this.field=i,this.setHover=r,this.hoverTime=s,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:t.dom,time:0},this.checkHover=this.checkHover.bind(this),t.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),t.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let t=Date.now()-this.lastMove.time;t<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-t):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:t,lastMove:e}=this,i=t.docView.nearest(e.target);if(!i)return;let r,s=1;if(i instanceof Ii)r=i.posAtStart;else{if(r=t.posAtCoords(e),r==null)return;let a=t.coordsAtPos(r);if(!a||e.y<a.top||e.y>a.bottom||e.x<a.left-t.defaultCharacterWidth||e.x>a.right+t.defaultCharacterWidth)return;let h=t.bidiSpans(t.state.doc.lineAt(r)).find(c=>c.from<=r&&c.to>=r),f=h&&h.dir==Ft.RTL?-1:1;s=e.x<a.left?-f:f}let o=this.source(t,r,s);if(o?.then){let a=this.pending={pos:r};o.then(h=>{this.pending==a&&(this.pending=null,h&&!(Array.isArray(h)&&!h.length)&&t.dispatch({effects:this.setHover.of(Array.isArray(h)?h:[h])}))},h=>Fe(t.state,h,"hover tooltip"))}else o&&!(Array.isArray(o)&&!o.length)&&t.dispatch({effects:this.setHover.of(Array.isArray(o)?o:[o])})}get tooltip(){let t=this.view.plugin(Id),e=t?t.manager.tooltips.findIndex(i=>i.create==bh.create):-1;return e>-1?t.manager.tooltipViews[e]:null}mousemove(t){var e,i;this.lastMove={x:t.clientX,y:t.clientY,target:t.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:r,tooltip:s}=this;if(r.length&&s&&!bB(s.dom,t)||this.pending){let{pos:o}=r[0]||this.pending,a=(i=(e=r[0])===null||e===void 0?void 0:e.end)!==null&&i!==void 0?i:o;(o==a?this.view.posAtCoords(this.lastMove)!=o:!wB(this.view,o,a,t.clientX,t.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(t){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:e}=this;if(e.length){let{tooltip:i}=this;i&&i.dom.contains(t.relatedTarget)?this.watchTooltipLeave(i.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(t){let e=i=>{t.removeEventListener("mouseleave",e),this.active.length&&!this.view.dom.contains(i.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};t.addEventListener("mouseleave",e)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const da=4;function bB(n,t){let{left:e,right:i,top:r,bottom:s}=n.getBoundingClientRect(),o;if(o=n.querySelector(".cm-tooltip-arrow")){let a=o.getBoundingClientRect();r=Math.min(a.top,r),s=Math.max(a.bottom,s)}return t.clientX>=e-da&&t.clientX<=i+da&&t.clientY>=r-da&&t.clientY<=s+da}function wB(n,t,e,i,r,s){let o=n.scrollDOM.getBoundingClientRect(),a=n.documentTop+n.documentPadding.top+n.contentHeight;if(o.left>i||o.right<i||o.top>r||Math.min(o.bottom,a)<r)return!1;let h=n.posAtCoords({x:i,y:r},!1);return h>=t&&h<=e}function SB(n,t={}){let e=ft.define(),i=ge.define({create(){return[]},update(r,s){if(r.length&&(t.hideOnChange&&(s.docChanged||s.selection)?r=[]:t.hideOn&&(r=r.filter(o=>!t.hideOn(s,o))),s.docChanged)){let o=[];for(let a of r){let h=s.changes.mapPos(a.pos,-1,Pe.TrackDel);if(h!=null){let f=Object.assign(Object.create(null),a);f.pos=h,f.end!=null&&(f.end=s.changes.mapPos(f.end)),o.push(f)}}r=o}for(let o of s.effects)o.is(e)&&(r=o.value),o.is(CB)&&(r=[]);return r},provide:r=>Ja.from(r)});return{active:i,extension:[i,Qt.define(r=>new vB(r,n,i,e,t.hoverTime||300)),xB]}}function c1(n,t){let e=n.plugin(Id);if(!e)return null;let i=e.manager.tooltips.indexOf(t);return i<0?null:e.manager.tooltipViews[i]}const CB=ft.define(),dy=X.define({combine(n){let t,e;for(let i of n)t=t||i.topContainer,e=e||i.bottomContainer;return{topContainer:t,bottomContainer:e}}});function Do(n,t){let e=n.plugin(f1),i=e?e.specs.indexOf(t):-1;return i>-1?e.panels[i]:null}const f1=Qt.fromClass(class{constructor(n){this.input=n.state.facet(Ro),this.specs=this.input.filter(e=>e),this.panels=this.specs.map(e=>e(n));let t=n.state.facet(dy);this.top=new pa(n,!0,t.topContainer),this.bottom=new pa(n,!1,t.bottomContainer),this.top.sync(this.panels.filter(e=>e.top)),this.bottom.sync(this.panels.filter(e=>!e.top));for(let e of this.panels)e.dom.classList.add("cm-panel"),e.mount&&e.mount()}update(n){let t=n.state.facet(dy);this.top.container!=t.topContainer&&(this.top.sync([]),this.top=new pa(n.view,!0,t.topContainer)),this.bottom.container!=t.bottomContainer&&(this.bottom.sync([]),this.bottom=new pa(n.view,!1,t.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let e=n.state.facet(Ro);if(e!=this.input){let i=e.filter(h=>h),r=[],s=[],o=[],a=[];for(let h of i){let f=this.specs.indexOf(h),c;f<0?(c=h(n.view),a.push(c)):(c=this.panels[f],c.update&&c.update(n)),r.push(c),(c.top?s:o).push(c)}this.specs=i,this.panels=r,this.top.sync(s),this.bottom.sync(o);for(let h of a)h.dom.classList.add("cm-panel"),h.mount&&h.mount()}else for(let i of this.panels)i.update&&i.update(n)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:n=>q.scrollMargins.of(t=>{let e=t.plugin(n);return e&&{top:e.top.scrollMargin(),bottom:e.bottom.scrollMargin()}})});class pa{constructor(t,e,i){this.view=t,this.top=e,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(t){for(let e of this.panels)e.destroy&&t.indexOf(e)<0&&e.destroy();this.panels=t,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let e=this.container||this.view.dom;e.insertBefore(this.dom,this.top?e.firstChild:null)}let t=this.dom.firstChild;for(let e of this.panels)if(e.dom.parentNode==this.dom){for(;t!=e.dom;)t=py(t);t=t.nextSibling}else this.dom.insertBefore(e.dom,t);for(;t;)t=py(t)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let t of this.classes.split(" "))t&&this.container.classList.remove(t);for(let t of(this.classes=this.view.themeClasses).split(" "))t&&this.container.classList.add(t)}}}function py(n){let t=n.nextSibling;return n.remove(),t}const Ro=X.define({enables:f1});class mi extends vr{compare(t){return this==t||this.constructor==t.constructor&&this.eq(t)}eq(t){return!1}destroy(t){}}mi.prototype.elementClass="";mi.prototype.toDOM=void 0;mi.prototype.mapMode=Pe.TrackBefore;mi.prototype.startSide=mi.prototype.endSide=-1;mi.prototype.point=!0;const _a=X.define(),kB=X.define(),AB={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>kt.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{},side:"before"},fo=X.define();function TB(n){return[d1(),fo.of({...AB,...n})]}const my=X.define({combine:n=>n.some(t=>t)});function d1(n){return[MB]}const MB=Qt.fromClass(class{constructor(n){this.view=n,this.domAfter=null,this.prevViewport=n.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=n.state.facet(fo).map(t=>new yy(n,t)),this.fixed=!n.state.facet(my);for(let t of this.gutters)t.config.side=="after"?this.getDOMAfter().appendChild(t.dom):this.dom.appendChild(t.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),n.scrollDOM.insertBefore(this.dom,n.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(n){if(this.updateGutters(n)){let t=this.prevViewport,e=n.view.viewport,i=Math.min(t.to,e.to)-Math.max(t.from,e.from);this.syncGutters(i<(e.to-e.from)*.8)}if(n.geometryChanged){let t=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=t,this.domAfter&&(this.domAfter.style.minHeight=t)}this.view.state.facet(my)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=n.view.viewport}syncGutters(n){let t=this.dom.nextSibling;n&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let e=kt.iter(this.view.state.facet(_a),this.view.viewport.from),i=[],r=this.gutters.map(s=>new PB(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks)if(i.length&&(i=[]),Array.isArray(s.type)){let o=!0;for(let a of s.type)if(a.type==Re.Text&&o){Lf(e,i,a.from);for(let h of r)h.line(this.view,a,i);o=!1}else if(a.widget)for(let h of r)h.widget(this.view,a)}else if(s.type==Re.Text){Lf(e,i,s.from);for(let o of r)o.line(this.view,s,i)}else if(s.widget)for(let o of r)o.widget(this.view,s);for(let s of r)s.finish();n&&(this.view.scrollDOM.insertBefore(this.dom,t),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(n){let t=n.startState.facet(fo),e=n.state.facet(fo),i=n.docChanged||n.heightChanged||n.viewportChanged||!kt.eq(n.startState.facet(_a),n.state.facet(_a),n.view.viewport.from,n.view.viewport.to);if(t==e)for(let r of this.gutters)r.update(n)&&(i=!0);else{i=!0;let r=[];for(let s of e){let o=t.indexOf(s);o<0?r.push(new yy(this.view,s)):(this.gutters[o].update(n),r.push(this.gutters[o]))}for(let s of this.gutters)s.dom.remove(),r.indexOf(s)<0&&s.destroy();for(let s of r)s.config.side=="after"?this.getDOMAfter().appendChild(s.dom):this.dom.appendChild(s.dom);this.gutters=r}return i}destroy(){for(let n of this.gutters)n.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:n=>q.scrollMargins.of(t=>{let e=t.plugin(n);if(!e||e.gutters.length==0||!e.fixed)return null;let i=e.dom.offsetWidth*t.scaleX,r=e.domAfter?e.domAfter.offsetWidth*t.scaleX:0;return t.textDirection==Ft.LTR?{left:i,right:r}:{right:i,left:r}})});function gy(n){return Array.isArray(n)?n:[n]}function Lf(n,t,e){for(;n.value&&n.from<=e;)n.from==e&&t.push(n.value),n.next()}class PB{constructor(t,e,i){this.gutter=t,this.height=i,this.i=0,this.cursor=kt.iter(t.markers,e.from)}addElement(t,e,i){let{gutter:r}=this,s=(e.top-this.height)/t.scaleY,o=e.height/t.scaleY;if(this.i==r.elements.length){let a=new p1(t,o,s,i);r.elements.push(a),r.dom.appendChild(a.dom)}else r.elements[this.i].update(t,o,s,i);this.height=e.bottom,this.i++}line(t,e,i){let r=[];Lf(this.cursor,r,e.from),i.length&&(r=r.concat(i));let s=this.gutter.config.lineMarker(t,e,r);s&&r.unshift(s);let o=this.gutter;r.length==0&&!o.config.renderEmptyElements||this.addElement(t,e,r)}widget(t,e){let i=this.gutter.config.widgetMarker(t,e.widget,e),r=i?[i]:null;for(let s of t.state.facet(kB)){let o=s(t,e.widget,e);o&&(r||(r=[])).push(o)}r&&this.addElement(t,e,r)}finish(){let t=this.gutter;for(;t.elements.length>this.i;){let e=t.elements.pop();t.dom.removeChild(e.dom),e.destroy()}}}class yy{constructor(t,e){this.view=t,this.config=e,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let i in e.domEventHandlers)this.dom.addEventListener(i,r=>{let s=r.target,o;if(s!=this.dom&&this.dom.contains(s)){for(;s.parentNode!=this.dom;)s=s.parentNode;let h=s.getBoundingClientRect();o=(h.top+h.bottom)/2}else o=r.clientY;let a=t.lineBlockAtHeight(o-t.documentTop);e.domEventHandlers[i](t,a,r)&&r.preventDefault()});this.markers=gy(e.markers(t)),e.initialSpacer&&(this.spacer=new p1(t,0,0,[e.initialSpacer(t)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(t){let e=this.markers;if(this.markers=gy(this.config.markers(t.view)),this.spacer&&this.config.updateSpacer){let r=this.config.updateSpacer(this.spacer.markers[0],t);r!=this.spacer.markers[0]&&this.spacer.update(t.view,0,0,[r])}let i=t.view.viewport;return!kt.eq(this.markers,e,i.from,i.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(t):!1)}destroy(){for(let t of this.elements)t.destroy()}}class p1{constructor(t,e,i,r){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(t,e,i,r)}update(t,e,i,r){this.height!=e&&(this.height=e,this.dom.style.height=e+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),DB(this.markers,r)||this.setMarkers(t,r)}setMarkers(t,e){let i="cm-gutterElement",r=this.dom.firstChild;for(let s=0,o=0;;){let a=o,h=s<e.length?e[s++]:null,f=!1;if(h){let c=h.elementClass;c&&(i+=" "+c);for(let p=o;p<this.markers.length;p++)if(this.markers[p].compare(h)){a=p,f=!0;break}}else a=this.markers.length;for(;o<a;){let c=this.markers[o++];if(c.toDOM){c.destroy(r);let p=r.nextSibling;r.remove(),r=p}}if(!h)break;h.toDOM&&(f?r=r.nextSibling:this.dom.insertBefore(h.toDOM(t),r)),f&&o++}this.dom.className=i,this.markers=e}destroy(){this.setMarkers(null,[])}}function DB(n,t){if(n.length!=t.length)return!1;for(let e=0;e<n.length;e++)if(!n[e].compare(t[e]))return!1;return!0}const RB=X.define(),EB=X.define(),Kr=X.define({combine(n){return Xn(n,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(t,e){let i=Object.assign({},t);for(let r in e){let s=i[r],o=e[r];i[r]=s?(a,h,f)=>s(a,h,f)||o(a,h,f):o}return i}})}});class pc extends mi{constructor(t){super(),this.number=t}eq(t){return this.number==t.number}toDOM(){return document.createTextNode(this.number)}}function mc(n,t){return n.state.facet(Kr).formatNumber(t,n.state)}const LB=fo.compute([Kr],n=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(t){return t.state.facet(RB)},lineMarker(t,e,i){return i.some(r=>r.toDOM)?null:new pc(mc(t,t.state.doc.lineAt(e.from).number))},widgetMarker:(t,e,i)=>{for(let r of t.state.facet(EB)){let s=r(t,e,i);if(s)return s}return null},lineMarkerChange:t=>t.startState.facet(Kr)!=t.state.facet(Kr),initialSpacer(t){return new pc(mc(t,xy(t.state.doc.lines)))},updateSpacer(t,e){let i=mc(e.view,xy(e.view.state.doc.lines));return i==t.number?t:new pc(i)},domEventHandlers:n.facet(Kr).domEventHandlers,side:"before"}));function OB(n={}){return[Kr.of(n),d1(),LB]}function xy(n){let t=9;for(;t<n;)t=t*10+9;return t}const BB=new class extends mi{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},IB=_a.compute(["selection"],n=>{let t=[],e=-1;for(let i of n.selection.ranges){let r=n.doc.lineAt(i.head).from;r>e&&(e=r,t.push(BB.range(r)))}return kt.of(t)});function _B(){return IB}let NB=0;class un{constructor(t,e,i,r){this.name=t,this.set=e,this.base=i,this.modified=r,this.id=NB++}toString(){let{name:t}=this;for(let e of this.modified)e.name&&(t=`${e.name}(${t})`);return t}static define(t,e){let i=typeof t=="string"?t:"?";if(t instanceof un&&(e=t),e?.base)throw new Error("Can not derive from a modified tag");let r=new un(i,[],null,[]);if(r.set.push(r),e)for(let s of e.set)r.set.push(s);return r}static defineModifier(t){let e=new Za(t);return i=>i.modified.indexOf(e)>-1?i:Za.get(i.base||i,i.modified.concat(e).sort((r,s)=>r.id-s.id))}}let FB=0;class Za{constructor(t){this.name=t,this.instances=[],this.id=FB++}static get(t,e){if(!e.length)return t;let i=e[0].instances.find(a=>a.base==t&&VB(e,a.modified));if(i)return i;let r=[],s=new un(t.name,r,t,e);for(let a of e)a.instances.push(s);let o=WB(e);for(let a of t.set)if(!a.modified.length)for(let h of o)r.push(Za.get(a,h));return s}}function VB(n,t){return n.length==t.length&&n.every((e,i)=>e==t[i])}function WB(n){let t=[[]];for(let e=0;e<n.length;e++)for(let i=0,r=t.length;i<r;i++)t.push(t[i].concat(n[e]));return t.sort((e,i)=>i.length-e.length)}function HB(n){let t=Object.create(null);for(let e in n){let i=n[e];Array.isArray(i)||(i=[i]);for(let r of e.split(" "))if(r){let s=[],o=2,a=r;for(let p=0;;){if(a=="..."&&p>0&&p+3==r.length){o=1;break}let m=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(a);if(!m)throw new RangeError("Invalid path: "+r);if(s.push(m[0]=="*"?"":m[0][0]=='"'?JSON.parse(m[0]):m[0]),p+=m[0].length,p==r.length)break;let y=r[p++];if(p==r.length&&y=="!"){o=0;break}if(y!="/")throw new RangeError("Invalid path: "+r);a=r.slice(p)}let h=s.length-1,f=s[h];if(!f)throw new RangeError("Invalid path: "+r);let c=new Eo(i,o,h>0?s.slice(0,h):null);t[f]=c.sort(t[f])}}return m1.add(t)}const m1=new bt({combine(n,t){let e,i,r;for(;n||t;){!n||n.depth>t.depth?(r=t,t=t.next):(r=n,n=n.next);let s=new Eo(r.tags,r.mode,r.context);e?e.next=s:i=s,e=s}return i}});class Eo{constructor(t,e,i,r){this.tags=t,this.mode=e,this.context=i,this.next=r}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(t){return!t||t.depth<this.depth?(this.next=t,this):(t.next=this.sort(t.next),t)}get depth(){return this.context?this.context.length:0}}Eo.empty=new Eo([],2,null);function g1(n,t){let e=Object.create(null);for(let s of n)if(!Array.isArray(s.tag))e[s.tag.id]=s.class;else for(let o of s.tag)e[o.id]=s.class;let{scope:i,all:r=null}=t||{};return{style:s=>{let o=r;for(let a of s)for(let h of a.set){let f=e[h.id];if(f){o=o?o+" "+f:f;break}}return o},scope:i}}function zB(n,t){let e=null;for(let i of n){let r=i.style(t);r&&(e=e?e+" "+r:r)}return e}function UB(n,t,e,i=0,r=n.length){let s=new $B(i,Array.isArray(t)?t:[t],e);s.highlightRange(n.cursor(),i,r,"",s.highlighters),s.flush(r)}class $B{constructor(t,e,i){this.at=t,this.highlighters=e,this.span=i,this.class=""}startSpan(t,e){e!=this.class&&(this.flush(t),t>this.at&&(this.at=t),this.class=e)}flush(t){t>this.at&&this.class&&this.span(this.at,t,this.class)}highlightRange(t,e,i,r,s){let{type:o,from:a,to:h}=t;if(a>=i||h<=e)return;o.isTop&&(s=this.highlighters.filter(y=>!y.scope||y.scope(o)));let f=r,c=jB(t)||Eo.empty,p=zB(s,c.tags);if(p&&(f&&(f+=" "),f+=p,c.mode==1&&(r+=(r?" ":"")+p)),this.startSpan(Math.max(e,a),f),c.opaque)return;let m=t.tree&&t.tree.prop(bt.mounted);if(m&&m.overlay){let y=t.node.enter(m.overlay[0].from+a,1),v=this.highlighters.filter(C=>!C.scope||C.scope(m.tree.type)),S=t.firstChild();for(let C=0,k=a;;C++){let T=C<m.overlay.length?m.overlay[C]:null,P=T?T.from+a:h,I=Math.max(e,k),L=Math.min(i,P);if(I<L&&S)for(;t.from<L&&(this.highlightRange(t,I,L,r,s),this.startSpan(Math.min(L,t.to),f),!(t.to>=P||!t.nextSibling())););if(!T||P>i)break;k=T.to+a,k>e&&(this.highlightRange(y.cursor(),Math.max(e,T.from+a),Math.min(i,k),"",v),this.startSpan(Math.min(i,k),f))}S&&t.parent()}else if(t.firstChild()){m&&(r="");do if(!(t.to<=e)){if(t.from>=i)break;this.highlightRange(t,e,i,r,s),this.startSpan(Math.min(i,t.to),f)}while(t.nextSibling());t.parent()}}}function jB(n){let t=n.type.prop(m1);for(;t&&t.context&&!n.matchContext(t.context);)t=t.next;return t||null}const K=un.define,ma=K(),Ri=K(),vy=K(Ri),by=K(Ri),Ei=K(),ga=K(Ei),gc=K(Ei),Fn=K(),ir=K(Fn),_n=K(),Nn=K(),Of=K(),Xs=K(Of),ya=K(),B={comment:ma,lineComment:K(ma),blockComment:K(ma),docComment:K(ma),name:Ri,variableName:K(Ri),typeName:vy,tagName:K(vy),propertyName:by,attributeName:K(by),className:K(Ri),labelName:K(Ri),namespace:K(Ri),macroName:K(Ri),literal:Ei,string:ga,docString:K(ga),character:K(ga),attributeValue:K(ga),number:gc,integer:K(gc),float:K(gc),bool:K(Ei),regexp:K(Ei),escape:K(Ei),color:K(Ei),url:K(Ei),keyword:_n,self:K(_n),null:K(_n),atom:K(_n),unit:K(_n),modifier:K(_n),operatorKeyword:K(_n),controlKeyword:K(_n),definitionKeyword:K(_n),moduleKeyword:K(_n),operator:Nn,derefOperator:K(Nn),arithmeticOperator:K(Nn),logicOperator:K(Nn),bitwiseOperator:K(Nn),compareOperator:K(Nn),updateOperator:K(Nn),definitionOperator:K(Nn),typeOperator:K(Nn),controlOperator:K(Nn),punctuation:Of,separator:K(Of),bracket:Xs,angleBracket:K(Xs),squareBracket:K(Xs),paren:K(Xs),brace:K(Xs),content:Fn,heading:ir,heading1:K(ir),heading2:K(ir),heading3:K(ir),heading4:K(ir),heading5:K(ir),heading6:K(ir),contentSeparator:K(Fn),list:K(Fn),quote:K(Fn),emphasis:K(Fn),strong:K(Fn),link:K(Fn),monospace:K(Fn),strikethrough:K(Fn),inserted:K(),deleted:K(),changed:K(),invalid:K(),meta:ya,documentMeta:K(ya),annotation:K(ya),processingInstruction:K(ya),definition:un.defineModifier("definition"),constant:un.defineModifier("constant"),function:un.defineModifier("function"),standard:un.defineModifier("standard"),local:un.defineModifier("local"),special:un.defineModifier("special")};for(let n in B){let t=B[n];t instanceof un&&(t.name=n)}g1([{tag:B.link,class:"tok-link"},{tag:B.heading,class:"tok-heading"},{tag:B.emphasis,class:"tok-emphasis"},{tag:B.strong,class:"tok-strong"},{tag:B.keyword,class:"tok-keyword"},{tag:B.atom,class:"tok-atom"},{tag:B.bool,class:"tok-bool"},{tag:B.url,class:"tok-url"},{tag:B.labelName,class:"tok-labelName"},{tag:B.inserted,class:"tok-inserted"},{tag:B.deleted,class:"tok-deleted"},{tag:B.literal,class:"tok-literal"},{tag:B.string,class:"tok-string"},{tag:B.number,class:"tok-number"},{tag:[B.regexp,B.escape,B.special(B.string)],class:"tok-string2"},{tag:B.variableName,class:"tok-variableName"},{tag:B.local(B.variableName),class:"tok-variableName tok-local"},{tag:B.definition(B.variableName),class:"tok-variableName tok-definition"},{tag:B.special(B.variableName),class:"tok-variableName2"},{tag:B.definition(B.propertyName),class:"tok-propertyName tok-definition"},{tag:B.typeName,class:"tok-typeName"},{tag:B.namespace,class:"tok-namespace"},{tag:B.className,class:"tok-className"},{tag:B.macroName,class:"tok-macroName"},{tag:B.propertyName,class:"tok-propertyName"},{tag:B.operator,class:"tok-operator"},{tag:B.comment,class:"tok-comment"},{tag:B.meta,class:"tok-meta"},{tag:B.invalid,class:"tok-invalid"},{tag:B.punctuation,class:"tok-punctuation"}]);var yc;const qr=new bt;function KB(n){return X.define({combine:n?t=>t.concat(n):void 0})}const qB=new bt;class Tn{constructor(t,e,i=[],r=""){this.data=t,this.name=r,Ct.prototype.hasOwnProperty("tree")||Object.defineProperty(Ct.prototype,"tree",{get(){return Se(this)}}),this.parser=e,this.extension=[zi.of(this),Ct.languageData.of((s,o,a)=>{let h=wy(s,o,a),f=h.type.prop(qr);if(!f)return[];let c=s.facet(f),p=h.type.prop(qB);if(p){let m=h.resolve(o-h.from,a);for(let y of p)if(y.test(m,s)){let v=s.facet(y.facet);return y.type=="replace"?v:v.concat(c)}}return c})].concat(i)}isActiveAt(t,e,i=-1){return wy(t,e,i).type.prop(qr)==this.data}findRegions(t){let e=t.facet(zi);if(e?.data==this.data)return[{from:0,to:t.doc.length}];if(!e||!e.allowsNesting)return[];let i=[],r=(s,o)=>{if(s.prop(qr)==this.data){i.push({from:o,to:o+s.length});return}let a=s.prop(bt.mounted);if(a){if(a.tree.prop(qr)==this.data){if(a.overlay)for(let h of a.overlay)i.push({from:h.from+o,to:h.to+o});else i.push({from:o,to:o+s.length});return}else if(a.overlay){let h=i.length;if(r(a.tree,a.overlay[0].from+o),i.length>h)return}}for(let h=0;h<s.children.length;h++){let f=s.children[h];f instanceof $t&&r(f,s.positions[h]+o)}};return r(Se(t),0),i}get allowsNesting(){return!0}}Tn.setState=ft.define();function wy(n,t,e){let i=n.facet(zi),r=Se(n).topNode;if(!i||i.allowsNesting)for(let s=r;s;s=s.enter(t,e,de.ExcludeBuffers))s.type.isTop&&(r=s);return r}function Se(n){let t=n.field(Tn.state,!1);return t?t.tree:$t.empty}class GB{constructor(t){this.doc=t,this.cursorPos=0,this.string="",this.cursor=t.iter()}get length(){return this.doc.length}syncTo(t){return this.string=this.cursor.next(t-this.cursorPos).value,this.cursorPos=t+this.string.length,this.cursorPos-this.string.length}chunk(t){return this.syncTo(t),this.string}get lineChunks(){return!0}read(t,e){let i=this.cursorPos-this.string.length;return t<i||e>=this.cursorPos?this.doc.sliceString(t,e):this.string.slice(t-i,e-i)}}let Js=null;class cs{constructor(t,e,i=[],r,s,o,a,h){this.parser=t,this.state=e,this.fragments=i,this.tree=r,this.treeLen=s,this.viewport=o,this.skipped=a,this.scheduleOn=h,this.parse=null,this.tempSkipped=[]}static create(t,e,i){return new cs(t,e,[],$t.empty,0,i,[],null)}startParse(){return this.parser.startParse(new GB(this.state.doc),this.fragments)}work(t,e){return e!=null&&e>=this.state.doc.length&&(e=void 0),this.tree!=$t.empty&&this.isDone(e??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof t=="number"){let r=Date.now()+t;t=()=>Date.now()>r}for(this.parse||(this.parse=this.startParse()),e!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&e<this.state.doc.length&&this.parse.stopAt(e);;){let r=this.parse.advance();if(r)if(this.fragments=this.withoutTempSkipped(mr.addTree(r,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=r,this.parse=null,this.treeLen<(e??this.state.doc.length))this.parse=this.startParse();else return!0;if(t())return!1}})}takeTree(){let t,e;this.parse&&(t=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&this.parse.stopAt(t),this.withContext(()=>{for(;!(e=this.parse.advance()););}),this.treeLen=t,this.tree=e,this.fragments=this.withoutTempSkipped(mr.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(t){let e=Js;Js=this;try{return t()}finally{Js=e}}withoutTempSkipped(t){for(let e;e=this.tempSkipped.pop();)t=Sy(t,e.from,e.to);return t}changes(t,e){let{fragments:i,tree:r,treeLen:s,viewport:o,skipped:a}=this;if(this.takeTree(),!t.empty){let h=[];if(t.iterChangedRanges((f,c,p,m)=>h.push({fromA:f,toA:c,fromB:p,toB:m})),i=mr.applyChanges(i,h),r=$t.empty,s=0,o={from:t.mapPos(o.from,-1),to:t.mapPos(o.to,1)},this.skipped.length){a=[];for(let f of this.skipped){let c=t.mapPos(f.from,1),p=t.mapPos(f.to,-1);c<p&&a.push({from:c,to:p})}}}return new cs(this.parser,e,i,r,s,o,a,this.scheduleOn)}updateViewport(t){if(this.viewport.from==t.from&&this.viewport.to==t.to)return!1;this.viewport=t;let e=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:r,to:s}=this.skipped[i];r<t.to&&s>t.from&&(this.fragments=Sy(this.fragments,r,s),this.skipped.splice(i--,1))}return this.skipped.length>=e?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(t,e){this.skipped.push({from:t,to:e})}static getSkippingParser(t){return new class extends Hv{createParse(e,i,r){let s=r[0].from,o=r[r.length-1].to;return{parsedPos:s,advance(){let h=Js;if(h){for(let f of r)h.tempSkipped.push(f);t&&(h.scheduleOn=h.scheduleOn?Promise.all([h.scheduleOn,t]):t)}return this.parsedPos=o,new $t(He.none,[],[],o-s)},stoppedAt:null,stopAt(){}}}}}isDone(t){t=Math.min(t,this.state.doc.length);let e=this.fragments;return this.treeLen>=t&&e.length&&e[0].from==0&&e[0].to>=t}static get(){return Js}}function Sy(n,t,e){return mr.applyChanges(n,[{fromA:t,toA:e,fromB:t,toB:e}])}class fs{constructor(t){this.context=t,this.tree=t.tree}apply(t){if(!t.docChanged&&this.tree==this.context.tree)return this;let e=this.context.changes(t.changes,t.state),i=this.context.treeLen==t.startState.doc.length?void 0:Math.max(t.changes.mapPos(this.context.treeLen),e.viewport.to);return e.work(20,i)||e.takeTree(),new fs(e)}static init(t){let e=Math.min(3e3,t.doc.length),i=cs.create(t.facet(zi).parser,t,{from:0,to:e});return i.work(20,e)||i.takeTree(),new fs(i)}}Tn.state=ge.define({create:fs.init,update(n,t){for(let e of t.effects)if(e.is(Tn.setState))return e.value;return t.startState.facet(zi)!=t.state.facet(zi)?fs.init(t.state):n.apply(t)}});let y1=n=>{let t=setTimeout(()=>n(),500);return()=>clearTimeout(t)};typeof requestIdleCallback<"u"&&(y1=n=>{let t=-1,e=setTimeout(()=>{t=requestIdleCallback(n,{timeout:400})},100);return()=>t<0?clearTimeout(e):cancelIdleCallback(t)});const xc=typeof navigator<"u"&&(!((yc=navigator.scheduling)===null||yc===void 0)&&yc.isInputPending)?()=>navigator.scheduling.isInputPending():null,YB=Qt.fromClass(class{constructor(t){this.view=t,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(t){let e=this.view.state.field(Tn.state).context;(e.updateViewport(t.view.viewport)||this.view.viewport.to>e.treeLen)&&this.scheduleWork(),(t.docChanged||t.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(e)}scheduleWork(){if(this.working)return;let{state:t}=this.view,e=t.field(Tn.state);(e.tree!=e.context.tree||!e.context.isDone(t.doc.length))&&(this.working=y1(this.work))}work(t){this.working=null;let e=Date.now();if(this.chunkEnd<e&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=e+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:r}}=this.view,s=i.field(Tn.state);if(s.tree==s.context.tree&&s.context.isDone(r+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,t&&!xc?Math.max(25,t.timeRemaining()-5):1e9),a=s.context.treeLen<r&&i.doc.length>r+1e3,h=s.context.work(()=>xc&&xc()||Date.now()>o,r+(a?0:1e5));this.chunkBudget-=Date.now()-e,(h||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:Tn.setState.of(new fs(s.context))})),this.chunkBudget>0&&!(h&&!a)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(t){t.scheduleOn&&(this.workScheduled++,t.scheduleOn.then(()=>this.scheduleWork()).catch(e=>Fe(this.view.state,e)).then(()=>this.workScheduled--),t.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),zi=X.define({combine(n){return n.length?n[0]:null},enables:n=>[Tn.state,YB,q.contentAttributes.compute([n],t=>{let e=t.facet(n);return e&&e.name?{"data-language":e.name}:{}})]}),XB=X.define(),wh=X.define({combine:n=>{if(!n.length)return"  ";let t=n[0];if(!t||/\S/.test(t)||Array.from(t).some(e=>e!=t[0]))throw new Error("Invalid indent unit: "+JSON.stringify(n[0]));return t}});function Cr(n){let t=n.facet(wh);return t.charCodeAt(0)==9?n.tabSize*t.length:t.length}function Lo(n,t){let e="",i=n.tabSize,r=n.facet(wh)[0];if(r=="	"){for(;t>=i;)e+="	",t-=i;r=" "}for(let s=0;s<t;s++)e+=r;return e}function Nd(n,t){n instanceof Ct&&(n=new Sh(n));for(let i of n.state.facet(XB)){let r=i(n,t);if(r!==void 0)return r}let e=Se(n.state);return e.length>=t?JB(n,e,t):null}class Sh{constructor(t,e={}){this.state=t,this.options=e,this.unit=Cr(t)}lineAt(t,e=1){let i=this.state.doc.lineAt(t),{simulateBreak:r,simulateDoubleBreak:s}=this.options;return r!=null&&r>=i.from&&r<=i.to?s&&r==t?{text:"",from:t}:(e<0?r<t:r<=t)?{text:i.text.slice(r-i.from),from:r}:{text:i.text.slice(0,r-i.from),from:i.from}:i}textAfterPos(t,e=1){if(this.options.simulateDoubleBreak&&t==this.options.simulateBreak)return"";let{text:i,from:r}=this.lineAt(t,e);return i.slice(t-r,Math.min(i.length,t+100-r))}column(t,e=1){let{text:i,from:r}=this.lineAt(t,e),s=this.countColumn(i,t-r),o=this.options.overrideIndentation?this.options.overrideIndentation(r):-1;return o>-1&&(s+=o-this.countColumn(i,i.search(/\S|$/))),s}countColumn(t,e=t.length){return xs(t,this.state.tabSize,e)}lineIndent(t,e=1){let{text:i,from:r}=this.lineAt(t,e),s=this.options.overrideIndentation;if(s){let o=s(r);if(o>-1)return o}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const x1=new bt;function JB(n,t,e){let i=t.resolveStack(e),r=t.resolveInner(e,-1).resolve(e,0).enterUnfinishedNodesBefore(e);if(r!=i.node){let s=[];for(let o=r;o&&!(o.from<i.node.from||o.to>i.node.to||o.from==i.node.from&&o.type==i.node.type);o=o.parent)s.push(o);for(let o=s.length-1;o>=0;o--)i={node:s[o],next:i}}return v1(i,n,e)}function v1(n,t,e){for(let i=n;i;i=i.next){let r=QB(i.node);if(r)return r(Fd.create(t,e,i))}return 0}function ZB(n){return n.pos==n.options.simulateBreak&&n.options.simulateDoubleBreak}function QB(n){let t=n.type.prop(x1);if(t)return t;let e=n.firstChild,i;if(e&&(i=e.type.prop(bt.closedBy))){let r=n.lastChild,s=r&&i.indexOf(r.name)>-1;return o=>iI(o,!0,1,void 0,s&&!ZB(o)?r.from:void 0)}return n.parent==null?tI:null}function tI(){return 0}class Fd extends Sh{constructor(t,e,i){super(t.state,t.options),this.base=t,this.pos=e,this.context=i}get node(){return this.context.node}static create(t,e,i){return new Fd(t,e,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(t){let e=this.state.doc.lineAt(t.from);for(;;){let i=t.resolve(e.from);for(;i.parent&&i.parent.from==i.from;)i=i.parent;if(eI(i,t))break;e=this.state.doc.lineAt(i.from)}return this.lineIndent(e.from)}continue(){return v1(this.context.next,this.base,this.pos)}}function eI(n,t){for(let e=t;e;e=e.parent)if(n==e)return!0;return!1}function nI(n){let t=n.node,e=t.childAfter(t.from),i=t.lastChild;if(!e)return null;let r=n.options.simulateBreak,s=n.state.doc.lineAt(e.from),o=r==null||r<=s.from?s.to:Math.min(s.to,r);for(let a=e.to;;){let h=t.childAfter(a);if(!h||h==i)return null;if(!h.type.isSkipped){if(h.from>=o)return null;let f=/^ */.exec(s.text.slice(e.to-s.from))[0].length;return{from:e.from,to:e.to+f}}a=h.to}}function iI(n,t,e,i,r){let s=n.textAfter,o=s.match(/^\s*/)[0].length,a=i&&s.slice(o,o+i.length)==i||r==n.pos+o,h=nI(n);return h?a?n.column(h.from):n.column(h.to):n.baseIndent+(a?0:n.unit*e)}const rI=200;function sI(){return Ct.transactionFilter.of(n=>{if(!n.docChanged||!n.isUserEvent("input.type")&&!n.isUserEvent("input.complete"))return n;let t=n.startState.languageDataAt("indentOnInput",n.startState.selection.main.head);if(!t.length)return n;let e=n.newDoc,{head:i}=n.newSelection.main,r=e.lineAt(i);if(i>r.from+rI)return n;let s=e.sliceString(r.from,i);if(!t.some(f=>f.test(s)))return n;let{state:o}=n,a=-1,h=[];for(let{head:f}of o.selection.ranges){let c=o.doc.lineAt(f);if(c.from==a)continue;a=c.from;let p=Nd(o,c.from);if(p==null)continue;let m=/^\s*/.exec(c.text)[0],y=Lo(o,p);m!=y&&h.push({from:c.from,to:c.from+m.length,insert:y})}return h.length?[n,{changes:h,sequential:!0}]:n})}const oI=X.define(),lI=new bt;function aI(n,t,e){let i=Se(n);if(i.length<e)return null;let r=i.resolveStack(e,1),s=null;for(let o=r;o;o=o.next){let a=o.node;if(a.to<=e||a.from>e)continue;if(s&&a.from<t)break;let h=a.type.prop(lI);if(h&&(a.to<i.length-50||i.length==n.doc.length||!hI(a))){let f=h(a,n);f&&f.from<=e&&f.from>=t&&f.to>e&&(s=f)}}return s}function hI(n){let t=n.lastChild;return t&&t.to==n.to&&t.type.isError}function Qa(n,t,e){for(let i of n.facet(oI)){let r=i(n,t,e);if(r)return r}return aI(n,t,e)}function b1(n,t){let e=t.mapPos(n.from,1),i=t.mapPos(n.to,-1);return e>=i?void 0:{from:e,to:i}}const Ch=ft.define({map:b1}),Qo=ft.define({map:b1});function w1(n){let t=[];for(let{head:e}of n.state.selection.ranges)t.some(i=>i.from<=e&&i.to>=e)||t.push(n.lineBlockAt(e));return t}const kr=ge.define({create(){return nt.none},update(n,t){t.isUserEvent("delete")&&t.changes.iterChangedRanges((e,i)=>n=Cy(n,e,i)),n=n.map(t.changes);for(let e of t.effects)if(e.is(Ch)&&!uI(n,e.value.from,e.value.to)){let{preparePlaceholder:i}=t.state.facet(k1),r=i?nt.replace({widget:new yI(i(t.state,e.value))}):ky;n=n.update({add:[r.range(e.value.from,e.value.to)]})}else e.is(Qo)&&(n=n.update({filter:(i,r)=>e.value.from!=i||e.value.to!=r,filterFrom:e.value.from,filterTo:e.value.to}));return t.selection&&(n=Cy(n,t.selection.main.head)),n},provide:n=>q.decorations.from(n),toJSON(n,t){let e=[];return n.between(0,t.doc.length,(i,r)=>{e.push(i,r)}),e},fromJSON(n){if(!Array.isArray(n)||n.length%2)throw new RangeError("Invalid JSON for fold state");let t=[];for(let e=0;e<n.length;){let i=n[e++],r=n[e++];if(typeof i!="number"||typeof r!="number")throw new RangeError("Invalid JSON for fold state");t.push(ky.range(i,r))}return nt.set(t,!0)}});function Cy(n,t,e=t){let i=!1;return n.between(t,e,(r,s)=>{r<e&&s>t&&(i=!0)}),i?n.update({filterFrom:t,filterTo:e,filter:(r,s)=>r>=e||s<=t}):n}function th(n,t,e){var i;let r=null;return(i=n.field(kr,!1))===null||i===void 0||i.between(t,e,(s,o)=>{(!r||r.from>s)&&(r={from:s,to:o})}),r}function uI(n,t,e){let i=!1;return n.between(t,t,(r,s)=>{r==t&&s==e&&(i=!0)}),i}function S1(n,t){return n.field(kr,!1)?t:t.concat(ft.appendConfig.of(A1()))}const cI=n=>{for(let t of w1(n)){let e=Qa(n.state,t.from,t.to);if(e)return n.dispatch({effects:S1(n.state,[Ch.of(e),C1(n,e)])}),!0}return!1},fI=n=>{if(!n.state.field(kr,!1))return!1;let t=[];for(let e of w1(n)){let i=th(n.state,e.from,e.to);i&&t.push(Qo.of(i),C1(n,i,!1))}return t.length&&n.dispatch({effects:t}),t.length>0};function C1(n,t,e=!0){let i=n.state.doc.lineAt(t.from).number,r=n.state.doc.lineAt(t.to).number;return q.announce.of(`${n.state.phrase(e?"Folded lines":"Unfolded lines")} ${i} ${n.state.phrase("to")} ${r}.`)}const dI=n=>{let{state:t}=n,e=[];for(let i=0;i<t.doc.length;){let r=n.lineBlockAt(i),s=Qa(t,r.from,r.to);s&&e.push(Ch.of(s)),i=(s?n.lineBlockAt(s.to):r).to+1}return e.length&&n.dispatch({effects:S1(n.state,e)}),!!e.length},pI=n=>{let t=n.state.field(kr,!1);if(!t||!t.size)return!1;let e=[];return t.between(0,n.state.doc.length,(i,r)=>{e.push(Qo.of({from:i,to:r}))}),n.dispatch({effects:e}),!0},mI=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:cI},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:fI},{key:"Ctrl-Alt-[",run:dI},{key:"Ctrl-Alt-]",run:pI}],gI={placeholderDOM:null,preparePlaceholder:null,placeholderText:"â€¦"},k1=X.define({combine(n){return Xn(n,gI)}});function A1(n){return[kr,bI]}function T1(n,t){let{state:e}=n,i=e.facet(k1),r=o=>{let a=n.lineBlockAt(n.posAtDOM(o.target)),h=th(n.state,a.from,a.to);h&&n.dispatch({effects:Qo.of(h)}),o.preventDefault()};if(i.placeholderDOM)return i.placeholderDOM(n,r,t);let s=document.createElement("span");return s.textContent=i.placeholderText,s.setAttribute("aria-label",e.phrase("folded code")),s.title=e.phrase("unfold"),s.className="cm-foldPlaceholder",s.onclick=r,s}const ky=nt.replace({widget:new class extends vi{toDOM(n){return T1(n,null)}}});class yI extends vi{constructor(t){super(),this.value=t}eq(t){return this.value==t.value}toDOM(t){return T1(t,this.value)}}const xI={openText:"âŒ„",closedText:"â€º",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class vc extends mi{constructor(t,e){super(),this.config=t,this.open=e}eq(t){return this.config==t.config&&this.open==t.open}toDOM(t){if(this.config.markerDOM)return this.config.markerDOM(this.open);let e=document.createElement("span");return e.textContent=this.open?this.config.openText:this.config.closedText,e.title=t.state.phrase(this.open?"Fold line":"Unfold line"),e}}function vI(n={}){let t={...xI,...n},e=new vc(t,!0),i=new vc(t,!1),r=Qt.fromClass(class{constructor(o){this.from=o.viewport.from,this.markers=this.buildMarkers(o)}update(o){(o.docChanged||o.viewportChanged||o.startState.facet(zi)!=o.state.facet(zi)||o.startState.field(kr,!1)!=o.state.field(kr,!1)||Se(o.startState)!=Se(o.state)||t.foldingChanged(o))&&(this.markers=this.buildMarkers(o.view))}buildMarkers(o){let a=new di;for(let h of o.viewportLineBlocks){let f=th(o.state,h.from,h.to)?i:Qa(o.state,h.from,h.to)?e:null;f&&a.add(h.from,h.from,f)}return a.finish()}}),{domEventHandlers:s}=t;return[r,TB({class:"cm-foldGutter",markers(o){var a;return((a=o.plugin(r))===null||a===void 0?void 0:a.markers)||kt.empty},initialSpacer(){return new vc(t,!1)},domEventHandlers:{...s,click:(o,a,h)=>{if(s.click&&s.click(o,a,h))return!0;let f=th(o.state,a.from,a.to);if(f)return o.dispatch({effects:Qo.of(f)}),!0;let c=Qa(o.state,a.from,a.to);return c?(o.dispatch({effects:Ch.of(c)}),!0):!1}}}),A1()]}const bI=q.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class Mr{constructor(t,e){this.specs=t;let i;function r(a){let h=Vi.newName();return(i||(i=Object.create(null)))["."+h]=a,h}const s=typeof e.all=="string"?e.all:e.all?r(e.all):void 0,o=e.scope;this.scope=o instanceof Tn?a=>a.prop(qr)==o.data:o?a=>a==o:void 0,this.style=g1(t.map(a=>({tag:a.tag,class:a.class||r(Object.assign({},a,{tag:null}))})),{all:s}).style,this.module=i?new Vi(i):null,this.themeType=e.themeType}static define(t,e){return new Mr(t,e||{})}}const Bf=X.define(),M1=X.define({combine(n){return n.length?[n[0]]:null}});function bc(n){let t=n.facet(Bf);return t.length?t:n.facet(M1)}function kh(n,t){let e=[SI],i;return n instanceof Mr&&(n.module&&e.push(q.styleModule.of(n.module)),i=n.themeType),t?.fallback?e.push(M1.of(n)):i?e.push(Bf.computeN([q.darkTheme],r=>r.facet(q.darkTheme)==(i=="dark")?[n]:[])):e.push(Bf.of(n)),e}class wI{constructor(t){this.markCache=Object.create(null),this.tree=Se(t.state),this.decorations=this.buildDeco(t,bc(t.state)),this.decoratedTo=t.viewport.to}update(t){let e=Se(t.state),i=bc(t.state),r=i!=bc(t.startState),{viewport:s}=t.view,o=t.changes.mapPos(this.decoratedTo,1);e.length<s.to&&!r&&e.type==this.tree.type&&o>=s.to?(this.decorations=this.decorations.map(t.changes),this.decoratedTo=o):(e!=this.tree||t.viewportChanged||r)&&(this.tree=e,this.decorations=this.buildDeco(t.view,i),this.decoratedTo=s.to)}buildDeco(t,e){if(!e||!this.tree.length)return nt.none;let i=new di;for(let{from:r,to:s}of t.visibleRanges)UB(this.tree,e,(o,a,h)=>{i.add(o,a,this.markCache[h]||(this.markCache[h]=nt.mark({class:h})))},r,s);return i.finish()}}const SI=Tr.high(Qt.fromClass(wI,{decorations:n=>n.decorations})),CI=Mr.define([{tag:B.meta,color:"#404740"},{tag:B.link,textDecoration:"underline"},{tag:B.heading,textDecoration:"underline",fontWeight:"bold"},{tag:B.emphasis,fontStyle:"italic"},{tag:B.strong,fontWeight:"bold"},{tag:B.strikethrough,textDecoration:"line-through"},{tag:B.keyword,color:"#708"},{tag:[B.atom,B.bool,B.url,B.contentSeparator,B.labelName],color:"#219"},{tag:[B.literal,B.inserted],color:"#164"},{tag:[B.string,B.deleted],color:"#a11"},{tag:[B.regexp,B.escape,B.special(B.string)],color:"#e40"},{tag:B.definition(B.variableName),color:"#00f"},{tag:B.local(B.variableName),color:"#30a"},{tag:[B.typeName,B.namespace],color:"#085"},{tag:B.className,color:"#167"},{tag:[B.special(B.variableName),B.macroName],color:"#256"},{tag:B.definition(B.propertyName),color:"#00c"},{tag:B.comment,color:"#940"},{tag:B.invalid,color:"#f00"}]),kI=q.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),P1=1e4,D1="()[]{}",R1=X.define({combine(n){return Xn(n,{afterCursor:!0,brackets:D1,maxScanDistance:P1,renderMatch:MI})}}),AI=nt.mark({class:"cm-matchingBracket"}),TI=nt.mark({class:"cm-nonmatchingBracket"});function MI(n){let t=[],e=n.matched?AI:TI;return t.push(e.range(n.start.from,n.start.to)),n.end&&t.push(e.range(n.end.from,n.end.to)),t}const PI=ge.define({create(){return nt.none},update(n,t){if(!t.docChanged&&!t.selection)return n;let e=[],i=t.state.facet(R1);for(let r of t.state.selection.ranges){if(!r.empty)continue;let s=zn(t.state,r.head,-1,i)||r.head>0&&zn(t.state,r.head-1,1,i)||i.afterCursor&&(zn(t.state,r.head,1,i)||r.head<t.state.doc.length&&zn(t.state,r.head+1,-1,i));s&&(e=e.concat(i.renderMatch(s,t.state)))}return nt.set(e,!0)},provide:n=>q.decorations.from(n)}),DI=[PI,kI];function RI(n={}){return[R1.of(n),DI]}const EI=new bt;function If(n,t,e){let i=n.prop(t<0?bt.openedBy:bt.closedBy);if(i)return i;if(n.name.length==1){let r=e.indexOf(n.name);if(r>-1&&r%2==(t<0?1:0))return[e[r+t]]}return null}function _f(n){let t=n.type.prop(EI);return t?t(n.node):n}function zn(n,t,e,i={}){let r=i.maxScanDistance||P1,s=i.brackets||D1,o=Se(n),a=o.resolveInner(t,e);for(let h=a;h;h=h.parent){let f=If(h.type,e,s);if(f&&h.from<h.to){let c=_f(h);if(c&&(e>0?t>=c.from&&t<c.to:t>c.from&&t<=c.to))return LI(n,t,e,h,c,f,s)}}return OI(n,t,e,o,a.type,r,s)}function LI(n,t,e,i,r,s,o){let a=i.parent,h={from:r.from,to:r.to},f=0,c=a?.cursor();if(c&&(e<0?c.childBefore(i.from):c.childAfter(i.to)))do if(e<0?c.to<=i.from:c.from>=i.to){if(f==0&&s.indexOf(c.type.name)>-1&&c.from<c.to){let p=_f(c);return{start:h,end:p?{from:p.from,to:p.to}:void 0,matched:!0}}else if(If(c.type,e,o))f++;else if(If(c.type,-e,o)){if(f==0){let p=_f(c);return{start:h,end:p&&p.from<p.to?{from:p.from,to:p.to}:void 0,matched:!1}}f--}}while(e<0?c.prevSibling():c.nextSibling());return{start:h,matched:!1}}function OI(n,t,e,i,r,s,o){let a=e<0?n.sliceDoc(t-1,t):n.sliceDoc(t,t+1),h=o.indexOf(a);if(h<0||h%2==0!=e>0)return null;let f={from:e<0?t-1:t,to:e>0?t+1:t},c=n.doc.iterRange(t,e>0?n.doc.length:0),p=0;for(let m=0;!c.next().done&&m<=s;){let y=c.value;e<0&&(m+=y.length);let v=t+m*e;for(let S=e>0?0:y.length-1,C=e>0?y.length:-1;S!=C;S+=e){let k=o.indexOf(y[S]);if(!(k<0||i.resolveInner(v+S,1).type!=r))if(k%2==0==e>0)p++;else{if(p==1)return{start:f,end:{from:v+S,to:v+S+1},matched:k>>1==h>>1};p--}}e>0&&(m+=y.length)}return c.done?{start:f,matched:!1}:null}function Ay(n,t,e,i=0,r=0){t==null&&(t=n.search(/[^\s\u00a0]/),t==-1&&(t=n.length));let s=r;for(let o=i;o<t;o++)n.charCodeAt(o)==9?s+=e-s%e:s++;return s}class E1{constructor(t,e,i,r){this.string=t,this.tabSize=e,this.indentUnit=i,this.overrideIndent=r,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(t){let e=this.string.charAt(this.pos),i;if(typeof t=="string"?i=e==t:i=e&&(t instanceof RegExp?t.test(e):t(e)),i)return++this.pos,e}eatWhile(t){let e=this.pos;for(;this.eat(t););return this.pos>e}eatSpace(){let t=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>t}skipToEnd(){this.pos=this.string.length}skipTo(t){let e=this.string.indexOf(t,this.pos);if(e>-1)return this.pos=e,!0}backUp(t){this.pos-=t}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Ay(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var t;return(t=this.overrideIndent)!==null&&t!==void 0?t:Ay(this.string,null,this.tabSize)}match(t,e,i){if(typeof t=="string"){let r=o=>i?o.toLowerCase():o,s=this.string.substr(this.pos,t.length);return r(s)==r(t)?(e!==!1&&(this.pos+=t.length),!0):null}else{let r=this.string.slice(this.pos).match(t);return r&&r.index>0?null:(r&&e!==!1&&(this.pos+=r[0].length),r)}}current(){return this.string.slice(this.start,this.pos)}}function BI(n){return{name:n.name||"",token:n.token,blankLine:n.blankLine||(()=>{}),startState:n.startState||(()=>!0),copyState:n.copyState||II,indent:n.indent||(()=>null),languageData:n.languageData||{},tokenTable:n.tokenTable||Hd,mergeTokens:n.mergeTokens!==!1}}function II(n){if(typeof n!="object")return n;let t={};for(let e in n){let i=n[e];t[e]=i instanceof Array?i.slice():i}return t}const Ty=new WeakMap;class Vd extends Tn{constructor(t){let e=KB(t.languageData),i=BI(t),r,s=new class extends Hv{createParse(o,a,h){return new NI(r,o,a,h)}};super(e,s,[],t.name),this.topNode=WI(e,this),r=this,this.streamParser=i,this.stateAfter=new bt({perNode:!0}),this.tokenTable=t.tokenTable?new I1(i.tokenTable):VI}static define(t){return new Vd(t)}getIndent(t){let e,{overrideIndentation:i}=t.options;i&&(e=Ty.get(t.state),e!=null&&e<t.pos-1e4&&(e=void 0));let r=Wd(this,t.node.tree,t.node.from,t.node.from,e??t.pos),s,o;if(r?(o=r.state,s=r.pos+1):(o=this.streamParser.startState(t.unit),s=t.node.from),t.pos-s>1e4)return null;for(;s<t.pos;){let h=t.state.doc.lineAt(s),f=Math.min(t.pos,h.to);if(h.length){let c=i?i(h.from):-1,p=new E1(h.text,t.state.tabSize,t.unit,c<0?void 0:c);for(;p.pos<f-h.from;)O1(this.streamParser.token,p,o)}else this.streamParser.blankLine(o,t.unit);if(f==t.pos)break;s=h.to+1}let a=t.lineAt(t.pos);return i&&e==null&&Ty.set(t.state,a.from),this.streamParser.indent(o,/^\s*(.*)/.exec(a.text)[1],t)}get allowsNesting(){return!1}}function Wd(n,t,e,i,r){let s=e>=i&&e+t.length<=r&&t.prop(n.stateAfter);if(s)return{state:n.streamParser.copyState(s),pos:e+t.length};for(let o=t.children.length-1;o>=0;o--){let a=t.children[o],h=e+t.positions[o],f=a instanceof $t&&h<r&&Wd(n,a,h,i,r);if(f)return f}return null}function L1(n,t,e,i,r){if(r&&e<=0&&i>=t.length)return t;!r&&e==0&&t.type==n.topNode&&(r=!0);for(let s=t.children.length-1;s>=0;s--){let o=t.positions[s],a=t.children[s],h;if(o<i&&a instanceof $t){if(!(h=L1(n,a,e-o,i-o,r)))break;return r?new $t(t.type,t.children.slice(0,s).concat(h),t.positions.slice(0,s+1),o+h.length):h}}return null}function _I(n,t,e,i,r){for(let s of t){let o=s.from+(s.openStart?25:0),a=s.to-(s.openEnd?25:0),h=o<=e&&a>e&&Wd(n,s.tree,0-s.offset,e,a),f;if(h&&h.pos<=i&&(f=L1(n,s.tree,e+s.offset,h.pos+s.offset,!1)))return{state:h.state,tree:f}}return{state:n.streamParser.startState(r?Cr(r):4),tree:$t.empty}}class NI{constructor(t,e,i,r){this.lang=t,this.input=e,this.fragments=i,this.ranges=r,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=r[r.length-1].to;let s=cs.get(),o=r[0].from,{state:a,tree:h}=_I(t,i,o,this.to,s?.state);this.state=a,this.parsedPos=this.chunkStart=o+h.length;for(let f=0;f<h.children.length;f++)this.chunks.push(h.children[f]),this.chunkPos.push(h.positions[f]);s&&this.parsedPos<s.viewport.from-1e5&&r.some(f=>f.from<=s.viewport.from&&f.to>=s.viewport.from)&&(this.state=this.lang.streamParser.startState(Cr(s.state)),s.skipUntilInView(this.parsedPos,s.viewport.from),this.parsedPos=s.viewport.from),this.moveRangeIndex()}advance(){let t=cs.get(),e=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),i=Math.min(e,this.chunkStart+512);for(t&&(i=Math.min(i,t.viewport.to));this.parsedPos<i;)this.parseLine(t);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=e?this.finish():t&&this.parsedPos>=t.viewport.to?(t.skipUntilInView(this.parsedPos,e),this.finish()):null}stopAt(t){this.stoppedAt=t}lineAfter(t){let e=this.input.chunk(t);if(this.input.lineChunks)e==`
`&&(e="");else{let i=e.indexOf(`
`);i>-1&&(e=e.slice(0,i))}return t+e.length<=this.to?e:e.slice(0,this.to-t)}nextLine(){let t=this.parsedPos,e=this.lineAfter(t),i=t+e.length;for(let r=this.rangeIndex;;){let s=this.ranges[r].to;if(s>=i||(e=e.slice(0,s-(i-e.length)),r++,r==this.ranges.length))break;let o=this.ranges[r].from,a=this.lineAfter(o);e+=a,i=o+a.length}return{line:e,end:i}}skipGapsTo(t,e,i){for(;;){let r=this.ranges[this.rangeIndex].to,s=t+e;if(i>0?r>s:r>=s)break;let o=this.ranges[++this.rangeIndex].from;e+=o-r}return e}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(t,e,i,r){let s=4;if(this.ranges.length>1){r=this.skipGapsTo(e,r,1),e+=r;let a=this.chunk.length;r=this.skipGapsTo(i,r,-1),i+=r,s+=this.chunk.length-a}let o=this.chunk.length-4;return this.lang.streamParser.mergeTokens&&s==4&&o>=0&&this.chunk[o]==t&&this.chunk[o+2]==e?this.chunk[o+2]=i:this.chunk.push(t,e,i,s),r}parseLine(t){let{line:e,end:i}=this.nextLine(),r=0,{streamParser:s}=this.lang,o=new E1(e,t?t.state.tabSize:4,t?Cr(t.state):2);if(o.eol())s.blankLine(this.state,o.indentUnit);else for(;!o.eol();){let a=O1(s.token,o,this.state);if(a&&(r=this.emitToken(this.lang.tokenTable.resolve(a),this.parsedPos+o.start,this.parsedPos+o.pos,r)),o.start>1e4)break}this.parsedPos=i,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let t=$t.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:FI,topID:0,maxBufferLength:512,reused:this.chunkReused});t=new $t(t.type,t.children,t.positions,t.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(t),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new $t(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function O1(n,t,e){t.start=t.pos;for(let i=0;i<10;i++){let r=n(t,e);if(t.pos>t.start)return r}throw new Error("Stream parser failed to advance stream.")}const Hd=Object.create(null),Oo=[He.none],FI=new xd(Oo),My=[],Py=Object.create(null),B1=Object.create(null);for(let[n,t]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])B1[n]=_1(Hd,t);class I1{constructor(t){this.extra=t,this.table=Object.assign(Object.create(null),B1)}resolve(t){return t?this.table[t]||(this.table[t]=_1(this.extra,t)):0}}const VI=new I1(Hd);function wc(n,t){My.indexOf(n)>-1||(My.push(n),console.warn(t))}function _1(n,t){let e=[];for(let a of t.split(" ")){let h=[];for(let f of a.split(".")){let c=n[f]||B[f];c?typeof c=="function"?h.length?h=h.map(c):wc(f,`Modifier ${f} used at start of tag`):h.length?wc(f,`Tag ${f} used as modifier`):h=Array.isArray(c)?c:[c]:wc(f,`Unknown highlighting tag ${f}`)}for(let f of h)e.push(f)}if(!e.length)return 0;let i=t.replace(/ /g,"_"),r=i+" "+e.map(a=>a.id),s=Py[r];if(s)return s.id;let o=Py[r]=He.define({id:Oo.length,name:i,props:[HB({[i]:e})]});return Oo.push(o),o.id}function WI(n,t){let e=He.define({id:Oo.length,name:"Document",props:[qr.add(()=>n),x1.add(()=>i=>t.getIndent(i))],top:!0});return Oo.push(e),e}Ft.RTL,Ft.LTR;const HI=Vd.define({token(n){return n.eatSpace()?null:n.match("//")?(n.skipToEnd(),"comment"):n.match(/"(?:[^"\\]|\\.)*"/)?"string":n.match(/^\d+/)?"number":n.match(/\b(guty|eger|bolmasa|al|hadysanyDinle|uytget|netije|funksiya|gaytala)\b/)?"keyword":n.match(/\b(ekran|yaz|uzynlyk|yalnys|bos|hemiselik|bolmek|konsol|dogry)\b/)?"bracket":n.match(/\b(beyikligi|x|y|gorunyan|baslangycTekst|animasiya|tekstMeydanca|figura|surat|arkaFon|uzynlygy|beyikligi|renk|uzynlygy|tekstRenk|ady|gapyrga|gapyrgaRenk|gapyrgaGalynlygy|gapyrgaRadius|tekstOlceg|tekst|Soz|hemmeHarplarUly|hemmeHarplarKici)\b/)?"operator":n.match(/[a-zA-Z_][a-zA-Z0-9_]*/)?"variableName":n.match(/\bfunksiya\b/)?(n.eatSpace(),n.match(/[a-zA-Z_][a-zA-Z0-9_]*/)?"operator":"keyword"):(n.next(),null)}});function Nf(){return Nf=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var i in e)({}).hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Nf.apply(null,arguments)}function zI(n,t){if(n==null)return{};var e={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(t.indexOf(i)!==-1)continue;e[i]=n[i]}return e}const UI=n=>{let{state:t}=n,e=t.doc.lineAt(t.selection.main.from),i=Ud(n.state,e.from);return i.line?$I(n):i.block?KI(n):!1};function zd(n,t){return({state:e,dispatch:i})=>{if(e.readOnly)return!1;let r=n(t,e);return r?(i(e.update(r)),!0):!1}}const $I=zd(YI,0),jI=zd(N1,0),KI=zd((n,t)=>N1(n,t,GI(t)),0);function Ud(n,t){let e=n.languageDataAt("commentTokens",t,1);return e.length?e[0]:{}}const Zs=50;function qI(n,{open:t,close:e},i,r){let s=n.sliceDoc(i-Zs,i),o=n.sliceDoc(r,r+Zs),a=/\s*$/.exec(s)[0].length,h=/^\s*/.exec(o)[0].length,f=s.length-a;if(s.slice(f-t.length,f)==t&&o.slice(h,h+e.length)==e)return{open:{pos:i-a,margin:a&&1},close:{pos:r+h,margin:h&&1}};let c,p;r-i<=2*Zs?c=p=n.sliceDoc(i,r):(c=n.sliceDoc(i,i+Zs),p=n.sliceDoc(r-Zs,r));let m=/^\s*/.exec(c)[0].length,y=/\s*$/.exec(p)[0].length,v=p.length-y-e.length;return c.slice(m,m+t.length)==t&&p.slice(v,v+e.length)==e?{open:{pos:i+m+t.length,margin:/\s/.test(c.charAt(m+t.length))?1:0},close:{pos:r-y-e.length,margin:/\s/.test(p.charAt(v-1))?1:0}}:null}function GI(n){let t=[];for(let e of n.selection.ranges){let i=n.doc.lineAt(e.from),r=e.to<=i.to?i:n.doc.lineAt(e.to);r.from>i.from&&r.from==e.to&&(r=e.to==i.to+1?i:n.doc.lineAt(e.to-1));let s=t.length-1;s>=0&&t[s].to>i.from?t[s].to=r.to:t.push({from:i.from+/^\s*/.exec(i.text)[0].length,to:r.to})}return t}function N1(n,t,e=t.selection.ranges){let i=e.map(s=>Ud(t,s.from).block);if(!i.every(s=>s))return null;let r=e.map((s,o)=>qI(t,i[o],s.from,s.to));if(n!=2&&!r.every(s=>s))return{changes:t.changes(e.map((s,o)=>r[o]?[]:[{from:s.from,insert:i[o].open+" "},{from:s.to,insert:" "+i[o].close}]))};if(n!=1&&r.some(s=>s)){let s=[];for(let o=0,a;o<r.length;o++)if(a=r[o]){let h=i[o],{open:f,close:c}=a;s.push({from:f.pos-h.open.length,to:f.pos+f.margin},{from:c.pos-c.margin,to:c.pos+h.close.length})}return{changes:s}}return null}function YI(n,t,e=t.selection.ranges){let i=[],r=-1;for(let{from:s,to:o}of e){let a=i.length,h=1e9,f=Ud(t,s).line;if(f){for(let c=s;c<=o;){let p=t.doc.lineAt(c);if(p.from>r&&(s==o||o>p.from)){r=p.from;let m=/^\s*/.exec(p.text)[0].length,y=m==p.length,v=p.text.slice(m,m+f.length)==f?m:-1;m<p.text.length&&m<h&&(h=m),i.push({line:p,comment:v,token:f,indent:m,empty:y,single:!1})}c=p.to+1}if(h<1e9)for(let c=a;c<i.length;c++)i[c].indent<i[c].line.text.length&&(i[c].indent=h);i.length==a+1&&(i[a].single=!0)}}if(n!=2&&i.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:a,token:h,indent:f,empty:c,single:p}of i)(p||!c)&&s.push({from:a.from+f,insert:h+" "});let o=t.changes(s);return{changes:o,selection:t.selection.map(o,1)}}else if(n!=1&&i.some(s=>s.comment>=0)){let s=[];for(let{line:o,comment:a,token:h}of i)if(a>=0){let f=o.from+a,c=f+h.length;o.text[c-o.from]==" "&&c++,s.push({from:f,to:c})}return{changes:s}}return null}const Ff=Yn.define(),XI=Yn.define(),JI=X.define(),F1=X.define({combine(n){return Xn(n,{minDepth:100,newGroupDelay:500,joinToEvent:(t,e)=>e},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(t,e)=>(i,r)=>t(i,r)||e(i,r)})}}),V1=ge.define({create(){return Un.empty},update(n,t){let e=t.state.facet(F1),i=t.annotation(Ff);if(i){let h=Ve.fromTransaction(t,i.selection),f=i.side,c=f==0?n.undone:n.done;return h?c=eh(c,c.length,e.minDepth,h):c=z1(c,t.startState.selection),new Un(f==0?i.rest:c,f==0?c:i.rest)}let r=t.annotation(XI);if((r=="full"||r=="before")&&(n=n.isolate()),t.annotation(se.addToHistory)===!1)return t.changes.empty?n:n.addMapping(t.changes.desc);let s=Ve.fromTransaction(t),o=t.annotation(se.time),a=t.annotation(se.userEvent);return s?n=n.addChanges(s,o,a,e,t):t.selection&&(n=n.addSelection(t.startState.selection,o,a,e.newGroupDelay)),(r=="full"||r=="after")&&(n=n.isolate()),n},toJSON(n){return{done:n.done.map(t=>t.toJSON()),undone:n.undone.map(t=>t.toJSON())}},fromJSON(n){return new Un(n.done.map(Ve.fromJSON),n.undone.map(Ve.fromJSON))}});function ZI(n={}){return[V1,F1.of(n),q.domEventHandlers({beforeinput(t,e){let i=t.inputType=="historyUndo"?W1:t.inputType=="historyRedo"?Vf:null;return i?(t.preventDefault(),i(e)):!1}})]}function Ah(n,t){return function({state:e,dispatch:i}){if(!t&&e.readOnly)return!1;let r=e.field(V1,!1);if(!r)return!1;let s=r.pop(n,e,t);return s?(i(s),!0):!1}}const W1=Ah(0,!1),Vf=Ah(1,!1),QI=Ah(0,!0),t_=Ah(1,!0);class Ve{constructor(t,e,i,r,s){this.changes=t,this.effects=e,this.mapped=i,this.startSelection=r,this.selectionsAfter=s}setSelAfter(t){return new Ve(this.changes,this.effects,this.mapped,this.startSelection,t)}toJSON(){var t,e,i;return{changes:(t=this.changes)===null||t===void 0?void 0:t.toJSON(),mapped:(e=this.mapped)===null||e===void 0?void 0:e.toJSON(),startSelection:(i=this.startSelection)===null||i===void 0?void 0:i.toJSON(),selectionsAfter:this.selectionsAfter.map(r=>r.toJSON())}}static fromJSON(t){return new Ve(t.changes&&re.fromJSON(t.changes),[],t.mapped&&$n.fromJSON(t.mapped),t.startSelection&&H.fromJSON(t.startSelection),t.selectionsAfter.map(H.fromJSON))}static fromTransaction(t,e){let i=cn;for(let r of t.startState.facet(JI)){let s=r(t);s.length&&(i=i.concat(s))}return!i.length&&t.changes.empty?null:new Ve(t.changes.invert(t.startState.doc),i,void 0,e||t.startState.selection,cn)}static selection(t){return new Ve(void 0,cn,void 0,void 0,t)}}function eh(n,t,e,i){let r=t+1>e+20?t-e-1:0,s=n.slice(r,t);return s.push(i),s}function e_(n,t){let e=[],i=!1;return n.iterChangedRanges((r,s)=>e.push(r,s)),t.iterChangedRanges((r,s,o,a)=>{for(let h=0;h<e.length;){let f=e[h++],c=e[h++];a>=f&&o<=c&&(i=!0)}}),i}function n_(n,t){return n.ranges.length==t.ranges.length&&n.ranges.filter((e,i)=>e.empty!=t.ranges[i].empty).length===0}function H1(n,t){return n.length?t.length?n.concat(t):n:t}const cn=[],i_=200;function z1(n,t){if(n.length){let e=n[n.length-1],i=e.selectionsAfter.slice(Math.max(0,e.selectionsAfter.length-i_));return i.length&&i[i.length-1].eq(t)?n:(i.push(t),eh(n,n.length-1,1e9,e.setSelAfter(i)))}else return[Ve.selection([t])]}function r_(n){let t=n[n.length-1],e=n.slice();return e[n.length-1]=t.setSelAfter(t.selectionsAfter.slice(0,t.selectionsAfter.length-1)),e}function Sc(n,t){if(!n.length)return n;let e=n.length,i=cn;for(;e;){let r=s_(n[e-1],t,i);if(r.changes&&!r.changes.empty||r.effects.length){let s=n.slice(0,e);return s[e-1]=r,s}else t=r.mapped,e--,i=r.selectionsAfter}return i.length?[Ve.selection(i)]:cn}function s_(n,t,e){let i=H1(n.selectionsAfter.length?n.selectionsAfter.map(a=>a.map(t)):cn,e);if(!n.changes)return Ve.selection(i);let r=n.changes.map(t),s=t.mapDesc(n.changes,!0),o=n.mapped?n.mapped.composeDesc(s):s;return new Ve(r,ft.mapEffects(n.effects,t),o,n.startSelection.map(s),i)}const o_=/^(input\.type|delete)($|\.)/;class Un{constructor(t,e,i=0,r=void 0){this.done=t,this.undone=e,this.prevTime=i,this.prevUserEvent=r}isolate(){return this.prevTime?new Un(this.done,this.undone):this}addChanges(t,e,i,r,s){let o=this.done,a=o[o.length-1];return a&&a.changes&&!a.changes.empty&&t.changes&&(!i||o_.test(i))&&(!a.selectionsAfter.length&&e-this.prevTime<r.newGroupDelay&&r.joinToEvent(s,e_(a.changes,t.changes))||i=="input.type.compose")?o=eh(o,o.length-1,r.minDepth,new Ve(t.changes.compose(a.changes),H1(ft.mapEffects(t.effects,a.changes),a.effects),a.mapped,a.startSelection,cn)):o=eh(o,o.length,r.minDepth,t),new Un(o,cn,e,i)}addSelection(t,e,i,r){let s=this.done.length?this.done[this.done.length-1].selectionsAfter:cn;return s.length>0&&e-this.prevTime<r&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&n_(s[s.length-1],t)?this:new Un(z1(this.done,t),this.undone,e,i)}addMapping(t){return new Un(Sc(this.done,t),Sc(this.undone,t),this.prevTime,this.prevUserEvent)}pop(t,e,i){let r=t==0?this.done:this.undone;if(r.length==0)return null;let s=r[r.length-1],o=s.selectionsAfter[0]||e.selection;if(i&&s.selectionsAfter.length)return e.update({selection:s.selectionsAfter[s.selectionsAfter.length-1],annotations:Ff.of({side:t,rest:r_(r),selection:o}),userEvent:t==0?"select.undo":"select.redo",scrollIntoView:!0});if(s.changes){let a=r.length==1?cn:r.slice(0,r.length-1);return s.mapped&&(a=Sc(a,s.mapped)),e.update({changes:s.changes,selection:s.startSelection,effects:s.effects,annotations:Ff.of({side:t,rest:a,selection:o}),filter:!1,userEvent:t==0?"undo":"redo",scrollIntoView:!0})}else return null}}Un.empty=new Un(cn,cn);const l_=[{key:"Mod-z",run:W1,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:Vf,preventDefault:!0},{linux:"Ctrl-Shift-z",run:Vf,preventDefault:!0},{key:"Mod-u",run:QI,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:t_,preventDefault:!0}];function vs(n,t){return H.create(n.ranges.map(t),n.mainIndex)}function Rn(n,t){return n.update({selection:t,scrollIntoView:!0,userEvent:"select"})}function En({state:n,dispatch:t},e){let i=vs(n.selection,e);return i.eq(n.selection,!0)?!1:(t(Rn(n,i)),!0)}function Th(n,t){return H.cursor(t?n.to:n.from)}function U1(n,t){return En(n,e=>e.empty?n.moveByChar(e,t):Th(e,t))}function Ce(n){return n.textDirectionAt(n.state.selection.main.head)==Ft.LTR}const $1=n=>U1(n,!Ce(n)),j1=n=>U1(n,Ce(n));function K1(n,t){return En(n,e=>e.empty?n.moveByGroup(e,t):Th(e,t))}const a_=n=>K1(n,!Ce(n)),h_=n=>K1(n,Ce(n));function u_(n,t,e){if(t.type.prop(e))return!0;let i=t.to-t.from;return i&&(i>2||/[^\s,.;:]/.test(n.sliceDoc(t.from,t.to)))||t.firstChild}function Mh(n,t,e){let i=Se(n).resolveInner(t.head),r=e?bt.closedBy:bt.openedBy;for(let h=t.head;;){let f=e?i.childAfter(h):i.childBefore(h);if(!f)break;u_(n,f,r)?i=f:h=e?f.to:f.from}let s=i.type.prop(r),o,a;return s&&(o=e?zn(n,i.from,1):zn(n,i.to,-1))&&o.matched?a=e?o.end.to:o.end.from:a=e?i.to:i.from,H.cursor(a,e?-1:1)}const c_=n=>En(n,t=>Mh(n.state,t,!Ce(n))),f_=n=>En(n,t=>Mh(n.state,t,Ce(n)));function q1(n,t){return En(n,e=>{if(!e.empty)return Th(e,t);let i=n.moveVertically(e,t);return i.head!=e.head?i:n.moveToLineBoundary(e,t)})}const G1=n=>q1(n,!1),Y1=n=>q1(n,!0);function X1(n){let t=n.scrollDOM.clientHeight<n.scrollDOM.scrollHeight-2,e=0,i=0,r;if(t){for(let s of n.state.facet(q.scrollMargins)){let o=s(n);o?.top&&(e=Math.max(o?.top,e)),o?.bottom&&(i=Math.max(o?.bottom,i))}r=n.scrollDOM.clientHeight-e-i}else r=(n.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:e,marginBottom:i,selfScroll:t,height:Math.max(n.defaultLineHeight,r-5)}}function J1(n,t){let e=X1(n),{state:i}=n,r=vs(i.selection,o=>o.empty?n.moveVertically(o,t,e.height):Th(o,t));if(r.eq(i.selection))return!1;let s;if(e.selfScroll){let o=n.coordsAtPos(i.selection.main.head),a=n.scrollDOM.getBoundingClientRect(),h=a.top+e.marginTop,f=a.bottom-e.marginBottom;o&&o.top>h&&o.bottom<f&&(s=q.scrollIntoView(r.main.head,{y:"start",yMargin:o.top-h}))}return n.dispatch(Rn(i,r),{effects:s}),!0}const Dy=n=>J1(n,!1),Wf=n=>J1(n,!0);function Ki(n,t,e){let i=n.lineBlockAt(t.head),r=n.moveToLineBoundary(t,e);if(r.head==t.head&&r.head!=(e?i.to:i.from)&&(r=n.moveToLineBoundary(t,e,!1)),!e&&r.head==i.from&&i.length){let s=/^\s*/.exec(n.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;s&&t.head!=i.from+s&&(r=H.cursor(i.from+s))}return r}const d_=n=>En(n,t=>Ki(n,t,!0)),p_=n=>En(n,t=>Ki(n,t,!1)),m_=n=>En(n,t=>Ki(n,t,!Ce(n))),g_=n=>En(n,t=>Ki(n,t,Ce(n))),y_=n=>En(n,t=>H.cursor(n.lineBlockAt(t.head).from,1)),x_=n=>En(n,t=>H.cursor(n.lineBlockAt(t.head).to,-1));function v_(n,t,e){let i=!1,r=vs(n.selection,s=>{let o=zn(n,s.head,-1)||zn(n,s.head,1)||s.head>0&&zn(n,s.head-1,1)||s.head<n.doc.length&&zn(n,s.head+1,-1);if(!o||!o.end)return s;i=!0;let a=o.start.from==s.head?o.end.to:o.end.from;return H.cursor(a)});return i?(t(Rn(n,r)),!0):!1}const b_=({state:n,dispatch:t})=>v_(n,t);function xn(n,t){let e=vs(n.state.selection,i=>{let r=t(i);return H.range(i.anchor,r.head,r.goalColumn,r.bidiLevel||void 0)});return e.eq(n.state.selection)?!1:(n.dispatch(Rn(n.state,e)),!0)}function Z1(n,t){return xn(n,e=>n.moveByChar(e,t))}const Q1=n=>Z1(n,!Ce(n)),tw=n=>Z1(n,Ce(n));function ew(n,t){return xn(n,e=>n.moveByGroup(e,t))}const w_=n=>ew(n,!Ce(n)),S_=n=>ew(n,Ce(n)),C_=n=>xn(n,t=>Mh(n.state,t,!Ce(n))),k_=n=>xn(n,t=>Mh(n.state,t,Ce(n)));function nw(n,t){return xn(n,e=>n.moveVertically(e,t))}const iw=n=>nw(n,!1),rw=n=>nw(n,!0);function sw(n,t){return xn(n,e=>n.moveVertically(e,t,X1(n).height))}const Ry=n=>sw(n,!1),Ey=n=>sw(n,!0),A_=n=>xn(n,t=>Ki(n,t,!0)),T_=n=>xn(n,t=>Ki(n,t,!1)),M_=n=>xn(n,t=>Ki(n,t,!Ce(n))),P_=n=>xn(n,t=>Ki(n,t,Ce(n))),D_=n=>xn(n,t=>H.cursor(n.lineBlockAt(t.head).from)),R_=n=>xn(n,t=>H.cursor(n.lineBlockAt(t.head).to)),Ly=({state:n,dispatch:t})=>(t(Rn(n,{anchor:0})),!0),Oy=({state:n,dispatch:t})=>(t(Rn(n,{anchor:n.doc.length})),!0),By=({state:n,dispatch:t})=>(t(Rn(n,{anchor:n.selection.main.anchor,head:0})),!0),Iy=({state:n,dispatch:t})=>(t(Rn(n,{anchor:n.selection.main.anchor,head:n.doc.length})),!0),E_=({state:n,dispatch:t})=>(t(n.update({selection:{anchor:0,head:n.doc.length},userEvent:"select"})),!0),L_=({state:n,dispatch:t})=>{let e=Ph(n).map(({from:i,to:r})=>H.range(i,Math.min(r+1,n.doc.length)));return t(n.update({selection:H.create(e),userEvent:"select"})),!0},O_=({state:n,dispatch:t})=>{let e=vs(n.selection,i=>{let r=Se(n),s=r.resolveStack(i.from,1);if(i.empty){let o=r.resolveStack(i.from,-1);o.node.from>=s.node.from&&o.node.to<=s.node.to&&(s=o)}for(let o=s;o;o=o.next){let{node:a}=o;if((a.from<i.from&&a.to>=i.to||a.to>i.to&&a.from<=i.from)&&o.next)return H.range(a.to,a.from)}return i});return e.eq(n.selection)?!1:(t(Rn(n,e)),!0)};function ow(n,t){let{state:e}=n,i=e.selection,r=e.selection.ranges.slice();for(let s of e.selection.ranges){let o=e.doc.lineAt(s.head);if(t?o.to<n.state.doc.length:o.from>0)for(let a=s;;){let h=n.moveVertically(a,t);if(h.head<o.from||h.head>o.to){r.some(f=>f.head==h.head)||r.push(h);break}else{if(h.head==a.head)break;a=h}}}return r.length==i.ranges.length?!1:(n.dispatch(Rn(e,H.create(r,r.length-1))),!0)}const B_=n=>ow(n,!1),I_=n=>ow(n,!0),__=({state:n,dispatch:t})=>{let e=n.selection,i=null;return e.ranges.length>1?i=H.create([e.main]):e.main.empty||(i=H.create([H.cursor(e.main.head)])),i?(t(Rn(n,i)),!0):!1};function tl(n,t){if(n.state.readOnly)return!1;let e="delete.selection",{state:i}=n,r=i.changeByRange(s=>{let{from:o,to:a}=s;if(o==a){let h=t(s);h<o?(e="delete.backward",h=xa(n,h,!1)):h>o&&(e="delete.forward",h=xa(n,h,!0)),o=Math.min(o,h),a=Math.max(a,h)}else o=xa(n,o,!1),a=xa(n,a,!0);return o==a?{range:s}:{changes:{from:o,to:a},range:H.cursor(o,o<s.head?-1:1)}});return r.changes.empty?!1:(n.dispatch(i.update(r,{scrollIntoView:!0,userEvent:e,effects:e=="delete.selection"?q.announce.of(i.phrase("Selection deleted")):void 0})),!0)}function xa(n,t,e){if(n instanceof q)for(let i of n.state.facet(q.atomicRanges).map(r=>r(n)))i.between(t,t,(r,s)=>{r<t&&s>t&&(t=e?s:r)});return t}const lw=(n,t,e)=>tl(n,i=>{let r=i.from,{state:s}=n,o=s.doc.lineAt(r),a,h;if(e&&!t&&r>o.from&&r<o.from+200&&!/[^ \t]/.test(a=o.text.slice(0,r-o.from))){if(a[a.length-1]=="	")return r-1;let f=xs(a,s.tabSize),c=f%Cr(s)||Cr(s);for(let p=0;p<c&&a[a.length-1-p]==" ";p++)r--;h=r}else h=me(o.text,r-o.from,t,t)+o.from,h==r&&o.number!=(t?s.doc.lines:1)?h+=t?1:-1:!t&&/[\ufe00-\ufe0f]/.test(o.text.slice(h-o.from,r-o.from))&&(h=me(o.text,h-o.from,!1,!1)+o.from);return h}),Hf=n=>lw(n,!1,!0),aw=n=>lw(n,!0,!1),hw=(n,t)=>tl(n,e=>{let i=e.head,{state:r}=n,s=r.doc.lineAt(i),o=r.charCategorizer(i);for(let a=null;;){if(i==(t?s.to:s.from)){i==e.head&&s.number!=(t?r.doc.lines:1)&&(i+=t?1:-1);break}let h=me(s.text,i-s.from,t)+s.from,f=s.text.slice(Math.min(i,h)-s.from,Math.max(i,h)-s.from),c=o(f);if(a!=null&&c!=a)break;(f!=" "||i!=e.head)&&(a=c),i=h}return i}),uw=n=>hw(n,!1),N_=n=>hw(n,!0),F_=n=>tl(n,t=>{let e=n.lineBlockAt(t.head).to;return t.head<e?e:Math.min(n.state.doc.length,t.head+1)}),V_=n=>tl(n,t=>{let e=n.moveToLineBoundary(t,!1).head;return t.head>e?e:Math.max(0,t.head-1)}),W_=n=>tl(n,t=>{let e=n.moveToLineBoundary(t,!0).head;return t.head<e?e:Math.min(n.state.doc.length,t.head+1)}),H_=({state:n,dispatch:t})=>{if(n.readOnly)return!1;let e=n.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:At.of(["",""])},range:H.cursor(i.from)}));return t(n.update(e,{scrollIntoView:!0,userEvent:"input"})),!0},z_=({state:n,dispatch:t})=>{if(n.readOnly)return!1;let e=n.changeByRange(i=>{if(!i.empty||i.from==0||i.from==n.doc.length)return{range:i};let r=i.from,s=n.doc.lineAt(r),o=r==s.from?r-1:me(s.text,r-s.from,!1)+s.from,a=r==s.to?r+1:me(s.text,r-s.from,!0)+s.from;return{changes:{from:o,to:a,insert:n.doc.slice(r,a).append(n.doc.slice(o,r))},range:H.cursor(a)}});return e.changes.empty?!1:(t(n.update(e,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function Ph(n){let t=[],e=-1;for(let i of n.selection.ranges){let r=n.doc.lineAt(i.from),s=n.doc.lineAt(i.to);if(!i.empty&&i.to==s.from&&(s=n.doc.lineAt(i.to-1)),e>=r.number){let o=t[t.length-1];o.to=s.to,o.ranges.push(i)}else t.push({from:r.from,to:s.to,ranges:[i]});e=s.number+1}return t}function cw(n,t,e){if(n.readOnly)return!1;let i=[],r=[];for(let s of Ph(n)){if(e?s.to==n.doc.length:s.from==0)continue;let o=n.doc.lineAt(e?s.to+1:s.from-1),a=o.length+1;if(e){i.push({from:s.to,to:o.to},{from:s.from,insert:o.text+n.lineBreak});for(let h of s.ranges)r.push(H.range(Math.min(n.doc.length,h.anchor+a),Math.min(n.doc.length,h.head+a)))}else{i.push({from:o.from,to:s.from},{from:s.to,insert:n.lineBreak+o.text});for(let h of s.ranges)r.push(H.range(h.anchor-a,h.head-a))}}return i.length?(t(n.update({changes:i,scrollIntoView:!0,selection:H.create(r,n.selection.mainIndex),userEvent:"move.line"})),!0):!1}const U_=({state:n,dispatch:t})=>cw(n,t,!1),$_=({state:n,dispatch:t})=>cw(n,t,!0);function fw(n,t,e){if(n.readOnly)return!1;let i=[];for(let r of Ph(n))e?i.push({from:r.from,insert:n.doc.slice(r.from,r.to)+n.lineBreak}):i.push({from:r.to,insert:n.lineBreak+n.doc.slice(r.from,r.to)});return t(n.update({changes:i,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const j_=({state:n,dispatch:t})=>fw(n,t,!1),K_=({state:n,dispatch:t})=>fw(n,t,!0),q_=n=>{if(n.state.readOnly)return!1;let{state:t}=n,e=t.changes(Ph(t).map(({from:r,to:s})=>(r>0?r--:s<t.doc.length&&s++,{from:r,to:s}))),i=vs(t.selection,r=>{let s;if(n.lineWrapping){let o=n.lineBlockAt(r.head),a=n.coordsAtPos(r.head,r.assoc||1);a&&(s=o.bottom+n.documentTop-a.bottom+n.defaultLineHeight/2)}return n.moveVertically(r,!0,s)}).map(e);return n.dispatch({changes:e,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0};function G_(n,t){if(/\(\)|\[\]|\{\}/.test(n.sliceDoc(t-1,t+1)))return{from:t,to:t};let e=Se(n).resolveInner(t),i=e.childBefore(t),r=e.childAfter(t),s;return i&&r&&i.to<=t&&r.from>=t&&(s=i.type.prop(bt.closedBy))&&s.indexOf(r.name)>-1&&n.doc.lineAt(i.to).from==n.doc.lineAt(r.from).from&&!/\S/.test(n.sliceDoc(i.to,r.from))?{from:i.to,to:r.from}:null}const _y=dw(!1),Y_=dw(!0);function dw(n){return({state:t,dispatch:e})=>{if(t.readOnly)return!1;let i=t.changeByRange(r=>{let{from:s,to:o}=r,a=t.doc.lineAt(s),h=!n&&s==o&&G_(t,s);n&&(s=o=(o<=a.to?a:t.doc.lineAt(o)).to);let f=new Sh(t,{simulateBreak:s,simulateDoubleBreak:!!h}),c=Nd(f,s);for(c==null&&(c=xs(/^\s*/.exec(t.doc.lineAt(s).text)[0],t.tabSize));o<a.to&&/\s/.test(a.text[o-a.from]);)o++;h?{from:s,to:o}=h:s>a.from&&s<a.from+100&&!/\S/.test(a.text.slice(0,s))&&(s=a.from);let p=["",Lo(t,c)];return h&&p.push(Lo(t,f.lineIndent(a.from,-1))),{changes:{from:s,to:o,insert:At.of(p)},range:H.cursor(s+1+p[1].length)}});return e(t.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}function $d(n,t){let e=-1;return n.changeByRange(i=>{let r=[];for(let o=i.from;o<=i.to;){let a=n.doc.lineAt(o);a.number>e&&(i.empty||i.to>a.from)&&(t(a,r,i),e=a.number),o=a.to+1}let s=n.changes(r);return{changes:r,range:H.range(s.mapPos(i.anchor,1),s.mapPos(i.head,1))}})}const X_=({state:n,dispatch:t})=>{if(n.readOnly)return!1;let e=Object.create(null),i=new Sh(n,{overrideIndentation:s=>{let o=e[s];return o??-1}}),r=$d(n,(s,o,a)=>{let h=Nd(i,s.from);if(h==null)return;/\S/.test(s.text)||(h=0);let f=/^\s*/.exec(s.text)[0],c=Lo(n,h);(f!=c||a.from<s.from+f.length)&&(e[s.from]=h,o.push({from:s.from,to:s.from+f.length,insert:c}))});return r.changes.empty||t(n.update(r,{userEvent:"indent"})),!0},pw=({state:n,dispatch:t})=>n.readOnly?!1:(t(n.update($d(n,(e,i)=>{i.push({from:e.from,insert:n.facet(wh)})}),{userEvent:"input.indent"})),!0),mw=({state:n,dispatch:t})=>n.readOnly?!1:(t(n.update($d(n,(e,i)=>{let r=/^\s*/.exec(e.text)[0];if(!r)return;let s=xs(r,n.tabSize),o=0,a=Lo(n,Math.max(0,s-Cr(n)));for(;o<r.length&&o<a.length&&r.charCodeAt(o)==a.charCodeAt(o);)o++;i.push({from:e.from+o,to:e.from+r.length,insert:a.slice(o)})}),{userEvent:"delete.dedent"})),!0),J_=n=>(n.setTabFocusMode(),!0),Z_=[{key:"Ctrl-b",run:$1,shift:Q1,preventDefault:!0},{key:"Ctrl-f",run:j1,shift:tw},{key:"Ctrl-p",run:G1,shift:iw},{key:"Ctrl-n",run:Y1,shift:rw},{key:"Ctrl-a",run:y_,shift:D_},{key:"Ctrl-e",run:x_,shift:R_},{key:"Ctrl-d",run:aw},{key:"Ctrl-h",run:Hf},{key:"Ctrl-k",run:F_},{key:"Ctrl-Alt-h",run:uw},{key:"Ctrl-o",run:H_},{key:"Ctrl-t",run:z_},{key:"Ctrl-v",run:Wf}],Q_=[{key:"ArrowLeft",run:$1,shift:Q1,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:a_,shift:w_,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:m_,shift:M_,preventDefault:!0},{key:"ArrowRight",run:j1,shift:tw,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:h_,shift:S_,preventDefault:!0},{mac:"Cmd-ArrowRight",run:g_,shift:P_,preventDefault:!0},{key:"ArrowUp",run:G1,shift:iw,preventDefault:!0},{mac:"Cmd-ArrowUp",run:Ly,shift:By},{mac:"Ctrl-ArrowUp",run:Dy,shift:Ry},{key:"ArrowDown",run:Y1,shift:rw,preventDefault:!0},{mac:"Cmd-ArrowDown",run:Oy,shift:Iy},{mac:"Ctrl-ArrowDown",run:Wf,shift:Ey},{key:"PageUp",run:Dy,shift:Ry},{key:"PageDown",run:Wf,shift:Ey},{key:"Home",run:p_,shift:T_,preventDefault:!0},{key:"Mod-Home",run:Ly,shift:By},{key:"End",run:d_,shift:A_,preventDefault:!0},{key:"Mod-End",run:Oy,shift:Iy},{key:"Enter",run:_y,shift:_y},{key:"Mod-a",run:E_},{key:"Backspace",run:Hf,shift:Hf,preventDefault:!0},{key:"Delete",run:aw,preventDefault:!0},{key:"Mod-Backspace",mac:"Alt-Backspace",run:uw,preventDefault:!0},{key:"Mod-Delete",mac:"Alt-Delete",run:N_,preventDefault:!0},{mac:"Mod-Backspace",run:V_,preventDefault:!0},{mac:"Mod-Delete",run:W_,preventDefault:!0}].concat(Z_.map(n=>({mac:n.key,run:n.run,shift:n.shift}))),tN=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:c_,shift:C_},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:f_,shift:k_},{key:"Alt-ArrowUp",run:U_},{key:"Shift-Alt-ArrowUp",run:j_},{key:"Alt-ArrowDown",run:$_},{key:"Shift-Alt-ArrowDown",run:K_},{key:"Mod-Alt-ArrowUp",run:B_},{key:"Mod-Alt-ArrowDown",run:I_},{key:"Escape",run:__},{key:"Mod-Enter",run:Y_},{key:"Alt-l",mac:"Ctrl-l",run:L_},{key:"Mod-i",run:O_,preventDefault:!0},{key:"Mod-[",run:mw},{key:"Mod-]",run:pw},{key:"Mod-Alt-\\",run:X_},{key:"Shift-Mod-k",run:q_},{key:"Shift-Mod-\\",run:b_},{key:"Mod-/",run:UI},{key:"Alt-A",run:jI},{key:"Ctrl-m",mac:"Shift-Alt-m",run:J_}].concat(Q_),eN={key:"Tab",run:pw,shift:mw},Ny=typeof String.prototype.normalize=="function"?n=>n.normalize("NFKD"):n=>n;class ds{constructor(t,e,i=0,r=t.length,s,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=t.iterRange(i,r),this.bufferStart=i,this.normalize=s?a=>s(Ny(a)):Ny,this.query=this.normalize(e)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return _e(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let t=this.peek();if(t<0)return this.done=!0,this;let e=Sd(t),i=this.bufferStart+this.bufferPos;this.bufferPos+=Wn(t);let r=this.normalize(e);if(r.length)for(let s=0,o=i;;s++){let a=r.charCodeAt(s),h=this.match(a,o,this.bufferPos+this.bufferStart);if(s==r.length-1){if(h)return this.value=h,this;break}o==i&&s<e.length&&e.charCodeAt(s)==a&&o++}}}match(t,e,i){let r=null;for(let s=0;s<this.matches.length;s+=2){let o=this.matches[s],a=!1;this.query.charCodeAt(o)==t&&(o==this.query.length-1?r={from:this.matches[s+1],to:i}:(this.matches[s]++,a=!0)),a||(this.matches.splice(s,2),s-=2)}return this.query.charCodeAt(0)==t&&(this.query.length==1?r={from:e,to:i}:this.matches.push(1,e)),r&&this.test&&!this.test(r.from,r.to,this.buffer,this.bufferStart)&&(r=null),r}}typeof Symbol<"u"&&(ds.prototype[Symbol.iterator]=function(){return this});const gw={from:-1,to:-1,match:/.*/.exec("")},jd="gm"+(/x/.unicode==null?"":"u");class yw{constructor(t,e,i,r=0,s=t.length){if(this.text=t,this.to=s,this.curLine="",this.done=!1,this.value=gw,/\\[sWDnr]|\n|\r|\[\^/.test(e))return new xw(t,e,i,r,s);this.re=new RegExp(e,jd+(i?.ignoreCase?"i":"")),this.test=i?.test,this.iter=t.iter();let o=t.lineAt(r);this.curLineStart=o.from,this.matchPos=nh(t,r),this.getLine(this.curLineStart)}getLine(t){this.iter.next(t),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let t=this.matchPos-this.curLineStart;;){this.re.lastIndex=t;let e=this.matchPos<=this.to&&this.re.exec(this.curLine);if(e){let i=this.curLineStart+e.index,r=i+e[0].length;if(this.matchPos=nh(this.text,r+(i==r?1:0)),i==this.curLineStart+this.curLine.length&&this.nextLine(),(i<r||i>this.value.to)&&(!this.test||this.test(i,r,e)))return this.value={from:i,to:r,match:e},this;t=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),t=0;else return this.done=!0,this}}}const Cc=new WeakMap;class is{constructor(t,e){this.from=t,this.text=e}get to(){return this.from+this.text.length}static get(t,e,i){let r=Cc.get(t);if(!r||r.from>=i||r.to<=e){let a=new is(e,t.sliceString(e,i));return Cc.set(t,a),a}if(r.from==e&&r.to==i)return r;let{text:s,from:o}=r;return o>e&&(s=t.sliceString(e,o)+s,o=e),r.to<i&&(s+=t.sliceString(r.to,i)),Cc.set(t,new is(o,s)),new is(e,s.slice(e-o,i-o))}}class xw{constructor(t,e,i,r,s){this.text=t,this.to=s,this.done=!1,this.value=gw,this.matchPos=nh(t,r),this.re=new RegExp(e,jd+(i?.ignoreCase?"i":"")),this.test=i?.test,this.flat=is.get(t,r,this.chunkEnd(r+5e3))}chunkEnd(t){return t>=this.to?this.to:this.text.lineAt(t).to}next(){for(;;){let t=this.re.lastIndex=this.matchPos-this.flat.from,e=this.re.exec(this.flat.text);if(e&&!e[0]&&e.index==t&&(this.re.lastIndex=t+1,e=this.re.exec(this.flat.text)),e){let i=this.flat.from+e.index,r=i+e[0].length;if((this.flat.to>=this.to||e.index+e[0].length<=this.flat.text.length-10)&&(!this.test||this.test(i,r,e)))return this.value={from:i,to:r,match:e},this.matchPos=nh(this.text,r+(i==r?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=is.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(yw.prototype[Symbol.iterator]=xw.prototype[Symbol.iterator]=function(){return this});function nN(n){try{return new RegExp(n,jd),!0}catch{return!1}}function nh(n,t){if(t>=n.length)return t;let e=n.lineAt(t),i;for(;t<e.to&&(i=e.text.charCodeAt(t-e.from))>=56320&&i<57344;)t++;return t}function zf(n){let t=String(n.state.doc.lineAt(n.state.selection.main.head).number),e=Ot("input",{class:"cm-textfield",name:"line",value:t}),i=Ot("form",{class:"cm-gotoLine",onkeydown:s=>{s.keyCode==27?(s.preventDefault(),n.dispatch({effects:po.of(!1)}),n.focus()):s.keyCode==13&&(s.preventDefault(),r())},onsubmit:s=>{s.preventDefault(),r()}},Ot("label",n.state.phrase("Go to line"),": ",e)," ",Ot("button",{class:"cm-button",type:"submit"},n.state.phrase("go")),Ot("button",{name:"close",onclick:()=>{n.dispatch({effects:po.of(!1)}),n.focus()},"aria-label":n.state.phrase("close"),type:"button"},["Ã—"]));function r(){let s=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(e.value);if(!s)return;let{state:o}=n,a=o.doc.lineAt(o.selection.main.head),[,h,f,c,p]=s,m=c?+c.slice(1):0,y=f?+f:a.number;if(f&&p){let C=y/100;h&&(C=C*(h=="-"?-1:1)+a.number/o.doc.lines),y=Math.round(o.doc.lines*C)}else f&&h&&(y=y*(h=="-"?-1:1)+a.number);let v=o.doc.line(Math.max(1,Math.min(o.doc.lines,y))),S=H.cursor(v.from+Math.max(0,Math.min(m,v.length)));n.dispatch({effects:[po.of(!1),q.scrollIntoView(S.from,{y:"center"})],selection:S}),n.focus()}return{dom:i}}const po=ft.define(),Fy=ge.define({create(){return!0},update(n,t){for(let e of t.effects)e.is(po)&&(n=e.value);return n},provide:n=>Ro.from(n,t=>t?zf:null)}),iN=n=>{let t=Do(n,zf);if(!t){let e=[po.of(!0)];n.state.field(Fy,!1)==null&&e.push(ft.appendConfig.of([Fy,rN])),n.dispatch({effects:e}),t=Do(n,zf)}return t&&t.dom.querySelector("input").select(),!0},rN=q.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),sN={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},oN=X.define({combine(n){return Xn(n,sN,{highlightWordAroundCursor:(t,e)=>t||e,minSelectionLength:Math.min,maxMatches:Math.min})}});function lN(n){return[fN,cN]}const aN=nt.mark({class:"cm-selectionMatch"}),hN=nt.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function Vy(n,t,e,i){return(e==0||n(t.sliceDoc(e-1,e))!=Wt.Word)&&(i==t.doc.length||n(t.sliceDoc(i,i+1))!=Wt.Word)}function uN(n,t,e,i){return n(t.sliceDoc(e,e+1))==Wt.Word&&n(t.sliceDoc(i-1,i))==Wt.Word}const cN=Qt.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.selectionSet||n.docChanged||n.viewportChanged)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let t=n.state.facet(oN),{state:e}=n,i=e.selection;if(i.ranges.length>1)return nt.none;let r=i.main,s,o=null;if(r.empty){if(!t.highlightWordAroundCursor)return nt.none;let h=e.wordAt(r.head);if(!h)return nt.none;o=e.charCategorizer(r.head),s=e.sliceDoc(h.from,h.to)}else{let h=r.to-r.from;if(h<t.minSelectionLength||h>200)return nt.none;if(t.wholeWords){if(s=e.sliceDoc(r.from,r.to),o=e.charCategorizer(r.head),!(Vy(o,e,r.from,r.to)&&uN(o,e,r.from,r.to)))return nt.none}else if(s=e.sliceDoc(r.from,r.to),!s)return nt.none}let a=[];for(let h of n.visibleRanges){let f=new ds(e.doc,s,h.from,h.to);for(;!f.next().done;){let{from:c,to:p}=f.value;if((!o||Vy(o,e,c,p))&&(r.empty&&c<=r.from&&p>=r.to?a.push(hN.range(c,p)):(c>=r.to||p<=r.from)&&a.push(aN.range(c,p)),a.length>t.maxMatches))return nt.none}}return nt.set(a)}},{decorations:n=>n.decorations}),fN=q.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),dN=({state:n,dispatch:t})=>{let{selection:e}=n,i=H.create(e.ranges.map(r=>n.wordAt(r.head)||H.cursor(r.head)),e.mainIndex);return i.eq(e)?!1:(t(n.update({selection:i})),!0)};function pN(n,t){let{main:e,ranges:i}=n.selection,r=n.wordAt(e.head),s=r&&r.from==e.from&&r.to==e.to;for(let o=!1,a=new ds(n.doc,t,i[i.length-1].to);;)if(a.next(),a.done){if(o)return null;a=new ds(n.doc,t,0,Math.max(0,i[i.length-1].from-1)),o=!0}else{if(o&&i.some(h=>h.from==a.value.from))continue;if(s){let h=n.wordAt(a.value.from);if(!h||h.from!=a.value.from||h.to!=a.value.to)continue}return a.value}}const mN=({state:n,dispatch:t})=>{let{ranges:e}=n.selection;if(e.some(s=>s.from===s.to))return dN({state:n,dispatch:t});let i=n.sliceDoc(e[0].from,e[0].to);if(n.selection.ranges.some(s=>n.sliceDoc(s.from,s.to)!=i))return!1;let r=pN(n,i);return r?(t(n.update({selection:n.selection.addRange(H.range(r.from,r.to),!1),effects:q.scrollIntoView(r.to)})),!0):!1},bs=X.define({combine(n){return Xn(n,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:t=>new MN(t),scrollToMatch:t=>q.scrollIntoView(t)})}});class vw{constructor(t){this.search=t.search,this.caseSensitive=!!t.caseSensitive,this.literal=!!t.literal,this.regexp=!!t.regexp,this.replace=t.replace||"",this.valid=!!this.search&&(!this.regexp||nN(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!t.wholeWord}unquote(t){return this.literal?t:t.replace(/\\([nrt\\])/g,(e,i)=>i=="n"?`
`:i=="r"?"\r":i=="t"?"	":"\\")}eq(t){return this.search==t.search&&this.replace==t.replace&&this.caseSensitive==t.caseSensitive&&this.regexp==t.regexp&&this.wholeWord==t.wholeWord}create(){return this.regexp?new vN(this):new yN(this)}getCursor(t,e=0,i){let r=t.doc?t:Ct.create({doc:t});return i==null&&(i=r.doc.length),this.regexp?$r(this,r,e,i):Ur(this,r,e,i)}}class bw{constructor(t){this.spec=t}}function Ur(n,t,e,i){return new ds(t.doc,n.unquoted,e,i,n.caseSensitive?void 0:r=>r.toLowerCase(),n.wholeWord?gN(t.doc,t.charCategorizer(t.selection.main.head)):void 0)}function gN(n,t){return(e,i,r,s)=>((s>e||s+r.length<i)&&(s=Math.max(0,e-2),r=n.sliceString(s,Math.min(n.length,i+2))),(t(ih(r,e-s))!=Wt.Word||t(rh(r,e-s))!=Wt.Word)&&(t(rh(r,i-s))!=Wt.Word||t(ih(r,i-s))!=Wt.Word))}class yN extends bw{constructor(t){super(t)}nextMatch(t,e,i){let r=Ur(this.spec,t,i,t.doc.length).nextOverlapping();if(r.done){let s=Math.min(t.doc.length,e+this.spec.unquoted.length);r=Ur(this.spec,t,0,s).nextOverlapping()}return r.done||r.value.from==e&&r.value.to==i?null:r.value}prevMatchInRange(t,e,i){for(let r=i;;){let s=Math.max(e,r-1e4-this.spec.unquoted.length),o=Ur(this.spec,t,s,r),a=null;for(;!o.nextOverlapping().done;)a=o.value;if(a)return a;if(s==e)return null;r-=1e4}}prevMatch(t,e,i){let r=this.prevMatchInRange(t,0,e);return r||(r=this.prevMatchInRange(t,Math.max(0,i-this.spec.unquoted.length),t.doc.length)),r&&(r.from!=e||r.to!=i)?r:null}getReplacement(t){return this.spec.unquote(this.spec.replace)}matchAll(t,e){let i=Ur(this.spec,t,0,t.doc.length),r=[];for(;!i.next().done;){if(r.length>=e)return null;r.push(i.value)}return r}highlight(t,e,i,r){let s=Ur(this.spec,t,Math.max(0,e-this.spec.unquoted.length),Math.min(i+this.spec.unquoted.length,t.doc.length));for(;!s.next().done;)r(s.value.from,s.value.to)}}function $r(n,t,e,i){return new yw(t.doc,n.search,{ignoreCase:!n.caseSensitive,test:n.wholeWord?xN(t.charCategorizer(t.selection.main.head)):void 0},e,i)}function ih(n,t){return n.slice(me(n,t,!1),t)}function rh(n,t){return n.slice(t,me(n,t))}function xN(n){return(t,e,i)=>!i[0].length||(n(ih(i.input,i.index))!=Wt.Word||n(rh(i.input,i.index))!=Wt.Word)&&(n(rh(i.input,i.index+i[0].length))!=Wt.Word||n(ih(i.input,i.index+i[0].length))!=Wt.Word)}class vN extends bw{nextMatch(t,e,i){let r=$r(this.spec,t,i,t.doc.length).next();return r.done&&(r=$r(this.spec,t,0,e).next()),r.done?null:r.value}prevMatchInRange(t,e,i){for(let r=1;;r++){let s=Math.max(e,i-r*1e4),o=$r(this.spec,t,s,i),a=null;for(;!o.next().done;)a=o.value;if(a&&(s==e||a.from>s+10))return a;if(s==e)return null}}prevMatch(t,e,i){return this.prevMatchInRange(t,0,e)||this.prevMatchInRange(t,i,t.doc.length)}getReplacement(t){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(e,i)=>{if(i=="&")return t.match[0];if(i=="$")return"$";for(let r=i.length;r>0;r--){let s=+i.slice(0,r);if(s>0&&s<t.match.length)return t.match[s]+i.slice(r)}return e})}matchAll(t,e){let i=$r(this.spec,t,0,t.doc.length),r=[];for(;!i.next().done;){if(r.length>=e)return null;r.push(i.value)}return r}highlight(t,e,i,r){let s=$r(this.spec,t,Math.max(0,e-250),Math.min(i+250,t.doc.length));for(;!s.next().done;)r(s.value.from,s.value.to)}}const Bo=ft.define(),Kd=ft.define(),Ni=ge.define({create(n){return new kc(Uf(n).create(),null)},update(n,t){for(let e of t.effects)e.is(Bo)?n=new kc(e.value.create(),n.panel):e.is(Kd)&&(n=new kc(n.query,e.value?qd:null));return n},provide:n=>Ro.from(n,t=>t.panel)});class kc{constructor(t,e){this.query=t,this.panel=e}}const bN=nt.mark({class:"cm-searchMatch"}),wN=nt.mark({class:"cm-searchMatch cm-searchMatch-selected"}),SN=Qt.fromClass(class{constructor(n){this.view=n,this.decorations=this.highlight(n.state.field(Ni))}update(n){let t=n.state.field(Ni);(t!=n.startState.field(Ni)||n.docChanged||n.selectionSet||n.viewportChanged)&&(this.decorations=this.highlight(t))}highlight({query:n,panel:t}){if(!t||!n.spec.valid)return nt.none;let{view:e}=this,i=new di;for(let r=0,s=e.visibleRanges,o=s.length;r<o;r++){let{from:a,to:h}=s[r];for(;r<o-1&&h>s[r+1].from-500;)h=s[++r].to;n.highlight(e.state,a,h,(f,c)=>{let p=e.state.selection.ranges.some(m=>m.from==f&&m.to==c);i.add(f,c,p?wN:bN)})}return i.finish()}},{decorations:n=>n.decorations});function el(n){return t=>{let e=t.state.field(Ni,!1);return e&&e.query.spec.valid?n(t,e):Cw(t)}}const sh=el((n,{query:t})=>{let{to:e}=n.state.selection.main,i=t.nextMatch(n.state,e,e);if(!i)return!1;let r=H.single(i.from,i.to),s=n.state.facet(bs);return n.dispatch({selection:r,effects:[Gd(n,i),s.scrollToMatch(r.main,n)],userEvent:"select.search"}),Sw(n),!0}),oh=el((n,{query:t})=>{let{state:e}=n,{from:i}=e.selection.main,r=t.prevMatch(e,i,i);if(!r)return!1;let s=H.single(r.from,r.to),o=n.state.facet(bs);return n.dispatch({selection:s,effects:[Gd(n,r),o.scrollToMatch(s.main,n)],userEvent:"select.search"}),Sw(n),!0}),CN=el((n,{query:t})=>{let e=t.matchAll(n.state,1e3);return!e||!e.length?!1:(n.dispatch({selection:H.create(e.map(i=>H.range(i.from,i.to))),userEvent:"select.search.matches"}),!0)}),kN=({state:n,dispatch:t})=>{let e=n.selection;if(e.ranges.length>1||e.main.empty)return!1;let{from:i,to:r}=e.main,s=[],o=0;for(let a=new ds(n.doc,n.sliceDoc(i,r));!a.next().done;){if(s.length>1e3)return!1;a.value.from==i&&(o=s.length),s.push(H.range(a.value.from,a.value.to))}return t(n.update({selection:H.create(s,o),userEvent:"select.search.matches"})),!0},Wy=el((n,{query:t})=>{let{state:e}=n,{from:i,to:r}=e.selection.main;if(e.readOnly)return!1;let s=t.nextMatch(e,i,i);if(!s)return!1;let o=s,a=[],h,f,c=[];o.from==i&&o.to==r&&(f=e.toText(t.getReplacement(o)),a.push({from:o.from,to:o.to,insert:f}),o=t.nextMatch(e,o.from,o.to),c.push(q.announce.of(e.phrase("replaced match on line $",e.doc.lineAt(i).number)+".")));let p=n.state.changes(a);return o&&(h=H.single(o.from,o.to).map(p),c.push(Gd(n,o)),c.push(e.facet(bs).scrollToMatch(h.main,n))),n.dispatch({changes:p,selection:h,effects:c,userEvent:"input.replace"}),!0}),AN=el((n,{query:t})=>{if(n.state.readOnly)return!1;let e=t.matchAll(n.state,1e9).map(r=>{let{from:s,to:o}=r;return{from:s,to:o,insert:t.getReplacement(r)}});if(!e.length)return!1;let i=n.state.phrase("replaced $ matches",e.length)+".";return n.dispatch({changes:e,effects:q.announce.of(i),userEvent:"input.replace.all"}),!0});function qd(n){return n.state.facet(bs).createPanel(n)}function Uf(n,t){var e,i,r,s,o;let a=n.selection.main,h=a.empty||a.to>a.from+100?"":n.sliceDoc(a.from,a.to);if(t&&!h)return t;let f=n.facet(bs);return new vw({search:((e=t?.literal)!==null&&e!==void 0?e:f.literal)?h:h.replace(/\n/g,"\\n"),caseSensitive:(i=t?.caseSensitive)!==null&&i!==void 0?i:f.caseSensitive,literal:(r=t?.literal)!==null&&r!==void 0?r:f.literal,regexp:(s=t?.regexp)!==null&&s!==void 0?s:f.regexp,wholeWord:(o=t?.wholeWord)!==null&&o!==void 0?o:f.wholeWord})}function ww(n){let t=Do(n,qd);return t&&t.dom.querySelector("[main-field]")}function Sw(n){let t=ww(n);t&&t==n.root.activeElement&&t.select()}const Cw=n=>{let t=n.state.field(Ni,!1);if(t&&t.panel){let e=ww(n);if(e&&e!=n.root.activeElement){let i=Uf(n.state,t.query.spec);i.valid&&n.dispatch({effects:Bo.of(i)}),e.focus(),e.select()}}else n.dispatch({effects:[Kd.of(!0),t?Bo.of(Uf(n.state,t.query.spec)):ft.appendConfig.of(DN)]});return!0},kw=n=>{let t=n.state.field(Ni,!1);if(!t||!t.panel)return!1;let e=Do(n,qd);return e&&e.dom.contains(n.root.activeElement)&&n.focus(),n.dispatch({effects:Kd.of(!1)}),!0},TN=[{key:"Mod-f",run:Cw,scope:"editor search-panel"},{key:"F3",run:sh,shift:oh,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:sh,shift:oh,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:kw,scope:"editor search-panel"},{key:"Mod-Shift-l",run:kN},{key:"Mod-Alt-g",run:iN},{key:"Mod-d",run:mN,preventDefault:!0}];class MN{constructor(t){this.view=t;let e=this.query=t.state.field(Ni).query.spec;this.commit=this.commit.bind(this),this.searchField=Ot("input",{value:e.search,placeholder:Ye(t,"Find"),"aria-label":Ye(t,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=Ot("input",{value:e.replace,placeholder:Ye(t,"Replace"),"aria-label":Ye(t,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=Ot("input",{type:"checkbox",name:"case",form:"",checked:e.caseSensitive,onchange:this.commit}),this.reField=Ot("input",{type:"checkbox",name:"re",form:"",checked:e.regexp,onchange:this.commit}),this.wordField=Ot("input",{type:"checkbox",name:"word",form:"",checked:e.wholeWord,onchange:this.commit});function i(r,s,o){return Ot("button",{class:"cm-button",name:r,onclick:s,type:"button"},o)}this.dom=Ot("div",{onkeydown:r=>this.keydown(r),class:"cm-search"},[this.searchField,i("next",()=>sh(t),[Ye(t,"next")]),i("prev",()=>oh(t),[Ye(t,"previous")]),i("select",()=>CN(t),[Ye(t,"all")]),Ot("label",null,[this.caseField,Ye(t,"match case")]),Ot("label",null,[this.reField,Ye(t,"regexp")]),Ot("label",null,[this.wordField,Ye(t,"by word")]),...t.state.readOnly?[]:[Ot("br"),this.replaceField,i("replace",()=>Wy(t),[Ye(t,"replace")]),i("replaceAll",()=>AN(t),[Ye(t,"replace all")])],Ot("button",{name:"close",onclick:()=>kw(t),"aria-label":Ye(t,"close"),type:"button"},["Ã—"])])}commit(){let t=new vw({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});t.eq(this.query)||(this.query=t,this.view.dispatch({effects:Bo.of(t)}))}keydown(t){BO(this.view,t,"search-panel")?t.preventDefault():t.keyCode==13&&t.target==this.searchField?(t.preventDefault(),(t.shiftKey?oh:sh)(this.view)):t.keyCode==13&&t.target==this.replaceField&&(t.preventDefault(),Wy(this.view))}update(t){for(let e of t.transactions)for(let i of e.effects)i.is(Bo)&&!i.value.eq(this.query)&&this.setQuery(i.value)}setQuery(t){this.query=t,this.searchField.value=t.search,this.replaceField.value=t.replace,this.caseField.checked=t.caseSensitive,this.reField.checked=t.regexp,this.wordField.checked=t.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(bs).top}}function Ye(n,t){return n.state.phrase(t)}const va=30,ba=/[\s\.,:;?!]/;function Gd(n,{from:t,to:e}){let i=n.state.doc.lineAt(t),r=n.state.doc.lineAt(e).to,s=Math.max(i.from,t-va),o=Math.min(r,e+va),a=n.state.sliceDoc(s,o);if(s!=i.from){for(let h=0;h<va;h++)if(!ba.test(a[h+1])&&ba.test(a[h])){a=a.slice(h);break}}if(o!=r){for(let h=a.length-1;h>a.length-va;h--)if(!ba.test(a[h-1])&&ba.test(a[h])){a=a.slice(0,h);break}}return q.announce.of(`${n.state.phrase("current match")}. ${a} ${n.state.phrase("on line")} ${i.number}.`)}const PN=q.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),DN=[Ni,Tr.low(SN),PN];class Aw{constructor(t,e,i,r){this.state=t,this.pos=e,this.explicit=i,this.view=r,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(t){let e=Se(this.state).resolveInner(this.pos,-1);for(;e&&t.indexOf(e.name)<0;)e=e.parent;return e?{from:e.from,to:this.pos,text:this.state.sliceDoc(e.from,this.pos),type:e.type}:null}matchBefore(t){let e=this.state.doc.lineAt(this.pos),i=Math.max(e.from,this.pos-250),r=e.text.slice(i-e.from,this.pos-e.from),s=r.search(Tw(t,!1));return s<0?null:{from:i+s,to:this.pos,text:r.slice(s)}}get aborted(){return this.abortListeners==null}addEventListener(t,e,i){t=="abort"&&this.abortListeners&&(this.abortListeners.push(e),i&&i.onDocChange&&(this.abortOnDocChange=!0))}}function Hy(n){let t=Object.keys(n).join(""),e=/\w/.test(t);return e&&(t=t.replace(/\w/g,"")),`[${e?"\\w":""}${t.replace(/[^\w\s]/g,"\\$&")}]`}function RN(n){let t=Object.create(null),e=Object.create(null);for(let{label:r}of n){t[r[0]]=!0;for(let s=1;s<r.length;s++)e[r[s]]=!0}let i=Hy(t)+Hy(e)+"*$";return[new RegExp("^"+i),new RegExp(i)]}function EN(n){let t=n.map(r=>typeof r=="string"?{label:r}:r),[e,i]=t.every(r=>/^\w+$/.test(r.label))?[/\w*$/,/\w+$/]:RN(t);return r=>{let s=r.matchBefore(i);return s||r.explicit?{from:s?s.from:r.pos,options:t,validFor:e}:null}}class zy{constructor(t,e,i,r){this.completion=t,this.source=e,this.match=i,this.score=r}}function gr(n){return n.selection.main.from}function Tw(n,t){var e;let{source:i}=n,r=t&&i[0]!="^",s=i[i.length-1]!="$";return!r&&!s?n:new RegExp(`${r?"^":""}(?:${i})${s?"$":""}`,(e=n.flags)!==null&&e!==void 0?e:n.ignoreCase?"i":"")}const Mw=Yn.define();function LN(n,t,e,i){let{main:r}=n.selection,s=e-r.from,o=i-r.from;return{...n.changeByRange(a=>{if(a!=r&&e!=i&&n.sliceDoc(a.from+s,a.from+o)!=n.sliceDoc(e,i))return{range:a};let h=n.toText(t);return{changes:{from:a.from+s,to:i==r.from?a.to:a.from+o,insert:h},range:H.cursor(a.from+s+h.length)}}),scrollIntoView:!0,userEvent:"input.complete"}}const Uy=new WeakMap;function ON(n){if(!Array.isArray(n))return n;let t=Uy.get(n);return t||Uy.set(n,t=EN(n)),t}const lh=ft.define(),Io=ft.define();class BN{constructor(t){this.pattern=t,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let e=0;e<t.length;){let i=_e(t,e),r=Wn(i);this.chars.push(i);let s=t.slice(e,e+r),o=s.toUpperCase();this.folded.push(_e(o==s?s.toLowerCase():o,0)),e+=r}this.astral=t.length!=this.chars.length}ret(t,e){return this.score=t,this.matched=e,this}match(t){if(this.pattern.length==0)return this.ret(-100,[]);if(t.length<this.pattern.length)return null;let{chars:e,folded:i,any:r,precise:s,byWord:o}=this;if(e.length==1){let T=_e(t,0),P=Wn(T),I=P==t.length?0:-100;if(T!=e[0])if(T==i[0])I+=-200;else return null;return this.ret(I,[0,P])}let a=t.indexOf(this.pattern);if(a==0)return this.ret(t.length==this.pattern.length?0:-100,[0,this.pattern.length]);let h=e.length,f=0;if(a<0){for(let T=0,P=Math.min(t.length,200);T<P&&f<h;){let I=_e(t,T);(I==e[f]||I==i[f])&&(r[f++]=T),T+=Wn(I)}if(f<h)return null}let c=0,p=0,m=!1,y=0,v=-1,S=-1,C=/[a-z]/.test(t),k=!0;for(let T=0,P=Math.min(t.length,200),I=0;T<P&&p<h;){let L=_e(t,T);a<0&&(c<h&&L==e[c]&&(s[c++]=T),y<h&&(L==e[y]||L==i[y]?(y==0&&(v=T),S=T+1,y++):y=0));let _,F=L<255?L>=48&&L<=57||L>=97&&L<=122?2:L>=65&&L<=90?1:0:(_=Sd(L))!=_.toLowerCase()?1:_!=_.toUpperCase()?2:0;(!T||F==1&&C||I==0&&F!=0)&&(e[p]==L||i[p]==L&&(m=!0)?o[p++]=T:o.length&&(k=!1)),I=F,T+=Wn(L)}return p==h&&o[0]==0&&k?this.result(-100+(m?-200:0),o,t):y==h&&v==0?this.ret(-200-t.length+(S==t.length?0:-100),[0,S]):a>-1?this.ret(-700-t.length,[a,a+this.pattern.length]):y==h?this.ret(-900-t.length,[v,S]):p==h?this.result(-100+(m?-200:0)+-700+(k?0:-1100),o,t):e.length==2?null:this.result((r[0]?-700:0)+-200+-1100,r,t)}result(t,e,i){let r=[],s=0;for(let o of e){let a=o+(this.astral?Wn(_e(i,o)):1);s&&r[s-1]==o?r[s-1]=a:(r[s++]=o,r[s++]=a)}return this.ret(t-i.length,r)}}class IN{constructor(t){this.pattern=t,this.matched=[],this.score=0,this.folded=t.toLowerCase()}match(t){if(t.length<this.pattern.length)return null;let e=t.slice(0,this.pattern.length),i=e==this.pattern?0:e.toLowerCase()==this.folded?-200:null;return i==null?null:(this.matched=[0,e.length],this.score=i+(t.length==this.pattern.length?0:-100),this)}}const ae=X.define({combine(n){return Xn(n,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:_N,filterStrict:!1,compareCompletions:(t,e)=>t.label.localeCompare(e.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(t,e)=>t&&e,closeOnBlur:(t,e)=>t&&e,icons:(t,e)=>t&&e,tooltipClass:(t,e)=>i=>$y(t(i),e(i)),optionClass:(t,e)=>i=>$y(t(i),e(i)),addToOptions:(t,e)=>t.concat(e),filterStrict:(t,e)=>t||e})}});function $y(n,t){return n?t?n+" "+t:n:t}function _N(n,t,e,i,r,s){let o=n.textDirection==Ft.RTL,a=o,h=!1,f="top",c,p,m=t.left-r.left,y=r.right-t.right,v=i.right-i.left,S=i.bottom-i.top;if(a&&m<Math.min(v,y)?a=!1:!a&&y<Math.min(v,m)&&(a=!0),v<=(a?m:y))c=Math.max(r.top,Math.min(e.top,r.bottom-S))-t.top,p=Math.min(400,a?m:y);else{h=!0,p=Math.min(400,(o?t.right:r.right-t.left)-30);let T=r.bottom-t.bottom;T>=S||T>t.top?c=e.bottom-t.top:(f="bottom",c=t.bottom-e.top)}let C=(t.bottom-t.top)/s.offsetHeight,k=(t.right-t.left)/s.offsetWidth;return{style:`${f}: ${c/C}px; max-width: ${p/k}px`,class:"cm-completionInfo-"+(h?o?"left-narrow":"right-narrow":a?"left":"right")}}function NN(n){let t=n.addToOptions.slice();return n.icons&&t.push({render(e){let i=document.createElement("div");return i.classList.add("cm-completionIcon"),e.type&&i.classList.add(...e.type.split(/\s+/g).map(r=>"cm-completionIcon-"+r)),i.setAttribute("aria-hidden","true"),i},position:20}),t.push({render(e,i,r,s){let o=document.createElement("span");o.className="cm-completionLabel";let a=e.displayLabel||e.label,h=0;for(let f=0;f<s.length;){let c=s[f++],p=s[f++];c>h&&o.appendChild(document.createTextNode(a.slice(h,c)));let m=o.appendChild(document.createElement("span"));m.appendChild(document.createTextNode(a.slice(c,p))),m.className="cm-completionMatchedText",h=p}return h<a.length&&o.appendChild(document.createTextNode(a.slice(h))),o},position:50},{render(e){if(!e.detail)return null;let i=document.createElement("span");return i.className="cm-completionDetail",i.textContent=e.detail,i},position:80}),t.sort((e,i)=>e.position-i.position).map(e=>e.render)}function Ac(n,t,e){if(n<=e)return{from:0,to:n};if(t<0&&(t=0),t<=n>>1){let r=Math.floor(t/e);return{from:r*e,to:(r+1)*e}}let i=Math.floor((n-t)/e);return{from:n-(i+1)*e,to:n-i*e}}class FN{constructor(t,e,i){this.view=t,this.stateField=e,this.applyCompletion=i,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:h=>this.placeInfo(h),key:this},this.space=null,this.currentClass="";let r=t.state.field(e),{options:s,selected:o}=r.open,a=t.state.facet(ae);this.optionContent=NN(a),this.optionClass=a.optionClass,this.tooltipClass=a.tooltipClass,this.range=Ac(s.length,o,a.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(t.state),this.dom.addEventListener("mousedown",h=>{let{options:f}=t.state.field(e).open;for(let c=h.target,p;c&&c!=this.dom;c=c.parentNode)if(c.nodeName=="LI"&&(p=/-(\d+)$/.exec(c.id))&&+p[1]<f.length){this.applyCompletion(t,f[+p[1]]),h.preventDefault();return}}),this.dom.addEventListener("focusout",h=>{let f=t.state.field(this.stateField,!1);f&&f.tooltip&&t.state.facet(ae).closeOnBlur&&h.relatedTarget!=t.contentDOM&&t.dispatch({effects:Io.of(null)})}),this.showOptions(s,r.id)}mount(){this.updateSel()}showOptions(t,e){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(t,e,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(t){var e;let i=t.state.field(this.stateField),r=t.startState.field(this.stateField);if(this.updateTooltipClass(t.state),i!=r){let{options:s,selected:o,disabled:a}=i.open;(!r.open||r.open.options!=s)&&(this.range=Ac(s.length,o,t.state.facet(ae).maxRenderedOptions),this.showOptions(s,i.id)),this.updateSel(),a!=((e=r.open)===null||e===void 0?void 0:e.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!a)}}updateTooltipClass(t){let e=this.tooltipClass(t);if(e!=this.currentClass){for(let i of this.currentClass.split(" "))i&&this.dom.classList.remove(i);for(let i of e.split(" "))i&&this.dom.classList.add(i);this.currentClass=e}}positioned(t){this.space=t,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let t=this.view.state.field(this.stateField),e=t.open;if((e.selected>-1&&e.selected<this.range.from||e.selected>=this.range.to)&&(this.range=Ac(e.options.length,e.selected,this.view.state.facet(ae).maxRenderedOptions),this.showOptions(e.options,t.id)),this.updateSelectedOption(e.selected)){this.destroyInfo();let{completion:i}=e.options[e.selected],{info:r}=i;if(!r)return;let s=typeof r=="string"?document.createTextNode(r):r(i);if(!s)return;"then"in s?s.then(o=>{o&&this.view.state.field(this.stateField,!1)==t&&this.addInfoPane(o,i)}).catch(o=>Fe(this.view.state,o,"completion info")):this.addInfoPane(s,i)}}addInfoPane(t,e){this.destroyInfo();let i=this.info=document.createElement("div");if(i.className="cm-tooltip cm-completionInfo",t.nodeType!=null)i.appendChild(t),this.infoDestroy=null;else{let{dom:r,destroy:s}=t;i.appendChild(r),this.infoDestroy=s||null}this.dom.appendChild(i),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(t){let e=null;for(let i=this.list.firstChild,r=this.range.from;i;i=i.nextSibling,r++)i.nodeName!="LI"||!i.id?r--:r==t?i.hasAttribute("aria-selected")||(i.setAttribute("aria-selected","true"),e=i):i.hasAttribute("aria-selected")&&i.removeAttribute("aria-selected");return e&&WN(this.list,e),e}measureInfo(){let t=this.dom.querySelector("[aria-selected]");if(!t||!this.info)return null;let e=this.dom.getBoundingClientRect(),i=this.info.getBoundingClientRect(),r=t.getBoundingClientRect(),s=this.space;if(!s){let o=this.dom.ownerDocument.documentElement;s={left:0,top:0,right:o.clientWidth,bottom:o.clientHeight}}return r.top>Math.min(s.bottom,e.bottom)-10||r.bottom<Math.max(s.top,e.top)+10?null:this.view.state.facet(ae).positionInfo(this.view,e,r,i,s,this.dom)}placeInfo(t){this.info&&(t?(t.style&&(this.info.style.cssText=t.style),this.info.className="cm-tooltip cm-completionInfo "+(t.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(t,e,i){const r=document.createElement("ul");r.id=e,r.setAttribute("role","listbox"),r.setAttribute("aria-expanded","true"),r.setAttribute("aria-label",this.view.state.phrase("Completions")),r.addEventListener("mousedown",o=>{o.target==r&&o.preventDefault()});let s=null;for(let o=i.from;o<i.to;o++){let{completion:a,match:h}=t[o],{section:f}=a;if(f){let m=typeof f=="string"?f:f.name;if(m!=s&&(o>i.from||i.from==0))if(s=m,typeof f!="string"&&f.header)r.appendChild(f.header(f));else{let y=r.appendChild(document.createElement("completion-section"));y.textContent=m}}const c=r.appendChild(document.createElement("li"));c.id=e+"-"+o,c.setAttribute("role","option");let p=this.optionClass(a);p&&(c.className=p);for(let m of this.optionContent){let y=m(a,this.view.state,this.view,h);y&&c.appendChild(y)}}return i.from&&r.classList.add("cm-completionListIncompleteTop"),i.to<t.length&&r.classList.add("cm-completionListIncompleteBottom"),r}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function VN(n,t){return e=>new FN(e,n,t)}function WN(n,t){let e=n.getBoundingClientRect(),i=t.getBoundingClientRect(),r=e.height/n.offsetHeight;i.top<e.top?n.scrollTop-=(e.top-i.top)/r:i.bottom>e.bottom&&(n.scrollTop+=(i.bottom-e.bottom)/r)}function jy(n){return(n.boost||0)*100+(n.apply?10:0)+(n.info?5:0)+(n.type?1:0)}function HN(n,t){let e=[],i=null,r=null,s=c=>{e.push(c);let{section:p}=c.completion;if(p){i||(i=[]);let m=typeof p=="string"?p:p.name;i.some(y=>y.name==m)||i.push(typeof p=="string"?{name:m}:p)}},o=t.facet(ae);for(let c of n)if(c.hasResult()){let p=c.result.getMatch;if(c.result.filter===!1)for(let m of c.result.options)s(new zy(m,c.source,p?p(m):[],1e9-e.length));else{let m=t.sliceDoc(c.from,c.to),y,v=o.filterStrict?new IN(m):new BN(m);for(let S of c.result.options)if(y=v.match(S.label)){let C=S.displayLabel?p?p(S,y.matched):[]:y.matched,k=y.score+(S.boost||0);if(s(new zy(S,c.source,C,k)),typeof S.section=="object"&&S.section.rank==="dynamic"){let{name:T}=S.section;r||(r=Object.create(null)),r[T]=Math.max(k,r[T]||-1e9)}}}}if(i){let c=Object.create(null),p=0,m=(y,v)=>(y.rank==="dynamic"&&v.rank==="dynamic"?r[v.name]-r[y.name]:0)||(typeof y.rank=="number"?y.rank:1e9)-(typeof v.rank=="number"?v.rank:1e9)||(y.name<v.name?-1:1);for(let y of i.sort(m))p-=1e5,c[y.name]=p;for(let y of e){let{section:v}=y.completion;v&&(y.score+=c[typeof v=="string"?v:v.name])}}let a=[],h=null,f=o.compareCompletions;for(let c of e.sort((p,m)=>m.score-p.score||f(p.completion,m.completion))){let p=c.completion;!h||h.label!=p.label||h.detail!=p.detail||h.type!=null&&p.type!=null&&h.type!=p.type||h.apply!=p.apply||h.boost!=p.boost?a.push(c):jy(c.completion)>jy(h)&&(a[a.length-1]=c),h=c.completion}return a}class Gr{constructor(t,e,i,r,s,o){this.options=t,this.attrs=e,this.tooltip=i,this.timestamp=r,this.selected=s,this.disabled=o}setSelected(t,e){return t==this.selected||t>=this.options.length?this:new Gr(this.options,Ky(e,t),this.tooltip,this.timestamp,t,this.disabled)}static build(t,e,i,r,s,o){if(r&&!o&&t.some(f=>f.isPending))return r.setDisabled();let a=HN(t,e);if(!a.length)return r&&t.some(f=>f.isPending)?r.setDisabled():null;let h=e.facet(ae).selectOnOpen?0:-1;if(r&&r.selected!=h&&r.selected!=-1){let f=r.options[r.selected].completion;for(let c=0;c<a.length;c++)if(a[c].completion==f){h=c;break}}return new Gr(a,Ky(i,h),{pos:t.reduce((f,c)=>c.hasResult()?Math.min(f,c.from):f,1e8),create:qN,above:s.aboveCursor},r?r.timestamp:Date.now(),h,!1)}map(t){return new Gr(this.options,this.attrs,{...this.tooltip,pos:t.mapPos(this.tooltip.pos)},this.timestamp,this.selected,this.disabled)}setDisabled(){return new Gr(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class ah{constructor(t,e,i){this.active=t,this.id=e,this.open=i}static start(){return new ah(jN,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(t){let{state:e}=t,i=e.facet(ae),s=(i.override||e.languageDataAt("autocomplete",gr(e)).map(ON)).map(h=>(this.active.find(c=>c.source==h)||new fn(h,this.active.some(c=>c.state!=0)?1:0)).update(t,i));s.length==this.active.length&&s.every((h,f)=>h==this.active[f])&&(s=this.active);let o=this.open,a=t.effects.some(h=>h.is(Yd));o&&t.docChanged&&(o=o.map(t.changes)),t.selection||s.some(h=>h.hasResult()&&t.changes.touchesRange(h.from,h.to))||!zN(s,this.active)||a?o=Gr.build(s,e,this.id,o,i,a):o&&o.disabled&&!s.some(h=>h.isPending)&&(o=null),!o&&s.every(h=>!h.isPending)&&s.some(h=>h.hasResult())&&(s=s.map(h=>h.hasResult()?new fn(h.source,0):h));for(let h of t.effects)h.is(Dw)&&(o=o&&o.setSelected(h.value,this.id));return s==this.active&&o==this.open?this:new ah(s,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?UN:$N}}function zN(n,t){if(n==t)return!0;for(let e=0,i=0;;){for(;e<n.length&&!n[e].hasResult();)e++;for(;i<t.length&&!t[i].hasResult();)i++;let r=e==n.length,s=i==t.length;if(r||s)return r==s;if(n[e++].result!=t[i++].result)return!1}}const UN={"aria-autocomplete":"list"},$N={};function Ky(n,t){let e={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":n};return t>-1&&(e["aria-activedescendant"]=n+"-"+t),e}const jN=[];function Pw(n,t){if(n.isUserEvent("input.complete")){let i=n.annotation(Mw);if(i&&t.activateOnCompletion(i))return 12}let e=n.isUserEvent("input.type");return e&&t.activateOnTyping?5:e?1:n.isUserEvent("delete.backward")?2:n.selection?8:n.docChanged?16:0}class fn{constructor(t,e,i=!1){this.source=t,this.state=e,this.explicit=i}hasResult(){return!1}get isPending(){return this.state==1}update(t,e){let i=Pw(t,e),r=this;(i&8||i&16&&this.touches(t))&&(r=new fn(r.source,0)),i&4&&r.state==0&&(r=new fn(this.source,1)),r=r.updateFor(t,i);for(let s of t.effects)if(s.is(lh))r=new fn(r.source,1,s.value);else if(s.is(Io))r=new fn(r.source,0);else if(s.is(Yd))for(let o of s.value)o.source==r.source&&(r=o);return r}updateFor(t,e){return this.map(t.changes)}map(t){return this}touches(t){return t.changes.touchesRange(gr(t.state))}}class rs extends fn{constructor(t,e,i,r,s,o){super(t,3,e),this.limit=i,this.result=r,this.from=s,this.to=o}hasResult(){return!0}updateFor(t,e){var i;if(!(e&3))return this.map(t.changes);let r=this.result;r.map&&!t.changes.empty&&(r=r.map(r,t.changes));let s=t.changes.mapPos(this.from),o=t.changes.mapPos(this.to,1),a=gr(t.state);if(a>o||!r||e&2&&(gr(t.startState)==this.from||a<this.limit))return new fn(this.source,e&4?1:0);let h=t.changes.mapPos(this.limit);return KN(r.validFor,t.state,s,o)?new rs(this.source,this.explicit,h,r,s,o):r.update&&(r=r.update(r,s,o,new Aw(t.state,a,!1)))?new rs(this.source,this.explicit,h,r,r.from,(i=r.to)!==null&&i!==void 0?i:gr(t.state)):new fn(this.source,1,this.explicit)}map(t){return t.empty?this:(this.result.map?this.result.map(this.result,t):this.result)?new rs(this.source,this.explicit,t.mapPos(this.limit),this.result,t.mapPos(this.from),t.mapPos(this.to,1)):new fn(this.source,0)}touches(t){return t.changes.touchesRange(this.from,this.to)}}function KN(n,t,e,i){if(!n)return!1;let r=t.sliceDoc(e,i);return typeof n=="function"?n(r,e,i,t):Tw(n,!0).test(r)}const Yd=ft.define({map(n,t){return n.map(e=>e.map(t))}}),Dw=ft.define(),Ne=ge.define({create(){return ah.start()},update(n,t){return n.update(t)},provide:n=>[_d.from(n,t=>t.tooltip),q.contentAttributes.from(n,t=>t.attrs)]});function Xd(n,t){const e=t.completion.apply||t.completion.label;let i=n.state.field(Ne).active.find(r=>r.source==t.source);return i instanceof rs?(typeof e=="string"?n.dispatch({...LN(n.state,e,i.from,i.to),annotations:Mw.of(t.completion)}):e(n,t.completion,i.from,i.to),!0):!1}const qN=VN(Ne,Xd);function wa(n,t="option"){return e=>{let i=e.state.field(Ne,!1);if(!i||!i.open||i.open.disabled||Date.now()-i.open.timestamp<e.state.facet(ae).interactionDelay)return!1;let r=1,s;t=="page"&&(s=c1(e,i.open.tooltip))&&(r=Math.max(2,Math.floor(s.dom.offsetHeight/s.dom.querySelector("li").offsetHeight)-1));let{length:o}=i.open.options,a=i.open.selected>-1?i.open.selected+r*(n?1:-1):n?0:o-1;return a<0?a=t=="page"?0:o-1:a>=o&&(a=t=="page"?o-1:0),e.dispatch({effects:Dw.of(a)}),!0}}const GN=n=>{let t=n.state.field(Ne,!1);return n.state.readOnly||!t||!t.open||t.open.selected<0||t.open.disabled||Date.now()-t.open.timestamp<n.state.facet(ae).interactionDelay?!1:Xd(n,t.open.options[t.open.selected])},Tc=n=>n.state.field(Ne,!1)?(n.dispatch({effects:lh.of(!0)}),!0):!1,YN=n=>{let t=n.state.field(Ne,!1);return!t||!t.active.some(e=>e.state!=0)?!1:(n.dispatch({effects:Io.of(null)}),!0)};class XN{constructor(t,e){this.active=t,this.context=e,this.time=Date.now(),this.updates=[],this.done=void 0}}const JN=50,ZN=1e3,QN=Qt.fromClass(class{constructor(n){this.view=n,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let t of n.state.field(Ne).active)t.isPending&&this.startQuery(t)}update(n){let t=n.state.field(Ne),e=n.state.facet(ae);if(!n.selectionSet&&!n.docChanged&&n.startState.field(Ne)==t)return;let i=n.transactions.some(s=>{let o=Pw(s,e);return o&8||(s.selection||s.docChanged)&&!(o&3)});for(let s=0;s<this.running.length;s++){let o=this.running[s];if(i||o.context.abortOnDocChange&&n.docChanged||o.updates.length+n.transactions.length>JN&&Date.now()-o.time>ZN){for(let a of o.context.abortListeners)try{a()}catch(h){Fe(this.view.state,h)}o.context.abortListeners=null,this.running.splice(s--,1)}else o.updates.push(...n.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),n.transactions.some(s=>s.effects.some(o=>o.is(lh)))&&(this.pendingStart=!0);let r=this.pendingStart?50:e.activateOnTypingDelay;if(this.debounceUpdate=t.active.some(s=>s.isPending&&!this.running.some(o=>o.active.source==s.source))?setTimeout(()=>this.startUpdate(),r):-1,this.composing!=0)for(let s of n.transactions)s.isUserEvent("input.type")?this.composing=2:this.composing==2&&s.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:n}=this.view,t=n.field(Ne);for(let e of t.active)e.isPending&&!this.running.some(i=>i.active.source==e.source)&&this.startQuery(e);this.running.length&&t.open&&t.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(ae).updateSyncTime))}startQuery(n){let{state:t}=this.view,e=gr(t),i=new Aw(t,e,n.explicit,this.view),r=new XN(n,i);this.running.push(r),Promise.resolve(n.source(i)).then(s=>{r.context.aborted||(r.done=s||null,this.scheduleAccept())},s=>{this.view.dispatch({effects:Io.of(null)}),Fe(this.view.state,s)})}scheduleAccept(){this.running.every(n=>n.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(ae).updateSyncTime))}accept(){var n;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let t=[],e=this.view.state.facet(ae),i=this.view.state.field(Ne);for(let r=0;r<this.running.length;r++){let s=this.running[r];if(s.done===void 0)continue;if(this.running.splice(r--,1),s.done){let a=gr(s.updates.length?s.updates[0].startState:this.view.state),h=Math.min(a,s.done.from+(s.active.explicit?0:1)),f=new rs(s.active.source,s.active.explicit,h,s.done,s.done.from,(n=s.done.to)!==null&&n!==void 0?n:a);for(let c of s.updates)f=f.update(c,e);if(f.hasResult()){t.push(f);continue}}let o=i.active.find(a=>a.source==s.active.source);if(o&&o.isPending)if(s.done==null){let a=new fn(s.active.source,0);for(let h of s.updates)a=a.update(h,e);a.isPending||t.push(a)}else this.startQuery(o)}(t.length||i.open&&i.open.disabled)&&this.view.dispatch({effects:Yd.of(t)})}},{eventHandlers:{blur(n){let t=this.view.state.field(Ne,!1);if(t&&t.tooltip&&this.view.state.facet(ae).closeOnBlur){let e=t.open&&c1(this.view,t.open.tooltip);(!e||!e.dom.contains(n.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:Io.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:lh.of(!1)}),20),this.composing=0}}}),tF=typeof navigator=="object"&&/Win/.test(navigator.platform),eF=Tr.highest(q.domEventHandlers({keydown(n,t){let e=t.state.field(Ne,!1);if(!e||!e.open||e.open.disabled||e.open.selected<0||n.key.length>1||n.ctrlKey&&!(tF&&n.altKey)||n.metaKey)return!1;let i=e.open.options[e.open.selected],r=e.active.find(o=>o.source==i.source),s=i.completion.commitCharacters||r.result.commitCharacters;return s&&s.indexOf(n.key)>-1&&Xd(t,i),!1}})),nF=q.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"Â·Â·Â·"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'Æ’'"}},".cm-completionIcon-class":{"&:after":{content:"'â—‹'"}},".cm-completionIcon-interface":{"&:after":{content:"'â—Œ'"}},".cm-completionIcon-variable":{"&:after":{content:"'ð‘¥'"}},".cm-completionIcon-constant":{"&:after":{content:"'ð¶'"}},".cm-completionIcon-type":{"&:after":{content:"'ð‘¡'"}},".cm-completionIcon-enum":{"&:after":{content:"'âˆª'"}},".cm-completionIcon-property":{"&:after":{content:"'â–¡'"}},".cm-completionIcon-keyword":{"&:after":{content:"'ðŸ”‘ï¸Ž'"}},".cm-completionIcon-namespace":{"&:after":{content:"'â–¢'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),_o={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},fr=ft.define({map(n,t){let e=t.mapPos(n,-1,Pe.TrackAfter);return e??void 0}}),Jd=new class extends vr{};Jd.startSide=1;Jd.endSide=-1;const Rw=ge.define({create(){return kt.empty},update(n,t){if(n=n.map(t.changes),t.selection){let e=t.state.doc.lineAt(t.selection.main.head);n=n.update({filter:i=>i>=e.from&&i<=e.to})}for(let e of t.effects)e.is(fr)&&(n=n.update({add:[Jd.range(e.value,e.value+1)]}));return n}});function iF(){return[sF,Rw]}const Mc="()[]{}<>Â«Â»Â»Â«ï¼»ï¼½ï½›ï½";function Ew(n){for(let t=0;t<Mc.length;t+=2)if(Mc.charCodeAt(t)==n)return Mc.charAt(t+1);return Sd(n<128?n:n+1)}function Lw(n,t){return n.languageDataAt("closeBrackets",t)[0]||_o}const rF=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),sF=q.inputHandler.of((n,t,e,i)=>{if((rF?n.composing:n.compositionStarted)||n.state.readOnly)return!1;let r=n.state.selection.main;if(i.length>2||i.length==2&&Wn(_e(i,0))==1||t!=r.from||e!=r.to)return!1;let s=aF(n.state,i);return s?(n.dispatch(s),!0):!1}),oF=({state:n,dispatch:t})=>{if(n.readOnly)return!1;let i=Lw(n,n.selection.main.head).brackets||_o.brackets,r=null,s=n.changeByRange(o=>{if(o.empty){let a=hF(n.doc,o.head);for(let h of i)if(h==a&&Dh(n.doc,o.head)==Ew(_e(h,0)))return{changes:{from:o.head-h.length,to:o.head+h.length},range:H.cursor(o.head-h.length)}}return{range:r=o}});return r||t(n.update(s,{scrollIntoView:!0,userEvent:"delete.backward"})),!r},lF=[{key:"Backspace",run:oF}];function aF(n,t){let e=Lw(n,n.selection.main.head),i=e.brackets||_o.brackets;for(let r of i){let s=Ew(_e(r,0));if(t==r)return s==r?fF(n,r,i.indexOf(r+r+r)>-1,e):uF(n,r,s,e.before||_o.before);if(t==s&&Ow(n,n.selection.main.from))return cF(n,r,s)}return null}function Ow(n,t){let e=!1;return n.field(Rw).between(0,n.doc.length,i=>{i==t&&(e=!0)}),e}function Dh(n,t){let e=n.sliceString(t,t+2);return e.slice(0,Wn(_e(e,0)))}function hF(n,t){let e=n.sliceString(t-2,t);return Wn(_e(e,0))==e.length?e:e.slice(1)}function uF(n,t,e,i){let r=null,s=n.changeByRange(o=>{if(!o.empty)return{changes:[{insert:t,from:o.from},{insert:e,from:o.to}],effects:fr.of(o.to+t.length),range:H.range(o.anchor+t.length,o.head+t.length)};let a=Dh(n.doc,o.head);return!a||/\s/.test(a)||i.indexOf(a)>-1?{changes:{insert:t+e,from:o.head},effects:fr.of(o.head+t.length),range:H.cursor(o.head+t.length)}:{range:r=o}});return r?null:n.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function cF(n,t,e){let i=null,r=n.changeByRange(s=>s.empty&&Dh(n.doc,s.head)==e?{changes:{from:s.head,to:s.head+e.length,insert:e},range:H.cursor(s.head+e.length)}:i={range:s});return i?null:n.update(r,{scrollIntoView:!0,userEvent:"input.type"})}function fF(n,t,e,i){let r=i.stringPrefixes||_o.stringPrefixes,s=null,o=n.changeByRange(a=>{if(!a.empty)return{changes:[{insert:t,from:a.from},{insert:t,from:a.to}],effects:fr.of(a.to+t.length),range:H.range(a.anchor+t.length,a.head+t.length)};let h=a.head,f=Dh(n.doc,h),c;if(f==t){if(qy(n,h))return{changes:{insert:t+t,from:h},effects:fr.of(h+t.length),range:H.cursor(h+t.length)};if(Ow(n,h)){let m=e&&n.sliceDoc(h,h+t.length*3)==t+t+t?t+t+t:t;return{changes:{from:h,to:h+m.length,insert:m},range:H.cursor(h+m.length)}}}else{if(e&&n.sliceDoc(h-2*t.length,h)==t+t&&(c=Gy(n,h-2*t.length,r))>-1&&qy(n,c))return{changes:{insert:t+t+t+t,from:h},effects:fr.of(h+t.length),range:H.cursor(h+t.length)};if(n.charCategorizer(h)(f)!=Wt.Word&&Gy(n,h,r)>-1&&!dF(n,h,t,r))return{changes:{insert:t+t,from:h},effects:fr.of(h+t.length),range:H.cursor(h+t.length)}}return{range:s=a}});return s?null:n.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function qy(n,t){let e=Se(n).resolveInner(t+1);return e.parent&&e.from==t}function dF(n,t,e,i){let r=Se(n).resolveInner(t,-1),s=i.reduce((o,a)=>Math.max(o,a.length),0);for(let o=0;o<5;o++){let a=n.sliceDoc(r.from,Math.min(r.to,r.from+e.length+s)),h=a.indexOf(e);if(!h||h>-1&&i.indexOf(a.slice(0,h))>-1){let c=r.firstChild;for(;c&&c.from==r.from&&c.to-c.from>e.length+h;){if(n.sliceDoc(c.to-e.length,c.to)==e)return!1;c=c.firstChild}return!0}let f=r.to==t&&r.parent;if(!f)break;r=f}return!1}function Gy(n,t,e){let i=n.charCategorizer(t);if(i(n.sliceDoc(t-1,t))!=Wt.Word)return t;for(let r of e){let s=t-r.length;if(n.sliceDoc(s,t)==r&&i(n.sliceDoc(s-1,s))!=Wt.Word)return s}return-1}function pF(n={}){return[eF,Ne,ae.of(n),QN,mF,nF]}const Bw=[{key:"Ctrl-Space",run:Tc},{mac:"Alt-`",run:Tc},{mac:"Alt-i",run:Tc},{key:"Escape",run:YN},{key:"ArrowDown",run:wa(!0)},{key:"ArrowUp",run:wa(!1)},{key:"PageDown",run:wa(!0,"page")},{key:"PageUp",run:wa(!1,"page")},{key:"Enter",run:GN}],mF=Tr.highest(vh.computeN([ae],n=>n.facet(ae).defaultKeymap?[Bw]:[]));class Yy{constructor(t,e,i){this.from=t,this.to=e,this.diagnostic=i}}class ur{constructor(t,e,i){this.diagnostics=t,this.panel=e,this.selected=i}static init(t,e,i){let r=i.facet(No).markerFilter;r&&(t=r(t,i));let s=t.slice().sort((c,p)=>c.from-p.from||c.to-p.to),o=new di,a=[],h=0;for(let c=0;;){let p=c==s.length?null:s[c];if(!p&&!a.length)break;let m,y;for(a.length?(m=h,y=a.reduce((S,C)=>Math.min(S,C.to),p&&p.from>m?p.from:1e8)):(m=p.from,y=p.to,a.push(p),c++);c<s.length;){let S=s[c];if(S.from==m&&(S.to>S.from||S.to==m))a.push(S),c++,y=Math.min(S.to,y);else{y=Math.min(S.from,y);break}}let v=PF(a);if(a.some(S=>S.from==S.to||S.from==S.to-1&&i.doc.lineAt(S.from).to==S.from))o.add(m,m,nt.widget({widget:new kF(v),diagnostics:a.slice()}));else{let S=a.reduce((C,k)=>k.markClass?C+" "+k.markClass:C,"");o.add(m,y,nt.mark({class:"cm-lintRange cm-lintRange-"+v+S,diagnostics:a.slice(),inclusiveEnd:a.some(C=>C.to>y)}))}h=y;for(let S=0;S<a.length;S++)a[S].to<=h&&a.splice(S--,1)}let f=o.finish();return new ur(f,e,ps(f))}}function ps(n,t=null,e=0){let i=null;return n.between(e,1e9,(r,s,{spec:o})=>{if(!(t&&o.diagnostics.indexOf(t)<0))if(!i)i=new Yy(r,s,t||o.diagnostics[0]);else{if(o.diagnostics.indexOf(i.diagnostic)<0)return!1;i=new Yy(i.from,s,i.diagnostic)}}),i}function gF(n,t){let e=t.pos,i=t.end||e,r=n.state.facet(No).hideOn(n,e,i);if(r!=null)return r;let s=n.startState.doc.lineAt(t.pos);return!!(n.effects.some(o=>o.is(Iw))||n.changes.touchesRange(s.from,Math.max(s.to,i)))}function yF(n,t){return n.field(Je,!1)?t:t.concat(ft.appendConfig.of(DF))}const Iw=ft.define(),Zd=ft.define(),_w=ft.define(),Je=ge.define({create(){return new ur(nt.none,null,null)},update(n,t){if(t.docChanged&&n.diagnostics.size){let e=n.diagnostics.map(t.changes),i=null,r=n.panel;if(n.selected){let s=t.changes.mapPos(n.selected.from,1);i=ps(e,n.selected.diagnostic,s)||ps(e,null,s)}!e.size&&r&&t.state.facet(No).autoPanel&&(r=null),n=new ur(e,r,i)}for(let e of t.effects)if(e.is(Iw)){let i=t.state.facet(No).autoPanel?e.value.length?Fo.open:null:n.panel;n=ur.init(e.value,i,t.state)}else e.is(Zd)?n=new ur(n.diagnostics,e.value?Fo.open:null,n.selected):e.is(_w)&&(n=new ur(n.diagnostics,n.panel,e.value));return n},provide:n=>[Ro.from(n,t=>t.panel),q.decorations.from(n,t=>t.diagnostics)]}),xF=nt.mark({class:"cm-lintRange cm-lintRange-active"});function vF(n,t,e){let{diagnostics:i}=n.state.field(Je),r,s=-1,o=-1;i.between(t-(e<0?1:0),t+(e>0?1:0),(h,f,{spec:c})=>{if(t>=h&&t<=f&&(h==f||(t>h||e>0)&&(t<f||e<0)))return r=c.diagnostics,s=h,o=f,!1});let a=n.state.facet(No).tooltipFilter;return r&&a&&(r=a(r,n.state)),r?{pos:s,end:o,above:n.state.doc.lineAt(s).to<o,create(){return{dom:bF(n,r)}}}:null}function bF(n,t){return Ot("ul",{class:"cm-tooltip-lint"},t.map(e=>Fw(n,e,!1)))}const wF=n=>{let t=n.state.field(Je,!1);(!t||!t.panel)&&n.dispatch({effects:yF(n.state,[Zd.of(!0)])});let e=Do(n,Fo.open);return e&&e.dom.querySelector(".cm-panel-lint ul").focus(),!0},Xy=n=>{let t=n.state.field(Je,!1);return!t||!t.panel?!1:(n.dispatch({effects:Zd.of(!1)}),!0)},SF=n=>{let t=n.state.field(Je,!1);if(!t)return!1;let e=n.state.selection.main,i=t.diagnostics.iter(e.to+1);return!i.value&&(i=t.diagnostics.iter(0),!i.value||i.from==e.from&&i.to==e.to)?!1:(n.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0}),!0)},CF=[{key:"Mod-Shift-m",run:wF,preventDefault:!0},{key:"F8",run:SF}],No=X.define({combine(n){return{sources:n.map(t=>t.source).filter(t=>t!=null),...Xn(n.map(t=>t.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{delay:Math.max,markerFilter:Jy,tooltipFilter:Jy,needsRefresh:(t,e)=>t?e?i=>t(i)||e(i):t:e,hideOn:(t,e)=>t?e?(i,r,s)=>t(i,r,s)||e(i,r,s):t:e,autoPanel:(t,e)=>t||e})}}});function Jy(n,t){return n?t?(e,i)=>t(n(e,i),i):n:t}function Nw(n){let t=[];if(n)t:for(let{name:e}of n){for(let i=0;i<e.length;i++){let r=e[i];if(/[a-zA-Z]/.test(r)&&!t.some(s=>s.toLowerCase()==r.toLowerCase())){t.push(r);continue t}}t.push("")}return t}function Fw(n,t,e){var i;let r=e?Nw(t.actions):[];return Ot("li",{class:"cm-diagnostic cm-diagnostic-"+t.severity},Ot("span",{class:"cm-diagnosticText"},t.renderMessage?t.renderMessage(n):t.message),(i=t.actions)===null||i===void 0?void 0:i.map((s,o)=>{let a=!1,h=y=>{if(y.preventDefault(),a)return;a=!0;let v=ps(n.state.field(Je).diagnostics,t);v&&s.apply(n,v.from,v.to)},{name:f}=s,c=r[o]?f.indexOf(r[o]):-1,p=c<0?f:[f.slice(0,c),Ot("u",f.slice(c,c+1)),f.slice(c+1)],m=s.markClass?" "+s.markClass:"";return Ot("button",{type:"button",class:"cm-diagnosticAction"+m,onclick:h,onmousedown:h,"aria-label":` Action: ${f}${c<0?"":` (access key "${r[o]})"`}.`},p)}),t.source&&Ot("div",{class:"cm-diagnosticSource"},t.source))}class kF extends vi{constructor(t){super(),this.sev=t}eq(t){return t.sev==this.sev}toDOM(){return Ot("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class Zy{constructor(t,e){this.diagnostic=e,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=Fw(t,e,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class Fo{constructor(t){this.view=t,this.items=[];let e=r=>{if(r.keyCode==27)Xy(this.view),this.view.focus();else if(r.keyCode==38||r.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(r.keyCode==40||r.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(r.keyCode==36)this.moveSelection(0);else if(r.keyCode==35)this.moveSelection(this.items.length-1);else if(r.keyCode==13)this.view.focus();else if(r.keyCode>=65&&r.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:s}=this.items[this.selectedIndex],o=Nw(s.actions);for(let a=0;a<o.length;a++)if(o[a].toUpperCase().charCodeAt(0)==r.keyCode){let h=ps(this.view.state.field(Je).diagnostics,s);h&&s.actions[a].apply(t,h.from,h.to)}}else return;r.preventDefault()},i=r=>{for(let s=0;s<this.items.length;s++)this.items[s].dom.contains(r.target)&&this.moveSelection(s)};this.list=Ot("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:e,onclick:i}),this.dom=Ot("div",{class:"cm-panel-lint"},this.list,Ot("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>Xy(this.view)},"Ã—")),this.update()}get selectedIndex(){let t=this.view.state.field(Je).selected;if(!t)return-1;for(let e=0;e<this.items.length;e++)if(this.items[e].diagnostic==t.diagnostic)return e;return-1}update(){let{diagnostics:t,selected:e}=this.view.state.field(Je),i=0,r=!1,s=null,o=new Set;for(t.between(0,this.view.state.doc.length,(a,h,{spec:f})=>{for(let c of f.diagnostics){if(o.has(c))continue;o.add(c);let p=-1,m;for(let y=i;y<this.items.length;y++)if(this.items[y].diagnostic==c){p=y;break}p<0?(m=new Zy(this.view,c),this.items.splice(i,0,m),r=!0):(m=this.items[p],p>i&&(this.items.splice(i,p-i),r=!0)),e&&m.diagnostic==e.diagnostic?m.dom.hasAttribute("aria-selected")||(m.dom.setAttribute("aria-selected","true"),s=m):m.dom.hasAttribute("aria-selected")&&m.dom.removeAttribute("aria-selected"),i++}});i<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)r=!0,this.items.pop();this.items.length==0&&(this.items.push(new Zy(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),r=!0),s?(this.list.setAttribute("aria-activedescendant",s.id),this.view.requestMeasure({key:this,read:()=>({sel:s.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:a,panel:h})=>{let f=h.height/this.list.offsetHeight;a.top<h.top?this.list.scrollTop-=(h.top-a.top)/f:a.bottom>h.bottom&&(this.list.scrollTop+=(a.bottom-h.bottom)/f)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),r&&this.sync()}sync(){let t=this.list.firstChild;function e(){let i=t;t=i.nextSibling,i.remove()}for(let i of this.items)if(i.dom.parentNode==this.list){for(;t!=i.dom;)e();t=i.dom.nextSibling}else this.list.insertBefore(i.dom,t);for(;t;)e()}moveSelection(t){if(this.selectedIndex<0)return;let e=this.view.state.field(Je),i=ps(e.diagnostics,this.items[t].diagnostic);i&&this.view.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:_w.of(i)})}static open(t){return new Fo(t)}}function AF(n,t='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${t}>${encodeURIComponent(n)}</svg>')`}function Sa(n){return AF(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${n}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const TF=q.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:Sa("#d11")},".cm-lintRange-warning":{backgroundImage:Sa("orange")},".cm-lintRange-info":{backgroundImage:Sa("#999")},".cm-lintRange-hint":{backgroundImage:Sa("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function MF(n){return n=="error"?4:n=="warning"?3:n=="info"?2:1}function PF(n){let t="hint",e=1;for(let i of n){let r=MF(i.severity);r>e&&(e=r,t=i.severity)}return t}const DF=[Je,q.decorations.compute([Je],n=>{let{selected:t,panel:e}=n.field(Je);return!t||!e||t.from==t.to?nt.none:nt.set([xF.range(t.from,t.to)])}),SB(vF,{hideOn:gF}),TF];var Qy=function(t){t===void 0&&(t={});var{crosshairCursor:e=!1}=t,i=[];t.closeBracketsKeymap!==!1&&(i=i.concat(lF)),t.defaultKeymap!==!1&&(i=i.concat(tN)),t.searchKeymap!==!1&&(i=i.concat(TN)),t.historyKeymap!==!1&&(i=i.concat(l_)),t.foldKeymap!==!1&&(i=i.concat(mI)),t.completionKeymap!==!1&&(i=i.concat(Bw)),t.lintKeymap!==!1&&(i=i.concat(CF));var r=[];return t.lineNumbers!==!1&&r.push(OB()),t.highlightActiveLineGutter!==!1&&r.push(_B()),t.highlightSpecialChars!==!1&&r.push(JO()),t.history!==!1&&r.push(ZI()),t.foldGutter!==!1&&r.push(vI()),t.drawSelection!==!1&&r.push(WO()),t.dropCursor!==!1&&r.push(jO()),t.allowMultipleSelections!==!1&&r.push(Ct.allowMultipleSelections.of(!0)),t.indentOnInput!==!1&&r.push(sI()),t.syntaxHighlighting!==!1&&r.push(kh(CI,{fallback:!0})),t.bracketMatching!==!1&&r.push(RI()),t.closeBrackets!==!1&&r.push(iF()),t.autocompletion!==!1&&r.push(pF()),t.rectangularSelection!==!1&&r.push(cB()),e!==!1&&r.push(pB()),t.highlightActiveLine!==!1&&r.push(iB()),t.highlightSelectionMatches!==!1&&r.push(lN()),t.tabSize&&typeof t.tabSize=="number"&&r.push(wh.of(" ".repeat(t.tabSize))),r.concat([vh.of(i.flat())]).filter(Boolean)};const RF="#e5c07b",tx="#e06c75",EF="#56b6c2",LF="#ffffff",Na="#abb2bf",$f="#7d8799",OF="#61afef",BF="#98c379",ex="#d19a66",IF="#c678dd",_F="#21252b",nx="#2c313a",ix="#282c34",Pc="#353a42",NF="#3E4451",rx="#528bff",FF=q.theme({"&":{color:Na,backgroundColor:ix},".cm-content":{caretColor:rx},".cm-cursor, .cm-dropCursor":{borderLeftColor:rx},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:NF},".cm-panels":{backgroundColor:_F,color:Na},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:ix,color:$f,border:"none"},".cm-activeLineGutter":{backgroundColor:nx},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:Pc},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:Pc,borderBottomColor:Pc},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:nx,color:Na}}},{dark:!0}),VF=Mr.define([{tag:B.keyword,color:IF},{tag:[B.name,B.deleted,B.character,B.propertyName,B.macroName],color:tx},{tag:[B.function(B.variableName),B.labelName],color:OF},{tag:[B.color,B.constant(B.name),B.standard(B.name)],color:ex},{tag:[B.definition(B.name),B.separator],color:Na},{tag:[B.typeName,B.className,B.number,B.changed,B.annotation,B.modifier,B.self,B.namespace],color:RF},{tag:[B.operator,B.operatorKeyword,B.url,B.escape,B.regexp,B.link,B.special(B.string)],color:EF},{tag:[B.meta,B.comment],color:$f},{tag:B.strong,fontWeight:"bold"},{tag:B.emphasis,fontStyle:"italic"},{tag:B.strikethrough,textDecoration:"line-through"},{tag:B.link,color:$f,textDecoration:"underline"},{tag:B.heading,fontWeight:"bold",color:tx},{tag:[B.atom,B.bool,B.special(B.variableName)],color:ex},{tag:[B.processingInstruction,B.string,B.inserted],color:BF},{tag:B.invalid,color:LF}]),WF=[FF,kh(VF)];var HF=q.theme({"&":{backgroundColor:"#fff"}},{dark:!1}),zF=function(t){t===void 0&&(t={});var{indentWithTab:e=!0,editable:i=!0,readOnly:r=!1,theme:s="light",placeholder:o="",basicSetup:a=!0}=t,h=[];switch(e&&h.unshift(vh.of([eN])),a&&(typeof a=="boolean"?h.unshift(Qy()):h.unshift(Qy(a))),o&&h.unshift(lB(o)),s){case"light":h.push(HF);break;case"dark":h.push(WF);break;case"none":break;default:h.push(s);break}return i===!1&&h.push(q.editable.of(!1)),r&&h.push(Ct.readOnly.of(!0)),[...h]},UF=n=>({line:n.state.doc.lineAt(n.state.selection.main.from),lineCount:n.state.doc.lines,lineBreak:n.state.lineBreak,length:n.state.doc.length,readOnly:n.state.readOnly,tabSize:n.state.tabSize,selection:n.state.selection,selectionAsSingle:n.state.selection.asSingle().main,ranges:n.state.selection.ranges,selectionCode:n.state.sliceDoc(n.state.selection.main.from,n.state.selection.main.to),selections:n.state.selection.ranges.map(t=>n.state.sliceDoc(t.from,t.to)),selectedText:n.state.selection.ranges.some(t=>!t.empty)});class $F{constructor(t,e){this.timeLeftMS=void 0,this.timeoutMS=void 0,this.isCancelled=!1,this.isTimeExhausted=!1,this.callbacks=[],this.timeLeftMS=e,this.timeoutMS=e,this.callbacks.push(t)}tick(){if(!this.isCancelled&&!this.isTimeExhausted&&(this.timeLeftMS--,this.timeLeftMS<=0)){this.isTimeExhausted=!0;var t=this.callbacks.slice();this.callbacks.length=0,t.forEach(e=>{try{e()}catch(i){console.error("TimeoutLatch callback error:",i)}})}}cancel(){this.isCancelled=!0,this.callbacks.length=0}reset(){this.timeLeftMS=this.timeoutMS,this.isCancelled=!1,this.isTimeExhausted=!1}get isDone(){return this.isCancelled||this.isTimeExhausted}}class sx{constructor(){this.interval=null,this.latches=new Set}add(t){this.latches.add(t),this.start()}remove(t){this.latches.delete(t),this.latches.size===0&&this.stop()}start(){this.interval===null&&(this.interval=setInterval(()=>{this.latches.forEach(t=>{t.tick(),t.isDone&&this.remove(t)})},1))}stop(){this.interval!==null&&(clearInterval(this.interval),this.interval=null)}}var Dc=null,jF=()=>typeof window>"u"?new sx:(Dc||(Dc=new sx),Dc),ox=Yn.define(),KF=200,qF=[];function GF(n){var{value:t,selection:e,onChange:i,onStatistics:r,onCreateEditor:s,onUpdate:o,extensions:a=qF,autoFocus:h,theme:f="light",height:c=null,minHeight:p=null,maxHeight:m=null,width:y=null,minWidth:v=null,maxWidth:S=null,placeholder:C="",editable:k=!0,readOnly:T=!1,indentWithTab:P=!0,basicSetup:I=!0,root:L,initialState:_}=n,[F,$]=E.useState(),[j,tt]=E.useState(),[et,Z]=E.useState(),lt=E.useState(()=>({current:null}))[0],at=E.useState(()=>({current:null}))[0],wt=q.theme({"&":{height:c,minHeight:p,maxHeight:m,width:y,minWidth:v,maxWidth:S},"& .cm-scroller":{height:"100% !important"}}),Kt=q.updateListener.of(yt=>{if(yt.docChanged&&typeof i=="function"&&!yt.transactions.some(oe=>oe.annotation(ox))){lt.current?lt.current.reset():(lt.current=new $F(()=>{if(at.current){var oe=at.current;at.current=null,oe()}lt.current=null},KF),jF().add(lt.current));var Tt=yt.state.doc,Pt=Tt.toString();i(Pt,yt)}r&&r(UF(yt))}),ht=zF({theme:f,editable:k,readOnly:T,placeholder:C,indentWithTab:P,basicSetup:I}),gt=[Kt,wt,...ht];return o&&typeof o=="function"&&gt.push(q.updateListener.of(o)),gt=gt.concat(a),E.useLayoutEffect(()=>{if(F&&!et){var yt={doc:t,selection:e,extensions:gt},Tt=_?Ct.fromJSON(_.json,yt,_.fields):Ct.create(yt);if(Z(Tt),!j){var Pt=new q({state:Tt,parent:F,root:L});tt(Pt),s&&s(Pt,Tt)}}return()=>{j&&(Z(void 0),tt(void 0))}},[F,et]),E.useEffect(()=>{n.container&&$(n.container)},[n.container]),E.useEffect(()=>()=>{j&&(j.destroy(),tt(void 0)),lt.current&&(lt.current.cancel(),lt.current=null)},[j]),E.useEffect(()=>{h&&j&&j.focus()},[h,j]),E.useEffect(()=>{j&&j.dispatch({effects:ft.reconfigure.of(gt)})},[f,a,c,p,m,y,v,S,C,k,T,P,I,i,o]),E.useEffect(()=>{if(t!==void 0){var yt=j?j.state.doc.toString():"";if(j&&t!==yt){var Tt=lt.current&&!lt.current.isDone,Pt=()=>{j&&t!==j.state.doc.toString()&&j.dispatch({changes:{from:0,to:j.state.doc.toString().length,insert:t||""},annotations:[ox.of(!0)]})};Tt?at.current=Pt:Pt()}}},[t,j]),{state:et,setState:Z,view:j,setView:tt,container:F,setContainer:$}}var YF=["className","value","selection","extensions","onChange","onStatistics","onCreateEditor","onUpdate","autoFocus","theme","height","minHeight","maxHeight","width","minWidth","maxWidth","basicSetup","placeholder","indentWithTab","editable","readOnly","root","initialState"],Vw=E.forwardRef((n,t)=>{var{className:e,value:i="",selection:r,extensions:s=[],onChange:o,onStatistics:a,onCreateEditor:h,onUpdate:f,autoFocus:c,theme:p="light",height:m,minHeight:y,maxHeight:v,width:S,minWidth:C,maxWidth:k,basicSetup:T,placeholder:P,indentWithTab:I,editable:L,readOnly:_,root:F,initialState:$}=n,j=zI(n,YF),tt=E.useRef(null),{state:et,view:Z,container:lt,setContainer:at}=GF({root:F,value:i,autoFocus:c,theme:p,height:m,minHeight:y,maxHeight:v,width:S,minWidth:C,maxWidth:k,basicSetup:T,placeholder:P,indentWithTab:I,editable:L,readOnly:_,selection:r,onChange:o,onStatistics:a,onCreateEditor:h,onUpdate:f,extensions:s,initialState:$});E.useImperativeHandle(t,()=>({editor:tt.current,state:et,view:Z}),[tt,lt,et,Z]);var wt=E.useCallback(ht=>{tt.current=ht,at(ht)},[at]);if(typeof i!="string")throw new Error("value must be typeof string but got "+typeof i);var Kt=typeof p=="string"?"cm-theme-"+p:"cm-theme";return z.jsx("div",Nf({ref:wt,className:""+Kt+(e?" "+e:"")},j))});Vw.displayName="CodeMirror";const Ww=E.createContext({});function XF(n){const t=E.useRef(null);return t.current===null&&(t.current=n()),t.current}const Qd=typeof window<"u",JF=Qd?E.useLayoutEffect:E.useEffect,tp=E.createContext(null);function ep(n,t){n.indexOf(t)===-1&&n.push(t)}function np(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}const gi=(n,t,e)=>e>t?t:e<n?n:e;let ip=()=>{};const yi={},Hw=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function zw(n){return typeof n=="object"&&n!==null}const Uw=n=>/^0[^.\s]+$/u.test(n);function rp(n){let t;return()=>(t===void 0&&(t=n()),t)}const gn=n=>n,ZF=(n,t)=>e=>t(n(e)),nl=(...n)=>n.reduce(ZF),Vo=(n,t,e)=>{const i=t-n;return i===0?1:(e-n)/i};class sp{constructor(){this.subscriptions=[]}add(t){return ep(this.subscriptions,t),()=>np(this.subscriptions,t)}notify(t,e,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](t,e,i);else for(let s=0;s<r;s++){const o=this.subscriptions[s];o&&o(t,e,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const jn=n=>n*1e3,dn=n=>n/1e3;function $w(n,t){return t?n*(1e3/t):0}const jw=(n,t,e)=>(((1-3*e+3*t)*n+(3*e-6*t))*n+3*t)*n,QF=1e-7,tV=12;function eV(n,t,e,i,r){let s,o,a=0;do o=t+(e-t)/2,s=jw(o,i,r)-n,s>0?e=o:t=o;while(Math.abs(s)>QF&&++a<tV);return o}function il(n,t,e,i){if(n===t&&e===i)return gn;const r=s=>eV(s,0,1,n,e);return s=>s===0||s===1?s:jw(r(s),t,i)}const Kw=n=>t=>t<=.5?n(2*t)/2:(2-n(2*(1-t)))/2,qw=n=>t=>1-n(1-t),Gw=il(.33,1.53,.69,.99),op=qw(Gw),Yw=Kw(op),Xw=n=>(n*=2)<1?.5*op(n):.5*(2-Math.pow(2,-10*(n-1))),lp=n=>1-Math.sin(Math.acos(n)),Jw=qw(lp),Zw=Kw(lp),nV=il(.42,0,1,1),iV=il(0,0,.58,1),Qw=il(.42,0,.58,1),rV=n=>Array.isArray(n)&&typeof n[0]!="number",tS=n=>Array.isArray(n)&&typeof n[0]=="number",sV={linear:gn,easeIn:nV,easeInOut:Qw,easeOut:iV,circIn:lp,circInOut:Zw,circOut:Jw,backIn:op,backInOut:Yw,backOut:Gw,anticipate:Xw},oV=n=>typeof n=="string",lx=n=>{if(tS(n)){ip(n.length===4);const[t,e,i,r]=n;return il(t,e,i,r)}else if(oV(n))return sV[n];return n},Ca=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function lV(n,t){let e=new Set,i=new Set,r=!1,s=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function h(c){o.has(c)&&(f.schedule(c),n()),c(a)}const f={schedule:(c,p=!1,m=!1)=>{const v=m&&r?e:i;return p&&o.add(c),v.has(c)||v.add(c),c},cancel:c=>{i.delete(c),o.delete(c)},process:c=>{if(a=c,r){s=!0;return}r=!0,[e,i]=[i,e],e.forEach(h),e.clear(),r=!1,s&&(s=!1,f.process(c))}};return f}const aV=40;function eS(n,t){let e=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},s=()=>e=!0,o=Ca.reduce((P,I)=>(P[I]=lV(s),P),{}),{setup:a,read:h,resolveKeyframes:f,preUpdate:c,update:p,preRender:m,render:y,postRender:v}=o,S=()=>{const P=yi.useManualTiming?r.timestamp:performance.now();e=!1,yi.useManualTiming||(r.delta=i?1e3/60:Math.max(Math.min(P-r.timestamp,aV),1)),r.timestamp=P,r.isProcessing=!0,a.process(r),h.process(r),f.process(r),c.process(r),p.process(r),m.process(r),y.process(r),v.process(r),r.isProcessing=!1,e&&t&&(i=!1,n(S))},C=()=>{e=!0,i=!0,r.isProcessing||n(S)};return{schedule:Ca.reduce((P,I)=>{const L=o[I];return P[I]=(_,F=!1,$=!1)=>(e||C(),L.schedule(_,F,$)),P},{}),cancel:P=>{for(let I=0;I<Ca.length;I++)o[Ca[I]].cancel(P)},state:r,steps:o}}const{schedule:Ht,cancel:Ui,state:ce,steps:Rc}=eS(typeof requestAnimationFrame<"u"?requestAnimationFrame:gn,!0);let Fa;function hV(){Fa=void 0}const We={now:()=>(Fa===void 0&&We.set(ce.isProcessing||yi.useManualTiming?ce.timestamp:performance.now()),Fa),set:n=>{Fa=n,queueMicrotask(hV)}},nS=n=>t=>typeof t=="string"&&t.startsWith(n),ap=nS("--"),uV=nS("var(--"),hp=n=>uV(n)?cV.test(n.split("/*")[0].trim()):!1,cV=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,ws={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},Wo={...ws,transform:n=>gi(0,1,n)},ka={...ws,default:1},mo=n=>Math.round(n*1e5)/1e5,up=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function fV(n){return n==null}const dV=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,cp=(n,t)=>e=>!!(typeof e=="string"&&dV.test(e)&&e.startsWith(n)||t&&!fV(e)&&Object.prototype.hasOwnProperty.call(e,t)),iS=(n,t,e)=>i=>{if(typeof i!="string")return i;const[r,s,o,a]=i.match(up);return{[n]:parseFloat(r),[t]:parseFloat(s),[e]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},pV=n=>gi(0,255,n),Ec={...ws,transform:n=>Math.round(pV(n))},dr={test:cp("rgb","red"),parse:iS("red","green","blue"),transform:({red:n,green:t,blue:e,alpha:i=1})=>"rgba("+Ec.transform(n)+", "+Ec.transform(t)+", "+Ec.transform(e)+", "+mo(Wo.transform(i))+")"};function mV(n){let t="",e="",i="",r="";return n.length>5?(t=n.substring(1,3),e=n.substring(3,5),i=n.substring(5,7),r=n.substring(7,9)):(t=n.substring(1,2),e=n.substring(2,3),i=n.substring(3,4),r=n.substring(4,5),t+=t,e+=e,i+=i,r+=r),{red:parseInt(t,16),green:parseInt(e,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const jf={test:cp("#"),parse:mV,transform:dr.transform},rl=n=>({test:t=>typeof t=="string"&&t.endsWith(n)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${n}`}),Di=rl("deg"),Kn=rl("%"),ot=rl("px"),gV=rl("vh"),yV=rl("vw"),ax={...Kn,parse:n=>Kn.parse(n)/100,transform:n=>Kn.transform(n*100)},Yr={test:cp("hsl","hue"),parse:iS("hue","saturation","lightness"),transform:({hue:n,saturation:t,lightness:e,alpha:i=1})=>"hsla("+Math.round(n)+", "+Kn.transform(mo(t))+", "+Kn.transform(mo(e))+", "+mo(Wo.transform(i))+")"},ee={test:n=>dr.test(n)||jf.test(n)||Yr.test(n),parse:n=>dr.test(n)?dr.parse(n):Yr.test(n)?Yr.parse(n):jf.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?dr.transform(n):Yr.transform(n),getAnimatableNone:n=>{const t=ee.parse(n);return t.alpha=0,ee.transform(t)}},xV=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function vV(n){return isNaN(n)&&typeof n=="string"&&(n.match(up)?.length||0)+(n.match(xV)?.length||0)>0}const rS="number",sS="color",bV="var",wV="var(",hx="${}",SV=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Ho(n){const t=n.toString(),e=[],i={color:[],number:[],var:[]},r=[];let s=0;const a=t.replace(SV,h=>(ee.test(h)?(i.color.push(s),r.push(sS),e.push(ee.parse(h))):h.startsWith(wV)?(i.var.push(s),r.push(bV),e.push(h)):(i.number.push(s),r.push(rS),e.push(parseFloat(h))),++s,hx)).split(hx);return{values:e,split:a,indexes:i,types:r}}function oS(n){return Ho(n).values}function lS(n){const{split:t,types:e}=Ho(n),i=t.length;return r=>{let s="";for(let o=0;o<i;o++)if(s+=t[o],r[o]!==void 0){const a=e[o];a===rS?s+=mo(r[o]):a===sS?s+=ee.transform(r[o]):s+=r[o]}return s}}const CV=n=>typeof n=="number"?0:ee.test(n)?ee.getAnimatableNone(n):n;function kV(n){const t=oS(n);return lS(n)(t.map(CV))}const $i={test:vV,parse:oS,createTransformer:lS,getAnimatableNone:kV};function Lc(n,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?n+(t-n)*6*e:e<1/2?t:e<2/3?n+(t-n)*(2/3-e)*6:n}function AV({hue:n,saturation:t,lightness:e,alpha:i}){n/=360,t/=100,e/=100;let r=0,s=0,o=0;if(!t)r=s=o=e;else{const a=e<.5?e*(1+t):e+t-e*t,h=2*e-a;r=Lc(h,a,n+1/3),s=Lc(h,a,n),o=Lc(h,a,n-1/3)}return{red:Math.round(r*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:i}}function hh(n,t){return e=>e>0?t:n}const Ut=(n,t,e)=>n+(t-n)*e,Oc=(n,t,e)=>{const i=n*n,r=e*(t*t-i)+i;return r<0?0:Math.sqrt(r)},TV=[jf,dr,Yr],MV=n=>TV.find(t=>t.test(n));function ux(n){const t=MV(n);if(!t)return!1;let e=t.parse(n);return t===Yr&&(e=AV(e)),e}const cx=(n,t)=>{const e=ux(n),i=ux(t);if(!e||!i)return hh(n,t);const r={...e};return s=>(r.red=Oc(e.red,i.red,s),r.green=Oc(e.green,i.green,s),r.blue=Oc(e.blue,i.blue,s),r.alpha=Ut(e.alpha,i.alpha,s),dr.transform(r))},Kf=new Set(["none","hidden"]);function PV(n,t){return Kf.has(n)?e=>e<=0?n:t:e=>e>=1?t:n}function DV(n,t){return e=>Ut(n,t,e)}function fp(n){return typeof n=="number"?DV:typeof n=="string"?hp(n)?hh:ee.test(n)?cx:LV:Array.isArray(n)?aS:typeof n=="object"?ee.test(n)?cx:RV:hh}function aS(n,t){const e=[...n],i=e.length,r=n.map((s,o)=>fp(s)(s,t[o]));return s=>{for(let o=0;o<i;o++)e[o]=r[o](s);return e}}function RV(n,t){const e={...n,...t},i={};for(const r in e)n[r]!==void 0&&t[r]!==void 0&&(i[r]=fp(n[r])(n[r],t[r]));return r=>{for(const s in i)e[s]=i[s](r);return e}}function EV(n,t){const e=[],i={color:0,var:0,number:0};for(let r=0;r<t.values.length;r++){const s=t.types[r],o=n.indexes[s][i[s]],a=n.values[o]??0;e[r]=a,i[s]++}return e}const LV=(n,t)=>{const e=$i.createTransformer(t),i=Ho(n),r=Ho(t);return i.indexes.var.length===r.indexes.var.length&&i.indexes.color.length===r.indexes.color.length&&i.indexes.number.length>=r.indexes.number.length?Kf.has(n)&&!r.values.length||Kf.has(t)&&!i.values.length?PV(n,t):nl(aS(EV(i,r),r.values),e):hh(n,t)};function hS(n,t,e){return typeof n=="number"&&typeof t=="number"&&typeof e=="number"?Ut(n,t,e):fp(n)(n,t)}const OV=n=>{const t=({timestamp:e})=>n(e);return{start:(e=!0)=>Ht.update(t,e),stop:()=>Ui(t),now:()=>ce.isProcessing?ce.timestamp:We.now()}},uS=(n,t,e=10)=>{let i="";const r=Math.max(Math.round(t/e),2);for(let s=0;s<r;s++)i+=Math.round(n(s/(r-1))*1e4)/1e4+", ";return`linear(${i.substring(0,i.length-2)})`},uh=2e4;function dp(n){let t=0;const e=50;let i=n.next(t);for(;!i.done&&t<uh;)t+=e,i=n.next(t);return t>=uh?1/0:t}function BV(n,t=100,e){const i=e({...n,keyframes:[0,t]}),r=Math.min(dp(i),uh);return{type:"keyframes",ease:s=>i.next(r*s).value/t,duration:dn(r)}}const IV=5;function cS(n,t,e){const i=Math.max(t-IV,0);return $w(e-n(i),t-i)}const Gt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Bc=.001;function _V({duration:n=Gt.duration,bounce:t=Gt.bounce,velocity:e=Gt.velocity,mass:i=Gt.mass}){let r,s,o=1-t;o=gi(Gt.minDamping,Gt.maxDamping,o),n=gi(Gt.minDuration,Gt.maxDuration,dn(n)),o<1?(r=f=>{const c=f*o,p=c*n,m=c-e,y=qf(f,o),v=Math.exp(-p);return Bc-m/y*v},s=f=>{const p=f*o*n,m=p*e+e,y=Math.pow(o,2)*Math.pow(f,2)*n,v=Math.exp(-p),S=qf(Math.pow(f,2),o);return(-r(f)+Bc>0?-1:1)*((m-y)*v)/S}):(r=f=>{const c=Math.exp(-f*n),p=(f-e)*n+1;return-Bc+c*p},s=f=>{const c=Math.exp(-f*n),p=(e-f)*(n*n);return c*p});const a=5/n,h=FV(r,s,a);if(n=jn(n),isNaN(h))return{stiffness:Gt.stiffness,damping:Gt.damping,duration:n};{const f=Math.pow(h,2)*i;return{stiffness:f,damping:o*2*Math.sqrt(i*f),duration:n}}}const NV=12;function FV(n,t,e){let i=e;for(let r=1;r<NV;r++)i=i-n(i)/t(i);return i}function qf(n,t){return n*Math.sqrt(1-t*t)}const VV=["duration","bounce"],WV=["stiffness","damping","mass"];function fx(n,t){return t.some(e=>n[e]!==void 0)}function HV(n){let t={velocity:Gt.velocity,stiffness:Gt.stiffness,damping:Gt.damping,mass:Gt.mass,isResolvedFromDuration:!1,...n};if(!fx(n,WV)&&fx(n,VV))if(n.visualDuration){const e=n.visualDuration,i=2*Math.PI/(e*1.2),r=i*i,s=2*gi(.05,1,1-(n.bounce||0))*Math.sqrt(r);t={...t,mass:Gt.mass,stiffness:r,damping:s}}else{const e=_V(n);t={...t,...e,mass:Gt.mass},t.isResolvedFromDuration=!0}return t}function ch(n=Gt.visualDuration,t=Gt.bounce){const e=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:t}:n;let{restSpeed:i,restDelta:r}=e;const s=e.keyframes[0],o=e.keyframes[e.keyframes.length-1],a={done:!1,value:s},{stiffness:h,damping:f,mass:c,duration:p,velocity:m,isResolvedFromDuration:y}=HV({...e,velocity:-dn(e.velocity||0)}),v=m||0,S=f/(2*Math.sqrt(h*c)),C=o-s,k=dn(Math.sqrt(h/c)),T=Math.abs(C)<5;i||(i=T?Gt.restSpeed.granular:Gt.restSpeed.default),r||(r=T?Gt.restDelta.granular:Gt.restDelta.default);let P;if(S<1){const L=qf(k,S);P=_=>{const F=Math.exp(-S*k*_);return o-F*((v+S*k*C)/L*Math.sin(L*_)+C*Math.cos(L*_))}}else if(S===1)P=L=>o-Math.exp(-k*L)*(C+(v+k*C)*L);else{const L=k*Math.sqrt(S*S-1);P=_=>{const F=Math.exp(-S*k*_),$=Math.min(L*_,300);return o-F*((v+S*k*C)*Math.sinh($)+L*C*Math.cosh($))/L}}const I={calculatedDuration:y&&p||null,next:L=>{const _=P(L);if(y)a.done=L>=p;else{let F=L===0?v:0;S<1&&(F=L===0?jn(v):cS(P,L,_));const $=Math.abs(F)<=i,j=Math.abs(o-_)<=r;a.done=$&&j}return a.value=a.done?o:_,a},toString:()=>{const L=Math.min(dp(I),uh),_=uS(F=>I.next(L*F).value,L,30);return L+"ms "+_},toTransition:()=>{}};return I}ch.applyToOptions=n=>{const t=BV(n,100,ch);return n.ease=t.ease,n.duration=jn(t.duration),n.type="keyframes",n};function Gf({keyframes:n,velocity:t=0,power:e=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:h,restDelta:f=.5,restSpeed:c}){const p=n[0],m={done:!1,value:p},y=$=>a!==void 0&&$<a||h!==void 0&&$>h,v=$=>a===void 0?h:h===void 0||Math.abs(a-$)<Math.abs(h-$)?a:h;let S=e*t;const C=p+S,k=o===void 0?C:o(C);k!==C&&(S=k-p);const T=$=>-S*Math.exp(-$/i),P=$=>k+T($),I=$=>{const j=T($),tt=P($);m.done=Math.abs(j)<=f,m.value=m.done?k:tt};let L,_;const F=$=>{y(m.value)&&(L=$,_=ch({keyframes:[m.value,v(m.value)],velocity:cS(P,$,m.value),damping:r,stiffness:s,restDelta:f,restSpeed:c}))};return F(0),{calculatedDuration:null,next:$=>{let j=!1;return!_&&L===void 0&&(j=!0,I($),F($)),L!==void 0&&$>=L?_.next($-L):(!j&&I($),m)}}}function zV(n,t,e){const i=[],r=e||yi.mix||hS,s=n.length-1;for(let o=0;o<s;o++){let a=r(n[o],n[o+1]);if(t){const h=Array.isArray(t)?t[o]||gn:t;a=nl(h,a)}i.push(a)}return i}function UV(n,t,{clamp:e=!0,ease:i,mixer:r}={}){const s=n.length;if(ip(s===t.length),s===1)return()=>t[0];if(s===2&&t[0]===t[1])return()=>t[1];const o=n[0]===n[1];n[0]>n[s-1]&&(n=[...n].reverse(),t=[...t].reverse());const a=zV(t,i,r),h=a.length,f=c=>{if(o&&c<n[0])return t[0];let p=0;if(h>1)for(;p<n.length-2&&!(c<n[p+1]);p++);const m=Vo(n[p],n[p+1],c);return a[p](m)};return e?c=>f(gi(n[0],n[s-1],c)):f}function $V(n,t){const e=n[n.length-1];for(let i=1;i<=t;i++){const r=Vo(0,t,i);n.push(Ut(e,1,r))}}function jV(n){const t=[0];return $V(t,n.length-1),t}function KV(n,t){return n.map(e=>e*t)}function qV(n,t){return n.map(()=>t||Qw).splice(0,n.length-1)}function go({duration:n=300,keyframes:t,times:e,ease:i="easeInOut"}){const r=rV(i)?i.map(lx):lx(i),s={done:!1,value:t[0]},o=KV(e&&e.length===t.length?e:jV(t),n),a=UV(o,t,{ease:Array.isArray(r)?r:qV(t,r)});return{calculatedDuration:n,next:h=>(s.value=a(h),s.done=h>=n,s)}}const GV=n=>n!==null;function pp(n,{repeat:t,repeatType:e="loop"},i,r=1){const s=n.filter(GV),a=r<0||t&&e!=="loop"&&t%2===1?0:s.length-1;return!a||i===void 0?s[a]:i}const YV={decay:Gf,inertia:Gf,tween:go,keyframes:go,spring:ch};function fS(n){typeof n.type=="string"&&(n.type=YV[n.type])}class mp{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,e){return this.finished.then(t,e)}}const XV=n=>n/100;class gp extends mp{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:e}=this.options;e&&e.updatedAt!==We.now()&&this.tick(We.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;fS(t);const{type:e=go,repeat:i=0,repeatDelay:r=0,repeatType:s,velocity:o=0}=t;let{keyframes:a}=t;const h=e||go;h!==go&&typeof a[0]!="number"&&(this.mixKeyframes=nl(XV,hS(a[0],a[1])),a=[0,100]);const f=h({...t,keyframes:a});s==="mirror"&&(this.mirroredGenerator=h({...t,keyframes:[...a].reverse(),velocity:-o})),f.calculatedDuration===null&&(f.calculatedDuration=dp(f));const{calculatedDuration:c}=f;this.calculatedDuration=c,this.resolvedDuration=c+r,this.totalDuration=this.resolvedDuration*(i+1)-r,this.generator=f}updateTime(t){const e=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=e}tick(t,e=!1){const{generator:i,totalDuration:r,mixKeyframes:s,mirroredGenerator:o,resolvedDuration:a,calculatedDuration:h}=this;if(this.startTime===null)return i.next(0);const{delay:f=0,keyframes:c,repeat:p,repeatType:m,repeatDelay:y,type:v,onUpdate:S,finalKeyframe:C}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-r/this.speed,this.startTime)),e?this.currentTime=t:this.updateTime(t);const k=this.currentTime-f*(this.playbackSpeed>=0?1:-1),T=this.playbackSpeed>=0?k<0:k>r;this.currentTime=Math.max(k,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=r);let P=this.currentTime,I=i;if(p){const $=Math.min(this.currentTime,r)/a;let j=Math.floor($),tt=$%1;!tt&&$>=1&&(tt=1),tt===1&&j--,j=Math.min(j,p+1),!!(j%2)&&(m==="reverse"?(tt=1-tt,y&&(tt-=y/a)):m==="mirror"&&(I=o)),P=gi(0,1,tt)*a}const L=T?{done:!1,value:c[0]}:I.next(P);s&&(L.value=s(L.value));let{done:_}=L;!T&&h!==null&&(_=this.playbackSpeed>=0?this.currentTime>=r:this.currentTime<=0);const F=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&_);return F&&v!==Gf&&(L.value=pp(c,this.options,C,this.speed)),S&&S(L.value),F&&this.finish(),L}then(t,e){return this.finished.then(t,e)}get duration(){return dn(this.calculatedDuration)}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+dn(t)}get time(){return dn(this.currentTime)}set time(t){t=jn(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(We.now());const e=this.playbackSpeed!==t;this.playbackSpeed=t,e&&(this.time=dn(this.currentTime))}play(){if(this.isStopped)return;const{driver:t=OV,startTime:e}=this.options;this.driver||(this.driver=t(r=>this.tick(r))),this.options.onPlay?.();const i=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=i):this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime||(this.startTime=e??i),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(We.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),t.observe(this)}}function JV(n){for(let t=1;t<n.length;t++)n[t]??(n[t]=n[t-1])}const pr=n=>n*180/Math.PI,Yf=n=>{const t=pr(Math.atan2(n[1],n[0]));return Xf(t)},ZV={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:Yf,rotateZ:Yf,skewX:n=>pr(Math.atan(n[1])),skewY:n=>pr(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},Xf=n=>(n=n%360,n<0&&(n+=360),n),dx=Yf,px=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),mx=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),QV={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:px,scaleY:mx,scale:n=>(px(n)+mx(n))/2,rotateX:n=>Xf(pr(Math.atan2(n[6],n[5]))),rotateY:n=>Xf(pr(Math.atan2(-n[2],n[0]))),rotateZ:dx,rotate:dx,skewX:n=>pr(Math.atan(n[4])),skewY:n=>pr(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function Jf(n){return n.includes("scale")?1:0}function Zf(n,t){if(!n||n==="none")return Jf(t);const e=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,r;if(e)i=QV,r=e;else{const a=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=ZV,r=a}if(!r)return Jf(t);const s=i[t],o=r[1].split(",").map(eW);return typeof s=="function"?s(o):o[s]}const tW=(n,t)=>{const{transform:e="none"}=getComputedStyle(n);return Zf(e,t)};function eW(n){return parseFloat(n.trim())}const Ss=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Cs=new Set(Ss),gx=n=>n===ws||n===ot,nW=new Set(["x","y","z"]),iW=Ss.filter(n=>!nW.has(n));function rW(n){const t=[];return iW.forEach(e=>{const i=n.getValue(e);i!==void 0&&(t.push([e,i.get()]),i.set(e.startsWith("scale")?1:0))}),t}const yr={width:({x:n},{paddingLeft:t="0",paddingRight:e="0"})=>n.max-n.min-parseFloat(t)-parseFloat(e),height:({y:n},{paddingTop:t="0",paddingBottom:e="0"})=>n.max-n.min-parseFloat(t)-parseFloat(e),top:(n,{top:t})=>parseFloat(t),left:(n,{left:t})=>parseFloat(t),bottom:({y:n},{top:t})=>parseFloat(t)+(n.max-n.min),right:({x:n},{left:t})=>parseFloat(t)+(n.max-n.min),x:(n,{transform:t})=>Zf(t,"x"),y:(n,{transform:t})=>Zf(t,"y")};yr.translateX=yr.x;yr.translateY=yr.y;const xr=new Set;let Qf=!1,td=!1,ed=!1;function dS(){if(td){const n=Array.from(xr).filter(i=>i.needsMeasurement),t=new Set(n.map(i=>i.element)),e=new Map;t.forEach(i=>{const r=rW(i);r.length&&(e.set(i,r),i.render())}),n.forEach(i=>i.measureInitialState()),t.forEach(i=>{i.render();const r=e.get(i);r&&r.forEach(([s,o])=>{i.getValue(s)?.set(o)})}),n.forEach(i=>i.measureEndState()),n.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}td=!1,Qf=!1,xr.forEach(n=>n.complete(ed)),xr.clear()}function pS(){xr.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(td=!0)})}function sW(){ed=!0,pS(),dS(),ed=!1}class yp{constructor(t,e,i,r,s,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=e,this.name=i,this.motionValue=r,this.element=s,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(xr.add(this),Qf||(Qf=!0,Ht.read(pS),Ht.resolveKeyframes(dS))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:e,element:i,motionValue:r}=this;if(t[0]===null){const s=r?.get(),o=t[t.length-1];if(s!==void 0)t[0]=s;else if(i&&e){const a=i.readValue(e,o);a!=null&&(t[0]=a)}t[0]===void 0&&(t[0]=o),r&&s===void 0&&r.set(t[0])}JV(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),xr.delete(this)}cancel(){this.state==="scheduled"&&(xr.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const oW=n=>n.startsWith("--");function lW(n,t,e){oW(t)?n.style.setProperty(t,e):n.style[t]=e}const aW=rp(()=>window.ScrollTimeline!==void 0),hW={};function uW(n,t){const e=rp(n);return()=>hW[t]??e()}const mS=uW(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),so=([n,t,e,i])=>`cubic-bezier(${n}, ${t}, ${e}, ${i})`,yx={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:so([0,.65,.55,1]),circOut:so([.55,0,1,.45]),backIn:so([.31,.01,.66,-.59]),backOut:so([.33,1.53,.69,.99])};function gS(n,t){if(n)return typeof n=="function"?mS()?uS(n,t):"ease-out":tS(n)?so(n):Array.isArray(n)?n.map(e=>gS(e,t)||yx.easeOut):yx[n]}function cW(n,t,e,{delay:i=0,duration:r=300,repeat:s=0,repeatType:o="loop",ease:a="easeOut",times:h}={},f=void 0){const c={[t]:e};h&&(c.offset=h);const p=gS(a,r);Array.isArray(p)&&(c.easing=p);const m={delay:i,duration:r,easing:Array.isArray(p)?"linear":p,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"};return f&&(m.pseudoElement=f),n.animate(c,m)}function yS(n){return typeof n=="function"&&"applyToOptions"in n}function fW({type:n,...t}){return yS(n)&&mS()?n.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class dW extends mp{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:e,name:i,keyframes:r,pseudoElement:s,allowFlatten:o=!1,finalKeyframe:a,onComplete:h}=t;this.isPseudoElement=!!s,this.allowFlatten=o,this.options=t,ip(typeof t.type!="string");const f=fW(t);this.animation=cW(e,i,r,f,s),f.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const c=pp(r,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(c):lW(e,i,c),this.animation.cancel()}h?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const t=this.animation.effect?.getComputedTiming?.().duration||0;return dn(Number(t))}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+dn(t)}get time(){return dn(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=jn(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:e}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,t&&aW()?(this.animation.timeline=t,gn):e(this)}}const xS={anticipate:Xw,backInOut:Yw,circInOut:Zw};function pW(n){return n in xS}function mW(n){typeof n.ease=="string"&&pW(n.ease)&&(n.ease=xS[n.ease])}const xx=10;class gW extends dW{constructor(t){mW(t),fS(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:e,onUpdate:i,onComplete:r,element:s,...o}=this.options;if(!e)return;if(t!==void 0){e.set(t);return}const a=new gp({...o,autoplay:!1}),h=jn(this.finishedTime??this.time);e.setWithVelocity(a.sample(h-xx).value,a.sample(h).value,xx),a.stop()}}const vx=(n,t)=>t==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&($i.test(n)||n==="0")&&!n.startsWith("url("));function yW(n){const t=n[0];if(n.length===1)return!0;for(let e=0;e<n.length;e++)if(n[e]!==t)return!0}function xW(n,t,e,i){const r=n[0];if(r===null)return!1;if(t==="display"||t==="visibility")return!0;const s=n[n.length-1],o=vx(r,t),a=vx(s,t);return!o||!a?!1:yW(n)||(e==="spring"||yS(e))&&i}function nd(n){n.duration=0,n.type="keyframes"}const vW=new Set(["opacity","clipPath","filter","transform"]),bW=rp(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function wW(n){const{motionValue:t,name:e,repeatDelay:i,repeatType:r,damping:s,type:o}=n;if(!(t?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:h,transformTemplate:f}=t.owner.getProps();return bW()&&e&&vW.has(e)&&(e!=="transform"||!f)&&!h&&!i&&r!=="mirror"&&s!==0&&o!=="inertia"}const SW=40;class CW extends mp{constructor({autoplay:t=!0,delay:e=0,type:i="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:o="loop",keyframes:a,name:h,motionValue:f,element:c,...p}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=We.now();const m={autoplay:t,delay:e,type:i,repeat:r,repeatDelay:s,repeatType:o,name:h,motionValue:f,element:c,...p},y=c?.KeyframeResolver||yp;this.keyframeResolver=new y(a,(v,S,C)=>this.onKeyframesResolved(v,S,m,!C),h,f,c),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(t,e,i,r){this.keyframeResolver=void 0;const{name:s,type:o,velocity:a,delay:h,isHandoff:f,onUpdate:c}=i;this.resolvedAt=We.now(),xW(t,s,o,a)||((yi.instantAnimations||!h)&&c?.(pp(t,i,e)),t[0]=t[t.length-1],nd(i),i.repeat=0);const m={startTime:r?this.resolvedAt?this.resolvedAt-this.createdAt>SW?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:e,...i,keyframes:t},y=!f&&wW(m)?new gW({...m,element:m.motionValue.owner.current}):new gp(m);y.finished.then(()=>this.notifyFinished()).catch(gn),this.pendingTimeline&&(this.stopTimeline=y.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=y}get finished(){return this._animation?this.animation.finished:this._finished}then(t,e){return this.finished.finally(t).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),sW()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const kW=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function AW(n){const t=kW.exec(n);if(!t)return[,];const[,e,i,r]=t;return[`--${e??i}`,r]}function vS(n,t,e=1){const[i,r]=AW(n);if(!i)return;const s=window.getComputedStyle(t).getPropertyValue(i);if(s){const o=s.trim();return Hw(o)?parseFloat(o):o}return hp(r)?vS(r,t,e+1):r}function xp(n,t){return n?.[t]??n?.default??n}const bS=new Set(["width","height","top","left","right","bottom",...Ss]),TW={test:n=>n==="auto",parse:n=>n},wS=n=>t=>t.test(n),SS=[ws,ot,Kn,Di,yV,gV,TW],bx=n=>SS.find(wS(n));function MW(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||Uw(n):!0}const PW=new Set(["brightness","contrast","saturate","opacity"]);function DW(n){const[t,e]=n.slice(0,-1).split("(");if(t==="drop-shadow")return n;const[i]=e.match(up)||[];if(!i)return n;const r=e.replace(i,"");let s=PW.has(t)?1:0;return i!==e&&(s*=100),t+"("+s+r+")"}const RW=/\b([a-z-]*)\(.*?\)/gu,id={...$i,getAnimatableNone:n=>{const t=n.match(RW);return t?t.map(DW).join(" "):n}},wx={...ws,transform:Math.round},EW={rotate:Di,rotateX:Di,rotateY:Di,rotateZ:Di,scale:ka,scaleX:ka,scaleY:ka,scaleZ:ka,skew:Di,skewX:Di,skewY:Di,distance:ot,translateX:ot,translateY:ot,translateZ:ot,x:ot,y:ot,z:ot,perspective:ot,transformPerspective:ot,opacity:Wo,originX:ax,originY:ax,originZ:ot},vp={borderWidth:ot,borderTopWidth:ot,borderRightWidth:ot,borderBottomWidth:ot,borderLeftWidth:ot,borderRadius:ot,radius:ot,borderTopLeftRadius:ot,borderTopRightRadius:ot,borderBottomRightRadius:ot,borderBottomLeftRadius:ot,width:ot,maxWidth:ot,height:ot,maxHeight:ot,top:ot,right:ot,bottom:ot,left:ot,padding:ot,paddingTop:ot,paddingRight:ot,paddingBottom:ot,paddingLeft:ot,margin:ot,marginTop:ot,marginRight:ot,marginBottom:ot,marginLeft:ot,backgroundPositionX:ot,backgroundPositionY:ot,...EW,zIndex:wx,fillOpacity:Wo,strokeOpacity:Wo,numOctaves:wx},LW={...vp,color:ee,backgroundColor:ee,outlineColor:ee,fill:ee,stroke:ee,borderColor:ee,borderTopColor:ee,borderRightColor:ee,borderBottomColor:ee,borderLeftColor:ee,filter:id,WebkitFilter:id},CS=n=>LW[n];function kS(n,t){let e=CS(n);return e!==id&&(e=$i),e.getAnimatableNone?e.getAnimatableNone(t):void 0}const OW=new Set(["auto","none","0"]);function BW(n,t,e){let i=0,r;for(;i<n.length&&!r;){const s=n[i];typeof s=="string"&&!OW.has(s)&&Ho(s).values.length&&(r=n[i]),i++}if(r&&e)for(const s of t)n[s]=kS(e,r)}class IW extends yp{constructor(t,e,i,r,s){super(t,e,i,r,s,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:e,name:i}=this;if(!e||!e.current)return;super.readKeyframes();for(let h=0;h<t.length;h++){let f=t[h];if(typeof f=="string"&&(f=f.trim(),hp(f))){const c=vS(f,e.current);c!==void 0&&(t[h]=c),h===t.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!bS.has(i)||t.length!==2)return;const[r,s]=t,o=bx(r),a=bx(s);if(o!==a)if(gx(o)&&gx(a))for(let h=0;h<t.length;h++){const f=t[h];typeof f=="string"&&(t[h]=parseFloat(f))}else yr[i]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:e}=this,i=[];for(let r=0;r<t.length;r++)(t[r]===null||MW(t[r]))&&i.push(r);i.length&&BW(t,i,e)}measureInitialState(){const{element:t,unresolvedKeyframes:e,name:i}=this;if(!t||!t.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=yr[i](t.measureViewportBox(),window.getComputedStyle(t.current)),e[0]=this.measuredOrigin;const r=e[e.length-1];r!==void 0&&t.getValue(i,r).jump(r,!1)}measureEndState(){const{element:t,name:e,unresolvedKeyframes:i}=this;if(!t||!t.current)return;const r=t.getValue(e);r&&r.jump(this.measuredOrigin,!1);const s=i.length-1,o=i[s];i[s]=yr[e](t.measureViewportBox(),window.getComputedStyle(t.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),this.removedTransforms?.length&&this.removedTransforms.forEach(([a,h])=>{t.getValue(a).set(h)}),this.resolveNoneKeyframes()}}function _W(n,t,e){if(n instanceof EventTarget)return[n];if(typeof n=="string"){let i=document;const r=e?.[n]??i.querySelectorAll(n);return r?Array.from(r):[]}return Array.from(n)}const AS=(n,t)=>t&&typeof n=="number"?t.transform(n):n;function NW(n){return zw(n)&&"offsetHeight"in n}const Sx=30,FW=n=>!isNaN(parseFloat(n));class VW{constructor(t,e={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=i=>{const r=We.now();if(this.updatedAt!==r&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const s of this.dependents)s.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=e.owner}setCurrent(t){this.current=t,this.updatedAt=We.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=FW(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,e){this.events[t]||(this.events[t]=new sp);const i=this.events[t].add(e);return t==="change"?()=>{i(),Ht.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,e){this.passiveEffect=t,this.stopPassiveEffect=e}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,e,i){this.set(e),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-i}jump(t,e=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,e&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=We.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>Sx)return 0;const e=Math.min(this.updatedAt-this.prevUpdatedAt,Sx);return $w(parseFloat(this.current)-parseFloat(this.prevFrameValue),e)}start(t){return this.stop(),new Promise(e=>{this.hasAnimated=!0,this.animation=t(e),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ms(n,t){return new VW(n,t)}const{schedule:bp}=eS(queueMicrotask,!1),An={x:!1,y:!1};function TS(){return An.x||An.y}function WW(n){return n==="x"||n==="y"?An[n]?null:(An[n]=!0,()=>{An[n]=!1}):An.x||An.y?null:(An.x=An.y=!0,()=>{An.x=An.y=!1})}function MS(n,t){const e=_W(n),i=new AbortController,r={passive:!0,...t,signal:i.signal};return[e,r,()=>i.abort()]}function Cx(n){return!(n.pointerType==="touch"||TS())}function HW(n,t,e={}){const[i,r,s]=MS(n,e),o=a=>{if(!Cx(a))return;const{target:h}=a,f=t(h,a);if(typeof f!="function"||!h)return;const c=p=>{Cx(p)&&(f(p),h.removeEventListener("pointerleave",c))};h.addEventListener("pointerleave",c,r)};return i.forEach(a=>{a.addEventListener("pointerenter",o,r)}),s}const PS=(n,t)=>t?n===t?!0:PS(n,t.parentElement):!1,wp=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,zW=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function UW(n){return zW.has(n.tagName)||n.tabIndex!==-1}const Va=new WeakSet;function kx(n){return t=>{t.key==="Enter"&&n(t)}}function Ic(n,t){n.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const $W=(n,t)=>{const e=n.currentTarget;if(!e)return;const i=kx(()=>{if(Va.has(e))return;Ic(e,"down");const r=kx(()=>{Ic(e,"up")}),s=()=>Ic(e,"cancel");e.addEventListener("keyup",r,t),e.addEventListener("blur",s,t)});e.addEventListener("keydown",i,t),e.addEventListener("blur",()=>e.removeEventListener("keydown",i),t)};function Ax(n){return wp(n)&&!TS()}function jW(n,t,e={}){const[i,r,s]=MS(n,e),o=a=>{const h=a.currentTarget;if(!Ax(a))return;Va.add(h);const f=t(h,a),c=(y,v)=>{window.removeEventListener("pointerup",p),window.removeEventListener("pointercancel",m),Va.has(h)&&Va.delete(h),Ax(y)&&typeof f=="function"&&f(y,{success:v})},p=y=>{c(y,h===window||h===document||e.useGlobalTarget||PS(h,y.target))},m=y=>{c(y,!1)};window.addEventListener("pointerup",p,r),window.addEventListener("pointercancel",m,r)};return i.forEach(a=>{(e.useGlobalTarget?window:a).addEventListener("pointerdown",o,r),NW(a)&&(a.addEventListener("focus",f=>$W(f,r)),!UW(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),s}function DS(n){return zw(n)&&"ownerSVGElement"in n}function KW(n){return DS(n)&&n.tagName==="svg"}const we=n=>!!(n&&n.getVelocity),qW=[...SS,ee,$i],GW=n=>qW.find(wS(n)),RS=E.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});function YW(n=!0){const t=E.useContext(tp);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:i,register:r}=t,s=E.useId();E.useEffect(()=>{if(n)return r(s)},[n]);const o=E.useCallback(()=>n&&i&&i(s),[s,i,n]);return!e&&i?[!1,o]:[!0]}const ES=E.createContext({strict:!1}),Tx={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},gs={};for(const n in Tx)gs[n]={isEnabled:t=>Tx[n].some(e=>!!t[e])};function XW(n){for(const t in n)gs[t]={...gs[t],...n[t]}}const JW=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function fh(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||JW.has(n)}let LS=n=>!fh(n);function ZW(n){typeof n=="function"&&(LS=t=>t.startsWith("on")?!fh(t):n(t))}try{ZW(require("@emotion/is-prop-valid").default)}catch{}function QW(n,t,e){const i={};for(const r in n)r==="values"&&typeof n.values=="object"||(LS(r)||e===!0&&fh(r)||!t&&!fh(r)||n.draggable&&r.startsWith("onDrag"))&&(i[r]=n[r]);return i}const Rh=E.createContext({});function Eh(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function zo(n){return typeof n=="string"||Array.isArray(n)}const Sp=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Cp=["initial",...Sp];function Lh(n){return Eh(n.animate)||Cp.some(t=>zo(n[t]))}function OS(n){return!!(Lh(n)||n.variants)}function t3(n,t){if(Lh(n)){const{initial:e,animate:i}=n;return{initial:e===!1||zo(e)?e:void 0,animate:zo(i)?i:void 0}}return n.inherit!==!1?t:{}}function e3(n){const{initial:t,animate:e}=t3(n,E.useContext(Rh));return E.useMemo(()=>({initial:t,animate:e}),[Mx(t),Mx(e)])}function Mx(n){return Array.isArray(n)?n.join(" "):n}const Uo={};function n3(n){for(const t in n)Uo[t]=n[t],ap(t)&&(Uo[t].isCSSVariable=!0)}function BS(n,{layout:t,layoutId:e}){return Cs.has(n)||n.startsWith("origin")||(t||e!==void 0)&&(!!Uo[n]||n==="opacity")}const i3={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},r3=Ss.length;function s3(n,t,e){let i="",r=!0;for(let s=0;s<r3;s++){const o=Ss[s],a=n[o];if(a===void 0)continue;let h=!0;if(typeof a=="number"?h=a===(o.startsWith("scale")?1:0):h=parseFloat(a)===0,!h||e){const f=AS(a,vp[o]);if(!h){r=!1;const c=i3[o]||o;i+=`${c}(${f}) `}e&&(t[o]=f)}}return i=i.trim(),e?i=e(t,r?"":i):r&&(i="none"),i}function kp(n,t,e){const{style:i,vars:r,transformOrigin:s}=n;let o=!1,a=!1;for(const h in t){const f=t[h];if(Cs.has(h)){o=!0;continue}else if(ap(h)){r[h]=f;continue}else{const c=AS(f,vp[h]);h.startsWith("origin")?(a=!0,s[h]=c):i[h]=c}}if(t.transform||(o||e?i.transform=s3(t,n.transform,e):i.transform&&(i.transform="none")),a){const{originX:h="50%",originY:f="50%",originZ:c=0}=s;i.transformOrigin=`${h} ${f} ${c}`}}const Ap=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function IS(n,t,e){for(const i in t)!we(t[i])&&!BS(i,e)&&(n[i]=t[i])}function o3({transformTemplate:n},t){return E.useMemo(()=>{const e=Ap();return kp(e,t,n),Object.assign({},e.vars,e.style)},[t])}function l3(n,t){const e=n.style||{},i={};return IS(i,e,n),Object.assign(i,o3(n,t)),i}function a3(n,t){const e={},i=l3(n,t);return n.drag&&n.dragListener!==!1&&(e.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(e.tabIndex=0),e.style=i,e}const h3={offset:"stroke-dashoffset",array:"stroke-dasharray"},u3={offset:"strokeDashoffset",array:"strokeDasharray"};function c3(n,t,e=1,i=0,r=!0){n.pathLength=1;const s=r?h3:u3;n[s.offset]=ot.transform(-i);const o=ot.transform(t),a=ot.transform(e);n[s.array]=`${o} ${a}`}function _S(n,{attrX:t,attrY:e,attrScale:i,pathLength:r,pathSpacing:s=1,pathOffset:o=0,...a},h,f,c){if(kp(n,a,f),h){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:p,style:m}=n;p.transform&&(m.transform=p.transform,delete p.transform),(m.transform||p.transformOrigin)&&(m.transformOrigin=p.transformOrigin??"50% 50%",delete p.transformOrigin),m.transform&&(m.transformBox=c?.transformBox??"fill-box",delete p.transformBox),t!==void 0&&(p.x=t),e!==void 0&&(p.y=e),i!==void 0&&(p.scale=i),r!==void 0&&c3(p,r,s,o,!1)}const NS=()=>({...Ap(),attrs:{}}),FS=n=>typeof n=="string"&&n.toLowerCase()==="svg";function f3(n,t,e,i){const r=E.useMemo(()=>{const s=NS();return _S(s,t,FS(i),n.transformTemplate,n.style),{...s.attrs,style:{...s.style}}},[t]);if(n.style){const s={};IS(s,n.style,n),r.style={...s,...r.style}}return r}const d3=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Tp(n){return typeof n!="string"||n.includes("-")?!1:!!(d3.indexOf(n)>-1||/[A-Z]/u.test(n))}function p3(n,t,e,{latestValues:i},r,s=!1){const a=(Tp(n)?f3:a3)(t,i,r,n),h=QW(t,typeof n=="string",s),f=n!==E.Fragment?{...h,...a,ref:e}:{},{children:c}=t,p=E.useMemo(()=>we(c)?c.get():c,[c]);return E.createElement(n,{...f,children:p})}function Px(n){const t=[{},{}];return n?.values.forEach((e,i)=>{t[0][i]=e.get(),t[1][i]=e.getVelocity()}),t}function Mp(n,t,e,i){if(typeof t=="function"){const[r,s]=Px(i);t=t(e!==void 0?e:n.custom,r,s)}if(typeof t=="string"&&(t=n.variants&&n.variants[t]),typeof t=="function"){const[r,s]=Px(i);t=t(e!==void 0?e:n.custom,r,s)}return t}function Wa(n){return we(n)?n.get():n}function m3({scrapeMotionValuesFromProps:n,createRenderState:t},e,i,r){return{latestValues:g3(e,i,r,n),renderState:t()}}function g3(n,t,e,i){const r={},s=i(n,{});for(const m in s)r[m]=Wa(s[m]);let{initial:o,animate:a}=n;const h=Lh(n),f=OS(n);t&&f&&!h&&n.inherit!==!1&&(o===void 0&&(o=t.initial),a===void 0&&(a=t.animate));let c=e?e.initial===!1:!1;c=c||o===!1;const p=c?a:o;if(p&&typeof p!="boolean"&&!Eh(p)){const m=Array.isArray(p)?p:[p];for(let y=0;y<m.length;y++){const v=Mp(n,m[y]);if(v){const{transitionEnd:S,transition:C,...k}=v;for(const T in k){let P=k[T];if(Array.isArray(P)){const I=c?P.length-1:0;P=P[I]}P!==null&&(r[T]=P)}for(const T in S)r[T]=S[T]}}}return r}const VS=n=>(t,e)=>{const i=E.useContext(Rh),r=E.useContext(tp),s=()=>m3(n,t,i,r);return e?s():XF(s)};function Pp(n,t,e){const{style:i}=n,r={};for(const s in i)(we(i[s])||t.style&&we(t.style[s])||BS(s,n)||e?.getValue(s)?.liveStyle!==void 0)&&(r[s]=i[s]);return r}const y3=VS({scrapeMotionValuesFromProps:Pp,createRenderState:Ap});function WS(n,t,e){const i=Pp(n,t,e);for(const r in n)if(we(n[r])||we(t[r])){const s=Ss.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;i[s]=n[r]}return i}const x3=VS({scrapeMotionValuesFromProps:WS,createRenderState:NS}),v3=Symbol.for("motionComponentSymbol");function Xr(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function b3(n,t,e){return E.useCallback(i=>{i&&n.onMount&&n.onMount(i),t&&(i?t.mount(i):t.unmount()),e&&(typeof e=="function"?e(i):Xr(e)&&(e.current=i))},[t])}const Dp=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),w3="framerAppearId",HS="data-"+Dp(w3),zS=E.createContext({});function S3(n,t,e,i,r){const{visualElement:s}=E.useContext(Rh),o=E.useContext(ES),a=E.useContext(tp),h=E.useContext(RS).reducedMotion,f=E.useRef(null);i=i||o.renderer,!f.current&&i&&(f.current=i(n,{visualState:t,parent:s,props:e,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:h}));const c=f.current,p=E.useContext(zS);c&&!c.projection&&r&&(c.type==="html"||c.type==="svg")&&C3(f.current,e,r,p);const m=E.useRef(!1);E.useInsertionEffect(()=>{c&&m.current&&c.update(e,a)});const y=e[HS],v=E.useRef(!!y&&!window.MotionHandoffIsComplete?.(y)&&window.MotionHasOptimisedAnimation?.(y));return JF(()=>{c&&(m.current=!0,window.MotionIsMounted=!0,c.updateFeatures(),c.scheduleRenderMicrotask(),v.current&&c.animationState&&c.animationState.animateChanges())}),E.useEffect(()=>{c&&(!v.current&&c.animationState&&c.animationState.animateChanges(),v.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(y)}),v.current=!1),c.enteringChildren=void 0)}),c}function C3(n,t,e,i){const{layoutId:r,layout:s,drag:o,dragConstraints:a,layoutScroll:h,layoutRoot:f,layoutCrossfade:c}=t;n.projection=new e(n.latestValues,t["data-framer-portal-id"]?void 0:US(n.parent)),n.projection.setOptions({layoutId:r,layout:s,alwaysMeasureLayout:!!o||a&&Xr(a),visualElement:n,animationType:typeof s=="string"?s:"both",initialPromotionConfig:i,crossfade:c,layoutScroll:h,layoutRoot:f})}function US(n){if(n)return n.options.allowProjection!==!1?n.projection:US(n.parent)}function _c(n,{forwardMotionProps:t=!1}={},e,i){e&&XW(e);const r=Tp(n)?x3:y3;function s(a,h){let f;const c={...E.useContext(RS),...a,layoutId:k3(a)},{isStatic:p}=c,m=e3(a),y=r(a,p);if(!p&&Qd){A3();const v=T3(c);f=v.MeasureLayout,m.visualElement=S3(n,y,c,i,v.ProjectionNode)}return z.jsxs(Rh.Provider,{value:m,children:[f&&m.visualElement?z.jsx(f,{visualElement:m.visualElement,...c}):null,p3(n,a,b3(y,m.visualElement,h),y,p,t)]})}s.displayName=`motion.${typeof n=="string"?n:`create(${n.displayName??n.name??""})`}`;const o=E.forwardRef(s);return o[v3]=n,o}function k3({layoutId:n}){const t=E.useContext(Ww).id;return t&&n!==void 0?t+"-"+n:n}function A3(n,t){E.useContext(ES).strict}function T3(n){const{drag:t,layout:e}=gs;if(!t&&!e)return{};const i={...t,...e};return{MeasureLayout:t?.isEnabled(n)||e?.isEnabled(n)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function M3(n,t){if(typeof Proxy>"u")return _c;const e=new Map,i=(s,o)=>_c(s,o,n,t),r=(s,o)=>i(s,o);return new Proxy(r,{get:(s,o)=>o==="create"?i:(e.has(o)||e.set(o,_c(o,void 0,n,t)),e.get(o))})}function $S({top:n,left:t,right:e,bottom:i}){return{x:{min:t,max:e},y:{min:n,max:i}}}function P3({x:n,y:t}){return{top:t.min,right:n.max,bottom:t.max,left:n.min}}function D3(n,t){if(!t)return n;const e=t({x:n.left,y:n.top}),i=t({x:n.right,y:n.bottom});return{top:e.y,left:e.x,bottom:i.y,right:i.x}}function Nc(n){return n===void 0||n===1}function rd({scale:n,scaleX:t,scaleY:e}){return!Nc(n)||!Nc(t)||!Nc(e)}function ar(n){return rd(n)||jS(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function jS(n){return Dx(n.x)||Dx(n.y)}function Dx(n){return n&&n!=="0%"}function dh(n,t,e){const i=n-e,r=t*i;return e+r}function Rx(n,t,e,i,r){return r!==void 0&&(n=dh(n,r,i)),dh(n,e,i)+t}function sd(n,t=0,e=1,i,r){n.min=Rx(n.min,t,e,i,r),n.max=Rx(n.max,t,e,i,r)}function KS(n,{x:t,y:e}){sd(n.x,t.translate,t.scale,t.originPoint),sd(n.y,e.translate,e.scale,e.originPoint)}const Ex=.999999999999,Lx=1.0000000000001;function R3(n,t,e,i=!1){const r=e.length;if(!r)return;t.x=t.y=1;let s,o;for(let a=0;a<r;a++){s=e[a],o=s.projectionDelta;const{visualElement:h}=s.options;h&&h.props.style&&h.props.style.display==="contents"||(i&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Zr(n,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,KS(n,o)),i&&ar(s.latestValues)&&Zr(n,s.latestValues))}t.x<Lx&&t.x>Ex&&(t.x=1),t.y<Lx&&t.y>Ex&&(t.y=1)}function Jr(n,t){n.min=n.min+t,n.max=n.max+t}function Ox(n,t,e,i,r=.5){const s=Ut(n.min,n.max,r);sd(n,t,e,s,i)}function Zr(n,t){Ox(n.x,t.x,t.scaleX,t.scale,t.originX),Ox(n.y,t.y,t.scaleY,t.scale,t.originY)}function qS(n,t){return $S(D3(n.getBoundingClientRect(),t))}function E3(n,t,e){const i=qS(n,e),{scroll:r}=t;return r&&(Jr(i.x,r.offset.x),Jr(i.y,r.offset.y)),i}const Bx=()=>({translate:0,scale:1,origin:0,originPoint:0}),Qr=()=>({x:Bx(),y:Bx()}),Ix=()=>({min:0,max:0}),Jt=()=>({x:Ix(),y:Ix()}),od={current:null},GS={current:!1};function L3(){if(GS.current=!0,!!Qd)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),t=()=>od.current=n.matches;n.addEventListener("change",t),t()}else od.current=!1}const O3=new WeakMap;function B3(n,t,e){for(const i in t){const r=t[i],s=e[i];if(we(r))n.addValue(i,r);else if(we(s))n.addValue(i,ms(r,{owner:n}));else if(s!==r)if(n.hasValue(i)){const o=n.getValue(i);o.liveStyle===!0?o.jump(r):o.hasAnimated||o.set(r)}else{const o=n.getStaticValue(i);n.addValue(i,ms(o!==void 0?o:r,{owner:n}))}}for(const i in e)t[i]===void 0&&n.removeValue(i);return t}const _x=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class I3{scrapeMotionValuesFromProps(t,e,i){return{}}constructor({parent:t,props:e,presenceContext:i,reducedMotionConfig:r,blockInitialAnimation:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=yp,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=We.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,Ht.render(this.render,!1,!0))};const{latestValues:h,renderState:f}=o;this.latestValues=h,this.baseTarget={...h},this.initialValues=e.initial?{...h}:{},this.renderState=f,this.parent=t,this.props=e,this.presenceContext=i,this.depth=t?t.depth+1:0,this.reducedMotionConfig=r,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=Lh(e),this.isVariantNode=OS(e),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:c,...p}=this.scrapeMotionValuesFromProps(e,{},this);for(const m in p){const y=p[m];h[m]!==void 0&&we(y)&&y.set(h[m])}}mount(t){this.current=t,O3.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,i)=>this.bindToMotionValue(i,e)),GS.current||L3(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:od.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Ui(this.notifyUpdate),Ui(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const e=this.features[t];e&&(e.unmount(),e.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,e){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const i=Cs.has(t);i&&this.onBindTransform&&this.onBindTransform();const r=e.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&Ht.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,t,e)),this.valueSubscriptions.set(t,()=>{r(),s&&s(),e.owner&&e.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in gs){const e=gs[t];if(!e)continue;const{isEnabled:i,Feature:r}=e;if(!this.features[t]&&r&&i(this.props)&&(this.features[t]=new r(this)),this.features[t]){const s=this.features[t];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Jt()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,e){this.latestValues[t]=e}update(t,e){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=e;for(let i=0;i<_x.length;i++){const r=_x[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const s="on"+r,o=t[s];o&&(this.propEventSubscriptions[r]=this.on(r,o))}this.prevMotionValues=B3(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const e=this.getClosestVariantNode();if(e)return e.variantChildren&&e.variantChildren.add(t),()=>e.variantChildren.delete(t)}addValue(t,e){const i=this.values.get(t);e!==i&&(i&&this.removeValue(t),this.bindToMotionValue(t,e),this.values.set(t,e),this.latestValues[t]=e.get())}removeValue(t){this.values.delete(t);const e=this.valueSubscriptions.get(t);e&&(e(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,e){if(this.props.values&&this.props.values[t])return this.props.values[t];let i=this.values.get(t);return i===void 0&&e!==void 0&&(i=ms(e===null?void 0:e,{owner:this}),this.addValue(t,i)),i}readValue(t,e){let i=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return i!=null&&(typeof i=="string"&&(Hw(i)||Uw(i))?i=parseFloat(i):!GW(i)&&$i.test(e)&&(i=kS(t,e)),this.setBaseTarget(t,we(i)?i.get():i)),we(i)?i.get():i}setBaseTarget(t,e){this.baseTarget[t]=e}getBaseTarget(t){const{initial:e}=this.props;let i;if(typeof e=="string"||typeof e=="object"){const s=Mp(this.props,e,this.presenceContext?.custom);s&&(i=s[t])}if(e&&i!==void 0)return i;const r=this.getBaseTargetFromProps(this.props,t);return r!==void 0&&!we(r)?r:this.initialValues[t]!==void 0&&i===void 0?void 0:this.baseTarget[t]}on(t,e){return this.events[t]||(this.events[t]=new sp),this.events[t].add(e)}notify(t,...e){this.events[t]&&this.events[t].notify(...e)}scheduleRenderMicrotask(){bp.render(this.render)}}class YS extends I3{constructor(){super(...arguments),this.KeyframeResolver=IW}sortInstanceNodePosition(t,e){return t.compareDocumentPosition(e)&2?1:-1}getBaseTargetFromProps(t,e){return t.style?t.style[e]:void 0}removeValueFromRenderState(t,{vars:e,style:i}){delete e[t],delete i[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;we(t)&&(this.childSubscription=t.on("change",e=>{this.current&&(this.current.textContent=`${e}`)}))}}function XS(n,{style:t,vars:e},i,r){const s=n.style;let o;for(o in t)s[o]=t[o];r?.applyProjectionStyles(s,i);for(o in e)s.setProperty(o,e[o])}function _3(n){return window.getComputedStyle(n)}class N3 extends YS{constructor(){super(...arguments),this.type="html",this.renderInstance=XS}readValueFromInstance(t,e){if(Cs.has(e))return this.projection?.isProjecting?Jf(e):tW(t,e);{const i=_3(t),r=(ap(e)?i.getPropertyValue(e):i[e])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(t,{transformPagePoint:e}){return qS(t,e)}build(t,e,i){kp(t,e,i.transformTemplate)}scrapeMotionValuesFromProps(t,e,i){return Pp(t,e,i)}}const JS=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function F3(n,t,e,i){XS(n,t,void 0,i);for(const r in t.attrs)n.setAttribute(JS.has(r)?r:Dp(r),t.attrs[r])}class V3 extends YS{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Jt}getBaseTargetFromProps(t,e){return t[e]}readValueFromInstance(t,e){if(Cs.has(e)){const i=CS(e);return i&&i.default||0}return e=JS.has(e)?e:Dp(e),t.getAttribute(e)}scrapeMotionValuesFromProps(t,e,i){return WS(t,e,i)}build(t,e,i){_S(t,e,this.isSVGTag,i.transformTemplate,i.style)}renderInstance(t,e,i,r){F3(t,e,i,r)}mount(t){this.isSVGTag=FS(t.tagName),super.mount(t)}}const W3=(n,t)=>Tp(n)?new V3(t):new N3(t,{allowProjection:n!==E.Fragment});function ss(n,t,e){const i=n.getProps();return Mp(i,t,e!==void 0?e:i.custom,n)}const ld=n=>Array.isArray(n);function H3(n,t,e){n.hasValue(t)?n.getValue(t).set(e):n.addValue(t,ms(e))}function z3(n){return ld(n)?n[n.length-1]||0:n}function U3(n,t){const e=ss(n,t);let{transitionEnd:i={},transition:r={},...s}=e||{};s={...s,...i};for(const o in s){const a=z3(s[o]);H3(n,o,a)}}function $3(n){return!!(we(n)&&n.add)}function ad(n,t){const e=n.getValue("willChange");if($3(e))return e.add(t);if(!e&&yi.WillChange){const i=new yi.WillChange("auto");n.addValue("willChange",i),i.add(t)}}function ZS(n){return n.props[HS]}const j3=n=>n!==null;function K3(n,{repeat:t,repeatType:e="loop"},i){const r=n.filter(j3),s=t&&e!=="loop"&&t%2===1?0:r.length-1;return r[s]}const q3={type:"spring",stiffness:500,damping:25,restSpeed:10},G3=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),Y3={type:"keyframes",duration:.8},X3={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},J3=(n,{keyframes:t})=>t.length>2?Y3:Cs.has(n)?n.startsWith("scale")?G3(t[1]):q3:X3;function Z3({when:n,delay:t,delayChildren:e,staggerChildren:i,staggerDirection:r,repeat:s,repeatType:o,repeatDelay:a,from:h,elapsed:f,...c}){return!!Object.keys(c).length}const Rp=(n,t,e,i={},r,s)=>o=>{const a=xp(i,n)||{},h=a.delay||i.delay||0;let{elapsed:f=0}=i;f=f-jn(h);const c={keyframes:Array.isArray(e)?e:[null,e],ease:"easeOut",velocity:t.getVelocity(),...a,delay:-f,onUpdate:m=>{t.set(m),a.onUpdate&&a.onUpdate(m)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:n,motionValue:t,element:s?void 0:r};Z3(a)||Object.assign(c,J3(n,c)),c.duration&&(c.duration=jn(c.duration)),c.repeatDelay&&(c.repeatDelay=jn(c.repeatDelay)),c.from!==void 0&&(c.keyframes[0]=c.from);let p=!1;if((c.type===!1||c.duration===0&&!c.repeatDelay)&&(nd(c),c.delay===0&&(p=!0)),(yi.instantAnimations||yi.skipAnimations)&&(p=!0,nd(c),c.delay=0),c.allowFlatten=!a.type&&!a.ease,p&&!s&&t.get()!==void 0){const m=K3(c.keyframes,a);if(m!==void 0){Ht.update(()=>{c.onUpdate(m),c.onComplete()});return}}return a.isSync?new gp(c):new CW(c)};function Q3({protectedKeys:n,needsAnimating:t},e){const i=n.hasOwnProperty(e)&&t[e]!==!0;return t[e]=!1,i}function QS(n,t,{delay:e=0,transitionOverride:i,type:r}={}){let{transition:s=n.getDefaultTransition(),transitionEnd:o,...a}=t;i&&(s=i);const h=[],f=r&&n.animationState&&n.animationState.getState()[r];for(const c in a){const p=n.getValue(c,n.latestValues[c]??null),m=a[c];if(m===void 0||f&&Q3(f,c))continue;const y={delay:e,...xp(s||{},c)},v=p.get();if(v!==void 0&&!p.isAnimating&&!Array.isArray(m)&&m===v&&!y.velocity)continue;let S=!1;if(window.MotionHandoffAnimation){const k=ZS(n);if(k){const T=window.MotionHandoffAnimation(k,c,Ht);T!==null&&(y.startTime=T,S=!0)}}ad(n,c),p.start(Rp(c,p,m,n.shouldReduceMotion&&bS.has(c)?{type:!1}:y,n,S));const C=p.animation;C&&h.push(C)}return o&&Promise.all(h).then(()=>{Ht.update(()=>{o&&U3(n,o)})}),h}function tC(n,t,e,i=0,r=1){const s=Array.from(n).sort((f,c)=>f.sortNodePosition(c)).indexOf(t),o=n.size,a=(o-1)*i;return typeof e=="function"?e(s,o):r===1?s*i:a-s*i}function hd(n,t,e={}){const i=ss(n,t,e.type==="exit"?n.presenceContext?.custom:void 0);let{transition:r=n.getDefaultTransition()||{}}=i||{};e.transitionOverride&&(r=e.transitionOverride);const s=i?()=>Promise.all(QS(n,i,e)):()=>Promise.resolve(),o=n.variantChildren&&n.variantChildren.size?(h=0)=>{const{delayChildren:f=0,staggerChildren:c,staggerDirection:p}=r;return tH(n,t,h,f,c,p,e)}:()=>Promise.resolve(),{when:a}=r;if(a){const[h,f]=a==="beforeChildren"?[s,o]:[o,s];return h().then(()=>f())}else return Promise.all([s(),o(e.delay)])}function tH(n,t,e=0,i=0,r=0,s=1,o){const a=[];for(const h of n.variantChildren)h.notify("AnimationStart",t),a.push(hd(h,t,{...o,delay:e+(typeof i=="function"?0:i)+tC(n.variantChildren,h,i,r,s)}).then(()=>h.notify("AnimationComplete",t)));return Promise.all(a)}function eH(n,t,e={}){n.notify("AnimationStart",t);let i;if(Array.isArray(t)){const r=t.map(s=>hd(n,s,e));i=Promise.all(r)}else if(typeof t=="string")i=hd(n,t,e);else{const r=typeof t=="function"?ss(n,t,e.custom):t;i=Promise.all(QS(n,r,e))}return i.then(()=>{n.notify("AnimationComplete",t)})}function eC(n,t){if(!Array.isArray(t))return!1;const e=t.length;if(e!==n.length)return!1;for(let i=0;i<e;i++)if(t[i]!==n[i])return!1;return!0}const nH=Cp.length;function nC(n){if(!n)return;if(!n.isControllingVariants){const e=n.parent?nC(n.parent)||{}:{};return n.props.initial!==void 0&&(e.initial=n.props.initial),e}const t={};for(let e=0;e<nH;e++){const i=Cp[e],r=n.props[i];(zo(r)||r===!1)&&(t[i]=r)}return t}const iH=[...Sp].reverse(),rH=Sp.length;function sH(n){return t=>Promise.all(t.map(({animation:e,options:i})=>eH(n,e,i)))}function oH(n){let t=sH(n),e=Nx(),i=!0;const r=h=>(f,c)=>{const p=ss(n,c,h==="exit"?n.presenceContext?.custom:void 0);if(p){const{transition:m,transitionEnd:y,...v}=p;f={...f,...v,...y}}return f};function s(h){t=h(n)}function o(h){const{props:f}=n,c=nC(n.parent)||{},p=[],m=new Set;let y={},v=1/0;for(let C=0;C<rH;C++){const k=iH[C],T=e[k],P=f[k]!==void 0?f[k]:c[k],I=zo(P),L=k===h?T.isActive:null;L===!1&&(v=C);let _=P===c[k]&&P!==f[k]&&I;if(_&&i&&n.manuallyAnimateOnMount&&(_=!1),T.protectedKeys={...y},!T.isActive&&L===null||!P&&!T.prevProp||Eh(P)||typeof P=="boolean")continue;const F=lH(T.prevProp,P);let $=F||k===h&&T.isActive&&!_&&I||C>v&&I,j=!1;const tt=Array.isArray(P)?P:[P];let et=tt.reduce(r(k),{});L===!1&&(et={});const{prevResolvedValues:Z={}}=T,lt={...Z,...et},at=ht=>{$=!0,m.has(ht)&&(j=!0,m.delete(ht)),T.needsAnimating[ht]=!0;const gt=n.getValue(ht);gt&&(gt.liveStyle=!1)};for(const ht in lt){const gt=et[ht],yt=Z[ht];if(y.hasOwnProperty(ht))continue;let Tt=!1;ld(gt)&&ld(yt)?Tt=!eC(gt,yt):Tt=gt!==yt,Tt?gt!=null?at(ht):m.add(ht):gt!==void 0&&m.has(ht)?at(ht):T.protectedKeys[ht]=!0}T.prevProp=P,T.prevResolvedValues=et,T.isActive&&(y={...y,...et}),i&&n.blockInitialAnimation&&($=!1);const wt=_&&F;$&&(!wt||j)&&p.push(...tt.map(ht=>{const gt={type:k};if(typeof ht=="string"&&i&&!wt&&n.manuallyAnimateOnMount&&n.parent){const{parent:yt}=n,Tt=ss(yt,ht);if(yt.enteringChildren&&Tt){const{delayChildren:Pt}=Tt.transition||{};gt.delay=tC(yt.enteringChildren,n,Pt)}}return{animation:ht,options:gt}}))}if(m.size){const C={};if(typeof f.initial!="boolean"){const k=ss(n,Array.isArray(f.initial)?f.initial[0]:f.initial);k&&k.transition&&(C.transition=k.transition)}m.forEach(k=>{const T=n.getBaseTarget(k),P=n.getValue(k);P&&(P.liveStyle=!0),C[k]=T??null}),p.push({animation:C})}let S=!!p.length;return i&&(f.initial===!1||f.initial===f.animate)&&!n.manuallyAnimateOnMount&&(S=!1),i=!1,S?t(p):Promise.resolve()}function a(h,f){if(e[h].isActive===f)return Promise.resolve();n.variantChildren?.forEach(p=>p.animationState?.setActive(h,f)),e[h].isActive=f;const c=o(h);for(const p in e)e[p].protectedKeys={};return c}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>e,reset:()=>{e=Nx()}}}function lH(n,t){return typeof t=="string"?t!==n:Array.isArray(t)?!eC(t,n):!1}function rr(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Nx(){return{animate:rr(!0),whileInView:rr(),whileHover:rr(),whileTap:rr(),whileDrag:rr(),whileFocus:rr(),exit:rr()}}class qi{constructor(t){this.isMounted=!1,this.node=t}update(){}}class aH extends qi{constructor(t){super(t),t.animationState||(t.animationState=oH(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Eh(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:e}=this.node.prevProps||{};t!==e&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let hH=0;class uH extends qi{constructor(){super(...arguments),this.id=hH++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:e}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===i)return;const r=this.node.animationState.setActive("exit",!t);e&&!t&&r.then(()=>{e(this.id)})}mount(){const{register:t,onExitComplete:e}=this.node.presenceContext||{};e&&e(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const cH={animation:{Feature:aH},exit:{Feature:uH}};function $o(n,t,e,i={passive:!0}){return n.addEventListener(t,e,i),()=>n.removeEventListener(t,e)}function sl(n){return{point:{x:n.pageX,y:n.pageY}}}const fH=n=>t=>wp(t)&&n(t,sl(t));function yo(n,t,e,i){return $o(n,t,fH(e),i)}const iC=1e-4,dH=1-iC,pH=1+iC,rC=.01,mH=0-rC,gH=0+rC;function De(n){return n.max-n.min}function yH(n,t,e){return Math.abs(n-t)<=e}function Fx(n,t,e,i=.5){n.origin=i,n.originPoint=Ut(t.min,t.max,n.origin),n.scale=De(e)/De(t),n.translate=Ut(e.min,e.max,n.origin)-n.originPoint,(n.scale>=dH&&n.scale<=pH||isNaN(n.scale))&&(n.scale=1),(n.translate>=mH&&n.translate<=gH||isNaN(n.translate))&&(n.translate=0)}function xo(n,t,e,i){Fx(n.x,t.x,e.x,i?i.originX:void 0),Fx(n.y,t.y,e.y,i?i.originY:void 0)}function Vx(n,t,e){n.min=e.min+t.min,n.max=n.min+De(t)}function xH(n,t,e){Vx(n.x,t.x,e.x),Vx(n.y,t.y,e.y)}function Wx(n,t,e){n.min=t.min-e.min,n.max=n.min+De(t)}function vo(n,t,e){Wx(n.x,t.x,e.x),Wx(n.y,t.y,e.y)}function hn(n){return[n("x"),n("y")]}const sC=({current:n})=>n?n.ownerDocument.defaultView:null,Hx=(n,t)=>Math.abs(n-t);function vH(n,t){const e=Hx(n.x,t.x),i=Hx(n.y,t.y);return Math.sqrt(e**2+i**2)}class oC{constructor(t,e,{transformPagePoint:i,contextWindow:r=window,dragSnapToOrigin:s=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=Vc(this.lastMoveEventInfo,this.history),y=this.startEvent!==null,v=vH(m.offset,{x:0,y:0})>=this.distanceThreshold;if(!y&&!v)return;const{point:S}=m,{timestamp:C}=ce;this.history.push({...S,timestamp:C});const{onStart:k,onMove:T}=this.handlers;y||(k&&k(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),T&&T(this.lastMoveEvent,m)},this.handlePointerMove=(m,y)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=Fc(y,this.transformPagePoint),Ht.update(this.updatePoint,!0)},this.handlePointerUp=(m,y)=>{this.end();const{onEnd:v,onSessionEnd:S,resumeAnimation:C}=this.handlers;if(this.dragSnapToOrigin&&C&&C(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const k=Vc(m.type==="pointercancel"?this.lastMoveEventInfo:Fc(y,this.transformPagePoint),this.history);this.startEvent&&v&&v(m,k),S&&S(m,k)},!wp(t))return;this.dragSnapToOrigin=s,this.handlers=e,this.transformPagePoint=i,this.distanceThreshold=o,this.contextWindow=r||window;const a=sl(t),h=Fc(a,this.transformPagePoint),{point:f}=h,{timestamp:c}=ce;this.history=[{...f,timestamp:c}];const{onSessionStart:p}=e;p&&p(t,Vc(h,this.history)),this.removeListeners=nl(yo(this.contextWindow,"pointermove",this.handlePointerMove),yo(this.contextWindow,"pointerup",this.handlePointerUp),yo(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Ui(this.updatePoint)}}function Fc(n,t){return t?{point:t(n.point)}:n}function zx(n,t){return{x:n.x-t.x,y:n.y-t.y}}function Vc({point:n},t){return{point:n,delta:zx(n,lC(t)),offset:zx(n,bH(t)),velocity:wH(t,.1)}}function bH(n){return n[0]}function lC(n){return n[n.length-1]}function wH(n,t){if(n.length<2)return{x:0,y:0};let e=n.length-1,i=null;const r=lC(n);for(;e>=0&&(i=n[e],!(r.timestamp-i.timestamp>jn(t)));)e--;if(!i)return{x:0,y:0};const s=dn(r.timestamp-i.timestamp);if(s===0)return{x:0,y:0};const o={x:(r.x-i.x)/s,y:(r.y-i.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function SH(n,{min:t,max:e},i){return t!==void 0&&n<t?n=i?Ut(t,n,i.min):Math.max(n,t):e!==void 0&&n>e&&(n=i?Ut(e,n,i.max):Math.min(n,e)),n}function Ux(n,t,e){return{min:t!==void 0?n.min+t:void 0,max:e!==void 0?n.max+e-(n.max-n.min):void 0}}function CH(n,{top:t,left:e,bottom:i,right:r}){return{x:Ux(n.x,e,r),y:Ux(n.y,t,i)}}function $x(n,t){let e=t.min-n.min,i=t.max-n.max;return t.max-t.min<n.max-n.min&&([e,i]=[i,e]),{min:e,max:i}}function kH(n,t){return{x:$x(n.x,t.x),y:$x(n.y,t.y)}}function AH(n,t){let e=.5;const i=De(n),r=De(t);return r>i?e=Vo(t.min,t.max-i,n.min):i>r&&(e=Vo(n.min,n.max-r,t.min)),gi(0,1,e)}function TH(n,t){const e={};return t.min!==void 0&&(e.min=t.min-n.min),t.max!==void 0&&(e.max=t.max-n.min),e}const ud=.35;function MH(n=ud){return n===!1?n=0:n===!0&&(n=ud),{x:jx(n,"left","right"),y:jx(n,"top","bottom")}}function jx(n,t,e){return{min:Kx(n,t),max:Kx(n,e)}}function Kx(n,t){return typeof n=="number"?n:n[t]||0}const PH=new WeakMap;class DH{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Jt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:e=!1,distanceThreshold:i}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=p=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),e&&this.snapToCursor(sl(p).point)},o=(p,m)=>{const{drag:y,dragPropagation:v,onDragStart:S}=this.getProps();if(y&&!v&&(this.openDragLock&&this.openDragLock(),this.openDragLock=WW(y),!this.openDragLock))return;this.latestPointerEvent=p,this.latestPanInfo=m,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),hn(k=>{let T=this.getAxisMotionValue(k).get()||0;if(Kn.test(T)){const{projection:P}=this.visualElement;if(P&&P.layout){const I=P.layout.layoutBox[k];I&&(T=De(I)*(parseFloat(T)/100))}}this.originPoint[k]=T}),S&&Ht.postRender(()=>S(p,m)),ad(this.visualElement,"transform");const{animationState:C}=this.visualElement;C&&C.setActive("whileDrag",!0)},a=(p,m)=>{this.latestPointerEvent=p,this.latestPanInfo=m;const{dragPropagation:y,dragDirectionLock:v,onDirectionLock:S,onDrag:C}=this.getProps();if(!y&&!this.openDragLock)return;const{offset:k}=m;if(v&&this.currentDirection===null){this.currentDirection=RH(k),this.currentDirection!==null&&S&&S(this.currentDirection);return}this.updateAxis("x",m.point,k),this.updateAxis("y",m.point,k),this.visualElement.render(),C&&C(p,m)},h=(p,m)=>{this.latestPointerEvent=p,this.latestPanInfo=m,this.stop(p,m),this.latestPointerEvent=null,this.latestPanInfo=null},f=()=>hn(p=>this.getAnimationState(p)==="paused"&&this.getAxisMotionValue(p).animation?.play()),{dragSnapToOrigin:c}=this.getProps();this.panSession=new oC(t,{onSessionStart:s,onStart:o,onMove:a,onSessionEnd:h,resumeAnimation:f},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,distanceThreshold:i,contextWindow:sC(this.visualElement)})}stop(t,e){const i=t||this.latestPointerEvent,r=e||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!r||!i)return;const{velocity:o}=r;this.startAnimation(o);const{onDragEnd:a}=this.getProps();a&&Ht.postRender(()=>a(i,r))}cancel(){this.isDragging=!1;const{projection:t,animationState:e}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),e&&e.setActive("whileDrag",!1)}updateAxis(t,e,i){const{drag:r}=this.getProps();if(!i||!Aa(t,r,this.currentDirection))return;const s=this.getAxisMotionValue(t);let o=this.originPoint[t]+i[t];this.constraints&&this.constraints[t]&&(o=SH(o,this.constraints[t],this.elastic[t])),s.set(o)}resolveConstraints(){const{dragConstraints:t,dragElastic:e}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,r=this.constraints;t&&Xr(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&i?this.constraints=CH(i.layoutBox,t):this.constraints=!1,this.elastic=MH(e),r!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&hn(s=>{this.constraints!==!1&&this.getAxisMotionValue(s)&&(this.constraints[s]=TH(i.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:e}=this.getProps();if(!t||!Xr(t))return!1;const i=t.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const s=E3(i,r.root,this.visualElement.getTransformPagePoint());let o=kH(r.layout.layoutBox,s);if(e){const a=e(P3(o));this.hasMutatedConstraints=!!a,a&&(o=$S(a))}return o}startAnimation(t){const{drag:e,dragMomentum:i,dragElastic:r,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),h=this.constraints||{},f=hn(c=>{if(!Aa(c,e,this.currentDirection))return;let p=h&&h[c]||{};o&&(p={min:0,max:0});const m=r?200:1e6,y=r?40:1e7,v={type:"inertia",velocity:i?t[c]:0,bounceStiffness:m,bounceDamping:y,timeConstant:750,restDelta:1,restSpeed:10,...s,...p};return this.startAxisValueAnimation(c,v)});return Promise.all(f).then(a)}startAxisValueAnimation(t,e){const i=this.getAxisMotionValue(t);return ad(this.visualElement,t),i.start(Rp(t,i,0,e,this.visualElement,!1))}stopAnimation(){hn(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){hn(t=>this.getAxisMotionValue(t).animation?.pause())}getAnimationState(t){return this.getAxisMotionValue(t).animation?.state}getAxisMotionValue(t){const e=`_drag${t.toUpperCase()}`,i=this.visualElement.getProps(),r=i[e];return r||this.visualElement.getValue(t,(i.initial?i.initial[t]:void 0)||0)}snapToCursor(t){hn(e=>{const{drag:i}=this.getProps();if(!Aa(e,i,this.currentDirection))return;const{projection:r}=this.visualElement,s=this.getAxisMotionValue(e);if(r&&r.layout){const{min:o,max:a}=r.layout.layoutBox[e];s.set(t[e]-Ut(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:e}=this.getProps(),{projection:i}=this.visualElement;if(!Xr(e)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};hn(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const h=a.get();r[o]=AH({min:h,max:h},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),hn(o=>{if(!Aa(o,t,null))return;const a=this.getAxisMotionValue(o),{min:h,max:f}=this.constraints[o];a.set(Ut(h,f,r[o]))})}addListeners(){if(!this.visualElement.current)return;PH.set(this.visualElement,this);const t=this.visualElement.current,e=yo(t,"pointerdown",h=>{const{drag:f,dragListener:c=!0}=this.getProps();f&&c&&this.start(h)}),i=()=>{const{dragConstraints:h}=this.getProps();Xr(h)&&h.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,s=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),Ht.read(i);const o=$o(window,"resize",()=>this.scalePositionWithinConstraints()),a=r.addEventListener("didUpdate",(({delta:h,hasLayoutChanged:f})=>{this.isDragging&&f&&(hn(c=>{const p=this.getAxisMotionValue(c);p&&(this.originPoint[c]+=h[c].translate,p.set(p.get()+h[c].translate))}),this.visualElement.render())}));return()=>{o(),e(),s(),a&&a()}}getProps(){const t=this.visualElement.getProps(),{drag:e=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:s=!1,dragElastic:o=ud,dragMomentum:a=!0}=t;return{...t,drag:e,dragDirectionLock:i,dragPropagation:r,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function Aa(n,t,e){return(t===!0||t===n)&&(e===null||e===n)}function RH(n,t=10){let e=null;return Math.abs(n.y)>t?e="y":Math.abs(n.x)>t&&(e="x"),e}class EH extends qi{constructor(t){super(t),this.removeGroupControls=gn,this.removeListeners=gn,this.controls=new DH(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||gn}unmount(){this.removeGroupControls(),this.removeListeners()}}const qx=n=>(t,e)=>{n&&Ht.postRender(()=>n(t,e))};class LH extends qi{constructor(){super(...arguments),this.removePointerDownListener=gn}onPointerDown(t){this.session=new oC(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:sC(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:e,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:qx(t),onStart:qx(e),onMove:i,onEnd:(s,o)=>{delete this.session,r&&Ht.postRender(()=>r(s,o))}}}mount(){this.removePointerDownListener=yo(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Ha={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Gx(n,t){return t.max===t.min?0:n/(t.max-t.min)*100}const Qs={correct:(n,t)=>{if(!t.target)return n;if(typeof n=="string")if(ot.test(n))n=parseFloat(n);else return n;const e=Gx(n,t.target.x),i=Gx(n,t.target.y);return`${e}% ${i}%`}},OH={correct:(n,{treeScale:t,projectionDelta:e})=>{const i=n,r=$i.parse(n);if(r.length>5)return i;const s=$i.createTransformer(n),o=typeof r[0]!="number"?1:0,a=e.x.scale*t.x,h=e.y.scale*t.y;r[0+o]/=a,r[1+o]/=h;const f=Ut(a,h,.5);return typeof r[2+o]=="number"&&(r[2+o]/=f),typeof r[3+o]=="number"&&(r[3+o]/=f),s(r)}};let Wc=!1;class BH extends E.Component{componentDidMount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:i,layoutId:r}=this.props,{projection:s}=t;n3(IH),s&&(e.group&&e.group.add(s),i&&i.register&&r&&i.register(s),Wc&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),Ha.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:e,visualElement:i,drag:r,isPresent:s}=this.props,{projection:o}=i;return o&&(o.isPresent=s,Wc=!0,r||t.layoutDependency!==e||e===void 0||t.isPresent!==s?o.willUpdate():this.safeToRemove(),t.isPresent!==s&&(s?o.promote():o.relegate()||Ht.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),bp.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:i}=this.props,{projection:r}=t;Wc=!0,r&&(r.scheduleCheckAfterUnmount(),e&&e.group&&e.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function aC(n){const[t,e]=YW(),i=E.useContext(Ww);return z.jsx(BH,{...n,layoutGroup:i,switchLayoutGroup:E.useContext(zS),isPresent:t,safeToRemove:e})}const IH={borderRadius:{...Qs,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Qs,borderTopRightRadius:Qs,borderBottomLeftRadius:Qs,borderBottomRightRadius:Qs,boxShadow:OH};function _H(n,t,e){const i=we(n)?n:ms(n);return i.start(Rp("",i,t,e)),i.animation}const NH=(n,t)=>n.depth-t.depth;class FH{constructor(){this.children=[],this.isDirty=!1}add(t){ep(this.children,t),this.isDirty=!0}remove(t){np(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(NH),this.isDirty=!1,this.children.forEach(t)}}function VH(n,t){const e=We.now(),i=({timestamp:r})=>{const s=r-e;s>=t&&(Ui(i),n(s-t))};return Ht.setup(i,!0),()=>Ui(i)}const hC=["TopLeft","TopRight","BottomLeft","BottomRight"],WH=hC.length,Yx=n=>typeof n=="string"?parseFloat(n):n,Xx=n=>typeof n=="number"||ot.test(n);function HH(n,t,e,i,r,s){r?(n.opacity=Ut(0,e.opacity??1,zH(i)),n.opacityExit=Ut(t.opacity??1,0,UH(i))):s&&(n.opacity=Ut(t.opacity??1,e.opacity??1,i));for(let o=0;o<WH;o++){const a=`border${hC[o]}Radius`;let h=Jx(t,a),f=Jx(e,a);if(h===void 0&&f===void 0)continue;h||(h=0),f||(f=0),h===0||f===0||Xx(h)===Xx(f)?(n[a]=Math.max(Ut(Yx(h),Yx(f),i),0),(Kn.test(f)||Kn.test(h))&&(n[a]+="%")):n[a]=f}(t.rotate||e.rotate)&&(n.rotate=Ut(t.rotate||0,e.rotate||0,i))}function Jx(n,t){return n[t]!==void 0?n[t]:n.borderRadius}const zH=uC(0,.5,Jw),UH=uC(.5,.95,gn);function uC(n,t,e){return i=>i<n?0:i>t?1:e(Vo(n,t,i))}function Zx(n,t){n.min=t.min,n.max=t.max}function an(n,t){Zx(n.x,t.x),Zx(n.y,t.y)}function Qx(n,t){n.translate=t.translate,n.scale=t.scale,n.originPoint=t.originPoint,n.origin=t.origin}function tv(n,t,e,i,r){return n-=t,n=dh(n,1/e,i),r!==void 0&&(n=dh(n,1/r,i)),n}function $H(n,t=0,e=1,i=.5,r,s=n,o=n){if(Kn.test(t)&&(t=parseFloat(t),t=Ut(o.min,o.max,t/100)-o.min),typeof t!="number")return;let a=Ut(s.min,s.max,i);n===s&&(a-=t),n.min=tv(n.min,t,e,a,r),n.max=tv(n.max,t,e,a,r)}function ev(n,t,[e,i,r],s,o){$H(n,t[e],t[i],t[r],t.scale,s,o)}const jH=["x","scaleX","originX"],KH=["y","scaleY","originY"];function nv(n,t,e,i){ev(n.x,t,jH,e?e.x:void 0,i?i.x:void 0),ev(n.y,t,KH,e?e.y:void 0,i?i.y:void 0)}function iv(n){return n.translate===0&&n.scale===1}function cC(n){return iv(n.x)&&iv(n.y)}function rv(n,t){return n.min===t.min&&n.max===t.max}function qH(n,t){return rv(n.x,t.x)&&rv(n.y,t.y)}function sv(n,t){return Math.round(n.min)===Math.round(t.min)&&Math.round(n.max)===Math.round(t.max)}function fC(n,t){return sv(n.x,t.x)&&sv(n.y,t.y)}function ov(n){return De(n.x)/De(n.y)}function lv(n,t){return n.translate===t.translate&&n.scale===t.scale&&n.originPoint===t.originPoint}class GH{constructor(){this.members=[]}add(t){ep(this.members,t),t.scheduleRender()}remove(t){if(np(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(t){const e=this.members.findIndex(r=>t===r);if(e===0)return!1;let i;for(let r=e;r>=0;r--){const s=this.members[r];if(s.isPresent!==!1){i=s;break}}return i?(this.promote(i),!0):!1}promote(t,e){const i=this.lead;if(t!==i&&(this.prevLead=i,this.lead=t,t.show(),i)){i.instance&&i.scheduleRender(),t.scheduleRender(),t.resumeFrom=i,e&&(t.resumeFrom.preserveOpacity=!0),i.snapshot&&(t.snapshot=i.snapshot,t.snapshot.latestValues=i.animationValues||i.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:r}=t.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:e,resumingFrom:i}=t;e.onExitComplete&&e.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function YH(n,t,e){let i="";const r=n.x.translate/t.x,s=n.y.translate/t.y,o=e?.z||0;if((r||s||o)&&(i=`translate3d(${r}px, ${s}px, ${o}px) `),(t.x!==1||t.y!==1)&&(i+=`scale(${1/t.x}, ${1/t.y}) `),e){const{transformPerspective:f,rotate:c,rotateX:p,rotateY:m,skewX:y,skewY:v}=e;f&&(i=`perspective(${f}px) ${i}`),c&&(i+=`rotate(${c}deg) `),p&&(i+=`rotateX(${p}deg) `),m&&(i+=`rotateY(${m}deg) `),y&&(i+=`skewX(${y}deg) `),v&&(i+=`skewY(${v}deg) `)}const a=n.x.scale*t.x,h=n.y.scale*t.y;return(a!==1||h!==1)&&(i+=`scale(${a}, ${h})`),i||"none"}const Hc=["","X","Y","Z"],XH=1e3;let JH=0;function zc(n,t,e,i){const{latestValues:r}=t;r[n]&&(e[n]=r[n],t.setStaticValue(n,0),i&&(i[n]=0))}function dC(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:t}=n.options;if(!t)return;const e=ZS(t);if(window.MotionHasOptimisedAnimation(e,"transform")){const{layout:r,layoutId:s}=n.options;window.MotionCancelOptimisedAnimation(e,"transform",Ht,!(r||s))}const{parent:i}=n;i&&!i.hasCheckedOptimisedAppear&&dC(i)}function pC({attachResizeListener:n,defaultParent:t,measureScroll:e,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(o={},a=t?.()){this.id=JH++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(t5),this.nodes.forEach(r5),this.nodes.forEach(s5),this.nodes.forEach(e5)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let h=0;h<this.path.length;h++)this.path[h].shouldResetTransform=!0;this.root===this&&(this.nodes=new FH)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new sp),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const h=this.eventHandlers.get(o);h&&h.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=DS(o)&&!KW(o),this.instance=o;const{layoutId:a,layout:h,visualElement:f}=this.options;if(f&&!f.current&&f.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(h||a)&&(this.isLayoutDirty=!0),n){let c,p=0;const m=()=>this.root.updateBlockedByResize=!1;Ht.read(()=>{p=window.innerWidth}),n(o,()=>{const y=window.innerWidth;y!==p&&(p=y,this.root.updateBlockedByResize=!0,c&&c(),c=VH(m,250),Ha.hasAnimatedSinceResize&&(Ha.hasAnimatedSinceResize=!1,this.nodes.forEach(uv)))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&f&&(a||h)&&this.addEventListener("didUpdate",({delta:c,hasLayoutChanged:p,hasRelativeLayoutChanged:m,layout:y})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const v=this.options.transition||f.getDefaultTransition()||u5,{onLayoutAnimationStart:S,onLayoutAnimationComplete:C}=f.getProps(),k=!this.targetLayout||!fC(this.targetLayout,y),T=!p&&m;if(this.options.layoutRoot||this.resumeFrom||T||p&&(k||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const P={...xp(v,"layout"),onPlay:S,onComplete:C};(f.shouldReduceMotion||this.options.layoutRoot)&&(P.delay=0,P.type=!1),this.startAnimation(P),this.setAnimationOrigin(c,T)}else p||uv(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=y})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Ui(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(o5),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&dC(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let c=0;c<this.path.length;c++){const p=this.path[c];p.shouldResetTransform=!0,p.updateScroll("snapshot"),p.options.layoutRoot&&p.willUpdate(!1)}const{layoutId:a,layout:h}=this.options;if(a===void 0&&!h)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(av);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(hv);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(i5),this.nodes.forEach(ZH),this.nodes.forEach(QH)):this.nodes.forEach(hv),this.clearAllSnapshots();const a=We.now();ce.delta=gi(0,1e3/60,a-ce.timestamp),ce.timestamp=a,ce.isProcessing=!0,Rc.update.process(ce),Rc.preRender.process(ce),Rc.render.process(ce),ce.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,bp.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(n5),this.sharedNodes.forEach(l5)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ht.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ht.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!De(this.snapshot.measuredBox.x)&&!De(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let h=0;h<this.path.length;h++)this.path[h].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Jt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&this.instance){const h=i(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:h,offset:e(this.instance),wasRoot:this.scroll?this.scroll.isRoot:h}}}resetTransform(){if(!r)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!cC(this.projectionDelta),h=this.getTransformTemplate(),f=h?h(this.latestValues,""):void 0,c=f!==this.prevTransformTemplateValue;o&&this.instance&&(a||ar(this.latestValues)||c)&&(r(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let h=this.removeElementScroll(a);return o&&(h=this.removeTransform(h)),c5(h),{animationId:this.root.animationId,measuredBox:a,layoutBox:h,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return Jt();const a=o.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(f5))){const{scroll:f}=this.root;f&&(Jr(a.x,f.offset.x),Jr(a.y,f.offset.y))}return a}removeElementScroll(o){const a=Jt();if(an(a,o),this.scroll?.wasRoot)return a;for(let h=0;h<this.path.length;h++){const f=this.path[h],{scroll:c,options:p}=f;f!==this.root&&c&&p.layoutScroll&&(c.wasRoot&&an(a,o),Jr(a.x,c.offset.x),Jr(a.y,c.offset.y))}return a}applyTransform(o,a=!1){const h=Jt();an(h,o);for(let f=0;f<this.path.length;f++){const c=this.path[f];!a&&c.options.layoutScroll&&c.scroll&&c!==c.root&&Zr(h,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),ar(c.latestValues)&&Zr(h,c.latestValues)}return ar(this.latestValues)&&Zr(h,this.latestValues),h}removeTransform(o){const a=Jt();an(a,o);for(let h=0;h<this.path.length;h++){const f=this.path[h];if(!f.instance||!ar(f.latestValues))continue;rd(f.latestValues)&&f.updateSnapshot();const c=Jt(),p=f.measurePageBox();an(c,p),nv(a,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,c)}return ar(this.latestValues)&&nv(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ce.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const h=!!this.resumingFrom||this!==a;if(!(o||h&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:c,layoutId:p}=this.options;if(!(!this.layout||!(c||p))){if(this.resolvedRelativeTargetAt=ce.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Jt(),this.relativeTargetOrigin=Jt(),vo(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),an(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Jt(),this.targetWithTransforms=Jt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),xH(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):an(this.target,this.layout.layoutBox),KS(this.target,this.targetDelta)):an(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Jt(),this.relativeTargetOrigin=Jt(),vo(this.relativeTargetOrigin,this.target,m.target),an(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||rd(this.parent.latestValues)||jS(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const o=this.getLead(),a=!!this.resumingFrom||this!==o;let h=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(h=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(h=!1),this.resolvedRelativeTargetAt===ce.timestamp&&(h=!1),h)return;const{layout:f,layoutId:c}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||c))return;an(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,m=this.treeScale.y;R3(this.layoutCorrected,this.treeScale,this.path,a),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=Jt());const{target:y}=o;if(!y){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Qx(this.prevProjectionDelta.x,this.projectionDelta.x),Qx(this.prevProjectionDelta.y,this.projectionDelta.y)),xo(this.projectionDelta,this.layoutCorrected,y,this.latestValues),(this.treeScale.x!==p||this.treeScale.y!==m||!lv(this.projectionDelta.x,this.prevProjectionDelta.x)||!lv(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",y))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.visualElement?.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Qr(),this.projectionDelta=Qr(),this.projectionDeltaWithTransform=Qr()}setAnimationOrigin(o,a=!1){const h=this.snapshot,f=h?h.latestValues:{},c={...this.latestValues},p=Qr();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const m=Jt(),y=h?h.source:void 0,v=this.layout?this.layout.source:void 0,S=y!==v,C=this.getStack(),k=!C||C.members.length<=1,T=!!(S&&!k&&this.options.crossfade===!0&&!this.path.some(h5));this.animationProgress=0;let P;this.mixTargetDelta=I=>{const L=I/1e3;cv(p.x,o.x,L),cv(p.y,o.y,L),this.setTargetDelta(p),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(vo(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),a5(this.relativeTarget,this.relativeTargetOrigin,m,L),P&&qH(this.relativeTarget,P)&&(this.isProjectionDirty=!1),P||(P=Jt()),an(P,this.relativeTarget)),S&&(this.animationValues=c,HH(c,f,this.latestValues,L,T,k)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=L},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Ui(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ht.update(()=>{Ha.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=ms(0)),this.currentAnimation=_H(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(XH),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:h,layout:f,latestValues:c}=o;if(!(!a||!h||!f)){if(this!==o&&this.layout&&f&&mC(this.options.animationType,this.layout.layoutBox,f.layoutBox)){h=this.target||Jt();const p=De(this.layout.layoutBox.x);h.x.min=o.target.x.min,h.x.max=h.x.min+p;const m=De(this.layout.layoutBox.y);h.y.min=o.target.y.min,h.y.max=h.y.min+m}an(a,h),Zr(a,c),xo(this.projectionDeltaWithTransform,this.layoutCorrected,a,c)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new GH),this.sharedNodes.get(o).add(a);const f=a.options.initialPromotionConfig;a.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){const{layoutId:o}=this.options;return o?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:o}=this.options;return o?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:h}={}){const f=this.getStack();f&&f.promote(this,h),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:h}=o;if((h.z||h.rotate||h.rotateX||h.rotateY||h.rotateZ||h.skewX||h.skewY)&&(a=!0),!a)return;const f={};h.z&&zc("z",o,f,this.animationValues);for(let c=0;c<Hc.length;c++)zc(`rotate${Hc[c]}`,o,f,this.animationValues),zc(`skew${Hc[c]}`,o,f,this.animationValues);o.render();for(const c in f)o.setStaticValue(c,f[c]),this.animationValues&&(this.animationValues[c]=f[c]);o.scheduleRender()}applyProjectionStyles(o,a){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const h=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=Wa(a?.pointerEvents)||"",o.transform=h?h(this.latestValues,""):"none";return}const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=Wa(a?.pointerEvents)||""),this.hasProjected&&!ar(this.latestValues)&&(o.transform=h?h({},""):"none",this.hasProjected=!1);return}o.visibility="";const c=f.animationValues||f.latestValues;this.applyTransformsToTarget();let p=YH(this.projectionDeltaWithTransform,this.treeScale,c);h&&(p=h(c,p)),o.transform=p;const{x:m,y}=this.projectionDelta;o.transformOrigin=`${m.origin*100}% ${y.origin*100}% 0`,f.animationValues?o.opacity=f===this?c.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:c.opacityExit:o.opacity=f===this?c.opacity!==void 0?c.opacity:"":c.opacityExit!==void 0?c.opacityExit:0;for(const v in Uo){if(c[v]===void 0)continue;const{correct:S,applyTo:C,isCSSVariable:k}=Uo[v],T=p==="none"?c[v]:S(c[v],f);if(C){const P=C.length;for(let I=0;I<P;I++)o[C[I]]=T}else k?this.options.visualElement.renderState.vars[v]=T:o[v]=T}this.options.layoutId&&(o.pointerEvents=f===this?Wa(a?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>o.currentAnimation?.stop()),this.root.nodes.forEach(av),this.root.sharedNodes.clear()}}}function ZH(n){n.updateLayout()}function QH(n){const t=n.resumeFrom?.snapshot||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:e,measuredBox:i}=n.layout,{animationType:r}=n.options,s=t.source!==n.layout.source;r==="size"?hn(c=>{const p=s?t.measuredBox[c]:t.layoutBox[c],m=De(p);p.min=e[c].min,p.max=p.min+m}):mC(r,t.layoutBox,e)&&hn(c=>{const p=s?t.measuredBox[c]:t.layoutBox[c],m=De(e[c]);p.max=p.min+m,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[c].max=n.relativeTarget[c].min+m)});const o=Qr();xo(o,e,t.layoutBox);const a=Qr();s?xo(a,n.applyTransform(i,!0),t.measuredBox):xo(a,e,t.layoutBox);const h=!cC(o);let f=!1;if(!n.resumeFrom){const c=n.getClosestProjectingParent();if(c&&!c.resumeFrom){const{snapshot:p,layout:m}=c;if(p&&m){const y=Jt();vo(y,t.layoutBox,p.layoutBox);const v=Jt();vo(v,e,m.layoutBox),fC(y,v)||(f=!0),c.options.layoutRoot&&(n.relativeTarget=v,n.relativeTargetOrigin=y,n.relativeParent=c)}}}n.notifyListeners("didUpdate",{layout:e,snapshot:t,delta:a,layoutDelta:o,hasLayoutChanged:h,hasRelativeLayoutChanged:f})}else if(n.isLead()){const{onExitComplete:e}=n.options;e&&e()}n.options.transition=void 0}function t5(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function e5(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function n5(n){n.clearSnapshot()}function av(n){n.clearMeasurements()}function hv(n){n.isLayoutDirty=!1}function i5(n){const{visualElement:t}=n.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),n.resetTransform()}function uv(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function r5(n){n.resolveTargetDelta()}function s5(n){n.calcProjection()}function o5(n){n.resetSkewAndRotation()}function l5(n){n.removeLeadSnapshot()}function cv(n,t,e){n.translate=Ut(t.translate,0,e),n.scale=Ut(t.scale,1,e),n.origin=t.origin,n.originPoint=t.originPoint}function fv(n,t,e,i){n.min=Ut(t.min,e.min,i),n.max=Ut(t.max,e.max,i)}function a5(n,t,e,i){fv(n.x,t.x,e.x,i),fv(n.y,t.y,e.y,i)}function h5(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const u5={duration:.45,ease:[.4,0,.1,1]},dv=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),pv=dv("applewebkit/")&&!dv("chrome/")?Math.round:gn;function mv(n){n.min=pv(n.min),n.max=pv(n.max)}function c5(n){mv(n.x),mv(n.y)}function mC(n,t,e){return n==="position"||n==="preserve-aspect"&&!yH(ov(t),ov(e),.2)}function f5(n){return n!==n.root&&n.scroll?.wasRoot}const d5=pC({attachResizeListener:(n,t)=>$o(n,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Uc={current:void 0},gC=pC({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!Uc.current){const n=new d5({});n.mount(window),n.setOptions({layoutScroll:!0}),Uc.current=n}return Uc.current},resetTransform:(n,t)=>{n.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),p5={pan:{Feature:LH},drag:{Feature:EH,ProjectionNode:gC,MeasureLayout:aC}};function gv(n,t,e){const{props:i}=n;n.animationState&&i.whileHover&&n.animationState.setActive("whileHover",e==="Start");const r="onHover"+e,s=i[r];s&&Ht.postRender(()=>s(t,sl(t)))}class m5 extends qi{mount(){const{current:t}=this.node;t&&(this.unmount=HW(t,(e,i)=>(gv(this.node,i,"Start"),r=>gv(this.node,r,"End"))))}unmount(){}}class g5 extends qi{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=nl($o(this.node.current,"focus",()=>this.onFocus()),$o(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function yv(n,t,e){const{props:i}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&i.whileTap&&n.animationState.setActive("whileTap",e==="Start");const r="onTap"+(e==="End"?"":e),s=i[r];s&&Ht.postRender(()=>s(t,sl(t)))}class y5 extends qi{mount(){const{current:t}=this.node;t&&(this.unmount=jW(t,(e,i)=>(yv(this.node,i,"Start"),(r,{success:s})=>yv(this.node,r,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const cd=new WeakMap,$c=new WeakMap,x5=n=>{const t=cd.get(n.target);t&&t(n)},v5=n=>{n.forEach(x5)};function b5({root:n,...t}){const e=n||document;$c.has(e)||$c.set(e,{});const i=$c.get(e),r=JSON.stringify(t);return i[r]||(i[r]=new IntersectionObserver(v5,{root:n,...t})),i[r]}function w5(n,t,e){const i=b5(t);return cd.set(n,e),i.observe(n),()=>{cd.delete(n),i.unobserve(n)}}const S5={some:0,all:1};class C5 extends qi{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:e,margin:i,amount:r="some",once:s}=t,o={root:e?e.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:S5[r]},a=h=>{const{isIntersecting:f}=h;if(this.isInView===f||(this.isInView=f,s&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:c,onViewportLeave:p}=this.node.getProps(),m=f?c:p;m&&m(h)};return w5(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:e}=this.node;["amount","margin","root"].some(k5(t,e))&&this.startObserver()}unmount(){}}function k5({viewport:n={}},{viewport:t={}}={}){return e=>n[e]!==t[e]}const A5={inView:{Feature:C5},tap:{Feature:y5},focus:{Feature:g5},hover:{Feature:m5}},T5={layout:{ProjectionNode:gC,MeasureLayout:aC}},M5={...cH,...A5,...p5,...T5},jc=M3(M5,W3),sr={".a":{color:"transparent",textShadow:"2px 2px 2px rgba(255, 255, 255, 0.5)",WebkitBackgroundClip:"text",MozBackgroundClip:"text",BackgroundClip:"text"}},P5=q.theme({"&":{backgroundColor:"white"},".cm-content":{fontFamily:'"Handlee", cursive',fontWeight:"900",fontSize:"1.4rem"},".cm-gutters":{marginTop:"-2.8px",display:"flex",justifyContent:"center",alignItems:"center"},".cm-gutterElement":{display:"flex",justifyContent:"center",alignItems:"center",borderBottom:"1px solid rgba(0, 0, 0, 0.2)"},".cm-foldGutter":{display:"none !important"},".cm-activeLineGutter":{color:"red"},".cm-scroller":{scrollBehavior:"smooth",scrollbarWidth:"thin"},".cm-line":{borderBottom:"1px solid rgba(0, 0, 0, 0.2)",paddingBottom:"2px"}}),D5=kh(Mr.define([{tag:B.keyword,backgroundColor:"#0000cd",...sr[".a"],fontWeight:"900"},{tag:B.string,backgroundColor:"#6b8e23",...sr[".a"]},{tag:B.number,backgroundColor:"brown",...sr[".a"]},{tag:B.comment,backgroundColor:"#7d7c7a",...sr[".a"],fontStyle:"italic"},{tag:B.operator,backgroundColor:"#5695ca",...sr[".a"]},{tag:B.bracket,backgroundColor:"#1e90ff",...sr[".a"]},{tag:B.variableName,backgroundColor:"#eb3e8b",...sr[".a"]}])),R5=q.theme({"&":{color:"white",backgroundColor:"#202937",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center",fontFamily:"'Comic Sans MS', 'Segoe Print', cursive",fontWeight:"400",fontSize:"1.4rem"},".cm-content":{caretColor:"#e3e8f0"},".cm-selectionBackground, .cm-content ::selection":{backgroundColor:"rgba(0, 0, 100, 0.35) !important"},".cm-gutters":{backgroundColor:"#10172a",color:"#10172a",border:"2px yellow"},".cm-foldGutter":{display:"none !important"},".cm-gutterElement":{display:"flex",justifyContent:"center",alignItems:"center",color:"#cfd4dc",margin:"0 2px",fontSize:"0.8rem"},".cm-activeLineGutter":{backgroundColor:"transparent",color:"#ee7912"},".cm-scroller":{scrollBehavior:"smooth",scrollbarWidth:"thin"}}),E5=kh(Mr.define([{tag:B.keyword,color:"#6de6d2",fontWeight:"bold"},{tag:B.string,color:"#71da7d"},{tag:B.number,color:"#f4b879"},{tag:B.comment,color:"#7d7c7a",fontStyle:"italic"},{tag:B.operator,color:"#fcec60"},{tag:B.bracket,color:"#90D5FF"},{tag:B.variableName,color:"#f4d9b7"}])),to=({id:n,header:t,paragraphe:e,code:i,height:r="200px"})=>{const{darkMode:s}=E.useContext(vv);return console.log("baby",s),z.jsxs("section",{id:n,children:[z.jsx("h2",{className:"text-2xl font-semibold mb-2",children:t}),z.jsx("p",{className:"mb-4 text-gray-800 dark:text-gray-100  text-xl",children:e}),i?z.jsx("div",{className:"border border-gray-700 rounded-md overflow-hidden shadow-md",children:z.jsx(Vw,{value:`${i}`,height:r,theme:s?R5:P5,extensions:[HI,s?E5:D5]})}):null]})},L5=()=>{const[n,t]=E.useState("giris"),e=dd();return z.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 text-gray-800  dark:text-gray-100",children:[z.jsxs("aside",{className:"w-64 bg-gray-800 text-white flex flex-col shadow-lg",children:[z.jsxs("div",{className:"flex items-center gap-2 px-4 py-4 bg-green-700 font-bold text-lg",children:[z.jsx("img",{className:"w-5 h-10 me-16",src:ME,alt:"logo"}),"DokumentasiÃ½a"]}),z.jsx("nav",{className:"flex-1 overflow-y-auto",children:z.jsxs("ul",{className:"space-y-1 mt-2",children:[z.jsx("li",{onClick:()=>e("/"),className:"px-4 py-2 cursor-pointer hover:bg-green-700",children:"BaÅŸ sahypa"}),[{key:"giris",label:"GiriÅŸ"},{key:"guty",label:"guty"},{key:"hemiselik",label:"Hemiselik"},{key:"eger-bolmasa",label:"eger-bolmasa"},{key:"funksiyalar",label:"FunksiÃ½alar"},{key:"mysallar",label:"Mysallar"},{key:"mouseEvent",label:"mouseEvent"}].map(i=>z.jsx("li",{onClick:()=>t(i.key),className:`px-4 py-2 cursor-pointer ${n===i.key?"bg-green-700":"hover:bg-green-700"}`,children:i.label},i.key))]})})]}),z.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[z.jsx("header",{className:"flex items-center justify-between px-6 py-6 bg-gray-900 text-white shadow-md",children:z.jsx("h1",{className:"text-xl font-bold",children:"7 Yedi Programmirleme Dili"})}),z.jsxs("main",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[n==="giris"&&z.jsx(to,{header:"GiriÅŸ",paragraphe:` Bu sahypada siz 7 programirleme diliniÅˆ Ã¤hli sÃ¶zbaÅŸylary we
              mysallary bilen tanÅŸyp bilersiÅˆiz. AÅŸakda her bÃ¶lÃ¼miÅˆ dÃ¼ÅŸÃ¼ndiriÅŸi
              we ulanylyÅŸy gÃ¶rkezilÃ½Ã¤r.`}),n==="guty"&&z.jsxs(z.Fragment,{children:[z.jsx(to,{header:"ðŸ“˜ BÃ¶lÃ¼m: ÃœÃ½tgeÃ½Ã¤nler (Variables)",paragraphe:" paragraphe"}),z.jsx(to,{header:"ðŸ§© ÃœÃ½tgeÃ½Ã¤ni dÃ¶retmek",paragraphe:` 7 programirleme dilinde Ã¼Ã½tgeÃ½Ã¤ni dÃ¶retmek Ã¼Ã§in <b>uytgeyan</b>{" "}
                (let) Ã½a-da <b>hemiselik</b> (const) sÃ¶zlerini ulanyp bolÃ½ar.`,height:"100%",code:`guty gutujyk = figura({
  x: 500,
  y: 300,
  surat: "gutyjyk",
  uzynlygy: 500,
  beyikligi: 500,
  arkaFon: "yok",
});

guty gutyAdy = figura({
  x: 580,
  y: 580,
  uzynlygy: 200,
  beyikligi: 100,
  arkaFon: "yasyl",
  gapyrgaGalynlygy: 6,
  gapyrgaRenk: "gara",
  tekstOlceg: 64,
  tekstRenk: "ak",
});

guty gutynynAdy = figura({
        name: "gut" + "y",
        x: 150,
        y : 150,
        uzynlygy : 200,
        beyikligi : 70,
        tekstRenk : "cyan",
        arkaFon: "yok",
})

guty tekstInput = tekstMeydanca({
        x: 320,
        y : 150,
        uzynlygy : 300,
        beyikligi : 60,
        baslangycTekst : "Gutujyga at ber",
        tekstRenk : "gara",
        arkaFon : "white",
        gapyrgaRenk : "gray",
})

 guty dendir = figura({
        ady: "=",
        x: 650,
        y : 150,
        uzynlygy : 100,
        beyikligi : 70,
        tekstRenk : "blue",
        arkaFon: "sary",
})

guty gutyInput = tekstMeydanca({
        x: 770,
        y : 150,
        uzynlygy : 350,
        beyikligi : 60,
        baslangycTekst : "Gutujygyn iÃ§indaki",
        tekstRenk : "gara",
        arkaFon : "white",
        gapyrgaRenk : "gray",
})


guty gutyIci = figura({
  x: 670,
  y: 430,
  uzynlygy: 170,
  beyikligi: 10,
  arkaFon: "sary",
  gapyrgaGalynlygy: 6,
  gapyrgaRenk: "gara",
  animasiya: "0.5s",
  gorunyan: 0,
});
gutyIci.tekst(7);

funksiya gorkezC(){
  gutyIci.uytget({y: 330, gorunyan: 1, beyikligi: 100})
}

funksiya gizleC(){
    gutyIci.uytget({y: 430, gorunyan: 0, beyikligi: 10})
}

guty gorunyanUlulyk = yalnys;

gutujyk.addEventListener("click", () => {
  eger(!gorunyanUlulyk) {
    gorkezC(); 
  } bolmasa {
    gizleC();  
  }
  gorunyanUlulyk = !gorunyanUlulyk; 
  hemiselik gutynynAlnanAdy = tekstInput.al();
  hemiselik gutynynIcindaki = gutyInput.al();
  gutyAdy.tekst(gutynynAlnanAdy);
  gutyIci.tekst(gutynynIcindaki);
});

`}),z.jsx(to,{header:"ðŸ” ÃœÃ½tgeÃ½Ã¤n bahasyny Ã¼Ã½tgetmek",paragraphe:`  ÃœÃ½tgeÃ½Ã¤niÅˆ bahasyny islÃ¤n wagtymyz Ã¼Ã½tgedip bilÃ½Ã¤ris. Ã–Åˆki
                bahasy tÃ¤ze baha bilen Ã§alÅŸyrylÃ½ar.`,code:`uytgeyan habar = "Salam!";
habar = "DÃ¼nÃ½Ã¤!";
konsol.yaz(habar); // netijesi: DÃ¼nÃ½Ã¤!`})]}),n==="hemiselik"&&z.jsx(to,{header:"ðŸ”’ Hemiselik (Constant)",paragraphe:z.jsxs(z.Fragment,{children:["Eger bir Ã¼Ã½tgeÃ½Ã¤niÅˆ bahasy hiÃ§ wagt Ã¼Ã½tgemeÃ½Ã¤n bolsa, biz ony"," ",z.jsx("b",{children:z.jsx("i",{className:"text-green-600",children:"hemiselik"})})," ","diÃ½ip belleÃ½Ã¤ris. OnuÅˆ bahasyny soÅˆ Ã¼Ã½tgedip bolmaÃ½ar."]}),code:`hemiselik doglanGuni = "18.04.1982";
doglanGuni = "01.01.2001"; // sÃ¤wlik: bahany Ã¼Ã½tgedip bolmaÃ½ar`})]})]})]})},O5=()=>z.jsxs("div",{className:"flex h-screen items-center justify-between px-16 bg-gray-900 text-white overflow-hidden",children:[z.jsxs(jc.div,{initial:{x:-100,opacity:0},animate:{x:0,opacity:1},transition:{duration:1,ease:"easeOut"},className:"max-w-lg",children:[z.jsx("h1",{className:"text-5xl font-extrabold text-green-400 mb-6",children:"Programmany taÃ½Ã½arlan"}),z.jsx("p",{className:"text-3xl font-semibold text-gray-200",children:z.jsx("span",{className:"text-green-500",children:"Meredow Muhammetaly"})}),z.jsx("p",{className:"mt-4 text-gray-400 text-lg leading-relaxed",children:"Bu programma turkmen dilinde programirlemegi ansatlyk bilen owretmek Ã¼Ã§in dÃ¶redildi"})]}),z.jsxs(jc.div,{initial:{scale:0,rotate:-90,opacity:0},animate:{scale:1,rotate:0,opacity:1},transition:{duration:1.2,type:"spring",stiffness:100,delay:.3},className:"relative",children:[z.jsx("div",{className:"rounded-full bg-green-500/10 p-12 border border-green-500 shadow-[0_0_30px_rgba(34,197,94,0.5)]",children:z.jsx("img",{src:eR,alt:"Logo",className:"w-[500px] h-[500px] object-contain"})}),z.jsx(jc.div,{animate:{rotate:[0,360]},transition:{repeat:1/0,duration:8,ease:"linear"},className:"absolute inset-0 border-4 border-green-600/40 rounded-full"})]})]}),B5=({maxFiles:n=8,maxSizeMB:t=10})=>{const[e,i]=E.useState([]),r=async f=>{const c=Array.from(f.target.files||[]);if(c.length===0)return;const p=c.slice(0,n),m=await Promise.all(p.map(y=>s(y).then(v=>({name:y.name,size:y.size,type:y.type,dataUrl:v}))));i(y=>[...m,...y]),f.target.value=null},s=f=>new Promise((c,p)=>{if(f.size>t*1024*1024)return p(new Error(`${f.name} exceeds max size of ${t} MB`));const m=new FileReader;m.onload=()=>c(m.result),m.onerror=y=>p(y),m.readAsDataURL(f)}),o=f=>i(c=>c.filter((p,m)=>m!==f)),a=async f=>{try{await navigator.clipboard.writeText(f),alert("Copied to clipboard")}catch{alert("Copy failed â€” your browser may block clipboard access.")}},h=(f,c)=>{const p=new Blob([c],{type:"text/plain;charset=utf-8"}),m=URL.createObjectURL(p),y=document.createElement("a");y.href=m,y.download=f,document.body.appendChild(y),y.click(),y.remove(),URL.revokeObjectURL(m)};return z.jsxs("div",{className:"max-w-4xl mx-auto p-4",children:[z.jsxs("div",{className:"bg-white rounded-2xl shadow p-4 grid gap-4",children:[z.jsxs("div",{className:"flex items-center justify-between",children:[z.jsx("h2",{className:"text-xl font-semibold",children:"Image â†’ Base64 (Data URL)"}),z.jsxs("div",{className:"text-sm text-muted-foreground",children:["Max files: ",n," â€¢ Max size: ",t," MB each"]})]}),z.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[z.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:async f=>{try{await r(f)}catch(c){alert(c.message||"Failed to read file")}},className:"hidden","data-testid":"file-input"}),z.jsx("div",{className:"px-4 py-2 bg-slate-100 rounded-lg hover:bg-slate-200",children:"Choose images"})]}),e.length===0?z.jsx("div",{className:"text-sm text-slate-500",children:"No images yet â€” choose one or more files to convert."}):z.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.map((f,c)=>z.jsxs("div",{className:"border rounded-lg p-2 flex gap-3 items-start",children:[z.jsx("img",{src:f.dataUrl,alt:f.name,className:"w-24 h-24 object-cover rounded-md"}),z.jsxs("div",{className:"flex-1",children:[z.jsxs("div",{className:"flex justify-between items-start gap-2",children:[z.jsxs("div",{children:[z.jsx("div",{className:"font-medium",children:f.name}),z.jsxs("div",{className:"text-xs text-slate-500",children:[(f.size/1024).toFixed(0)," KB â€¢ ",f.type]})]}),z.jsxs("div",{className:"flex gap-2",children:[z.jsx("button",{onClick:()=>a(f.dataUrl),className:"px-2 py-1 border rounded-md text-sm",title:"Copy base64 data URL",children:"Copy"}),z.jsx("button",{onClick:()=>h(`${f.name}.txt`,f.dataUrl),className:"px-2 py-1 border rounded-md text-sm",title:"Download base64 as .txt",children:"Download"}),z.jsx("button",{onClick:()=>o(c),className:"px-2 py-1 border rounded-md text-sm",title:"Remove",children:"Remove"})]})]}),z.jsx("div",{className:"mt-2",children:z.jsx("textarea",{readOnly:!0,value:f.dataUrl,className:"w-full text-xs font-mono rounded-md p-2 border resize-none h-24"})})]})]},c))}),z.jsx("div",{className:"flex gap-2 justify-end",children:z.jsx("button",{onClick:()=>i([]),className:"px-3 py-2 rounded-lg border",title:"Clear all converted images",children:"Clear all"})})]}),z.jsxs("div",{className:"mt-4 text-sm text-slate-600",children:[z.jsxs("p",{children:["Each converted string is a ",z.jsx("strong",{children:"data URL"})," (for example ",z.jsx("code",{children:"data:image/png;base64,iVBORw0KGgo..."}),") â€” you can paste it directly into an ",z.jsx("code",{children:'<img src="..."/>'})," attribute, store it in a database, or strip the prefix if you only want the raw base64 payload."]}),z.jsxs("p",{className:"mt-2",children:["To extract only the raw base64 portion programmatically: ",z.jsx("code",{children:"const raw = dataUrl.split(',')[1];"})]})]}),z.jsx("hr",{}),z.jsx("hr",{}),z.jsx("br",{})]})},I5=()=>{const n=dd(),{state:t}=ji(),{darkMode:e,setDarkMode:i}=E.useContext(vv);return t?.image?z.jsx("div",{className:`fixed inset-0 flex items-center justify-center ${e?"bg-black":"bg-amber-100"}`,onClick:()=>n(-1),children:z.jsx("img",{src:t.image,alt:t.name,className:"max-w-full max-h-full object-contain"})}):z.jsx("p",{children:"No image available"})},_5=()=>z.jsx(N5,{children:z.jsx("div",{className:"center",children:z.jsxs("div",{className:"loader",children:[z.jsxs("div",{className:"cup",children:[z.jsx("div",{className:"cup-handle"}),z.jsx("div",{className:"smoke one"}),z.jsx("div",{className:"smoke two"}),z.jsx("div",{className:"smoke three"})]}),z.jsx("div",{className:"load",children:"GaraÅŸylÃ½ar..."})]})})}),N5=nR.div`
  .center{
    height: 100vh;
    margin: 0;
    display: flex;
    justify-content: center; /* horizontal center */
    align-items: center;  
  }
  .loader {
    width: 100px;
    height: 100px;
    position: relative;
    animation: shake 3s infinite ease-in-out;
  }

  .cup {
    position: absolute;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    width: 40px;
    height: 30px;
    background-color: #5b4022cb;
    border: 1px solid #2e2e2e;
    border-radius: 3px 3px 10px 10px;
    z-index: 1;
    animation: cupPulse 6s infinite ease-in-out;
  }

  .cup::before {
    content: "";
    position: absolute;
    bottom: -5px;
    width: calc(100% - 2px);
    height: 6px;
    background: #5b4022cb;
    border: 1px solid #2e2e2e;
    border-top: none;
    border-radius: 50%;
    z-index: -1;
    animation: cupPulse 6s infinite ease-in-out;
  }

  .cup::after {
    content: "";
    position: absolute;
    top: -2px;
    left: 1px;
    width: calc(100% - 2px);
    height: 4px;
    background: #da8920ca;
    border: 1px solid #2e2e2e;
    border-radius: 50%;
    animation: coffeeGlow 6s infinite ease-in-out;
  }

  .cup-handle {
    position: absolute;
    top: 5px;
    right: -10px;
    width: 10px;
    height: 15px;
    border: 2px solid #2e2e2e;
    border-left: none;
    border-radius: 0 10px 10px 0;
    background: transparent;
  }

  .smoke {
    position: absolute;
    bottom: 100%;
    left: 50%;
    width: 10px;
    height: 25px;
    background: rgba(72, 67, 67, 0.501);
    border-radius: 50%;
    transform: translateX(-50%);
    animation: rise 3s infinite ease-in-out;
    filter: blur(8px);
  }

  .smoke.one {
    animation-delay: 0s;
  }
  .smoke.two {
    animation-delay: 0.8s;
  }
  .smoke.three {
    animation-delay: 1.6s;
  }

  .load {
    position: absolute;
    bottom: 0;
    left: 50%;
    transform: translateX(-50%);
    font-size: 12px;
    color: #2e2e2e;
    opacity: 0.6;
  }

  @keyframes rise {
    0% {
      transform: translate(-50%, 0) scale(0.4);
      opacity: 0;
    }
    30% {
      opacity: 0.7;
    }
    60% {
      opacity: 0.4;
    }
    100% {
      transform: translate(-50%, -120px) scale(1);
      opacity: 0;
    }
  }

  @keyframes shake {
    0% {
      transform: translateX(0) translateY(0) rotate(0);
    }
    25% {
      transform: translateX(-4px) translateY(-2px) rotate(-2deg);
    }
    50% {
      transform: translateX(0) translateY(0) rotate(0);
    }
    75% {
      transform: translateX(4px) translateY(-2px) rotate(2deg);
    }
    100% {
      transform: translateX(0) translateY(0) rotate(0);
    }
  }

  /* New Animations */
  @keyframes cupPulse {
    0%,
    100% {
      background-color: #5b4022cb;
    }
    50% {
      background-color: #f5f5f5bd;
    }
  }

  @keyframes coffeeGlow {
    0%,
    100% {
      background: #da8920ca;
    }
    50% {
      background: #fed197d5;
    }
  }
`,F5=E.lazy(()=>bv(()=>import("./home-C0ikv4p1.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]),import.meta.url)),V5=E.lazy(()=>bv(()=>import("./images-C_2KOGnH.js"),__vite__mapDeps([8,1,2,3,5,6,7]),import.meta.url)),W5=()=>z.jsx(iR,{children:z.jsx(yE,{children:z.jsx(E.Suspense,{fallback:z.jsx(_5,{}),children:z.jsxs(GR,{children:[z.jsx(or,{path:"/",element:z.jsx(F5,{})}),z.jsx(or,{path:"/documentation",element:z.jsx(L5,{})}),z.jsx(or,{path:"/about",element:z.jsx(O5,{})}),z.jsx(or,{path:"/imageTo64Code",element:z.jsx(B5,{})}),z.jsx(or,{path:"/images",element:z.jsx(V5,{})}),z.jsx(or,{path:"/full-image",element:z.jsx(I5,{})})]})})})});var oo={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var H5=oo.exports,xv;function z5(){return xv||(xv=1,(function(n,t){(function(){var e,i="4.17.21",r=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",a="Invalid `variable` option passed into `_.template`",h="__lodash_hash_undefined__",f=500,c="__lodash_placeholder__",p=1,m=2,y=4,v=1,S=2,C=1,k=2,T=4,P=8,I=16,L=32,_=64,F=128,$=256,j=512,tt=30,et="...",Z=800,lt=16,at=1,wt=2,Kt=3,ht=1/0,gt=9007199254740991,yt=17976931348623157e292,Tt=NaN,Pt=4294967295,oe=Pt-1,Ze=Pt>>>1,Jn=[["ary",F],["bind",C],["bindKey",k],["curry",P],["curryRight",I],["flip",j],["partial",L],["partialRight",_],["rearg",$]],ze="[object Arguments]",Zn="[object Array]",ol="[object AsyncFunction]",ks="[object Boolean]",As="[object Date]",yC="[object DOMException]",ll="[object Error]",al="[object Function]",Ep="[object GeneratorFunction]",vn="[object Map]",Ts="[object Number]",xC="[object Null]",Qn="[object Object]",Lp="[object Promise]",vC="[object Proxy]",Ms="[object RegExp]",bn="[object Set]",Ps="[object String]",hl="[object Symbol]",bC="[object Undefined]",Ds="[object WeakMap]",wC="[object WeakSet]",Rs="[object ArrayBuffer]",Pr="[object DataView]",Oh="[object Float32Array]",Bh="[object Float64Array]",Ih="[object Int8Array]",_h="[object Int16Array]",Nh="[object Int32Array]",Fh="[object Uint8Array]",Vh="[object Uint8ClampedArray]",Wh="[object Uint16Array]",Hh="[object Uint32Array]",SC=/\b__p \+= '';/g,CC=/\b(__p \+=) '' \+/g,kC=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Op=/&(?:amp|lt|gt|quot|#39);/g,Bp=/[&<>"']/g,AC=RegExp(Op.source),TC=RegExp(Bp.source),MC=/<%-([\s\S]+?)%>/g,PC=/<%([\s\S]+?)%>/g,Ip=/<%=([\s\S]+?)%>/g,DC=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,RC=/^\w*$/,EC=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,zh=/[\\^$.*+?()[\]{}|]/g,LC=RegExp(zh.source),Uh=/^\s+/,OC=/\s/,BC=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,IC=/\{\n\/\* \[wrapped with (.+)\] \*/,_C=/,? & /,NC=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,FC=/[()=,{}\[\]\/\s]/,VC=/\\(\\)?/g,WC=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,_p=/\w*$/,HC=/^[-+]0x[0-9a-f]+$/i,zC=/^0b[01]+$/i,UC=/^\[object .+?Constructor\]$/,$C=/^0o[0-7]+$/i,jC=/^(?:0|[1-9]\d*)$/,KC=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ul=/($^)/,qC=/['\n\r\u2028\u2029\\]/g,cl="\\ud800-\\udfff",GC="\\u0300-\\u036f",YC="\\ufe20-\\ufe2f",XC="\\u20d0-\\u20ff",Np=GC+YC+XC,Fp="\\u2700-\\u27bf",Vp="a-z\\xdf-\\xf6\\xf8-\\xff",JC="\\xac\\xb1\\xd7\\xf7",ZC="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",QC="\\u2000-\\u206f",tk=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Wp="A-Z\\xc0-\\xd6\\xd8-\\xde",Hp="\\ufe0e\\ufe0f",zp=JC+ZC+QC+tk,$h="['â€™]",ek="["+cl+"]",Up="["+zp+"]",fl="["+Np+"]",$p="\\d+",nk="["+Fp+"]",jp="["+Vp+"]",Kp="[^"+cl+zp+$p+Fp+Vp+Wp+"]",jh="\\ud83c[\\udffb-\\udfff]",ik="(?:"+fl+"|"+jh+")",qp="[^"+cl+"]",Kh="(?:\\ud83c[\\udde6-\\uddff]){2}",qh="[\\ud800-\\udbff][\\udc00-\\udfff]",Dr="["+Wp+"]",Gp="\\u200d",Yp="(?:"+jp+"|"+Kp+")",rk="(?:"+Dr+"|"+Kp+")",Xp="(?:"+$h+"(?:d|ll|m|re|s|t|ve))?",Jp="(?:"+$h+"(?:D|LL|M|RE|S|T|VE))?",Zp=ik+"?",Qp="["+Hp+"]?",sk="(?:"+Gp+"(?:"+[qp,Kh,qh].join("|")+")"+Qp+Zp+")*",ok="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",lk="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",tm=Qp+Zp+sk,ak="(?:"+[nk,Kh,qh].join("|")+")"+tm,hk="(?:"+[qp+fl+"?",fl,Kh,qh,ek].join("|")+")",uk=RegExp($h,"g"),ck=RegExp(fl,"g"),Gh=RegExp(jh+"(?="+jh+")|"+hk+tm,"g"),fk=RegExp([Dr+"?"+jp+"+"+Xp+"(?="+[Up,Dr,"$"].join("|")+")",rk+"+"+Jp+"(?="+[Up,Dr+Yp,"$"].join("|")+")",Dr+"?"+Yp+"+"+Xp,Dr+"+"+Jp,lk,ok,$p,ak].join("|"),"g"),dk=RegExp("["+Gp+cl+Np+Hp+"]"),pk=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,mk=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],gk=-1,_t={};_t[Oh]=_t[Bh]=_t[Ih]=_t[_h]=_t[Nh]=_t[Fh]=_t[Vh]=_t[Wh]=_t[Hh]=!0,_t[ze]=_t[Zn]=_t[Rs]=_t[ks]=_t[Pr]=_t[As]=_t[ll]=_t[al]=_t[vn]=_t[Ts]=_t[Qn]=_t[Ms]=_t[bn]=_t[Ps]=_t[Ds]=!1;var It={};It[ze]=It[Zn]=It[Rs]=It[Pr]=It[ks]=It[As]=It[Oh]=It[Bh]=It[Ih]=It[_h]=It[Nh]=It[vn]=It[Ts]=It[Qn]=It[Ms]=It[bn]=It[Ps]=It[hl]=It[Fh]=It[Vh]=It[Wh]=It[Hh]=!0,It[ll]=It[al]=It[Ds]=!1;var yk={Ã€:"A",Ã:"A",Ã‚:"A",Ãƒ:"A",Ã„:"A",Ã…:"A",Ã :"a",Ã¡:"a",Ã¢:"a",Ã£:"a",Ã¤:"a",Ã¥:"a",Ã‡:"C",Ã§:"c",Ã:"D",Ã°:"d",Ãˆ:"E",Ã‰:"E",ÃŠ:"E",Ã‹:"E",Ã¨:"e",Ã©:"e",Ãª:"e",Ã«:"e",ÃŒ:"I",Ã:"I",ÃŽ:"I",Ã:"I",Ã¬:"i",Ã­:"i",Ã®:"i",Ã¯:"i",Ã‘:"N",Ã±:"n",Ã’:"O",Ã“:"O",Ã”:"O",Ã•:"O",Ã–:"O",Ã˜:"O",Ã²:"o",Ã³:"o",Ã´:"o",Ãµ:"o",Ã¶:"o",Ã¸:"o",Ã™:"U",Ãš:"U",Ã›:"U",Ãœ:"U",Ã¹:"u",Ãº:"u",Ã»:"u",Ã¼:"u",Ã:"Y",Ã½:"y",Ã¿:"y",Ã†:"Ae",Ã¦:"ae",Ãž:"Th",Ã¾:"th",ÃŸ:"ss",Ä€:"A",Ä‚:"A",Ä„:"A",Ä:"a",Äƒ:"a",Ä…:"a",Ä†:"C",Äˆ:"C",ÄŠ:"C",ÄŒ:"C",Ä‡:"c",Ä‰:"c",Ä‹:"c",Ä:"c",ÄŽ:"D",Ä:"D",Ä:"d",Ä‘:"d",Ä’:"E",Ä”:"E",Ä–:"E",Ä˜:"E",Äš:"E",Ä“:"e",Ä•:"e",Ä—:"e",Ä™:"e",Ä›:"e",Äœ:"G",Äž:"G",Ä :"G",Ä¢:"G",Ä:"g",ÄŸ:"g",Ä¡:"g",Ä£:"g",Ä¤:"H",Ä¦:"H",Ä¥:"h",Ä§:"h",Ä¨:"I",Äª:"I",Ä¬:"I",Ä®:"I",Ä°:"I",Ä©:"i",Ä«:"i",Ä­:"i",Ä¯:"i",Ä±:"i",Ä´:"J",Äµ:"j",Ä¶:"K",Ä·:"k",Ä¸:"k",Ä¹:"L",Ä»:"L",Ä½:"L",Ä¿:"L",Å:"L",Äº:"l",Ä¼:"l",Ä¾:"l",Å€:"l",Å‚:"l",Åƒ:"N",Å…:"N",Å‡:"N",ÅŠ:"N",Å„:"n",Å†:"n",Åˆ:"n",Å‹:"n",ÅŒ:"O",ÅŽ:"O",Å:"O",Å:"o",Å:"o",Å‘:"o",Å”:"R",Å–:"R",Å˜:"R",Å•:"r",Å—:"r",Å™:"r",Åš:"S",Åœ:"S",Åž:"S",Å :"S",Å›:"s",Å:"s",ÅŸ:"s",Å¡:"s",Å¢:"T",Å¤:"T",Å¦:"T",Å£:"t",Å¥:"t",Å§:"t",Å¨:"U",Åª:"U",Å¬:"U",Å®:"U",Å°:"U",Å²:"U",Å©:"u",Å«:"u",Å­:"u",Å¯:"u",Å±:"u",Å³:"u",Å´:"W",Åµ:"w",Å¶:"Y",Å·:"y",Å¸:"Y",Å¹:"Z",Å»:"Z",Å½:"Z",Åº:"z",Å¼:"z",Å¾:"z",Ä²:"IJ",Ä³:"ij",Å’:"Oe",Å“:"oe",Å‰:"'n",Å¿:"s"},xk={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},vk={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},bk={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},wk=parseFloat,Sk=parseInt,em=typeof Zl=="object"&&Zl&&Zl.Object===Object&&Zl,Ck=typeof self=="object"&&self&&self.Object===Object&&self,he=em||Ck||Function("return this")(),Yh=t&&!t.nodeType&&t,Gi=Yh&&!0&&n&&!n.nodeType&&n,nm=Gi&&Gi.exports===Yh,Xh=nm&&em.process,Qe=(function(){try{var D=Gi&&Gi.require&&Gi.require("util").types;return D||Xh&&Xh.binding&&Xh.binding("util")}catch{}})(),im=Qe&&Qe.isArrayBuffer,rm=Qe&&Qe.isDate,sm=Qe&&Qe.isMap,om=Qe&&Qe.isRegExp,lm=Qe&&Qe.isSet,am=Qe&&Qe.isTypedArray;function Ue(D,N,O){switch(O.length){case 0:return D.call(N);case 1:return D.call(N,O[0]);case 2:return D.call(N,O[0],O[1]);case 3:return D.call(N,O[0],O[1],O[2])}return D.apply(N,O)}function kk(D,N,O,J){for(var ut=-1,Mt=D==null?0:D.length;++ut<Mt;){var ne=D[ut];N(J,ne,O(ne),D)}return J}function tn(D,N){for(var O=-1,J=D==null?0:D.length;++O<J&&N(D[O],O,D)!==!1;);return D}function Ak(D,N){for(var O=D==null?0:D.length;O--&&N(D[O],O,D)!==!1;);return D}function hm(D,N){for(var O=-1,J=D==null?0:D.length;++O<J;)if(!N(D[O],O,D))return!1;return!0}function bi(D,N){for(var O=-1,J=D==null?0:D.length,ut=0,Mt=[];++O<J;){var ne=D[O];N(ne,O,D)&&(Mt[ut++]=ne)}return Mt}function dl(D,N){var O=D==null?0:D.length;return!!O&&Rr(D,N,0)>-1}function Jh(D,N,O){for(var J=-1,ut=D==null?0:D.length;++J<ut;)if(O(N,D[J]))return!0;return!1}function Vt(D,N){for(var O=-1,J=D==null?0:D.length,ut=Array(J);++O<J;)ut[O]=N(D[O],O,D);return ut}function wi(D,N){for(var O=-1,J=N.length,ut=D.length;++O<J;)D[ut+O]=N[O];return D}function Zh(D,N,O,J){var ut=-1,Mt=D==null?0:D.length;for(J&&Mt&&(O=D[++ut]);++ut<Mt;)O=N(O,D[ut],ut,D);return O}function Tk(D,N,O,J){var ut=D==null?0:D.length;for(J&&ut&&(O=D[--ut]);ut--;)O=N(O,D[ut],ut,D);return O}function Qh(D,N){for(var O=-1,J=D==null?0:D.length;++O<J;)if(N(D[O],O,D))return!0;return!1}var Mk=tu("length");function Pk(D){return D.split("")}function Dk(D){return D.match(NC)||[]}function um(D,N,O){var J;return O(D,function(ut,Mt,ne){if(N(ut,Mt,ne))return J=Mt,!1}),J}function pl(D,N,O,J){for(var ut=D.length,Mt=O+(J?1:-1);J?Mt--:++Mt<ut;)if(N(D[Mt],Mt,D))return Mt;return-1}function Rr(D,N,O){return N===N?Hk(D,N,O):pl(D,cm,O)}function Rk(D,N,O,J){for(var ut=O-1,Mt=D.length;++ut<Mt;)if(J(D[ut],N))return ut;return-1}function cm(D){return D!==D}function fm(D,N){var O=D==null?0:D.length;return O?nu(D,N)/O:Tt}function tu(D){return function(N){return N==null?e:N[D]}}function eu(D){return function(N){return D==null?e:D[N]}}function dm(D,N,O,J,ut){return ut(D,function(Mt,ne,Lt){O=J?(J=!1,Mt):N(O,Mt,ne,Lt)}),O}function Ek(D,N){var O=D.length;for(D.sort(N);O--;)D[O]=D[O].value;return D}function nu(D,N){for(var O,J=-1,ut=D.length;++J<ut;){var Mt=N(D[J]);Mt!==e&&(O=O===e?Mt:O+Mt)}return O}function iu(D,N){for(var O=-1,J=Array(D);++O<D;)J[O]=N(O);return J}function Lk(D,N){return Vt(N,function(O){return[O,D[O]]})}function pm(D){return D&&D.slice(0,xm(D)+1).replace(Uh,"")}function $e(D){return function(N){return D(N)}}function ru(D,N){return Vt(N,function(O){return D[O]})}function Es(D,N){return D.has(N)}function mm(D,N){for(var O=-1,J=D.length;++O<J&&Rr(N,D[O],0)>-1;);return O}function gm(D,N){for(var O=D.length;O--&&Rr(N,D[O],0)>-1;);return O}function Ok(D,N){for(var O=D.length,J=0;O--;)D[O]===N&&++J;return J}var Bk=eu(yk),Ik=eu(xk);function _k(D){return"\\"+bk[D]}function Nk(D,N){return D==null?e:D[N]}function Er(D){return dk.test(D)}function Fk(D){return pk.test(D)}function Vk(D){for(var N,O=[];!(N=D.next()).done;)O.push(N.value);return O}function su(D){var N=-1,O=Array(D.size);return D.forEach(function(J,ut){O[++N]=[ut,J]}),O}function ym(D,N){return function(O){return D(N(O))}}function Si(D,N){for(var O=-1,J=D.length,ut=0,Mt=[];++O<J;){var ne=D[O];(ne===N||ne===c)&&(D[O]=c,Mt[ut++]=O)}return Mt}function ml(D){var N=-1,O=Array(D.size);return D.forEach(function(J){O[++N]=J}),O}function Wk(D){var N=-1,O=Array(D.size);return D.forEach(function(J){O[++N]=[J,J]}),O}function Hk(D,N,O){for(var J=O-1,ut=D.length;++J<ut;)if(D[J]===N)return J;return-1}function zk(D,N,O){for(var J=O+1;J--;)if(D[J]===N)return J;return J}function Lr(D){return Er(D)?$k(D):Mk(D)}function wn(D){return Er(D)?jk(D):Pk(D)}function xm(D){for(var N=D.length;N--&&OC.test(D.charAt(N)););return N}var Uk=eu(vk);function $k(D){for(var N=Gh.lastIndex=0;Gh.test(D);)++N;return N}function jk(D){return D.match(Gh)||[]}function Kk(D){return D.match(fk)||[]}var qk=(function D(N){N=N==null?he:Or.defaults(he.Object(),N,Or.pick(he,mk));var O=N.Array,J=N.Date,ut=N.Error,Mt=N.Function,ne=N.Math,Lt=N.Object,ou=N.RegExp,Gk=N.String,en=N.TypeError,gl=O.prototype,Yk=Mt.prototype,Br=Lt.prototype,yl=N["__core-js_shared__"],xl=Yk.toString,Rt=Br.hasOwnProperty,Xk=0,vm=(function(){var l=/[^.]+$/.exec(yl&&yl.keys&&yl.keys.IE_PROTO||"");return l?"Symbol(src)_1."+l:""})(),vl=Br.toString,Jk=xl.call(Lt),Zk=he._,Qk=ou("^"+xl.call(Rt).replace(zh,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),bl=nm?N.Buffer:e,Ci=N.Symbol,wl=N.Uint8Array,bm=bl?bl.allocUnsafe:e,Sl=ym(Lt.getPrototypeOf,Lt),wm=Lt.create,Sm=Br.propertyIsEnumerable,Cl=gl.splice,Cm=Ci?Ci.isConcatSpreadable:e,Ls=Ci?Ci.iterator:e,Yi=Ci?Ci.toStringTag:e,kl=(function(){try{var l=tr(Lt,"defineProperty");return l({},"",{}),l}catch{}})(),tA=N.clearTimeout!==he.clearTimeout&&N.clearTimeout,eA=J&&J.now!==he.Date.now&&J.now,nA=N.setTimeout!==he.setTimeout&&N.setTimeout,Al=ne.ceil,Tl=ne.floor,lu=Lt.getOwnPropertySymbols,iA=bl?bl.isBuffer:e,km=N.isFinite,rA=gl.join,sA=ym(Lt.keys,Lt),ie=ne.max,ye=ne.min,oA=J.now,lA=N.parseInt,Am=ne.random,aA=gl.reverse,au=tr(N,"DataView"),Os=tr(N,"Map"),hu=tr(N,"Promise"),Ir=tr(N,"Set"),Bs=tr(N,"WeakMap"),Is=tr(Lt,"create"),Ml=Bs&&new Bs,_r={},hA=er(au),uA=er(Os),cA=er(hu),fA=er(Ir),dA=er(Bs),Pl=Ci?Ci.prototype:e,_s=Pl?Pl.valueOf:e,Tm=Pl?Pl.toString:e;function b(l){if(qt(l)&&!ct(l)&&!(l instanceof vt)){if(l instanceof nn)return l;if(Rt.call(l,"__wrapped__"))return Mg(l)}return new nn(l)}var Nr=(function(){function l(){}return function(u){if(!zt(u))return{};if(wm)return wm(u);l.prototype=u;var d=new l;return l.prototype=e,d}})();function Dl(){}function nn(l,u){this.__wrapped__=l,this.__actions__=[],this.__chain__=!!u,this.__index__=0,this.__values__=e}b.templateSettings={escape:MC,evaluate:PC,interpolate:Ip,variable:"",imports:{_:b}},b.prototype=Dl.prototype,b.prototype.constructor=b,nn.prototype=Nr(Dl.prototype),nn.prototype.constructor=nn;function vt(l){this.__wrapped__=l,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Pt,this.__views__=[]}function pA(){var l=new vt(this.__wrapped__);return l.__actions__=Le(this.__actions__),l.__dir__=this.__dir__,l.__filtered__=this.__filtered__,l.__iteratees__=Le(this.__iteratees__),l.__takeCount__=this.__takeCount__,l.__views__=Le(this.__views__),l}function mA(){if(this.__filtered__){var l=new vt(this);l.__dir__=-1,l.__filtered__=!0}else l=this.clone(),l.__dir__*=-1;return l}function gA(){var l=this.__wrapped__.value(),u=this.__dir__,d=ct(l),g=u<0,x=d?l.length:0,w=PT(0,x,this.__views__),A=w.start,M=w.end,R=M-A,V=g?M:A-1,W=this.__iteratees__,U=W.length,G=0,Q=ye(R,this.__takeCount__);if(!d||!g&&x==R&&Q==R)return Xm(l,this.__actions__);var rt=[];t:for(;R--&&G<Q;){V+=u;for(var pt=-1,st=l[V];++pt<U;){var xt=W[pt],St=xt.iteratee,qe=xt.type,Te=St(st);if(qe==wt)st=Te;else if(!Te){if(qe==at)continue t;break t}}rt[G++]=st}return rt}vt.prototype=Nr(Dl.prototype),vt.prototype.constructor=vt;function Xi(l){var u=-1,d=l==null?0:l.length;for(this.clear();++u<d;){var g=l[u];this.set(g[0],g[1])}}function yA(){this.__data__=Is?Is(null):{},this.size=0}function xA(l){var u=this.has(l)&&delete this.__data__[l];return this.size-=u?1:0,u}function vA(l){var u=this.__data__;if(Is){var d=u[l];return d===h?e:d}return Rt.call(u,l)?u[l]:e}function bA(l){var u=this.__data__;return Is?u[l]!==e:Rt.call(u,l)}function wA(l,u){var d=this.__data__;return this.size+=this.has(l)?0:1,d[l]=Is&&u===e?h:u,this}Xi.prototype.clear=yA,Xi.prototype.delete=xA,Xi.prototype.get=vA,Xi.prototype.has=bA,Xi.prototype.set=wA;function ti(l){var u=-1,d=l==null?0:l.length;for(this.clear();++u<d;){var g=l[u];this.set(g[0],g[1])}}function SA(){this.__data__=[],this.size=0}function CA(l){var u=this.__data__,d=Rl(u,l);if(d<0)return!1;var g=u.length-1;return d==g?u.pop():Cl.call(u,d,1),--this.size,!0}function kA(l){var u=this.__data__,d=Rl(u,l);return d<0?e:u[d][1]}function AA(l){return Rl(this.__data__,l)>-1}function TA(l,u){var d=this.__data__,g=Rl(d,l);return g<0?(++this.size,d.push([l,u])):d[g][1]=u,this}ti.prototype.clear=SA,ti.prototype.delete=CA,ti.prototype.get=kA,ti.prototype.has=AA,ti.prototype.set=TA;function ei(l){var u=-1,d=l==null?0:l.length;for(this.clear();++u<d;){var g=l[u];this.set(g[0],g[1])}}function MA(){this.size=0,this.__data__={hash:new Xi,map:new(Os||ti),string:new Xi}}function PA(l){var u=zl(this,l).delete(l);return this.size-=u?1:0,u}function DA(l){return zl(this,l).get(l)}function RA(l){return zl(this,l).has(l)}function EA(l,u){var d=zl(this,l),g=d.size;return d.set(l,u),this.size+=d.size==g?0:1,this}ei.prototype.clear=MA,ei.prototype.delete=PA,ei.prototype.get=DA,ei.prototype.has=RA,ei.prototype.set=EA;function Ji(l){var u=-1,d=l==null?0:l.length;for(this.__data__=new ei;++u<d;)this.add(l[u])}function LA(l){return this.__data__.set(l,h),this}function OA(l){return this.__data__.has(l)}Ji.prototype.add=Ji.prototype.push=LA,Ji.prototype.has=OA;function Sn(l){var u=this.__data__=new ti(l);this.size=u.size}function BA(){this.__data__=new ti,this.size=0}function IA(l){var u=this.__data__,d=u.delete(l);return this.size=u.size,d}function _A(l){return this.__data__.get(l)}function NA(l){return this.__data__.has(l)}function FA(l,u){var d=this.__data__;if(d instanceof ti){var g=d.__data__;if(!Os||g.length<r-1)return g.push([l,u]),this.size=++d.size,this;d=this.__data__=new ei(g)}return d.set(l,u),this.size=d.size,this}Sn.prototype.clear=BA,Sn.prototype.delete=IA,Sn.prototype.get=_A,Sn.prototype.has=NA,Sn.prototype.set=FA;function Mm(l,u){var d=ct(l),g=!d&&nr(l),x=!d&&!g&&Pi(l),w=!d&&!g&&!x&&Hr(l),A=d||g||x||w,M=A?iu(l.length,Gk):[],R=M.length;for(var V in l)(u||Rt.call(l,V))&&!(A&&(V=="length"||x&&(V=="offset"||V=="parent")||w&&(V=="buffer"||V=="byteLength"||V=="byteOffset")||si(V,R)))&&M.push(V);return M}function Pm(l){var u=l.length;return u?l[bu(0,u-1)]:e}function VA(l,u){return Ul(Le(l),Zi(u,0,l.length))}function WA(l){return Ul(Le(l))}function uu(l,u,d){(d!==e&&!Cn(l[u],d)||d===e&&!(u in l))&&ni(l,u,d)}function Ns(l,u,d){var g=l[u];(!(Rt.call(l,u)&&Cn(g,d))||d===e&&!(u in l))&&ni(l,u,d)}function Rl(l,u){for(var d=l.length;d--;)if(Cn(l[d][0],u))return d;return-1}function HA(l,u,d,g){return ki(l,function(x,w,A){u(g,x,d(x),A)}),g}function Dm(l,u){return l&&On(u,le(u),l)}function zA(l,u){return l&&On(u,Be(u),l)}function ni(l,u,d){u=="__proto__"&&kl?kl(l,u,{configurable:!0,enumerable:!0,value:d,writable:!0}):l[u]=d}function cu(l,u){for(var d=-1,g=u.length,x=O(g),w=l==null;++d<g;)x[d]=w?e:ju(l,u[d]);return x}function Zi(l,u,d){return l===l&&(d!==e&&(l=l<=d?l:d),u!==e&&(l=l>=u?l:u)),l}function rn(l,u,d,g,x,w){var A,M=u&p,R=u&m,V=u&y;if(d&&(A=x?d(l,g,x,w):d(l)),A!==e)return A;if(!zt(l))return l;var W=ct(l);if(W){if(A=RT(l),!M)return Le(l,A)}else{var U=xe(l),G=U==al||U==Ep;if(Pi(l))return Qm(l,M);if(U==Qn||U==ze||G&&!x){if(A=R||G?{}:xg(l),!M)return R?vT(l,zA(A,l)):xT(l,Dm(A,l))}else{if(!It[U])return x?l:{};A=ET(l,U,M)}}w||(w=new Sn);var Q=w.get(l);if(Q)return Q;w.set(l,A),qg(l)?l.forEach(function(st){A.add(rn(st,u,d,st,l,w))}):jg(l)&&l.forEach(function(st,xt){A.set(xt,rn(st,u,d,xt,l,w))});var rt=V?R?Eu:Ru:R?Be:le,pt=W?e:rt(l);return tn(pt||l,function(st,xt){pt&&(xt=st,st=l[xt]),Ns(A,xt,rn(st,u,d,xt,l,w))}),A}function UA(l){var u=le(l);return function(d){return Rm(d,l,u)}}function Rm(l,u,d){var g=d.length;if(l==null)return!g;for(l=Lt(l);g--;){var x=d[g],w=u[x],A=l[x];if(A===e&&!(x in l)||!w(A))return!1}return!0}function Em(l,u,d){if(typeof l!="function")throw new en(o);return $s(function(){l.apply(e,d)},u)}function Fs(l,u,d,g){var x=-1,w=dl,A=!0,M=l.length,R=[],V=u.length;if(!M)return R;d&&(u=Vt(u,$e(d))),g?(w=Jh,A=!1):u.length>=r&&(w=Es,A=!1,u=new Ji(u));t:for(;++x<M;){var W=l[x],U=d==null?W:d(W);if(W=g||W!==0?W:0,A&&U===U){for(var G=V;G--;)if(u[G]===U)continue t;R.push(W)}else w(u,U,g)||R.push(W)}return R}var ki=rg(Ln),Lm=rg(du,!0);function $A(l,u){var d=!0;return ki(l,function(g,x,w){return d=!!u(g,x,w),d}),d}function El(l,u,d){for(var g=-1,x=l.length;++g<x;){var w=l[g],A=u(w);if(A!=null&&(M===e?A===A&&!Ke(A):d(A,M)))var M=A,R=w}return R}function jA(l,u,d,g){var x=l.length;for(d=dt(d),d<0&&(d=-d>x?0:x+d),g=g===e||g>x?x:dt(g),g<0&&(g+=x),g=d>g?0:Yg(g);d<g;)l[d++]=u;return l}function Om(l,u){var d=[];return ki(l,function(g,x,w){u(g,x,w)&&d.push(g)}),d}function ue(l,u,d,g,x){var w=-1,A=l.length;for(d||(d=OT),x||(x=[]);++w<A;){var M=l[w];u>0&&d(M)?u>1?ue(M,u-1,d,g,x):wi(x,M):g||(x[x.length]=M)}return x}var fu=sg(),Bm=sg(!0);function Ln(l,u){return l&&fu(l,u,le)}function du(l,u){return l&&Bm(l,u,le)}function Ll(l,u){return bi(u,function(d){return oi(l[d])})}function Qi(l,u){u=Ti(u,l);for(var d=0,g=u.length;l!=null&&d<g;)l=l[Bn(u[d++])];return d&&d==g?l:e}function Im(l,u,d){var g=u(l);return ct(l)?g:wi(g,d(l))}function ke(l){return l==null?l===e?bC:xC:Yi&&Yi in Lt(l)?MT(l):WT(l)}function pu(l,u){return l>u}function KA(l,u){return l!=null&&Rt.call(l,u)}function qA(l,u){return l!=null&&u in Lt(l)}function GA(l,u,d){return l>=ye(u,d)&&l<ie(u,d)}function mu(l,u,d){for(var g=d?Jh:dl,x=l[0].length,w=l.length,A=w,M=O(w),R=1/0,V=[];A--;){var W=l[A];A&&u&&(W=Vt(W,$e(u))),R=ye(W.length,R),M[A]=!d&&(u||x>=120&&W.length>=120)?new Ji(A&&W):e}W=l[0];var U=-1,G=M[0];t:for(;++U<x&&V.length<R;){var Q=W[U],rt=u?u(Q):Q;if(Q=d||Q!==0?Q:0,!(G?Es(G,rt):g(V,rt,d))){for(A=w;--A;){var pt=M[A];if(!(pt?Es(pt,rt):g(l[A],rt,d)))continue t}G&&G.push(rt),V.push(Q)}}return V}function YA(l,u,d,g){return Ln(l,function(x,w,A){u(g,d(x),w,A)}),g}function Vs(l,u,d){u=Ti(u,l),l=Sg(l,u);var g=l==null?l:l[Bn(on(u))];return g==null?e:Ue(g,l,d)}function _m(l){return qt(l)&&ke(l)==ze}function XA(l){return qt(l)&&ke(l)==Rs}function JA(l){return qt(l)&&ke(l)==As}function Ws(l,u,d,g,x){return l===u?!0:l==null||u==null||!qt(l)&&!qt(u)?l!==l&&u!==u:ZA(l,u,d,g,Ws,x)}function ZA(l,u,d,g,x,w){var A=ct(l),M=ct(u),R=A?Zn:xe(l),V=M?Zn:xe(u);R=R==ze?Qn:R,V=V==ze?Qn:V;var W=R==Qn,U=V==Qn,G=R==V;if(G&&Pi(l)){if(!Pi(u))return!1;A=!0,W=!1}if(G&&!W)return w||(w=new Sn),A||Hr(l)?mg(l,u,d,g,x,w):AT(l,u,R,d,g,x,w);if(!(d&v)){var Q=W&&Rt.call(l,"__wrapped__"),rt=U&&Rt.call(u,"__wrapped__");if(Q||rt){var pt=Q?l.value():l,st=rt?u.value():u;return w||(w=new Sn),x(pt,st,d,g,w)}}return G?(w||(w=new Sn),TT(l,u,d,g,x,w)):!1}function QA(l){return qt(l)&&xe(l)==vn}function gu(l,u,d,g){var x=d.length,w=x,A=!g;if(l==null)return!w;for(l=Lt(l);x--;){var M=d[x];if(A&&M[2]?M[1]!==l[M[0]]:!(M[0]in l))return!1}for(;++x<w;){M=d[x];var R=M[0],V=l[R],W=M[1];if(A&&M[2]){if(V===e&&!(R in l))return!1}else{var U=new Sn;if(g)var G=g(V,W,R,l,u,U);if(!(G===e?Ws(W,V,v|S,g,U):G))return!1}}return!0}function Nm(l){if(!zt(l)||IT(l))return!1;var u=oi(l)?Qk:UC;return u.test(er(l))}function tT(l){return qt(l)&&ke(l)==Ms}function eT(l){return qt(l)&&xe(l)==bn}function nT(l){return qt(l)&&Yl(l.length)&&!!_t[ke(l)]}function Fm(l){return typeof l=="function"?l:l==null?Ie:typeof l=="object"?ct(l)?Hm(l[0],l[1]):Wm(l):o0(l)}function yu(l){if(!Us(l))return sA(l);var u=[];for(var d in Lt(l))Rt.call(l,d)&&d!="constructor"&&u.push(d);return u}function iT(l){if(!zt(l))return VT(l);var u=Us(l),d=[];for(var g in l)g=="constructor"&&(u||!Rt.call(l,g))||d.push(g);return d}function xu(l,u){return l<u}function Vm(l,u){var d=-1,g=Oe(l)?O(l.length):[];return ki(l,function(x,w,A){g[++d]=u(x,w,A)}),g}function Wm(l){var u=Ou(l);return u.length==1&&u[0][2]?bg(u[0][0],u[0][1]):function(d){return d===l||gu(d,l,u)}}function Hm(l,u){return Iu(l)&&vg(u)?bg(Bn(l),u):function(d){var g=ju(d,l);return g===e&&g===u?Ku(d,l):Ws(u,g,v|S)}}function Ol(l,u,d,g,x){l!==u&&fu(u,function(w,A){if(x||(x=new Sn),zt(w))rT(l,u,A,d,Ol,g,x);else{var M=g?g(Nu(l,A),w,A+"",l,u,x):e;M===e&&(M=w),uu(l,A,M)}},Be)}function rT(l,u,d,g,x,w,A){var M=Nu(l,d),R=Nu(u,d),V=A.get(R);if(V){uu(l,d,V);return}var W=w?w(M,R,d+"",l,u,A):e,U=W===e;if(U){var G=ct(R),Q=!G&&Pi(R),rt=!G&&!Q&&Hr(R);W=R,G||Q||rt?ct(M)?W=M:Yt(M)?W=Le(M):Q?(U=!1,W=Qm(R,!0)):rt?(U=!1,W=tg(R,!0)):W=[]:js(R)||nr(R)?(W=M,nr(M)?W=Xg(M):(!zt(M)||oi(M))&&(W=xg(R))):U=!1}U&&(A.set(R,W),x(W,R,g,w,A),A.delete(R)),uu(l,d,W)}function zm(l,u){var d=l.length;if(d)return u+=u<0?d:0,si(u,d)?l[u]:e}function Um(l,u,d){u.length?u=Vt(u,function(w){return ct(w)?function(A){return Qi(A,w.length===1?w[0]:w)}:w}):u=[Ie];var g=-1;u=Vt(u,$e(it()));var x=Vm(l,function(w,A,M){var R=Vt(u,function(V){return V(w)});return{criteria:R,index:++g,value:w}});return Ek(x,function(w,A){return yT(w,A,d)})}function sT(l,u){return $m(l,u,function(d,g){return Ku(l,g)})}function $m(l,u,d){for(var g=-1,x=u.length,w={};++g<x;){var A=u[g],M=Qi(l,A);d(M,A)&&Hs(w,Ti(A,l),M)}return w}function oT(l){return function(u){return Qi(u,l)}}function vu(l,u,d,g){var x=g?Rk:Rr,w=-1,A=u.length,M=l;for(l===u&&(u=Le(u)),d&&(M=Vt(l,$e(d)));++w<A;)for(var R=0,V=u[w],W=d?d(V):V;(R=x(M,W,R,g))>-1;)M!==l&&Cl.call(M,R,1),Cl.call(l,R,1);return l}function jm(l,u){for(var d=l?u.length:0,g=d-1;d--;){var x=u[d];if(d==g||x!==w){var w=x;si(x)?Cl.call(l,x,1):Cu(l,x)}}return l}function bu(l,u){return l+Tl(Am()*(u-l+1))}function lT(l,u,d,g){for(var x=-1,w=ie(Al((u-l)/(d||1)),0),A=O(w);w--;)A[g?w:++x]=l,l+=d;return A}function wu(l,u){var d="";if(!l||u<1||u>gt)return d;do u%2&&(d+=l),u=Tl(u/2),u&&(l+=l);while(u);return d}function mt(l,u){return Fu(wg(l,u,Ie),l+"")}function aT(l){return Pm(zr(l))}function hT(l,u){var d=zr(l);return Ul(d,Zi(u,0,d.length))}function Hs(l,u,d,g){if(!zt(l))return l;u=Ti(u,l);for(var x=-1,w=u.length,A=w-1,M=l;M!=null&&++x<w;){var R=Bn(u[x]),V=d;if(R==="__proto__"||R==="constructor"||R==="prototype")return l;if(x!=A){var W=M[R];V=g?g(W,R,M):e,V===e&&(V=zt(W)?W:si(u[x+1])?[]:{})}Ns(M,R,V),M=M[R]}return l}var Km=Ml?function(l,u){return Ml.set(l,u),l}:Ie,uT=kl?function(l,u){return kl(l,"toString",{configurable:!0,enumerable:!1,value:Gu(u),writable:!0})}:Ie;function cT(l){return Ul(zr(l))}function sn(l,u,d){var g=-1,x=l.length;u<0&&(u=-u>x?0:x+u),d=d>x?x:d,d<0&&(d+=x),x=u>d?0:d-u>>>0,u>>>=0;for(var w=O(x);++g<x;)w[g]=l[g+u];return w}function fT(l,u){var d;return ki(l,function(g,x,w){return d=u(g,x,w),!d}),!!d}function Bl(l,u,d){var g=0,x=l==null?g:l.length;if(typeof u=="number"&&u===u&&x<=Ze){for(;g<x;){var w=g+x>>>1,A=l[w];A!==null&&!Ke(A)&&(d?A<=u:A<u)?g=w+1:x=w}return x}return Su(l,u,Ie,d)}function Su(l,u,d,g){var x=0,w=l==null?0:l.length;if(w===0)return 0;u=d(u);for(var A=u!==u,M=u===null,R=Ke(u),V=u===e;x<w;){var W=Tl((x+w)/2),U=d(l[W]),G=U!==e,Q=U===null,rt=U===U,pt=Ke(U);if(A)var st=g||rt;else V?st=rt&&(g||G):M?st=rt&&G&&(g||!Q):R?st=rt&&G&&!Q&&(g||!pt):Q||pt?st=!1:st=g?U<=u:U<u;st?x=W+1:w=W}return ye(w,oe)}function qm(l,u){for(var d=-1,g=l.length,x=0,w=[];++d<g;){var A=l[d],M=u?u(A):A;if(!d||!Cn(M,R)){var R=M;w[x++]=A===0?0:A}}return w}function Gm(l){return typeof l=="number"?l:Ke(l)?Tt:+l}function je(l){if(typeof l=="string")return l;if(ct(l))return Vt(l,je)+"";if(Ke(l))return Tm?Tm.call(l):"";var u=l+"";return u=="0"&&1/l==-ht?"-0":u}function Ai(l,u,d){var g=-1,x=dl,w=l.length,A=!0,M=[],R=M;if(d)A=!1,x=Jh;else if(w>=r){var V=u?null:CT(l);if(V)return ml(V);A=!1,x=Es,R=new Ji}else R=u?[]:M;t:for(;++g<w;){var W=l[g],U=u?u(W):W;if(W=d||W!==0?W:0,A&&U===U){for(var G=R.length;G--;)if(R[G]===U)continue t;u&&R.push(U),M.push(W)}else x(R,U,d)||(R!==M&&R.push(U),M.push(W))}return M}function Cu(l,u){return u=Ti(u,l),l=Sg(l,u),l==null||delete l[Bn(on(u))]}function Ym(l,u,d,g){return Hs(l,u,d(Qi(l,u)),g)}function Il(l,u,d,g){for(var x=l.length,w=g?x:-1;(g?w--:++w<x)&&u(l[w],w,l););return d?sn(l,g?0:w,g?w+1:x):sn(l,g?w+1:0,g?x:w)}function Xm(l,u){var d=l;return d instanceof vt&&(d=d.value()),Zh(u,function(g,x){return x.func.apply(x.thisArg,wi([g],x.args))},d)}function ku(l,u,d){var g=l.length;if(g<2)return g?Ai(l[0]):[];for(var x=-1,w=O(g);++x<g;)for(var A=l[x],M=-1;++M<g;)M!=x&&(w[x]=Fs(w[x]||A,l[M],u,d));return Ai(ue(w,1),u,d)}function Jm(l,u,d){for(var g=-1,x=l.length,w=u.length,A={};++g<x;){var M=g<w?u[g]:e;d(A,l[g],M)}return A}function Au(l){return Yt(l)?l:[]}function Tu(l){return typeof l=="function"?l:Ie}function Ti(l,u){return ct(l)?l:Iu(l,u)?[l]:Tg(Dt(l))}var dT=mt;function Mi(l,u,d){var g=l.length;return d=d===e?g:d,!u&&d>=g?l:sn(l,u,d)}var Zm=tA||function(l){return he.clearTimeout(l)};function Qm(l,u){if(u)return l.slice();var d=l.length,g=bm?bm(d):new l.constructor(d);return l.copy(g),g}function Mu(l){var u=new l.constructor(l.byteLength);return new wl(u).set(new wl(l)),u}function pT(l,u){var d=u?Mu(l.buffer):l.buffer;return new l.constructor(d,l.byteOffset,l.byteLength)}function mT(l){var u=new l.constructor(l.source,_p.exec(l));return u.lastIndex=l.lastIndex,u}function gT(l){return _s?Lt(_s.call(l)):{}}function tg(l,u){var d=u?Mu(l.buffer):l.buffer;return new l.constructor(d,l.byteOffset,l.length)}function eg(l,u){if(l!==u){var d=l!==e,g=l===null,x=l===l,w=Ke(l),A=u!==e,M=u===null,R=u===u,V=Ke(u);if(!M&&!V&&!w&&l>u||w&&A&&R&&!M&&!V||g&&A&&R||!d&&R||!x)return 1;if(!g&&!w&&!V&&l<u||V&&d&&x&&!g&&!w||M&&d&&x||!A&&x||!R)return-1}return 0}function yT(l,u,d){for(var g=-1,x=l.criteria,w=u.criteria,A=x.length,M=d.length;++g<A;){var R=eg(x[g],w[g]);if(R){if(g>=M)return R;var V=d[g];return R*(V=="desc"?-1:1)}}return l.index-u.index}function ng(l,u,d,g){for(var x=-1,w=l.length,A=d.length,M=-1,R=u.length,V=ie(w-A,0),W=O(R+V),U=!g;++M<R;)W[M]=u[M];for(;++x<A;)(U||x<w)&&(W[d[x]]=l[x]);for(;V--;)W[M++]=l[x++];return W}function ig(l,u,d,g){for(var x=-1,w=l.length,A=-1,M=d.length,R=-1,V=u.length,W=ie(w-M,0),U=O(W+V),G=!g;++x<W;)U[x]=l[x];for(var Q=x;++R<V;)U[Q+R]=u[R];for(;++A<M;)(G||x<w)&&(U[Q+d[A]]=l[x++]);return U}function Le(l,u){var d=-1,g=l.length;for(u||(u=O(g));++d<g;)u[d]=l[d];return u}function On(l,u,d,g){var x=!d;d||(d={});for(var w=-1,A=u.length;++w<A;){var M=u[w],R=g?g(d[M],l[M],M,d,l):e;R===e&&(R=l[M]),x?ni(d,M,R):Ns(d,M,R)}return d}function xT(l,u){return On(l,Bu(l),u)}function vT(l,u){return On(l,gg(l),u)}function _l(l,u){return function(d,g){var x=ct(d)?kk:HA,w=u?u():{};return x(d,l,it(g,2),w)}}function Fr(l){return mt(function(u,d){var g=-1,x=d.length,w=x>1?d[x-1]:e,A=x>2?d[2]:e;for(w=l.length>3&&typeof w=="function"?(x--,w):e,A&&Ae(d[0],d[1],A)&&(w=x<3?e:w,x=1),u=Lt(u);++g<x;){var M=d[g];M&&l(u,M,g,w)}return u})}function rg(l,u){return function(d,g){if(d==null)return d;if(!Oe(d))return l(d,g);for(var x=d.length,w=u?x:-1,A=Lt(d);(u?w--:++w<x)&&g(A[w],w,A)!==!1;);return d}}function sg(l){return function(u,d,g){for(var x=-1,w=Lt(u),A=g(u),M=A.length;M--;){var R=A[l?M:++x];if(d(w[R],R,w)===!1)break}return u}}function bT(l,u,d){var g=u&C,x=zs(l);function w(){var A=this&&this!==he&&this instanceof w?x:l;return A.apply(g?d:this,arguments)}return w}function og(l){return function(u){u=Dt(u);var d=Er(u)?wn(u):e,g=d?d[0]:u.charAt(0),x=d?Mi(d,1).join(""):u.slice(1);return g[l]()+x}}function Vr(l){return function(u){return Zh(r0(i0(u).replace(uk,"")),l,"")}}function zs(l){return function(){var u=arguments;switch(u.length){case 0:return new l;case 1:return new l(u[0]);case 2:return new l(u[0],u[1]);case 3:return new l(u[0],u[1],u[2]);case 4:return new l(u[0],u[1],u[2],u[3]);case 5:return new l(u[0],u[1],u[2],u[3],u[4]);case 6:return new l(u[0],u[1],u[2],u[3],u[4],u[5]);case 7:return new l(u[0],u[1],u[2],u[3],u[4],u[5],u[6])}var d=Nr(l.prototype),g=l.apply(d,u);return zt(g)?g:d}}function wT(l,u,d){var g=zs(l);function x(){for(var w=arguments.length,A=O(w),M=w,R=Wr(x);M--;)A[M]=arguments[M];var V=w<3&&A[0]!==R&&A[w-1]!==R?[]:Si(A,R);if(w-=V.length,w<d)return cg(l,u,Nl,x.placeholder,e,A,V,e,e,d-w);var W=this&&this!==he&&this instanceof x?g:l;return Ue(W,this,A)}return x}function lg(l){return function(u,d,g){var x=Lt(u);if(!Oe(u)){var w=it(d,3);u=le(u),d=function(M){return w(x[M],M,x)}}var A=l(u,d,g);return A>-1?x[w?u[A]:A]:e}}function ag(l){return ri(function(u){var d=u.length,g=d,x=nn.prototype.thru;for(l&&u.reverse();g--;){var w=u[g];if(typeof w!="function")throw new en(o);if(x&&!A&&Hl(w)=="wrapper")var A=new nn([],!0)}for(g=A?g:d;++g<d;){w=u[g];var M=Hl(w),R=M=="wrapper"?Lu(w):e;R&&_u(R[0])&&R[1]==(F|P|L|$)&&!R[4].length&&R[9]==1?A=A[Hl(R[0])].apply(A,R[3]):A=w.length==1&&_u(w)?A[M]():A.thru(w)}return function(){var V=arguments,W=V[0];if(A&&V.length==1&&ct(W))return A.plant(W).value();for(var U=0,G=d?u[U].apply(this,V):W;++U<d;)G=u[U].call(this,G);return G}})}function Nl(l,u,d,g,x,w,A,M,R,V){var W=u&F,U=u&C,G=u&k,Q=u&(P|I),rt=u&j,pt=G?e:zs(l);function st(){for(var xt=arguments.length,St=O(xt),qe=xt;qe--;)St[qe]=arguments[qe];if(Q)var Te=Wr(st),Ge=Ok(St,Te);if(g&&(St=ng(St,g,x,Q)),w&&(St=ig(St,w,A,Q)),xt-=Ge,Q&&xt<V){var Xt=Si(St,Te);return cg(l,u,Nl,st.placeholder,d,St,Xt,M,R,V-xt)}var kn=U?d:this,ai=G?kn[l]:l;return xt=St.length,M?St=HT(St,M):rt&&xt>1&&St.reverse(),W&&R<xt&&(St.length=R),this&&this!==he&&this instanceof st&&(ai=pt||zs(ai)),ai.apply(kn,St)}return st}function hg(l,u){return function(d,g){return YA(d,l,u(g),{})}}function Fl(l,u){return function(d,g){var x;if(d===e&&g===e)return u;if(d!==e&&(x=d),g!==e){if(x===e)return g;typeof d=="string"||typeof g=="string"?(d=je(d),g=je(g)):(d=Gm(d),g=Gm(g)),x=l(d,g)}return x}}function Pu(l){return ri(function(u){return u=Vt(u,$e(it())),mt(function(d){var g=this;return l(u,function(x){return Ue(x,g,d)})})})}function Vl(l,u){u=u===e?" ":je(u);var d=u.length;if(d<2)return d?wu(u,l):u;var g=wu(u,Al(l/Lr(u)));return Er(u)?Mi(wn(g),0,l).join(""):g.slice(0,l)}function ST(l,u,d,g){var x=u&C,w=zs(l);function A(){for(var M=-1,R=arguments.length,V=-1,W=g.length,U=O(W+R),G=this&&this!==he&&this instanceof A?w:l;++V<W;)U[V]=g[V];for(;R--;)U[V++]=arguments[++M];return Ue(G,x?d:this,U)}return A}function ug(l){return function(u,d,g){return g&&typeof g!="number"&&Ae(u,d,g)&&(d=g=e),u=li(u),d===e?(d=u,u=0):d=li(d),g=g===e?u<d?1:-1:li(g),lT(u,d,g,l)}}function Wl(l){return function(u,d){return typeof u=="string"&&typeof d=="string"||(u=ln(u),d=ln(d)),l(u,d)}}function cg(l,u,d,g,x,w,A,M,R,V){var W=u&P,U=W?A:e,G=W?e:A,Q=W?w:e,rt=W?e:w;u|=W?L:_,u&=~(W?_:L),u&T||(u&=-4);var pt=[l,u,x,Q,U,rt,G,M,R,V],st=d.apply(e,pt);return _u(l)&&Cg(st,pt),st.placeholder=g,kg(st,l,u)}function Du(l){var u=ne[l];return function(d,g){if(d=ln(d),g=g==null?0:ye(dt(g),292),g&&km(d)){var x=(Dt(d)+"e").split("e"),w=u(x[0]+"e"+(+x[1]+g));return x=(Dt(w)+"e").split("e"),+(x[0]+"e"+(+x[1]-g))}return u(d)}}var CT=Ir&&1/ml(new Ir([,-0]))[1]==ht?function(l){return new Ir(l)}:Ju;function fg(l){return function(u){var d=xe(u);return d==vn?su(u):d==bn?Wk(u):Lk(u,l(u))}}function ii(l,u,d,g,x,w,A,M){var R=u&k;if(!R&&typeof l!="function")throw new en(o);var V=g?g.length:0;if(V||(u&=-97,g=x=e),A=A===e?A:ie(dt(A),0),M=M===e?M:dt(M),V-=x?x.length:0,u&_){var W=g,U=x;g=x=e}var G=R?e:Lu(l),Q=[l,u,d,g,x,W,U,w,A,M];if(G&&FT(Q,G),l=Q[0],u=Q[1],d=Q[2],g=Q[3],x=Q[4],M=Q[9]=Q[9]===e?R?0:l.length:ie(Q[9]-V,0),!M&&u&(P|I)&&(u&=-25),!u||u==C)var rt=bT(l,u,d);else u==P||u==I?rt=wT(l,u,M):(u==L||u==(C|L))&&!x.length?rt=ST(l,u,d,g):rt=Nl.apply(e,Q);var pt=G?Km:Cg;return kg(pt(rt,Q),l,u)}function dg(l,u,d,g){return l===e||Cn(l,Br[d])&&!Rt.call(g,d)?u:l}function pg(l,u,d,g,x,w){return zt(l)&&zt(u)&&(w.set(u,l),Ol(l,u,e,pg,w),w.delete(u)),l}function kT(l){return js(l)?e:l}function mg(l,u,d,g,x,w){var A=d&v,M=l.length,R=u.length;if(M!=R&&!(A&&R>M))return!1;var V=w.get(l),W=w.get(u);if(V&&W)return V==u&&W==l;var U=-1,G=!0,Q=d&S?new Ji:e;for(w.set(l,u),w.set(u,l);++U<M;){var rt=l[U],pt=u[U];if(g)var st=A?g(pt,rt,U,u,l,w):g(rt,pt,U,l,u,w);if(st!==e){if(st)continue;G=!1;break}if(Q){if(!Qh(u,function(xt,St){if(!Es(Q,St)&&(rt===xt||x(rt,xt,d,g,w)))return Q.push(St)})){G=!1;break}}else if(!(rt===pt||x(rt,pt,d,g,w))){G=!1;break}}return w.delete(l),w.delete(u),G}function AT(l,u,d,g,x,w,A){switch(d){case Pr:if(l.byteLength!=u.byteLength||l.byteOffset!=u.byteOffset)return!1;l=l.buffer,u=u.buffer;case Rs:return!(l.byteLength!=u.byteLength||!w(new wl(l),new wl(u)));case ks:case As:case Ts:return Cn(+l,+u);case ll:return l.name==u.name&&l.message==u.message;case Ms:case Ps:return l==u+"";case vn:var M=su;case bn:var R=g&v;if(M||(M=ml),l.size!=u.size&&!R)return!1;var V=A.get(l);if(V)return V==u;g|=S,A.set(l,u);var W=mg(M(l),M(u),g,x,w,A);return A.delete(l),W;case hl:if(_s)return _s.call(l)==_s.call(u)}return!1}function TT(l,u,d,g,x,w){var A=d&v,M=Ru(l),R=M.length,V=Ru(u),W=V.length;if(R!=W&&!A)return!1;for(var U=R;U--;){var G=M[U];if(!(A?G in u:Rt.call(u,G)))return!1}var Q=w.get(l),rt=w.get(u);if(Q&&rt)return Q==u&&rt==l;var pt=!0;w.set(l,u),w.set(u,l);for(var st=A;++U<R;){G=M[U];var xt=l[G],St=u[G];if(g)var qe=A?g(St,xt,G,u,l,w):g(xt,St,G,l,u,w);if(!(qe===e?xt===St||x(xt,St,d,g,w):qe)){pt=!1;break}st||(st=G=="constructor")}if(pt&&!st){var Te=l.constructor,Ge=u.constructor;Te!=Ge&&"constructor"in l&&"constructor"in u&&!(typeof Te=="function"&&Te instanceof Te&&typeof Ge=="function"&&Ge instanceof Ge)&&(pt=!1)}return w.delete(l),w.delete(u),pt}function ri(l){return Fu(wg(l,e,Rg),l+"")}function Ru(l){return Im(l,le,Bu)}function Eu(l){return Im(l,Be,gg)}var Lu=Ml?function(l){return Ml.get(l)}:Ju;function Hl(l){for(var u=l.name+"",d=_r[u],g=Rt.call(_r,u)?d.length:0;g--;){var x=d[g],w=x.func;if(w==null||w==l)return x.name}return u}function Wr(l){var u=Rt.call(b,"placeholder")?b:l;return u.placeholder}function it(){var l=b.iteratee||Yu;return l=l===Yu?Fm:l,arguments.length?l(arguments[0],arguments[1]):l}function zl(l,u){var d=l.__data__;return BT(u)?d[typeof u=="string"?"string":"hash"]:d.map}function Ou(l){for(var u=le(l),d=u.length;d--;){var g=u[d],x=l[g];u[d]=[g,x,vg(x)]}return u}function tr(l,u){var d=Nk(l,u);return Nm(d)?d:e}function MT(l){var u=Rt.call(l,Yi),d=l[Yi];try{l[Yi]=e;var g=!0}catch{}var x=vl.call(l);return g&&(u?l[Yi]=d:delete l[Yi]),x}var Bu=lu?function(l){return l==null?[]:(l=Lt(l),bi(lu(l),function(u){return Sm.call(l,u)}))}:Zu,gg=lu?function(l){for(var u=[];l;)wi(u,Bu(l)),l=Sl(l);return u}:Zu,xe=ke;(au&&xe(new au(new ArrayBuffer(1)))!=Pr||Os&&xe(new Os)!=vn||hu&&xe(hu.resolve())!=Lp||Ir&&xe(new Ir)!=bn||Bs&&xe(new Bs)!=Ds)&&(xe=function(l){var u=ke(l),d=u==Qn?l.constructor:e,g=d?er(d):"";if(g)switch(g){case hA:return Pr;case uA:return vn;case cA:return Lp;case fA:return bn;case dA:return Ds}return u});function PT(l,u,d){for(var g=-1,x=d.length;++g<x;){var w=d[g],A=w.size;switch(w.type){case"drop":l+=A;break;case"dropRight":u-=A;break;case"take":u=ye(u,l+A);break;case"takeRight":l=ie(l,u-A);break}}return{start:l,end:u}}function DT(l){var u=l.match(IC);return u?u[1].split(_C):[]}function yg(l,u,d){u=Ti(u,l);for(var g=-1,x=u.length,w=!1;++g<x;){var A=Bn(u[g]);if(!(w=l!=null&&d(l,A)))break;l=l[A]}return w||++g!=x?w:(x=l==null?0:l.length,!!x&&Yl(x)&&si(A,x)&&(ct(l)||nr(l)))}function RT(l){var u=l.length,d=new l.constructor(u);return u&&typeof l[0]=="string"&&Rt.call(l,"index")&&(d.index=l.index,d.input=l.input),d}function xg(l){return typeof l.constructor=="function"&&!Us(l)?Nr(Sl(l)):{}}function ET(l,u,d){var g=l.constructor;switch(u){case Rs:return Mu(l);case ks:case As:return new g(+l);case Pr:return pT(l,d);case Oh:case Bh:case Ih:case _h:case Nh:case Fh:case Vh:case Wh:case Hh:return tg(l,d);case vn:return new g;case Ts:case Ps:return new g(l);case Ms:return mT(l);case bn:return new g;case hl:return gT(l)}}function LT(l,u){var d=u.length;if(!d)return l;var g=d-1;return u[g]=(d>1?"& ":"")+u[g],u=u.join(d>2?", ":" "),l.replace(BC,`{
/* [wrapped with `+u+`] */
`)}function OT(l){return ct(l)||nr(l)||!!(Cm&&l&&l[Cm])}function si(l,u){var d=typeof l;return u=u??gt,!!u&&(d=="number"||d!="symbol"&&jC.test(l))&&l>-1&&l%1==0&&l<u}function Ae(l,u,d){if(!zt(d))return!1;var g=typeof u;return(g=="number"?Oe(d)&&si(u,d.length):g=="string"&&u in d)?Cn(d[u],l):!1}function Iu(l,u){if(ct(l))return!1;var d=typeof l;return d=="number"||d=="symbol"||d=="boolean"||l==null||Ke(l)?!0:RC.test(l)||!DC.test(l)||u!=null&&l in Lt(u)}function BT(l){var u=typeof l;return u=="string"||u=="number"||u=="symbol"||u=="boolean"?l!=="__proto__":l===null}function _u(l){var u=Hl(l),d=b[u];if(typeof d!="function"||!(u in vt.prototype))return!1;if(l===d)return!0;var g=Lu(d);return!!g&&l===g[0]}function IT(l){return!!vm&&vm in l}var _T=yl?oi:Qu;function Us(l){var u=l&&l.constructor,d=typeof u=="function"&&u.prototype||Br;return l===d}function vg(l){return l===l&&!zt(l)}function bg(l,u){return function(d){return d==null?!1:d[l]===u&&(u!==e||l in Lt(d))}}function NT(l){var u=ql(l,function(g){return d.size===f&&d.clear(),g}),d=u.cache;return u}function FT(l,u){var d=l[1],g=u[1],x=d|g,w=x<(C|k|F),A=g==F&&d==P||g==F&&d==$&&l[7].length<=u[8]||g==(F|$)&&u[7].length<=u[8]&&d==P;if(!(w||A))return l;g&C&&(l[2]=u[2],x|=d&C?0:T);var M=u[3];if(M){var R=l[3];l[3]=R?ng(R,M,u[4]):M,l[4]=R?Si(l[3],c):u[4]}return M=u[5],M&&(R=l[5],l[5]=R?ig(R,M,u[6]):M,l[6]=R?Si(l[5],c):u[6]),M=u[7],M&&(l[7]=M),g&F&&(l[8]=l[8]==null?u[8]:ye(l[8],u[8])),l[9]==null&&(l[9]=u[9]),l[0]=u[0],l[1]=x,l}function VT(l){var u=[];if(l!=null)for(var d in Lt(l))u.push(d);return u}function WT(l){return vl.call(l)}function wg(l,u,d){return u=ie(u===e?l.length-1:u,0),function(){for(var g=arguments,x=-1,w=ie(g.length-u,0),A=O(w);++x<w;)A[x]=g[u+x];x=-1;for(var M=O(u+1);++x<u;)M[x]=g[x];return M[u]=d(A),Ue(l,this,M)}}function Sg(l,u){return u.length<2?l:Qi(l,sn(u,0,-1))}function HT(l,u){for(var d=l.length,g=ye(u.length,d),x=Le(l);g--;){var w=u[g];l[g]=si(w,d)?x[w]:e}return l}function Nu(l,u){if(!(u==="constructor"&&typeof l[u]=="function")&&u!="__proto__")return l[u]}var Cg=Ag(Km),$s=nA||function(l,u){return he.setTimeout(l,u)},Fu=Ag(uT);function kg(l,u,d){var g=u+"";return Fu(l,LT(g,zT(DT(g),d)))}function Ag(l){var u=0,d=0;return function(){var g=oA(),x=lt-(g-d);if(d=g,x>0){if(++u>=Z)return arguments[0]}else u=0;return l.apply(e,arguments)}}function Ul(l,u){var d=-1,g=l.length,x=g-1;for(u=u===e?g:u;++d<u;){var w=bu(d,x),A=l[w];l[w]=l[d],l[d]=A}return l.length=u,l}var Tg=NT(function(l){var u=[];return l.charCodeAt(0)===46&&u.push(""),l.replace(EC,function(d,g,x,w){u.push(x?w.replace(VC,"$1"):g||d)}),u});function Bn(l){if(typeof l=="string"||Ke(l))return l;var u=l+"";return u=="0"&&1/l==-ht?"-0":u}function er(l){if(l!=null){try{return xl.call(l)}catch{}try{return l+""}catch{}}return""}function zT(l,u){return tn(Jn,function(d){var g="_."+d[0];u&d[1]&&!dl(l,g)&&l.push(g)}),l.sort()}function Mg(l){if(l instanceof vt)return l.clone();var u=new nn(l.__wrapped__,l.__chain__);return u.__actions__=Le(l.__actions__),u.__index__=l.__index__,u.__values__=l.__values__,u}function UT(l,u,d){(d?Ae(l,u,d):u===e)?u=1:u=ie(dt(u),0);var g=l==null?0:l.length;if(!g||u<1)return[];for(var x=0,w=0,A=O(Al(g/u));x<g;)A[w++]=sn(l,x,x+=u);return A}function $T(l){for(var u=-1,d=l==null?0:l.length,g=0,x=[];++u<d;){var w=l[u];w&&(x[g++]=w)}return x}function jT(){var l=arguments.length;if(!l)return[];for(var u=O(l-1),d=arguments[0],g=l;g--;)u[g-1]=arguments[g];return wi(ct(d)?Le(d):[d],ue(u,1))}var KT=mt(function(l,u){return Yt(l)?Fs(l,ue(u,1,Yt,!0)):[]}),qT=mt(function(l,u){var d=on(u);return Yt(d)&&(d=e),Yt(l)?Fs(l,ue(u,1,Yt,!0),it(d,2)):[]}),GT=mt(function(l,u){var d=on(u);return Yt(d)&&(d=e),Yt(l)?Fs(l,ue(u,1,Yt,!0),e,d):[]});function YT(l,u,d){var g=l==null?0:l.length;return g?(u=d||u===e?1:dt(u),sn(l,u<0?0:u,g)):[]}function XT(l,u,d){var g=l==null?0:l.length;return g?(u=d||u===e?1:dt(u),u=g-u,sn(l,0,u<0?0:u)):[]}function JT(l,u){return l&&l.length?Il(l,it(u,3),!0,!0):[]}function ZT(l,u){return l&&l.length?Il(l,it(u,3),!0):[]}function QT(l,u,d,g){var x=l==null?0:l.length;return x?(d&&typeof d!="number"&&Ae(l,u,d)&&(d=0,g=x),jA(l,u,d,g)):[]}function Pg(l,u,d){var g=l==null?0:l.length;if(!g)return-1;var x=d==null?0:dt(d);return x<0&&(x=ie(g+x,0)),pl(l,it(u,3),x)}function Dg(l,u,d){var g=l==null?0:l.length;if(!g)return-1;var x=g-1;return d!==e&&(x=dt(d),x=d<0?ie(g+x,0):ye(x,g-1)),pl(l,it(u,3),x,!0)}function Rg(l){var u=l==null?0:l.length;return u?ue(l,1):[]}function tM(l){var u=l==null?0:l.length;return u?ue(l,ht):[]}function eM(l,u){var d=l==null?0:l.length;return d?(u=u===e?1:dt(u),ue(l,u)):[]}function nM(l){for(var u=-1,d=l==null?0:l.length,g={};++u<d;){var x=l[u];g[x[0]]=x[1]}return g}function Eg(l){return l&&l.length?l[0]:e}function iM(l,u,d){var g=l==null?0:l.length;if(!g)return-1;var x=d==null?0:dt(d);return x<0&&(x=ie(g+x,0)),Rr(l,u,x)}function rM(l){var u=l==null?0:l.length;return u?sn(l,0,-1):[]}var sM=mt(function(l){var u=Vt(l,Au);return u.length&&u[0]===l[0]?mu(u):[]}),oM=mt(function(l){var u=on(l),d=Vt(l,Au);return u===on(d)?u=e:d.pop(),d.length&&d[0]===l[0]?mu(d,it(u,2)):[]}),lM=mt(function(l){var u=on(l),d=Vt(l,Au);return u=typeof u=="function"?u:e,u&&d.pop(),d.length&&d[0]===l[0]?mu(d,e,u):[]});function aM(l,u){return l==null?"":rA.call(l,u)}function on(l){var u=l==null?0:l.length;return u?l[u-1]:e}function hM(l,u,d){var g=l==null?0:l.length;if(!g)return-1;var x=g;return d!==e&&(x=dt(d),x=x<0?ie(g+x,0):ye(x,g-1)),u===u?zk(l,u,x):pl(l,cm,x,!0)}function uM(l,u){return l&&l.length?zm(l,dt(u)):e}var cM=mt(Lg);function Lg(l,u){return l&&l.length&&u&&u.length?vu(l,u):l}function fM(l,u,d){return l&&l.length&&u&&u.length?vu(l,u,it(d,2)):l}function dM(l,u,d){return l&&l.length&&u&&u.length?vu(l,u,e,d):l}var pM=ri(function(l,u){var d=l==null?0:l.length,g=cu(l,u);return jm(l,Vt(u,function(x){return si(x,d)?+x:x}).sort(eg)),g});function mM(l,u){var d=[];if(!(l&&l.length))return d;var g=-1,x=[],w=l.length;for(u=it(u,3);++g<w;){var A=l[g];u(A,g,l)&&(d.push(A),x.push(g))}return jm(l,x),d}function Vu(l){return l==null?l:aA.call(l)}function gM(l,u,d){var g=l==null?0:l.length;return g?(d&&typeof d!="number"&&Ae(l,u,d)?(u=0,d=g):(u=u==null?0:dt(u),d=d===e?g:dt(d)),sn(l,u,d)):[]}function yM(l,u){return Bl(l,u)}function xM(l,u,d){return Su(l,u,it(d,2))}function vM(l,u){var d=l==null?0:l.length;if(d){var g=Bl(l,u);if(g<d&&Cn(l[g],u))return g}return-1}function bM(l,u){return Bl(l,u,!0)}function wM(l,u,d){return Su(l,u,it(d,2),!0)}function SM(l,u){var d=l==null?0:l.length;if(d){var g=Bl(l,u,!0)-1;if(Cn(l[g],u))return g}return-1}function CM(l){return l&&l.length?qm(l):[]}function kM(l,u){return l&&l.length?qm(l,it(u,2)):[]}function AM(l){var u=l==null?0:l.length;return u?sn(l,1,u):[]}function TM(l,u,d){return l&&l.length?(u=d||u===e?1:dt(u),sn(l,0,u<0?0:u)):[]}function MM(l,u,d){var g=l==null?0:l.length;return g?(u=d||u===e?1:dt(u),u=g-u,sn(l,u<0?0:u,g)):[]}function PM(l,u){return l&&l.length?Il(l,it(u,3),!1,!0):[]}function DM(l,u){return l&&l.length?Il(l,it(u,3)):[]}var RM=mt(function(l){return Ai(ue(l,1,Yt,!0))}),EM=mt(function(l){var u=on(l);return Yt(u)&&(u=e),Ai(ue(l,1,Yt,!0),it(u,2))}),LM=mt(function(l){var u=on(l);return u=typeof u=="function"?u:e,Ai(ue(l,1,Yt,!0),e,u)});function OM(l){return l&&l.length?Ai(l):[]}function BM(l,u){return l&&l.length?Ai(l,it(u,2)):[]}function IM(l,u){return u=typeof u=="function"?u:e,l&&l.length?Ai(l,e,u):[]}function Wu(l){if(!(l&&l.length))return[];var u=0;return l=bi(l,function(d){if(Yt(d))return u=ie(d.length,u),!0}),iu(u,function(d){return Vt(l,tu(d))})}function Og(l,u){if(!(l&&l.length))return[];var d=Wu(l);return u==null?d:Vt(d,function(g){return Ue(u,e,g)})}var _M=mt(function(l,u){return Yt(l)?Fs(l,u):[]}),NM=mt(function(l){return ku(bi(l,Yt))}),FM=mt(function(l){var u=on(l);return Yt(u)&&(u=e),ku(bi(l,Yt),it(u,2))}),VM=mt(function(l){var u=on(l);return u=typeof u=="function"?u:e,ku(bi(l,Yt),e,u)}),WM=mt(Wu);function HM(l,u){return Jm(l||[],u||[],Ns)}function zM(l,u){return Jm(l||[],u||[],Hs)}var UM=mt(function(l){var u=l.length,d=u>1?l[u-1]:e;return d=typeof d=="function"?(l.pop(),d):e,Og(l,d)});function Bg(l){var u=b(l);return u.__chain__=!0,u}function $M(l,u){return u(l),l}function $l(l,u){return u(l)}var jM=ri(function(l){var u=l.length,d=u?l[0]:0,g=this.__wrapped__,x=function(w){return cu(w,l)};return u>1||this.__actions__.length||!(g instanceof vt)||!si(d)?this.thru(x):(g=g.slice(d,+d+(u?1:0)),g.__actions__.push({func:$l,args:[x],thisArg:e}),new nn(g,this.__chain__).thru(function(w){return u&&!w.length&&w.push(e),w}))});function KM(){return Bg(this)}function qM(){return new nn(this.value(),this.__chain__)}function GM(){this.__values__===e&&(this.__values__=Gg(this.value()));var l=this.__index__>=this.__values__.length,u=l?e:this.__values__[this.__index__++];return{done:l,value:u}}function YM(){return this}function XM(l){for(var u,d=this;d instanceof Dl;){var g=Mg(d);g.__index__=0,g.__values__=e,u?x.__wrapped__=g:u=g;var x=g;d=d.__wrapped__}return x.__wrapped__=l,u}function JM(){var l=this.__wrapped__;if(l instanceof vt){var u=l;return this.__actions__.length&&(u=new vt(this)),u=u.reverse(),u.__actions__.push({func:$l,args:[Vu],thisArg:e}),new nn(u,this.__chain__)}return this.thru(Vu)}function ZM(){return Xm(this.__wrapped__,this.__actions__)}var QM=_l(function(l,u,d){Rt.call(l,d)?++l[d]:ni(l,d,1)});function tP(l,u,d){var g=ct(l)?hm:$A;return d&&Ae(l,u,d)&&(u=e),g(l,it(u,3))}function eP(l,u){var d=ct(l)?bi:Om;return d(l,it(u,3))}var nP=lg(Pg),iP=lg(Dg);function rP(l,u){return ue(jl(l,u),1)}function sP(l,u){return ue(jl(l,u),ht)}function oP(l,u,d){return d=d===e?1:dt(d),ue(jl(l,u),d)}function Ig(l,u){var d=ct(l)?tn:ki;return d(l,it(u,3))}function _g(l,u){var d=ct(l)?Ak:Lm;return d(l,it(u,3))}var lP=_l(function(l,u,d){Rt.call(l,d)?l[d].push(u):ni(l,d,[u])});function aP(l,u,d,g){l=Oe(l)?l:zr(l),d=d&&!g?dt(d):0;var x=l.length;return d<0&&(d=ie(x+d,0)),Xl(l)?d<=x&&l.indexOf(u,d)>-1:!!x&&Rr(l,u,d)>-1}var hP=mt(function(l,u,d){var g=-1,x=typeof u=="function",w=Oe(l)?O(l.length):[];return ki(l,function(A){w[++g]=x?Ue(u,A,d):Vs(A,u,d)}),w}),uP=_l(function(l,u,d){ni(l,d,u)});function jl(l,u){var d=ct(l)?Vt:Vm;return d(l,it(u,3))}function cP(l,u,d,g){return l==null?[]:(ct(u)||(u=u==null?[]:[u]),d=g?e:d,ct(d)||(d=d==null?[]:[d]),Um(l,u,d))}var fP=_l(function(l,u,d){l[d?0:1].push(u)},function(){return[[],[]]});function dP(l,u,d){var g=ct(l)?Zh:dm,x=arguments.length<3;return g(l,it(u,4),d,x,ki)}function pP(l,u,d){var g=ct(l)?Tk:dm,x=arguments.length<3;return g(l,it(u,4),d,x,Lm)}function mP(l,u){var d=ct(l)?bi:Om;return d(l,Gl(it(u,3)))}function gP(l){var u=ct(l)?Pm:aT;return u(l)}function yP(l,u,d){(d?Ae(l,u,d):u===e)?u=1:u=dt(u);var g=ct(l)?VA:hT;return g(l,u)}function xP(l){var u=ct(l)?WA:cT;return u(l)}function vP(l){if(l==null)return 0;if(Oe(l))return Xl(l)?Lr(l):l.length;var u=xe(l);return u==vn||u==bn?l.size:yu(l).length}function bP(l,u,d){var g=ct(l)?Qh:fT;return d&&Ae(l,u,d)&&(u=e),g(l,it(u,3))}var wP=mt(function(l,u){if(l==null)return[];var d=u.length;return d>1&&Ae(l,u[0],u[1])?u=[]:d>2&&Ae(u[0],u[1],u[2])&&(u=[u[0]]),Um(l,ue(u,1),[])}),Kl=eA||function(){return he.Date.now()};function SP(l,u){if(typeof u!="function")throw new en(o);return l=dt(l),function(){if(--l<1)return u.apply(this,arguments)}}function Ng(l,u,d){return u=d?e:u,u=l&&u==null?l.length:u,ii(l,F,e,e,e,e,u)}function Fg(l,u){var d;if(typeof u!="function")throw new en(o);return l=dt(l),function(){return--l>0&&(d=u.apply(this,arguments)),l<=1&&(u=e),d}}var Hu=mt(function(l,u,d){var g=C;if(d.length){var x=Si(d,Wr(Hu));g|=L}return ii(l,g,u,d,x)}),Vg=mt(function(l,u,d){var g=C|k;if(d.length){var x=Si(d,Wr(Vg));g|=L}return ii(u,g,l,d,x)});function Wg(l,u,d){u=d?e:u;var g=ii(l,P,e,e,e,e,e,u);return g.placeholder=Wg.placeholder,g}function Hg(l,u,d){u=d?e:u;var g=ii(l,I,e,e,e,e,e,u);return g.placeholder=Hg.placeholder,g}function zg(l,u,d){var g,x,w,A,M,R,V=0,W=!1,U=!1,G=!0;if(typeof l!="function")throw new en(o);u=ln(u)||0,zt(d)&&(W=!!d.leading,U="maxWait"in d,w=U?ie(ln(d.maxWait)||0,u):w,G="trailing"in d?!!d.trailing:G);function Q(Xt){var kn=g,ai=x;return g=x=e,V=Xt,A=l.apply(ai,kn),A}function rt(Xt){return V=Xt,M=$s(xt,u),W?Q(Xt):A}function pt(Xt){var kn=Xt-R,ai=Xt-V,l0=u-kn;return U?ye(l0,w-ai):l0}function st(Xt){var kn=Xt-R,ai=Xt-V;return R===e||kn>=u||kn<0||U&&ai>=w}function xt(){var Xt=Kl();if(st(Xt))return St(Xt);M=$s(xt,pt(Xt))}function St(Xt){return M=e,G&&g?Q(Xt):(g=x=e,A)}function qe(){M!==e&&Zm(M),V=0,g=R=x=M=e}function Te(){return M===e?A:St(Kl())}function Ge(){var Xt=Kl(),kn=st(Xt);if(g=arguments,x=this,R=Xt,kn){if(M===e)return rt(R);if(U)return Zm(M),M=$s(xt,u),Q(R)}return M===e&&(M=$s(xt,u)),A}return Ge.cancel=qe,Ge.flush=Te,Ge}var CP=mt(function(l,u){return Em(l,1,u)}),kP=mt(function(l,u,d){return Em(l,ln(u)||0,d)});function AP(l){return ii(l,j)}function ql(l,u){if(typeof l!="function"||u!=null&&typeof u!="function")throw new en(o);var d=function(){var g=arguments,x=u?u.apply(this,g):g[0],w=d.cache;if(w.has(x))return w.get(x);var A=l.apply(this,g);return d.cache=w.set(x,A)||w,A};return d.cache=new(ql.Cache||ei),d}ql.Cache=ei;function Gl(l){if(typeof l!="function")throw new en(o);return function(){var u=arguments;switch(u.length){case 0:return!l.call(this);case 1:return!l.call(this,u[0]);case 2:return!l.call(this,u[0],u[1]);case 3:return!l.call(this,u[0],u[1],u[2])}return!l.apply(this,u)}}function TP(l){return Fg(2,l)}var MP=dT(function(l,u){u=u.length==1&&ct(u[0])?Vt(u[0],$e(it())):Vt(ue(u,1),$e(it()));var d=u.length;return mt(function(g){for(var x=-1,w=ye(g.length,d);++x<w;)g[x]=u[x].call(this,g[x]);return Ue(l,this,g)})}),zu=mt(function(l,u){var d=Si(u,Wr(zu));return ii(l,L,e,u,d)}),Ug=mt(function(l,u){var d=Si(u,Wr(Ug));return ii(l,_,e,u,d)}),PP=ri(function(l,u){return ii(l,$,e,e,e,u)});function DP(l,u){if(typeof l!="function")throw new en(o);return u=u===e?u:dt(u),mt(l,u)}function RP(l,u){if(typeof l!="function")throw new en(o);return u=u==null?0:ie(dt(u),0),mt(function(d){var g=d[u],x=Mi(d,0,u);return g&&wi(x,g),Ue(l,this,x)})}function EP(l,u,d){var g=!0,x=!0;if(typeof l!="function")throw new en(o);return zt(d)&&(g="leading"in d?!!d.leading:g,x="trailing"in d?!!d.trailing:x),zg(l,u,{leading:g,maxWait:u,trailing:x})}function LP(l){return Ng(l,1)}function OP(l,u){return zu(Tu(u),l)}function BP(){if(!arguments.length)return[];var l=arguments[0];return ct(l)?l:[l]}function IP(l){return rn(l,y)}function _P(l,u){return u=typeof u=="function"?u:e,rn(l,y,u)}function NP(l){return rn(l,p|y)}function FP(l,u){return u=typeof u=="function"?u:e,rn(l,p|y,u)}function VP(l,u){return u==null||Rm(l,u,le(u))}function Cn(l,u){return l===u||l!==l&&u!==u}var WP=Wl(pu),HP=Wl(function(l,u){return l>=u}),nr=_m((function(){return arguments})())?_m:function(l){return qt(l)&&Rt.call(l,"callee")&&!Sm.call(l,"callee")},ct=O.isArray,zP=im?$e(im):XA;function Oe(l){return l!=null&&Yl(l.length)&&!oi(l)}function Yt(l){return qt(l)&&Oe(l)}function UP(l){return l===!0||l===!1||qt(l)&&ke(l)==ks}var Pi=iA||Qu,$P=rm?$e(rm):JA;function jP(l){return qt(l)&&l.nodeType===1&&!js(l)}function KP(l){if(l==null)return!0;if(Oe(l)&&(ct(l)||typeof l=="string"||typeof l.splice=="function"||Pi(l)||Hr(l)||nr(l)))return!l.length;var u=xe(l);if(u==vn||u==bn)return!l.size;if(Us(l))return!yu(l).length;for(var d in l)if(Rt.call(l,d))return!1;return!0}function qP(l,u){return Ws(l,u)}function GP(l,u,d){d=typeof d=="function"?d:e;var g=d?d(l,u):e;return g===e?Ws(l,u,e,d):!!g}function Uu(l){if(!qt(l))return!1;var u=ke(l);return u==ll||u==yC||typeof l.message=="string"&&typeof l.name=="string"&&!js(l)}function YP(l){return typeof l=="number"&&km(l)}function oi(l){if(!zt(l))return!1;var u=ke(l);return u==al||u==Ep||u==ol||u==vC}function $g(l){return typeof l=="number"&&l==dt(l)}function Yl(l){return typeof l=="number"&&l>-1&&l%1==0&&l<=gt}function zt(l){var u=typeof l;return l!=null&&(u=="object"||u=="function")}function qt(l){return l!=null&&typeof l=="object"}var jg=sm?$e(sm):QA;function XP(l,u){return l===u||gu(l,u,Ou(u))}function JP(l,u,d){return d=typeof d=="function"?d:e,gu(l,u,Ou(u),d)}function ZP(l){return Kg(l)&&l!=+l}function QP(l){if(_T(l))throw new ut(s);return Nm(l)}function tD(l){return l===null}function eD(l){return l==null}function Kg(l){return typeof l=="number"||qt(l)&&ke(l)==Ts}function js(l){if(!qt(l)||ke(l)!=Qn)return!1;var u=Sl(l);if(u===null)return!0;var d=Rt.call(u,"constructor")&&u.constructor;return typeof d=="function"&&d instanceof d&&xl.call(d)==Jk}var $u=om?$e(om):tT;function nD(l){return $g(l)&&l>=-gt&&l<=gt}var qg=lm?$e(lm):eT;function Xl(l){return typeof l=="string"||!ct(l)&&qt(l)&&ke(l)==Ps}function Ke(l){return typeof l=="symbol"||qt(l)&&ke(l)==hl}var Hr=am?$e(am):nT;function iD(l){return l===e}function rD(l){return qt(l)&&xe(l)==Ds}function sD(l){return qt(l)&&ke(l)==wC}var oD=Wl(xu),lD=Wl(function(l,u){return l<=u});function Gg(l){if(!l)return[];if(Oe(l))return Xl(l)?wn(l):Le(l);if(Ls&&l[Ls])return Vk(l[Ls]());var u=xe(l),d=u==vn?su:u==bn?ml:zr;return d(l)}function li(l){if(!l)return l===0?l:0;if(l=ln(l),l===ht||l===-ht){var u=l<0?-1:1;return u*yt}return l===l?l:0}function dt(l){var u=li(l),d=u%1;return u===u?d?u-d:u:0}function Yg(l){return l?Zi(dt(l),0,Pt):0}function ln(l){if(typeof l=="number")return l;if(Ke(l))return Tt;if(zt(l)){var u=typeof l.valueOf=="function"?l.valueOf():l;l=zt(u)?u+"":u}if(typeof l!="string")return l===0?l:+l;l=pm(l);var d=zC.test(l);return d||$C.test(l)?Sk(l.slice(2),d?2:8):HC.test(l)?Tt:+l}function Xg(l){return On(l,Be(l))}function aD(l){return l?Zi(dt(l),-gt,gt):l===0?l:0}function Dt(l){return l==null?"":je(l)}var hD=Fr(function(l,u){if(Us(u)||Oe(u)){On(u,le(u),l);return}for(var d in u)Rt.call(u,d)&&Ns(l,d,u[d])}),Jg=Fr(function(l,u){On(u,Be(u),l)}),Jl=Fr(function(l,u,d,g){On(u,Be(u),l,g)}),uD=Fr(function(l,u,d,g){On(u,le(u),l,g)}),cD=ri(cu);function fD(l,u){var d=Nr(l);return u==null?d:Dm(d,u)}var dD=mt(function(l,u){l=Lt(l);var d=-1,g=u.length,x=g>2?u[2]:e;for(x&&Ae(u[0],u[1],x)&&(g=1);++d<g;)for(var w=u[d],A=Be(w),M=-1,R=A.length;++M<R;){var V=A[M],W=l[V];(W===e||Cn(W,Br[V])&&!Rt.call(l,V))&&(l[V]=w[V])}return l}),pD=mt(function(l){return l.push(e,pg),Ue(Zg,e,l)});function mD(l,u){return um(l,it(u,3),Ln)}function gD(l,u){return um(l,it(u,3),du)}function yD(l,u){return l==null?l:fu(l,it(u,3),Be)}function xD(l,u){return l==null?l:Bm(l,it(u,3),Be)}function vD(l,u){return l&&Ln(l,it(u,3))}function bD(l,u){return l&&du(l,it(u,3))}function wD(l){return l==null?[]:Ll(l,le(l))}function SD(l){return l==null?[]:Ll(l,Be(l))}function ju(l,u,d){var g=l==null?e:Qi(l,u);return g===e?d:g}function CD(l,u){return l!=null&&yg(l,u,KA)}function Ku(l,u){return l!=null&&yg(l,u,qA)}var kD=hg(function(l,u,d){u!=null&&typeof u.toString!="function"&&(u=vl.call(u)),l[u]=d},Gu(Ie)),AD=hg(function(l,u,d){u!=null&&typeof u.toString!="function"&&(u=vl.call(u)),Rt.call(l,u)?l[u].push(d):l[u]=[d]},it),TD=mt(Vs);function le(l){return Oe(l)?Mm(l):yu(l)}function Be(l){return Oe(l)?Mm(l,!0):iT(l)}function MD(l,u){var d={};return u=it(u,3),Ln(l,function(g,x,w){ni(d,u(g,x,w),g)}),d}function PD(l,u){var d={};return u=it(u,3),Ln(l,function(g,x,w){ni(d,x,u(g,x,w))}),d}var DD=Fr(function(l,u,d){Ol(l,u,d)}),Zg=Fr(function(l,u,d,g){Ol(l,u,d,g)}),RD=ri(function(l,u){var d={};if(l==null)return d;var g=!1;u=Vt(u,function(w){return w=Ti(w,l),g||(g=w.length>1),w}),On(l,Eu(l),d),g&&(d=rn(d,p|m|y,kT));for(var x=u.length;x--;)Cu(d,u[x]);return d});function ED(l,u){return Qg(l,Gl(it(u)))}var LD=ri(function(l,u){return l==null?{}:sT(l,u)});function Qg(l,u){if(l==null)return{};var d=Vt(Eu(l),function(g){return[g]});return u=it(u),$m(l,d,function(g,x){return u(g,x[0])})}function OD(l,u,d){u=Ti(u,l);var g=-1,x=u.length;for(x||(x=1,l=e);++g<x;){var w=l==null?e:l[Bn(u[g])];w===e&&(g=x,w=d),l=oi(w)?w.call(l):w}return l}function BD(l,u,d){return l==null?l:Hs(l,u,d)}function ID(l,u,d,g){return g=typeof g=="function"?g:e,l==null?l:Hs(l,u,d,g)}var t0=fg(le),e0=fg(Be);function _D(l,u,d){var g=ct(l),x=g||Pi(l)||Hr(l);if(u=it(u,4),d==null){var w=l&&l.constructor;x?d=g?new w:[]:zt(l)?d=oi(w)?Nr(Sl(l)):{}:d={}}return(x?tn:Ln)(l,function(A,M,R){return u(d,A,M,R)}),d}function ND(l,u){return l==null?!0:Cu(l,u)}function FD(l,u,d){return l==null?l:Ym(l,u,Tu(d))}function VD(l,u,d,g){return g=typeof g=="function"?g:e,l==null?l:Ym(l,u,Tu(d),g)}function zr(l){return l==null?[]:ru(l,le(l))}function WD(l){return l==null?[]:ru(l,Be(l))}function HD(l,u,d){return d===e&&(d=u,u=e),d!==e&&(d=ln(d),d=d===d?d:0),u!==e&&(u=ln(u),u=u===u?u:0),Zi(ln(l),u,d)}function zD(l,u,d){return u=li(u),d===e?(d=u,u=0):d=li(d),l=ln(l),GA(l,u,d)}function UD(l,u,d){if(d&&typeof d!="boolean"&&Ae(l,u,d)&&(u=d=e),d===e&&(typeof u=="boolean"?(d=u,u=e):typeof l=="boolean"&&(d=l,l=e)),l===e&&u===e?(l=0,u=1):(l=li(l),u===e?(u=l,l=0):u=li(u)),l>u){var g=l;l=u,u=g}if(d||l%1||u%1){var x=Am();return ye(l+x*(u-l+wk("1e-"+((x+"").length-1))),u)}return bu(l,u)}var $D=Vr(function(l,u,d){return u=u.toLowerCase(),l+(d?n0(u):u)});function n0(l){return qu(Dt(l).toLowerCase())}function i0(l){return l=Dt(l),l&&l.replace(KC,Bk).replace(ck,"")}function jD(l,u,d){l=Dt(l),u=je(u);var g=l.length;d=d===e?g:Zi(dt(d),0,g);var x=d;return d-=u.length,d>=0&&l.slice(d,x)==u}function KD(l){return l=Dt(l),l&&TC.test(l)?l.replace(Bp,Ik):l}function qD(l){return l=Dt(l),l&&LC.test(l)?l.replace(zh,"\\$&"):l}var GD=Vr(function(l,u,d){return l+(d?"-":"")+u.toLowerCase()}),YD=Vr(function(l,u,d){return l+(d?" ":"")+u.toLowerCase()}),XD=og("toLowerCase");function JD(l,u,d){l=Dt(l),u=dt(u);var g=u?Lr(l):0;if(!u||g>=u)return l;var x=(u-g)/2;return Vl(Tl(x),d)+l+Vl(Al(x),d)}function ZD(l,u,d){l=Dt(l),u=dt(u);var g=u?Lr(l):0;return u&&g<u?l+Vl(u-g,d):l}function QD(l,u,d){l=Dt(l),u=dt(u);var g=u?Lr(l):0;return u&&g<u?Vl(u-g,d)+l:l}function t2(l,u,d){return d||u==null?u=0:u&&(u=+u),lA(Dt(l).replace(Uh,""),u||0)}function e2(l,u,d){return(d?Ae(l,u,d):u===e)?u=1:u=dt(u),wu(Dt(l),u)}function n2(){var l=arguments,u=Dt(l[0]);return l.length<3?u:u.replace(l[1],l[2])}var i2=Vr(function(l,u,d){return l+(d?"_":"")+u.toLowerCase()});function r2(l,u,d){return d&&typeof d!="number"&&Ae(l,u,d)&&(u=d=e),d=d===e?Pt:d>>>0,d?(l=Dt(l),l&&(typeof u=="string"||u!=null&&!$u(u))&&(u=je(u),!u&&Er(l))?Mi(wn(l),0,d):l.split(u,d)):[]}var s2=Vr(function(l,u,d){return l+(d?" ":"")+qu(u)});function o2(l,u,d){return l=Dt(l),d=d==null?0:Zi(dt(d),0,l.length),u=je(u),l.slice(d,d+u.length)==u}function l2(l,u,d){var g=b.templateSettings;d&&Ae(l,u,d)&&(u=e),l=Dt(l),u=Jl({},u,g,dg);var x=Jl({},u.imports,g.imports,dg),w=le(x),A=ru(x,w),M,R,V=0,W=u.interpolate||ul,U="__p += '",G=ou((u.escape||ul).source+"|"+W.source+"|"+(W===Ip?WC:ul).source+"|"+(u.evaluate||ul).source+"|$","g"),Q="//# sourceURL="+(Rt.call(u,"sourceURL")?(u.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++gk+"]")+`
`;l.replace(G,function(st,xt,St,qe,Te,Ge){return St||(St=qe),U+=l.slice(V,Ge).replace(qC,_k),xt&&(M=!0,U+=`' +
__e(`+xt+`) +
'`),Te&&(R=!0,U+=`';
`+Te+`;
__p += '`),St&&(U+=`' +
((__t = (`+St+`)) == null ? '' : __t) +
'`),V=Ge+st.length,st}),U+=`';
`;var rt=Rt.call(u,"variable")&&u.variable;if(!rt)U=`with (obj) {
`+U+`
}
`;else if(FC.test(rt))throw new ut(a);U=(R?U.replace(SC,""):U).replace(CC,"$1").replace(kC,"$1;"),U="function("+(rt||"obj")+`) {
`+(rt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(M?", __e = _.escape":"")+(R?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+U+`return __p
}`;var pt=s0(function(){return Mt(w,Q+"return "+U).apply(e,A)});if(pt.source=U,Uu(pt))throw pt;return pt}function a2(l){return Dt(l).toLowerCase()}function h2(l){return Dt(l).toUpperCase()}function u2(l,u,d){if(l=Dt(l),l&&(d||u===e))return pm(l);if(!l||!(u=je(u)))return l;var g=wn(l),x=wn(u),w=mm(g,x),A=gm(g,x)+1;return Mi(g,w,A).join("")}function c2(l,u,d){if(l=Dt(l),l&&(d||u===e))return l.slice(0,xm(l)+1);if(!l||!(u=je(u)))return l;var g=wn(l),x=gm(g,wn(u))+1;return Mi(g,0,x).join("")}function f2(l,u,d){if(l=Dt(l),l&&(d||u===e))return l.replace(Uh,"");if(!l||!(u=je(u)))return l;var g=wn(l),x=mm(g,wn(u));return Mi(g,x).join("")}function d2(l,u){var d=tt,g=et;if(zt(u)){var x="separator"in u?u.separator:x;d="length"in u?dt(u.length):d,g="omission"in u?je(u.omission):g}l=Dt(l);var w=l.length;if(Er(l)){var A=wn(l);w=A.length}if(d>=w)return l;var M=d-Lr(g);if(M<1)return g;var R=A?Mi(A,0,M).join(""):l.slice(0,M);if(x===e)return R+g;if(A&&(M+=R.length-M),$u(x)){if(l.slice(M).search(x)){var V,W=R;for(x.global||(x=ou(x.source,Dt(_p.exec(x))+"g")),x.lastIndex=0;V=x.exec(W);)var U=V.index;R=R.slice(0,U===e?M:U)}}else if(l.indexOf(je(x),M)!=M){var G=R.lastIndexOf(x);G>-1&&(R=R.slice(0,G))}return R+g}function p2(l){return l=Dt(l),l&&AC.test(l)?l.replace(Op,Uk):l}var m2=Vr(function(l,u,d){return l+(d?" ":"")+u.toUpperCase()}),qu=og("toUpperCase");function r0(l,u,d){return l=Dt(l),u=d?e:u,u===e?Fk(l)?Kk(l):Dk(l):l.match(u)||[]}var s0=mt(function(l,u){try{return Ue(l,e,u)}catch(d){return Uu(d)?d:new ut(d)}}),g2=ri(function(l,u){return tn(u,function(d){d=Bn(d),ni(l,d,Hu(l[d],l))}),l});function y2(l){var u=l==null?0:l.length,d=it();return l=u?Vt(l,function(g){if(typeof g[1]!="function")throw new en(o);return[d(g[0]),g[1]]}):[],mt(function(g){for(var x=-1;++x<u;){var w=l[x];if(Ue(w[0],this,g))return Ue(w[1],this,g)}})}function x2(l){return UA(rn(l,p))}function Gu(l){return function(){return l}}function v2(l,u){return l==null||l!==l?u:l}var b2=ag(),w2=ag(!0);function Ie(l){return l}function Yu(l){return Fm(typeof l=="function"?l:rn(l,p))}function S2(l){return Wm(rn(l,p))}function C2(l,u){return Hm(l,rn(u,p))}var k2=mt(function(l,u){return function(d){return Vs(d,l,u)}}),A2=mt(function(l,u){return function(d){return Vs(l,d,u)}});function Xu(l,u,d){var g=le(u),x=Ll(u,g);d==null&&!(zt(u)&&(x.length||!g.length))&&(d=u,u=l,l=this,x=Ll(u,le(u)));var w=!(zt(d)&&"chain"in d)||!!d.chain,A=oi(l);return tn(x,function(M){var R=u[M];l[M]=R,A&&(l.prototype[M]=function(){var V=this.__chain__;if(w||V){var W=l(this.__wrapped__),U=W.__actions__=Le(this.__actions__);return U.push({func:R,args:arguments,thisArg:l}),W.__chain__=V,W}return R.apply(l,wi([this.value()],arguments))})}),l}function T2(){return he._===this&&(he._=Zk),this}function Ju(){}function M2(l){return l=dt(l),mt(function(u){return zm(u,l)})}var P2=Pu(Vt),D2=Pu(hm),R2=Pu(Qh);function o0(l){return Iu(l)?tu(Bn(l)):oT(l)}function E2(l){return function(u){return l==null?e:Qi(l,u)}}var L2=ug(),O2=ug(!0);function Zu(){return[]}function Qu(){return!1}function B2(){return{}}function I2(){return""}function _2(){return!0}function N2(l,u){if(l=dt(l),l<1||l>gt)return[];var d=Pt,g=ye(l,Pt);u=it(u),l-=Pt;for(var x=iu(g,u);++d<l;)u(d);return x}function F2(l){return ct(l)?Vt(l,Bn):Ke(l)?[l]:Le(Tg(Dt(l)))}function V2(l){var u=++Xk;return Dt(l)+u}var W2=Fl(function(l,u){return l+u},0),H2=Du("ceil"),z2=Fl(function(l,u){return l/u},1),U2=Du("floor");function $2(l){return l&&l.length?El(l,Ie,pu):e}function j2(l,u){return l&&l.length?El(l,it(u,2),pu):e}function K2(l){return fm(l,Ie)}function q2(l,u){return fm(l,it(u,2))}function G2(l){return l&&l.length?El(l,Ie,xu):e}function Y2(l,u){return l&&l.length?El(l,it(u,2),xu):e}var X2=Fl(function(l,u){return l*u},1),J2=Du("round"),Z2=Fl(function(l,u){return l-u},0);function Q2(l){return l&&l.length?nu(l,Ie):0}function tR(l,u){return l&&l.length?nu(l,it(u,2)):0}return b.after=SP,b.ary=Ng,b.assign=hD,b.assignIn=Jg,b.assignInWith=Jl,b.assignWith=uD,b.at=cD,b.before=Fg,b.bind=Hu,b.bindAll=g2,b.bindKey=Vg,b.castArray=BP,b.chain=Bg,b.chunk=UT,b.compact=$T,b.concat=jT,b.cond=y2,b.conforms=x2,b.constant=Gu,b.countBy=QM,b.create=fD,b.curry=Wg,b.curryRight=Hg,b.debounce=zg,b.defaults=dD,b.defaultsDeep=pD,b.defer=CP,b.delay=kP,b.difference=KT,b.differenceBy=qT,b.differenceWith=GT,b.drop=YT,b.dropRight=XT,b.dropRightWhile=JT,b.dropWhile=ZT,b.fill=QT,b.filter=eP,b.flatMap=rP,b.flatMapDeep=sP,b.flatMapDepth=oP,b.flatten=Rg,b.flattenDeep=tM,b.flattenDepth=eM,b.flip=AP,b.flow=b2,b.flowRight=w2,b.fromPairs=nM,b.functions=wD,b.functionsIn=SD,b.groupBy=lP,b.initial=rM,b.intersection=sM,b.intersectionBy=oM,b.intersectionWith=lM,b.invert=kD,b.invertBy=AD,b.invokeMap=hP,b.iteratee=Yu,b.keyBy=uP,b.keys=le,b.keysIn=Be,b.map=jl,b.mapKeys=MD,b.mapValues=PD,b.matches=S2,b.matchesProperty=C2,b.memoize=ql,b.merge=DD,b.mergeWith=Zg,b.method=k2,b.methodOf=A2,b.mixin=Xu,b.negate=Gl,b.nthArg=M2,b.omit=RD,b.omitBy=ED,b.once=TP,b.orderBy=cP,b.over=P2,b.overArgs=MP,b.overEvery=D2,b.overSome=R2,b.partial=zu,b.partialRight=Ug,b.partition=fP,b.pick=LD,b.pickBy=Qg,b.property=o0,b.propertyOf=E2,b.pull=cM,b.pullAll=Lg,b.pullAllBy=fM,b.pullAllWith=dM,b.pullAt=pM,b.range=L2,b.rangeRight=O2,b.rearg=PP,b.reject=mP,b.remove=mM,b.rest=DP,b.reverse=Vu,b.sampleSize=yP,b.set=BD,b.setWith=ID,b.shuffle=xP,b.slice=gM,b.sortBy=wP,b.sortedUniq=CM,b.sortedUniqBy=kM,b.split=r2,b.spread=RP,b.tail=AM,b.take=TM,b.takeRight=MM,b.takeRightWhile=PM,b.takeWhile=DM,b.tap=$M,b.throttle=EP,b.thru=$l,b.toArray=Gg,b.toPairs=t0,b.toPairsIn=e0,b.toPath=F2,b.toPlainObject=Xg,b.transform=_D,b.unary=LP,b.union=RM,b.unionBy=EM,b.unionWith=LM,b.uniq=OM,b.uniqBy=BM,b.uniqWith=IM,b.unset=ND,b.unzip=Wu,b.unzipWith=Og,b.update=FD,b.updateWith=VD,b.values=zr,b.valuesIn=WD,b.without=_M,b.words=r0,b.wrap=OP,b.xor=NM,b.xorBy=FM,b.xorWith=VM,b.zip=WM,b.zipObject=HM,b.zipObjectDeep=zM,b.zipWith=UM,b.entries=t0,b.entriesIn=e0,b.extend=Jg,b.extendWith=Jl,Xu(b,b),b.add=W2,b.attempt=s0,b.camelCase=$D,b.capitalize=n0,b.ceil=H2,b.clamp=HD,b.clone=IP,b.cloneDeep=NP,b.cloneDeepWith=FP,b.cloneWith=_P,b.conformsTo=VP,b.deburr=i0,b.defaultTo=v2,b.divide=z2,b.endsWith=jD,b.eq=Cn,b.escape=KD,b.escapeRegExp=qD,b.every=tP,b.find=nP,b.findIndex=Pg,b.findKey=mD,b.findLast=iP,b.findLastIndex=Dg,b.findLastKey=gD,b.floor=U2,b.forEach=Ig,b.forEachRight=_g,b.forIn=yD,b.forInRight=xD,b.forOwn=vD,b.forOwnRight=bD,b.get=ju,b.gt=WP,b.gte=HP,b.has=CD,b.hasIn=Ku,b.head=Eg,b.identity=Ie,b.includes=aP,b.indexOf=iM,b.inRange=zD,b.invoke=TD,b.isArguments=nr,b.isArray=ct,b.isArrayBuffer=zP,b.isArrayLike=Oe,b.isArrayLikeObject=Yt,b.isBoolean=UP,b.isBuffer=Pi,b.isDate=$P,b.isElement=jP,b.isEmpty=KP,b.isEqual=qP,b.isEqualWith=GP,b.isError=Uu,b.isFinite=YP,b.isFunction=oi,b.isInteger=$g,b.isLength=Yl,b.isMap=jg,b.isMatch=XP,b.isMatchWith=JP,b.isNaN=ZP,b.isNative=QP,b.isNil=eD,b.isNull=tD,b.isNumber=Kg,b.isObject=zt,b.isObjectLike=qt,b.isPlainObject=js,b.isRegExp=$u,b.isSafeInteger=nD,b.isSet=qg,b.isString=Xl,b.isSymbol=Ke,b.isTypedArray=Hr,b.isUndefined=iD,b.isWeakMap=rD,b.isWeakSet=sD,b.join=aM,b.kebabCase=GD,b.last=on,b.lastIndexOf=hM,b.lowerCase=YD,b.lowerFirst=XD,b.lt=oD,b.lte=lD,b.max=$2,b.maxBy=j2,b.mean=K2,b.meanBy=q2,b.min=G2,b.minBy=Y2,b.stubArray=Zu,b.stubFalse=Qu,b.stubObject=B2,b.stubString=I2,b.stubTrue=_2,b.multiply=X2,b.nth=uM,b.noConflict=T2,b.noop=Ju,b.now=Kl,b.pad=JD,b.padEnd=ZD,b.padStart=QD,b.parseInt=t2,b.random=UD,b.reduce=dP,b.reduceRight=pP,b.repeat=e2,b.replace=n2,b.result=OD,b.round=J2,b.runInContext=D,b.sample=gP,b.size=vP,b.snakeCase=i2,b.some=bP,b.sortedIndex=yM,b.sortedIndexBy=xM,b.sortedIndexOf=vM,b.sortedLastIndex=bM,b.sortedLastIndexBy=wM,b.sortedLastIndexOf=SM,b.startCase=s2,b.startsWith=o2,b.subtract=Z2,b.sum=Q2,b.sumBy=tR,b.template=l2,b.times=N2,b.toFinite=li,b.toInteger=dt,b.toLength=Yg,b.toLower=a2,b.toNumber=ln,b.toSafeInteger=aD,b.toString=Dt,b.toUpper=h2,b.trim=u2,b.trimEnd=c2,b.trimStart=f2,b.truncate=d2,b.unescape=p2,b.uniqueId=V2,b.upperCase=m2,b.upperFirst=qu,b.each=Ig,b.eachRight=_g,b.first=Eg,Xu(b,(function(){var l={};return Ln(b,function(u,d){Rt.call(b.prototype,d)||(l[d]=u)}),l})(),{chain:!1}),b.VERSION=i,tn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(l){b[l].placeholder=b}),tn(["drop","take"],function(l,u){vt.prototype[l]=function(d){d=d===e?1:ie(dt(d),0);var g=this.__filtered__&&!u?new vt(this):this.clone();return g.__filtered__?g.__takeCount__=ye(d,g.__takeCount__):g.__views__.push({size:ye(d,Pt),type:l+(g.__dir__<0?"Right":"")}),g},vt.prototype[l+"Right"]=function(d){return this.reverse()[l](d).reverse()}}),tn(["filter","map","takeWhile"],function(l,u){var d=u+1,g=d==at||d==Kt;vt.prototype[l]=function(x){var w=this.clone();return w.__iteratees__.push({iteratee:it(x,3),type:d}),w.__filtered__=w.__filtered__||g,w}}),tn(["head","last"],function(l,u){var d="take"+(u?"Right":"");vt.prototype[l]=function(){return this[d](1).value()[0]}}),tn(["initial","tail"],function(l,u){var d="drop"+(u?"":"Right");vt.prototype[l]=function(){return this.__filtered__?new vt(this):this[d](1)}}),vt.prototype.compact=function(){return this.filter(Ie)},vt.prototype.find=function(l){return this.filter(l).head()},vt.prototype.findLast=function(l){return this.reverse().find(l)},vt.prototype.invokeMap=mt(function(l,u){return typeof l=="function"?new vt(this):this.map(function(d){return Vs(d,l,u)})}),vt.prototype.reject=function(l){return this.filter(Gl(it(l)))},vt.prototype.slice=function(l,u){l=dt(l);var d=this;return d.__filtered__&&(l>0||u<0)?new vt(d):(l<0?d=d.takeRight(-l):l&&(d=d.drop(l)),u!==e&&(u=dt(u),d=u<0?d.dropRight(-u):d.take(u-l)),d)},vt.prototype.takeRightWhile=function(l){return this.reverse().takeWhile(l).reverse()},vt.prototype.toArray=function(){return this.take(Pt)},Ln(vt.prototype,function(l,u){var d=/^(?:filter|find|map|reject)|While$/.test(u),g=/^(?:head|last)$/.test(u),x=b[g?"take"+(u=="last"?"Right":""):u],w=g||/^find/.test(u);x&&(b.prototype[u]=function(){var A=this.__wrapped__,M=g?[1]:arguments,R=A instanceof vt,V=M[0],W=R||ct(A),U=function(xt){var St=x.apply(b,wi([xt],M));return g&&G?St[0]:St};W&&d&&typeof V=="function"&&V.length!=1&&(R=W=!1);var G=this.__chain__,Q=!!this.__actions__.length,rt=w&&!G,pt=R&&!Q;if(!w&&W){A=pt?A:new vt(this);var st=l.apply(A,M);return st.__actions__.push({func:$l,args:[U],thisArg:e}),new nn(st,G)}return rt&&pt?l.apply(this,M):(st=this.thru(U),rt?g?st.value()[0]:st.value():st)})}),tn(["pop","push","shift","sort","splice","unshift"],function(l){var u=gl[l],d=/^(?:push|sort|unshift)$/.test(l)?"tap":"thru",g=/^(?:pop|shift)$/.test(l);b.prototype[l]=function(){var x=arguments;if(g&&!this.__chain__){var w=this.value();return u.apply(ct(w)?w:[],x)}return this[d](function(A){return u.apply(ct(A)?A:[],x)})}}),Ln(vt.prototype,function(l,u){var d=b[u];if(d){var g=d.name+"";Rt.call(_r,g)||(_r[g]=[]),_r[g].push({name:u,func:d})}}),_r[Nl(e,k).name]=[{name:"wrapper",func:e}],vt.prototype.clone=pA,vt.prototype.reverse=mA,vt.prototype.value=gA,b.prototype.at=jM,b.prototype.chain=KM,b.prototype.commit=qM,b.prototype.next=GM,b.prototype.plant=XM,b.prototype.reverse=JM,b.prototype.toJSON=b.prototype.valueOf=b.prototype.value=ZM,b.prototype.first=b.prototype.head,Ls&&(b.prototype[Ls]=YM),b}),Or=qk();Gi?((Gi.exports=Or)._=Or,Yh._=Or):he._=Or}).call(H5)})(oo,oo.exports)),oo.exports}z5();rR.createRoot(document.getElementById("root")).render(z.jsx(E.StrictMode,{children:z.jsx(W5,{})}));const Y5=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));export{Vw as R,ME as W,D5 as a,E5 as b,R5 as c,P5 as d,Y5 as p,HI as t,dd as u};

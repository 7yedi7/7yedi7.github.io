import{c as xe,j,s as Wd,a as Id,b as $d,d as t1,e as e1,f as a1,g as n1,h as i1,i as l1,k as s1,l as r1,m as o1,n as u1,o as c1,p as h1,q as f1,r as d1,t as g1,u as m1,v as p1,w as y1,x as _1,y as v1,z as S1,A as b1,B as x1,C as E1,D as C1,E as T1,F as A1,G as M1,H as R1,I as N1,J as O1,K as z1,L as D1,M as G1,N as w1,O as H1,P as B1,Q as U1,R as L1,S as j1,T as k1,U as Y1,V as q1,W as X1,X as P1,Y as V1,Z as K1,_ as xt,$ as t0,a0 as e0,a1 as oo,a2 as ce,a3 as Mt,a4 as Q1,a5 as Z1,a6 as J1,a7 as F1,a8 as W1,a9 as I1,aa as $1,ab as t2,ac as e2,ad as a2}from"./index-n81svLZw.js";import{r as n2,g as i2}from"./vendor-BzrpNAyj.js";import"./lodash-DU5GzXJ0.js";/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l2=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],s2=xe("copy",l2);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r2=[["path",{d:"m15 18-.722-3.25",key:"1j64jw"}],["path",{d:"M2 8a10.645 10.645 0 0 0 20 0",key:"1e7gxb"}],["path",{d:"m20 15-1.726-2.05",key:"1cnuld"}],["path",{d:"m4 15 1.726-2.05",key:"1dsqqd"}],["path",{d:"m9 18 .722-3.25",key:"ypw2yx"}]],o2=xe("eye-closed",r2);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u2=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],c2=xe("eye",u2);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h2=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["rect",{width:"10",height:"8",x:"7",y:"8",rx:"1",key:"vys8me"}]],f2=xe("fullscreen",h2);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d2=[["path",{d:"M12 3v17a1 1 0 0 1-1 1H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v6a1 1 0 0 1-1 1H3",key:"11za1p"}],["path",{d:"m16 19 2 2 4-4",key:"1b14m6"}]],g2=xe("grid-2x2-check",d2);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m2=[["path",{d:"M12 3v17a1 1 0 0 1-1 1H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v6a1 1 0 0 1-1 1H3",key:"11za1p"}],["path",{d:"m16 16 5 5",key:"8tpb07"}],["path",{d:"m16 21 5-5",key:"193jll"}]],p2=xe("grid-2x2-x",m2);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y2=[["path",{d:"M15 15.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997a1 1 0 0 1-1.517-.86z",key:"nrt1m3"}],["path",{d:"M21 12.17V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h6",key:"99hgts"}],["path",{d:"m6 21 5-5",key:"1wyjai"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}]],_2=xe("image-play",y2);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v2=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],S2=xe("image",v2);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b2=[["path",{d:"M11 13a3 3 0 1 1 2.83-4H14a2 2 0 0 1 0 4z",key:"1da4q6"}],["path",{d:"M12 17v4",key:"1riwvh"}],["path",{d:"M8 21h8",key:"1ev6f3"}],["rect",{x:"2",y:"3",width:"20",height:"14",rx:"2",key:"x3v2xh"}]],x2=xe("monitor-cloud",b2);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E2=[["path",{d:"M2 6h4",key:"aawbzj"}],["path",{d:"M2 10h4",key:"l0bgd4"}],["path",{d:"M2 14h4",key:"1gsvsf"}],["path",{d:"M2 18h4",key:"1bu2t1"}],["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["path",{d:"M16 2v20",key:"rotuqe"}]],C2=xe("notebook",E2);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T2=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],A2=xe("play",T2);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M2=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],R2=xe("save",M2);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N2=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],O2=xe("upload",N2),z2=({closeFunction:o})=>j.jsx("div",{className:"flex items-center justify-center h-screen bg-neutral-900 overflow-hidden relative",children:j.jsxs("div",{className:"relative",children:[j.jsx("div",{style:{"--a":0},className:"btn-sensor sensor-n"}),j.jsx("div",{style:{"--a":45},className:"btn-sensor sensor-ne"}),j.jsx("div",{style:{"--a":90},className:"btn-sensor sensor-e"}),j.jsx("div",{style:{"--a":135},className:"btn-sensor sensor-se"}),j.jsx("div",{style:{"--a":180},className:"btn-sensor sensor-s"}),j.jsx("div",{style:{"--a":225},className:"btn-sensor sensor-sw"}),j.jsx("div",{style:{"--a":270},className:"btn-sensor sensor-w"}),j.jsx("div",{style:{"--a":315},className:"btn-sensor sensor-nw"}),j.jsxs("button",{className:"ms-4 btn-button bg-white border-4 border-white rounded-full p-8 relative z-10 cursor-pointer",children:[j.jsx("div",{className:"btn-lid absolute inset-0 rounded-full"}),j.jsx("div",{className:"btn-pupil bg-black border-[10px] border-sky-300 rounded-full w-10 h-10 transition-all duration-200 ease-out relative"})]}),j.jsxs("button",{className:"btn-button bg-white border-4 border-white rounded-full p-8 relative z-10 cursor-pointer ml-16",children:[j.jsx("div",{className:"btn-lid absolute inset-0 rounded-full"}),j.jsx("div",{className:"btn-pupil bg-black border-[10px] border-sky-300 rounded-full w-10 h-10 transition-all duration-200 ease-out relative"})]}),j.jsxs("div",{className:"mt-8 text-gray-200 text-xl text-center",children:["20 sekunt 20 metr ",j.jsx("br",{})," uzaklykdakay islendik jisime ",j.jsx("br",{})," seredip gözüňizi çaltlyk bilen gyrpyň! ",j.jsx("br",{}),j.jsx("div",{className:" mt-2 border absolute left-30 border-gray-50 px-4 py-1 rounded-2xl cursor-pointer z-50 bg-neutral-900",onClick:o,children:"Çykmak"})]})]})}),Dr=[`<!doctype html>
      <html>
      <head>
      <meta charset="utf-8" />
       <title>Turkmen Runtime</title>
       <style>
      html, body { margin: 0; padding: 0; height: 100%; color: white; }
      #scene { position: relative; width: 100%; height: 100%; }
      .obj { position: absolute; border: 2px solid white; border-radius: 8px; }
     </style>
     </head>
      <body>
    <div id="scene"></div>
    <script>
      (function(){
        const scene = document.getElementById('scene');

    window.sahypa = scene;

    

    window.figura = function({
      x = 0,
      y = 0,
      width = 80,
      height = 80,
      arkaFon = "green",
      size,
      tekst = "",
      textColor = "black",
      fontFamily = "monospace",
      fontSize = 32,
      border,
      borderRadius = 0,
      borderColor = "white",
      borderWidth = 0,
      padding = 4,
      align = "center",
      verticalAlign = "center",
      fontWeight,
      fontStyle,
      image = "",
      zIndex = 1,
      animasiya = 0.2,
      display = "flex",
      opacity = 1,
      } = {}) {
      const el = document.createElement("div");
      el.className = "obj";
      el.style.background = arkaFon;
      el.style.color = textColor;
      el.style.opacity = opacity;
      el.style.fontSize = fontSize + "px";
      el.style.fontWeight = fontWeight;
      if (size !== undefined && size !== null) {
      el.style.width = el.style.height = size + "px";
      } else {
      el.style.width = (width ?? 80) + "px";
      el.style.height = (height ?? 80) + "px";
      }

      el.style.left = x + "px";
      el.style.top = y + "px";
      el.style.position = "absolute";
      el.style.zIndex = zIndex;
      el.style.border = border ?? borderWidth + "px solid " + borderColor;
      el.style.borderRadius = typeof borderRadius === "number" ? borderRadius + "px" : borderRadius;

      el.style.display = display;
      el.style.alignItems =
        verticalAlign === "top"
          ? "flex-start"
          : verticalAlign === "bottom"
          ? "flex-end"
          : "center";
      el.style.justifyContent =
        align === "left"
          ? "flex-start"
          : align === "right"
          ? "flex-end"
          : "center";
      el.style.overflow = "hidden";
      el.style.boxSizing = "border-box";

      if (image ) {
        const img = document.createElement("img");
        if (image === "surat_1"){
              img.src = "${Wd}";
        } else if (image === "surat_2"){
              img.src = "${Id}";
        } else if (image === "surat_3"){
              img.src = "${$d}";
        } else if (image === "surat_4"){
              img.src = "${t1}";
        } else if (image === "surat_5"){
              img.src = "${e1}";
        } else if (image === "surat_6"){
              img.src = "${a1}";
        } else if (image === "surat_7"){
              img.src = "${n1}";
        } else if (image === "surat_8"){
              img.src = "${i1}";
        } else if (image === "surat_9"){
              img.src = "${l1}";
        } else if (image === "surat_10"){
              img.src = "${s1}";
        } else if (image === "surat_11"){
              img.src = "${r1}";
        } else if (image === "surat_12"){
              img.src = "${o1}";
        } else if (image === "surat_13"){
              img.src = "${u1}";
        } else if (image === "surat_14") {
    img.src = "${c1}";
} else if (image === "surat_15") {
    img.src = "${h1}";
} else if (image === "surat_16") {
    img.src = "${f1}";
} else if (image === "surat_17") {
    img.src = "${d1}";
} else if (image === "surat_18") {
    img.src = "${g1}";
} else if (image === "surat_19") {
    img.src = "${m1}";
} else if (image === "surat_20") {
    img.src = "${p1}";
} else if (image === "surat_21") {
    img.src = "${y1}";
} else if (image === "surat_22") {
    img.src = "${_1}";
} else if (image === "surat_23") {
    img.src = "${v1}";
} else if (image === "surat_24") {
    img.src = "${S1}";
} else if (image === "surat_25") {
    img.src = "${b1}";
} else if (image === "surat_26") {
    img.src = "${x1}";
} else if (image === "surat_27") {
    img.src = "${E1}";
} else if (image === "surat_28") {
    img.src = "${C1}";
} else if (image === "surat_29") {
    img.src = "${T1}";
} else if (image === "surat_30") {
    img.src = "${A1}";
} else if (image === "surat_31") {
    img.src = "${M1}";
} else if (image === "surat_32") {
    img.src = "${R1}";
} else if (image === "surat_33") {
    img.src = "${N1}";
} else if (image === "surat_34") {
    img.src = "${O1}";
} else if (image === "surat_35") {
    img.src = "${z1}";
} else if (image === "surat_36") {
    img.src = "${D1}";
} else if (image === "surat_37") {
    img.src = "${G1}";
} else if (image === "surat_38") {
    img.src = "${w1}";
} else if (image === "surat_39") {
    img.src = "${H1}";
} else if (image === "surat_40") {
    img.src = "${B1}";
} else if (image === "surat_41") {
    img.src = "${U1}";
} else if (image === "surat_42") {
    img.src = "${L1}";
} else if (image === "surat_43") {
    img.src = "${j1}";
} else if (image === "surat_44") {
    img.src = "${k1}";
} else if (image === "surat_45") {
    img.src = "${Y1}";
} else if (image === "surat_46") {
    img.src = "${q1}";
} else if (image === "surat_47") {
    img.src = "${X1}";
} else if (image === "surat_48") {
    img.src = "${P1}";
} else if (image === "surat_49") {
    img.src = "${V1}";
} else if (image === "surat_50") {
    img.src = "${K1}";
}
 
        else {
        img.src = image
        }
        img.style.position = "absolute";
        img.style.top = "0";
        img.style.left = "0";
        img.style.width = "100%";
        img.style.height = "100%";
        img.style.objectFit = "contain";
        img.style.borderRadius =
        typeof borderRadius === "number" ? borderRadius + "px" : borderRadius;



        img.style.zIndex = "1";
        el.appendChild(img);
        el._img = img;
      }


        el.style.transition = "all " + animasiya + " linear";








    // ✅ Text layer (always on top)
      const text = document.createElement("div");
      text.textContent = tekst;
      text.style.position = "relative";
      text.style.zIndex = "2";
      text.style.width = "100%";
      text.style.textAlign = "center";
      text.style.color = textColor;
      text.style.fontFamily = fontFamily;
      text.style.fontSize = fontSize + "px";
      text.style.fontWeight = fontWeight ? "fontWeight" : "normal";
      text.style.fontStyle = fontStyle ? "fontStyle" : "normal";
      el.appendChild(text);

      scene.appendChild(el);

      // ============ helpers ============
      el.data = {};
      el.tekst = function (key, val) {
        if (arguments.length === 1) {
          el.textContent = String(key);
          return;
        }
        el.data[key] = val;
        el.textContent = Object.entries(el.data)
          .map(([k, v]) => k + ": " + v)
          .join("\\n");
      };



      el.uytget = function(updates = {}) {
      for (const [key, val] of Object.entries(updates)) {
        if (key === "width") el.style.width = val + "px";
        else if (key === "height") el.style.height = val + "px";
        else if (key === "arkaFon") el.style.background = val;
        else if (key === "color") el.style.color = val;
        else if (key === "display") el.style.display = val;
        else if (key === "opacity") el.style.opacity = val;

        else el[key] = val;
      }
      };





      el.get = function (key) {
        return el.data[key];
      };

      el.clear = function () {
        el.data = {};
        el.textContent = tekst;
      };


      Object.defineProperty(el, "x", {
        get() {
          return parseFloat(el.style.left) || 0;
        },
        set(v) {
          el.style.left = (Number(v) || 0) + "px";
        },
      });
      Object.defineProperty(el, "y", {
        get() {
          return parseFloat(el.style.top) || 0;
        },
        set(v) {
          el.style.top = (Number(v) || 0) + "px";
        },
      });

      el.move = function (dx, dy) {
        el.x += dx;
        el.y += dy;
      };

      el.renk = function (c) {
        el.style.background = c;
      };
      el.color = el.renk;

      el.tekst = function (t) {
        el.textContent = t;
      };

      el.beyikligi = el.style.width;


      el._onClick = null;
      el.onClick = function (fn) {
        el._onClick = fn;
      };

    el.surat = function (url) {
      if (!el._img) {
        el._img = document.createElement("img");
        el._img.style.width = "100%";
        el._img.style.height = "100%";
        el._img.style.objectFit = "cover";
        el._img.style.borderRadius = borderRadius + "px";
        el._img.style.position = "absolute";
        el._img.style.top = "0";
        el._img.style.left = "0";
        el._img.style.zIndex = "0";
        el.style.position = "absolute"; // so absolute image stays inside
        el.appendChild(el._img);
      }
      el._img.src = url;
    };

      el.addEventListener("click", function () {
        try {
          if (typeof el._onClick === "function") {
            el._onClick();
          } else {
            parent.postMessage(
              {
                source: "turkmen-runtime",
                payload: { type: "log", args: [el.textContent + " basyldy"] },
              },
              "*"
            );
          }
        } catch (err) {
          parent.postMessage(
            {
              source: "turkmen-runtime",
              payload: { type: "error", args: [err.message] },
            },
            "*"
          );
        }
      });

      return el;
    };



    window.tekstMeydanca = function({
        x = 0,
        y = 0,
        width = 350,
        height = 60,
        baslangycTekst = "Bir zat ýaz...",
        textColor = "black",
        arkaFon = "white",
        borderColor = "gray",
        borderRadius = 8,
        fontSize = 32,
        fontFamily = "monospace",
        padding,
        fontWeight,
        fontStyle,
        zIndex = 1,
        opacity = 1,
        tekst,
    } = {}) {
      const el = document.createElement("input");
      el.type = "text";
      el.placeholder = baslangycTekst;
      el.style.position = "absolute";
      el.style.left = x + "px";
      el.style.top = y + "px";
      el.style.width = (width ?? size ?? 100) + "px";
      el.style.height = (height ?? size ?? 100) + "px";
      el.style.background = arkaFon;
      el.style.color = textColor;
      el.style.border = "1px solid " + borderColor;
      el.style.borderRadius = typeof borderRadius === "number" ? borderRadius + "px" : borderRadius;
      el.style.padding = "4px";
      el.style.fontSize = fontSize + "px";
      el.style.fontFamily = "monospace";
      el.name = tekst;

      scene.appendChild(el);

      // helper to read value
      el.al = function() {
        return el.value;
      };

      // helper to set value
      el.yaz = function(text) {
        el.value = text;
      };

      // helper to clear
      el.arassala = function() {
        el.value = "";
      };

      el.onChange = (e) => {
        el.value = e.target.value;
      };

      return el;
    };


            const send = (type, args) => {
              const payload = { type, args: args.map(a=>{
                try { return typeof a === 'object' ? JSON.parse(JSON.stringify(a)) : a; } catch (e) { return String(a); }
              }) };
              parent.postMessage({ source: 'turkmen-runtime', payload }, '*');
            };

            ['log','info','warn','error'].forEach(fn=>{
              const orig = console[fn];
              console[fn] = function(...args){ send(fn, args); orig.apply(console, args); }
            });

            window.addEventListener('message', async (ev) => {
              if (!ev.data || ev.data.source !== 'turkmen-parent') return;
              try {
                const code = ev.data.code;
                const AsyncFunction = Object.getPrototypeOf(async function(){}).constructor;
                const fn = new AsyncFunction(code);
                Promise.resolve(fn()).catch(err=>{
                  parent.postMessage({ source:'turkmen-runtime', payload: { type: 'error', args: [err.message] }}, '*');          
                });
              } catch (err) {
                parent.postMessage({ source:'turkmen-runtime', payload: { type: 'error', args: [err.message] }}, '*');    
              }
            });
          })();
        `],D2={guty:"let",hemiselik:"const",eger:"if",bolmasa:"else",netije:"return",for_each:"for",gaytala:"while",konsol:"console",yaz:"log",funksiya:"function","=>":"=>",tipUytgeyan:"typeof",dogry:"true",yalnys:"false",bellenenWagtSon:"setTimeout",bellenenWagtDowamynda:"setInterval",bellenenWagtyArassala:"clearInterval",uzynlyk:"length",bos:"null",bolmek:"split",ekran:"display",hemmeHarplarKici:"toLowerCase",hemmeHarplarUly:"toUpperCase",goy:"set",renk:"color",basylanda:"onClick",uzynlygy:"width",beyikligi:"height",kwadrat:"size",ady:"name",tekstRenk:"textColor",tekstOlceg:"fontSize",tekstStil:"fontStyle",tekstYogynlyk:"fontWeight",gysaran:"italic",yogyn:"bold",Soz:"String",gapyrgaRadius:"borderRadius",gapyrgaRenk:"borderColor",gapyrgaGalynlygy:"borderWidth",gapyrga:"border",ickiAralyk:"padding",yok:"none",gorunmeyan:"transparent",gyzyl:"red",gok:"blue",sary:"yellow",ak:"white",gara:"black",yasyl:"green",uzynlygy:"width",beyikligi:"height",surat:"image",gorunyan:"opacity",hadysanyDinle:"addEventListener",ekran:"window"},G2=""+new URL("index-DfCNHfOg.txt",import.meta.url).href,w2=({Icon:o,LightTextColor:t="#555f6e",DarkTextColor:n="#f5f5f5"})=>{const{darkMode:l}=xt.useContext(t0);return j.jsx(H2,{children:j.jsx("div",{className:`${l?"btn-smallDark":"btn-small"} relative`,children:j.jsx("div",{className:`${l?"btn-small-contentDark":"btn-btn-small-content"} `,children:j.jsxs("span",{className:`${l?"spanTextDark":"spanText"} `,children:[o&&j.jsx(o,{style:{color:l?n:t},className:"w-5 h-5"}),o==e0?j.jsx("input",{className:"opacity-0 absolute top-0 left-0 z-10 p-3 cursor-pointer",type:"color",value:"#44db1a"}):null]})})})})},H2=oo.div`
  .btn-small {
    position: relative;
    padding: 0;
    width: 42px; /* Smaller width */
    height: 42px; /* Smaller height */
    border: 2px solid #888888;
    outline: none;
    background-color: #f4f5f6;
    border-radius: 50%; /* Adjusted border-radius */
    box-shadow: -3px -10px 15px #ffffff, -3px -5px 8px #ffffff,
      -10px 0px 15px #ffffff, 3px 10px 12px rgba(0, 0, 0, 0.2);
    transition: 0.3s ease-in-out; /* Smooth animation */
    cursor: pointer;
  }

  /* Hover animation: Scaling the button and adjusting shadow */
  .btn-small:hover {
    transform: scale(1.1); /* Button grows slightly */
    box-shadow: -3px -15px 20px #ffffff, -3px -10px 10px #ffffff,
      -10px 0px 15px #ffffff, 5px 15px 15px rgba(0, 0, 0, 0.3);
  }

  /* Active click animation */
  .btn-small:active {
    transform: scale(0.95); /* Button shrinks slightly */
    box-shadow: none; /* Shadow disappears when clicked */
  }

  .btn-small-content {
    position: relative;
    display: grid;
    padding: 10px; /* Smaller padding */
    width: 100%;
    height: 100%;
    grid-template-columns: 1fr 1fr 1fr 1fr;
    grid-template-rows: 1fr 1fr;
    box-shadow: inset 0px -4px 0px #dddddd, 0px -4px 0px #f4f5f6;
    border-radius: 50%;
    transition: 0.3s ease-in-out; /* Smooth animation */
    z-index: 1;
  }

  /* Icon hover effect: Floating effect */

  /* Hover effect on icon */
  .btn-small:hover {
    transform: translateY(-8px); /* Move the icon up slightly on hover */
  }

  .spanText {
    position: absolute;
    top: 20%;
    left: 26%;
  }

  /* Hover effect on text */
  .btn-small:hover {
    transform: translateY(-2px); /* Move the text up slightly on hover */
  }


// DarkMode 
/* Using HSL or brighter HEX codes makes the "pressed" effect more realistic */

.btn-smallDark {
    position: relative;
    padding: 0;
    width: 42px;
    height: 42px;
    /* Dark Mode Background Color */
    background-color: #2c323a; 
    /* Subtle Border (optional) */
    border: 2px solid #666a70; 
    outline: none;
    border-radius: 50%;
    /* Dark Mode Neumorphic Shadows */
    box-shadow: 
      -5px -5px 10px rgba(71, 79, 89, 0.4), /* Lighter highlight (top-left) */
      5px 5px 10px rgba(0, 0, 0, 0.6);      /* Darker shadow (bottom-right) */
    transition: all 0.3s ease-in-out;
    cursor: pointer;
}

/* Hover animation */
.btn-smallDark:hover {
    transform: scale(1.1);
    box-shadow: 
      -6px -6px 15px rgba(71, 79, 89, 0.5), 
      6px 6px 15px rgba(0, 0, 0, 0.8);
}

/* Active click animation (pressed state) */
.btn-smallDark:active {
    transform: scale(0.95);
    /* Inset shadows make it look physically pressed down */
    box-shadow: 
      inset 4px 4px 8px rgba(0, 0, 0, 0.4),          /* Dark inset shadow */
      inset -4px -4px 8px rgba(71, 79, 89, 0.2);     /* Light inset highlight */
}

.btn-small-contentDark {
    position: relative;
    display: grid;
    padding: 10px;
    width: 100%;
    height: 100%;
    grid-template-columns: 1fr 1fr 1fr 1fr;
    grid-template-rows: 1fr 1fr;
    /* Subtle inner shadow for the content area */
    box-shadow: inset 0px -4px 0px #1a1e22, 0px -4px 0px #3c424a; 
    border-radius: 50%;
    transition: 0.3s ease-in-out;
    z-index: 1;
}

.spanTextDark {
    position: absolute;
    top: 20%;
    left: 26%;
    /* Light text color for contrast on dark background */
    color: #b0b0b0; 
}

/* Hover effects for icons/text (attached to the main button hover) */
.btn-smallDark:hover,
.btn-smallDark:hover  > * /* assuming content children */ {
  transform: translateY(-2px); /* Move the text/icons up slightly on hover */
}

`,B2=()=>{const o=async()=>{const n=await(await fetch(G2)).text(),l=new Blob([n],{type:"text/html"}),s=URL.createObjectURL(l),u=document.createElement("a");u.href=s,u.download="yedi.html",u.click(),URL.revokeObjectURL(s)};return j.jsx("button",{onClick:o,className:"p-2",children:j.jsx(ce,{Icon:x2})})};var a0={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},dh=Mt.createContext&&Mt.createContext(a0),U2=["attr","size","title"];function L2(o,t){if(o==null)return{};var n=j2(o,t),l,s;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(o);for(s=0;s<u.length;s++)l=u[s],!(t.indexOf(l)>=0)&&Object.prototype.propertyIsEnumerable.call(o,l)&&(n[l]=o[l])}return n}function j2(o,t){if(o==null)return{};var n={};for(var l in o)if(Object.prototype.hasOwnProperty.call(o,l)){if(t.indexOf(l)>=0)continue;n[l]=o[l]}return n}function Yl(){return Yl=Object.assign?Object.assign.bind():function(o){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(o[l]=n[l])}return o},Yl.apply(this,arguments)}function gh(o,t){var n=Object.keys(o);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(o);t&&(l=l.filter(function(s){return Object.getOwnPropertyDescriptor(o,s).enumerable})),n.push.apply(n,l)}return n}function ql(o){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?gh(Object(n),!0).forEach(function(l){k2(o,l,n[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(n)):gh(Object(n)).forEach(function(l){Object.defineProperty(o,l,Object.getOwnPropertyDescriptor(n,l))})}return o}function k2(o,t,n){return t=Y2(t),t in o?Object.defineProperty(o,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):o[t]=n,o}function Y2(o){var t=q2(o,"string");return typeof t=="symbol"?t:t+""}function q2(o,t){if(typeof o!="object"||!o)return o;var n=o[Symbol.toPrimitive];if(n!==void 0){var l=n.call(o,t);if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(o)}function n0(o){return o&&o.map((t,n)=>Mt.createElement(t.tag,ql({key:n},t.attr),n0(t.child)))}function X2(o){return t=>Mt.createElement(P2,Yl({attr:ql({},o.attr)},t),n0(o.child))}function P2(o){var t=n=>{var{attr:l,size:s,title:u}=o,h=L2(o,U2),f=s||n.size||"1em",g;return n.className&&(g=n.className),o.className&&(g=(g?g+" ":"")+o.className),Mt.createElement("svg",Yl({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,l,h,{className:g,style:ql(ql({color:o.color||n.color},n.style),o.style),height:f,width:f,xmlns:"http://www.w3.org/2000/svg"}),u&&Mt.createElement("title",null,u),o.children)};return dh!==void 0?Mt.createElement(dh.Consumer,null,n=>t(n)):t(a0)}function V2(o){return X2({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M0 0h24v24H0V0zm22.034 18.276c-.175-1.095-.888-2.015-3.003-2.873-.736-.345-1.554-.585-1.797-1.14-.091-.33-.105-.51-.046-.705.15-.646.915-.84 1.515-.66.39.12.75.42.976.9 1.034-.676 1.034-.676 1.755-1.125-.27-.42-.404-.601-.586-.78-.63-.705-1.469-1.065-2.834-1.034l-.705.089c-.676.165-1.32.525-1.71 1.005-1.14 1.291-.811 3.541.569 4.471 1.365 1.02 3.361 1.244 3.616 2.205.24 1.17-.87 1.545-1.966 1.41-.811-.18-1.26-.586-1.755-1.336l-1.83 1.051c.21.48.45.689.81 1.109 1.74 1.756 6.09 1.666 6.871-1.004.029-.09.24-.705.074-1.65l.046.067zm-8.983-7.245h-2.248c0 1.938-.009 3.864-.009 5.805 0 1.232.063 2.363-.138 2.711-.33.689-1.18.601-1.566.48-.396-.196-.597-.466-.83-.855-.063-.105-.11-.196-.127-.196l-1.825 1.125c.305.63.75 1.172 1.324 1.517.855.51 2.004.675 3.207.405.783-.226 1.458-.691 1.811-1.411.51-.93.402-2.07.397-3.346.012-2.054 0-4.109 0-6.179l.004-.056z"},child:[]}]})(o)}const Gr=({codeBigScreen:o})=>j.jsx("div",{className:"absolute top-2 -right-4 opacity-0 w-18 h-18 group-hover:opacity-100 rounded-4xl transition-opacity duration-200 bg-white dark:bg-transparent",onClick:o,children:j.jsx(w2,{Icon:f2})}),K2=()=>j.jsx(j.Fragment,{children:j.jsxs("div",{className:"ps-2 dark:text-gray-100 text-gray-800",children:[j.jsx("div",{className:"border-b  dark:text-gray-200 border-gray-200 py-1",children:"Yazan kodunyzyn netijesi su yere cykar"}),j.jsx("div",{className:"border-b dark:border-0 border-gray-200 py-1",children:"_________________________________________________________"}),j.jsx("div",{className:"border-b dark:border-0 border-gray-200 py-1",children:"_________________________________________________________"}),j.jsx("div",{className:"border-b dark:border-0 border-gray-200 py-1",children:"____________________##############_______________________"}),j.jsx("div",{className:"border-b dark:border-0 border-gray-200 py-1",children:"________________________________#________________________"}),j.jsx("div",{className:"border-b dark:border-0 border-gray-200 py-1",children:"_______________________________#_________________________"}),j.jsx("div",{className:"border-b dark:border-0 border-gray-200 py-1",children:"______________________________#__________________________"}),j.jsx("div",{className:"border-b dark:border-0 border-gray-200 py-1",children:"_____________________________#___________________________"}),j.jsx("div",{className:"border-b dark:border-0 border-gray-200 py-1",children:"____________________________#____________________________"}),j.jsx("div",{className:"border-b dark:border-0 border-gray-200 py-1",children:"___________________________#_____________________________"}),j.jsx("div",{className:"border-b dark:border-0 border-gray-200 py-1",children:"_________________________________________________________"})]})}),Q2=Math.PI/180;function Z2(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}const Fa=typeof global<"u"?global:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},F={_global:Fa,version:"10.0.2",isBrowser:Z2(),isUnminified:/param/.test((function(o){}).toString()),dblClickWindow:400,getAngle(o){return F.angleDeg?o*Q2:o},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_renderBackend:"web",legacyTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return F.DD.isDragging},isTransforming(){var o,t;return(t=(o=F.Transformer)===null||o===void 0?void 0:o.isTransforming())!==null&&t!==void 0?t:!1},isDragReady(){return!!F.DD.node},releaseCanvasOnDestroy:!0,document:Fa.document,_injectGlobal(o){typeof Fa.Konva<"u"&&console.error("Severa Konva instances detected. It is not recommended to use multiple Konva instances in the same environment."),Fa.Konva=o}},Bt=o=>{F[o.prototype.getClassName()]=o};F._injectGlobal(F);const J2=`Konva.js unsupported environment.

Looks like you are trying to use Konva.js in Node.js environment. because "document" object is undefined.

To use Konva.js in Node.js environment, you need to use the "canvas-backend" or "skia-backend" module.

bash: npm install canvas
js: import "konva/canvas-backend";

or

bash: npm install skia-canvas
js: import "konva/skia-backend";
`,mh=()=>{if(typeof document>"u")throw new Error(J2)};class Se{constructor(t=[1,0,0,1,0,0]){this.dirty=!1,this.m=t&&t.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new Se(this.m)}copyInto(t){t.m[0]=this.m[0],t.m[1]=this.m[1],t.m[2]=this.m[2],t.m[3]=this.m[3],t.m[4]=this.m[4],t.m[5]=this.m[5]}point(t){const n=this.m;return{x:n[0]*t.x+n[2]*t.y+n[4],y:n[1]*t.x+n[3]*t.y+n[5]}}translate(t,n){return this.m[4]+=this.m[0]*t+this.m[2]*n,this.m[5]+=this.m[1]*t+this.m[3]*n,this}scale(t,n){return this.m[0]*=t,this.m[1]*=t,this.m[2]*=n,this.m[3]*=n,this}rotate(t){const n=Math.cos(t),l=Math.sin(t),s=this.m[0]*n+this.m[2]*l,u=this.m[1]*n+this.m[3]*l,h=this.m[0]*-l+this.m[2]*n,f=this.m[1]*-l+this.m[3]*n;return this.m[0]=s,this.m[1]=u,this.m[2]=h,this.m[3]=f,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(t,n){const l=this.m[0]+this.m[2]*n,s=this.m[1]+this.m[3]*n,u=this.m[2]+this.m[0]*t,h=this.m[3]+this.m[1]*t;return this.m[0]=l,this.m[1]=s,this.m[2]=u,this.m[3]=h,this}multiply(t){const n=this.m[0]*t.m[0]+this.m[2]*t.m[1],l=this.m[1]*t.m[0]+this.m[3]*t.m[1],s=this.m[0]*t.m[2]+this.m[2]*t.m[3],u=this.m[1]*t.m[2]+this.m[3]*t.m[3],h=this.m[0]*t.m[4]+this.m[2]*t.m[5]+this.m[4],f=this.m[1]*t.m[4]+this.m[3]*t.m[5]+this.m[5];return this.m[0]=n,this.m[1]=l,this.m[2]=s,this.m[3]=u,this.m[4]=h,this.m[5]=f,this}invert(){const t=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),n=this.m[3]*t,l=-this.m[1]*t,s=-this.m[2]*t,u=this.m[0]*t,h=t*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),f=t*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=n,this.m[1]=l,this.m[2]=s,this.m[3]=u,this.m[4]=h,this.m[5]=f,this}getMatrix(){return this.m}decompose(){const t=this.m[0],n=this.m[1],l=this.m[2],s=this.m[3],u=this.m[4],h=this.m[5],f=t*s-n*l,g={x:u,y:h,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(t!=0||n!=0){const m=Math.sqrt(t*t+n*n);g.rotation=n>0?Math.acos(t/m):-Math.acos(t/m),g.scaleX=m,g.scaleY=f/m,g.skewX=(t*l+n*s)/f,g.skewY=0}else if(l!=0||s!=0){const m=Math.sqrt(l*l+s*s);g.rotation=Math.PI/2-(s>0?Math.acos(-l/m):-Math.acos(l/m)),g.scaleX=f/m,g.scaleY=m,g.skewX=0,g.skewY=(t*l+n*s)/f}return g.rotation=M._getRotation(g.rotation),g}}const F2="[object Array]",W2="[object Number]",I2="[object String]",$2="[object Boolean]",t5=Math.PI/180,e5=180/Math.PI,wr="#",a5="",n5="0",i5="Konva warning: ",ph="Konva error: ",l5="rgb(",Hr={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},s5=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;let Rl=[];const r5=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(o){setTimeout(o,60)},M={_isElement(o){return!!(o&&o.nodeType==1)},_isFunction(o){return!!(o&&o.constructor&&o.call&&o.apply)},_isPlainObject(o){return!!o&&o.constructor===Object},_isArray(o){return Object.prototype.toString.call(o)===F2},_isNumber(o){return Object.prototype.toString.call(o)===W2&&!isNaN(o)&&isFinite(o)},_isString(o){return Object.prototype.toString.call(o)===I2},_isBoolean(o){return Object.prototype.toString.call(o)===$2},isObject(o){return o instanceof Object},isValidSelector(o){if(typeof o!="string")return!1;const t=o[0];return t==="#"||t==="."||t===t.toUpperCase()},_sign(o){return o===0||o>0?1:-1},requestAnimFrame(o){Rl.push(o),Rl.length===1&&r5(function(){const t=Rl;Rl=[],t.forEach(function(n){n()})})},createCanvasElement(){mh();const o=document.createElement("canvas");try{o.style=o.style||{}}catch{}return o},createImageElement(){return mh(),document.createElement("img")},_isInDocument(o){for(;o=o.parentNode;)if(o==document)return!0;return!1},_urlToImage(o,t){const n=M.createImageElement();n.onload=function(){t(n)},n.src=o},_rgbToHex(o,t,n){return((1<<24)+(o<<16)+(t<<8)+n).toString(16).slice(1)},_hexToRgb(o){o=o.replace(wr,a5);const t=parseInt(o,16);return{r:t>>16&255,g:t>>8&255,b:t&255}},getRandomColor(){let o=(Math.random()*16777215<<0).toString(16);for(;o.length<6;)o=n5+o;return wr+o},getRGB(o){let t;return o in Hr?(t=Hr[o],{r:t[0],g:t[1],b:t[2]}):o[0]===wr?this._hexToRgb(o.substring(1)):o.substr(0,4)===l5?(t=s5.exec(o.replace(/ /g,"")),{r:parseInt(t[1],10),g:parseInt(t[2],10),b:parseInt(t[3],10)}):{r:0,g:0,b:0}},colorToRGBA(o){return o=o||"black",M._namedColorToRBA(o)||M._hex3ColorToRGBA(o)||M._hex4ColorToRGBA(o)||M._hex6ColorToRGBA(o)||M._hex8ColorToRGBA(o)||M._rgbColorToRGBA(o)||M._rgbaColorToRGBA(o)||M._hslColorToRGBA(o)},_namedColorToRBA(o){const t=Hr[o.toLowerCase()];return t?{r:t[0],g:t[1],b:t[2],a:1}:null},_rgbColorToRGBA(o){if(o.indexOf("rgb(")===0){o=o.match(/rgb\(([^)]+)\)/)[1];const t=o.split(/ *, */).map(Number);return{r:t[0],g:t[1],b:t[2],a:1}}},_rgbaColorToRGBA(o){if(o.indexOf("rgba(")===0){o=o.match(/rgba\(([^)]+)\)/)[1];const t=o.split(/ *, */).map((n,l)=>n.slice(-1)==="%"?l===3?parseInt(n)/100:parseInt(n)/100*255:Number(n));return{r:t[0],g:t[1],b:t[2],a:t[3]}}},_hex8ColorToRGBA(o){if(o[0]==="#"&&o.length===9)return{r:parseInt(o.slice(1,3),16),g:parseInt(o.slice(3,5),16),b:parseInt(o.slice(5,7),16),a:parseInt(o.slice(7,9),16)/255}},_hex6ColorToRGBA(o){if(o[0]==="#"&&o.length===7)return{r:parseInt(o.slice(1,3),16),g:parseInt(o.slice(3,5),16),b:parseInt(o.slice(5,7),16),a:1}},_hex4ColorToRGBA(o){if(o[0]==="#"&&o.length===5)return{r:parseInt(o[1]+o[1],16),g:parseInt(o[2]+o[2],16),b:parseInt(o[3]+o[3],16),a:parseInt(o[4]+o[4],16)/255}},_hex3ColorToRGBA(o){if(o[0]==="#"&&o.length===4)return{r:parseInt(o[1]+o[1],16),g:parseInt(o[2]+o[2],16),b:parseInt(o[3]+o[3],16),a:1}},_hslColorToRGBA(o){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(o)){const[t,...n]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(o),l=Number(n[0])/360,s=Number(n[1])/100,u=Number(n[2])/100;let h,f,g;if(s===0)return g=u*255,{r:Math.round(g),g:Math.round(g),b:Math.round(g),a:1};u<.5?h=u*(1+s):h=u+s-u*s;const m=2*u-h,p=[0,0,0];for(let v=0;v<3;v++)f=l+1/3*-(v-1),f<0&&f++,f>1&&f--,6*f<1?g=m+(h-m)*6*f:2*f<1?g=h:3*f<2?g=m+(h-m)*(2/3-f)*6:g=m,p[v]=g*255;return{r:Math.round(p[0]),g:Math.round(p[1]),b:Math.round(p[2]),a:1}}},haveIntersection(o,t){return!(t.x>o.x+o.width||t.x+t.width<o.x||t.y>o.y+o.height||t.y+t.height<o.y)},cloneObject(o){const t={};for(const n in o)this._isPlainObject(o[n])?t[n]=this.cloneObject(o[n]):this._isArray(o[n])?t[n]=this.cloneArray(o[n]):t[n]=o[n];return t},cloneArray(o){return o.slice(0)},degToRad(o){return o*t5},radToDeg(o){return o*e5},_degToRad(o){return M.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),M.degToRad(o)},_radToDeg(o){return M.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),M.radToDeg(o)},_getRotation(o){return F.angleDeg?M.radToDeg(o):o},_capitalize(o){return o.charAt(0).toUpperCase()+o.slice(1)},throw(o){throw new Error(ph+o)},error(o){console.error(ph+o)},warn(o){F.showWarnings&&console.warn(i5+o)},each(o,t){for(const n in o)t(n,o[n])},_inRange(o,t,n){return t<=o&&o<n},_getProjectionToSegment(o,t,n,l,s,u){let h,f,g;const m=(o-n)*(o-n)+(t-l)*(t-l);if(m==0)h=o,f=t,g=(s-n)*(s-n)+(u-l)*(u-l);else{const p=((s-o)*(n-o)+(u-t)*(l-t))/m;p<0?(h=o,f=t,g=(o-s)*(o-s)+(t-u)*(t-u)):p>1?(h=n,f=l,g=(n-s)*(n-s)+(l-u)*(l-u)):(h=o+p*(n-o),f=t+p*(l-t),g=(h-s)*(h-s)+(f-u)*(f-u))}return[h,f,g]},_getProjectionToLine(o,t,n){const l=M.cloneObject(o);let s=Number.MAX_VALUE;return t.forEach(function(u,h){if(!n&&h===t.length-1)return;const f=t[(h+1)%t.length],g=M._getProjectionToSegment(u.x,u.y,f.x,f.y,o.x,o.y),m=g[0],p=g[1],v=g[2];v<s&&(l.x=m,l.y=p,s=v)}),l},_prepareArrayForTween(o,t,n){const l=[],s=[];if(o.length>t.length){const h=t;t=o,o=h}for(let h=0;h<o.length;h+=2)l.push({x:o[h],y:o[h+1]});for(let h=0;h<t.length;h+=2)s.push({x:t[h],y:t[h+1]});const u=[];return s.forEach(function(h){const f=M._getProjectionToLine(h,l,n);u.push(f.x),u.push(f.y)}),u},_prepareToStringify(o){let t;o.visitedByCircularReferenceRemoval=!0;for(const n in o)if(o.hasOwnProperty(n)&&o[n]&&typeof o[n]=="object"){if(t=Object.getOwnPropertyDescriptor(o,n),o[n].visitedByCircularReferenceRemoval||M._isElement(o[n]))if(t.configurable)delete o[n];else return null;else if(M._prepareToStringify(o[n])===null)if(t.configurable)delete o[n];else return null}return delete o.visitedByCircularReferenceRemoval,o},_assign(o,t){for(const n in t)o[n]=t[n];return o},_getFirstPointerId(o){return o.touches?o.changedTouches[0].identifier:o.pointerId||999},releaseCanvas(...o){F.releaseCanvasOnDestroy&&o.forEach(t=>{t.width=0,t.height=0})},drawRoundedRectPath(o,t,n,l){let s=t<0?t:0,u=n<0?n:0;t=Math.abs(t),n=Math.abs(n);let h=0,f=0,g=0,m=0;typeof l=="number"?h=f=g=m=Math.min(l,t/2,n/2):(h=Math.min(l[0]||0,t/2,n/2),f=Math.min(l[1]||0,t/2,n/2),m=Math.min(l[2]||0,t/2,n/2),g=Math.min(l[3]||0,t/2,n/2)),o.moveTo(s+h,u),o.lineTo(s+t-f,u),o.arc(s+t-f,u+f,f,Math.PI*3/2,0,!1),o.lineTo(s+t,u+n-m),o.arc(s+t-m,u+n-m,m,0,Math.PI/2,!1),o.lineTo(s+g,u+n),o.arc(s+g,u+n-g,g,Math.PI/2,Math.PI,!1),o.lineTo(s,u+h),o.arc(s+h,u+h,h,Math.PI,Math.PI*3/2,!1)},drawRoundedPolygonPath(o,t,n,l,s){l=Math.abs(l);for(let u=0;u<n;u++){const h=t[(u-1+n)%n],f=t[u],g=t[(u+1)%n],m={x:f.x-h.x,y:f.y-h.y},p={x:g.x-f.x,y:g.y-f.y},v=Math.hypot(m.x,m.y),y=Math.hypot(p.x,p.y);let E;typeof s=="number"?E=s:E=u<s.length?s[u]:0,E=l*Math.cos(Math.PI/n)*Math.min(1,E/l*2);const R={x:m.x/v,y:m.y/v},O={x:p.x/y,y:p.y/y},G={x:f.x-R.x*E,y:f.y-R.y*E},z={x:f.x+O.x*E,y:f.y+O.y*E};u===0?o.moveTo(G.x,G.y):o.lineTo(G.x,G.y),o.arcTo(f.x,f.y,z.x,z.y,E)}}};function o5(o){const t=[],n=o.length,l=M;for(let s=0;s<n;s++){let u=o[s];l._isNumber(u)?u=Math.round(u*1e3)/1e3:l._isString(u)||(u=u+""),t.push(u)}return t}const yh=",",u5="(",c5=")",h5="([",f5="])",d5=";",g5="()",m5="=",_h=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],p5=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled","filter"],y5=100;let Nl=null;function vh(){if(Nl!==null)return Nl;try{const t=M.createCanvasElement().getContext("2d");return t?!!t&&"filter"in t:(Nl=!1,!1)}catch{return Nl=!1,!1}}class Vl{constructor(t){this.canvas=t,F.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(t){t.fillEnabled()&&this._fill(t)}_fill(t){}strokeShape(t){t.hasStroke()&&this._stroke(t)}_stroke(t){}fillStrokeShape(t){t.attrs.fillAfterStrokeEnabled?(this.strokeShape(t),this.fillShape(t)):(this.fillShape(t),this.strokeShape(t))}getTrace(t,n){let l=this.traceArr,s=l.length,u="",h,f,g,m;for(h=0;h<s;h++)f=l[h],g=f.method,g?(m=f.args,u+=g,t?u+=g5:M._isArray(m[0])?u+=h5+m.join(yh)+f5:(n&&(m=m.map(p=>typeof p=="number"?Math.floor(p):p)),u+=u5+m.join(yh)+c5)):(u+=f.property,t||(u+=m5+f.val)),u+=d5;return u}clearTrace(){this.traceArr=[]}_trace(t){let n=this.traceArr,l;n.push(t),l=n.length,l>=y5&&n.shift()}reset(){const t=this.getCanvas().getPixelRatio();this.setTransform(1*t,0,0,1*t,0,0)}getCanvas(){return this.canvas}clear(t){const n=this.getCanvas();t?this.clearRect(t.x||0,t.y||0,t.width||0,t.height||0):this.clearRect(0,0,n.getWidth()/n.pixelRatio,n.getHeight()/n.pixelRatio)}_applyLineCap(t){const n=t.attrs.lineCap;n&&this.setAttr("lineCap",n)}_applyOpacity(t){const n=t.getAbsoluteOpacity();n!==1&&this.setAttr("globalAlpha",n)}_applyLineJoin(t){const n=t.attrs.lineJoin;n&&this.setAttr("lineJoin",n)}_applyMiterLimit(t){const n=t.attrs.miterLimit;n!=null&&this.setAttr("miterLimit",n)}setAttr(t,n){this._context[t]=n}arc(t,n,l,s,u,h){this._context.arc(t,n,l,s,u,h)}arcTo(t,n,l,s,u){this._context.arcTo(t,n,l,s,u)}beginPath(){this._context.beginPath()}bezierCurveTo(t,n,l,s,u,h){this._context.bezierCurveTo(t,n,l,s,u,h)}clearRect(t,n,l,s){this._context.clearRect(t,n,l,s)}clip(...t){this._context.clip.apply(this._context,t)}closePath(){this._context.closePath()}createImageData(t,n){const l=arguments;if(l.length===2)return this._context.createImageData(t,n);if(l.length===1)return this._context.createImageData(t)}createLinearGradient(t,n,l,s){return this._context.createLinearGradient(t,n,l,s)}createPattern(t,n){return this._context.createPattern(t,n)}createRadialGradient(t,n,l,s,u,h){return this._context.createRadialGradient(t,n,l,s,u,h)}drawImage(t,n,l,s,u,h,f,g,m){const p=arguments,v=this._context;p.length===3?v.drawImage(t,n,l):p.length===5?v.drawImage(t,n,l,s,u):p.length===9&&v.drawImage(t,n,l,s,u,h,f,g,m)}ellipse(t,n,l,s,u,h,f,g){this._context.ellipse(t,n,l,s,u,h,f,g)}isPointInPath(t,n,l,s){return l?this._context.isPointInPath(l,t,n,s):this._context.isPointInPath(t,n,s)}fill(...t){this._context.fill.apply(this._context,t)}fillRect(t,n,l,s){this._context.fillRect(t,n,l,s)}strokeRect(t,n,l,s){this._context.strokeRect(t,n,l,s)}fillText(t,n,l,s){s?this._context.fillText(t,n,l,s):this._context.fillText(t,n,l)}measureText(t){return this._context.measureText(t)}getImageData(t,n,l,s){return this._context.getImageData(t,n,l,s)}lineTo(t,n){this._context.lineTo(t,n)}moveTo(t,n){this._context.moveTo(t,n)}rect(t,n,l,s){this._context.rect(t,n,l,s)}roundRect(t,n,l,s,u){this._context.roundRect(t,n,l,s,u)}putImageData(t,n,l){this._context.putImageData(t,n,l)}quadraticCurveTo(t,n,l,s){this._context.quadraticCurveTo(t,n,l,s)}restore(){this._context.restore()}rotate(t){this._context.rotate(t)}save(){this._context.save()}scale(t,n){this._context.scale(t,n)}setLineDash(t){this._context.setLineDash?this._context.setLineDash(t):"mozDash"in this._context?this._context.mozDash=t:"webkitLineDash"in this._context&&(this._context.webkitLineDash=t)}getLineDash(){return this._context.getLineDash()}setTransform(t,n,l,s,u,h){this._context.setTransform(t,n,l,s,u,h)}stroke(t){t?this._context.stroke(t):this._context.stroke()}strokeText(t,n,l,s){this._context.strokeText(t,n,l,s)}transform(t,n,l,s,u,h){this._context.transform(t,n,l,s,u,h)}translate(t,n){this._context.translate(t,n)}_enableTrace(){let t=this,n=_h.length,l=this.setAttr,s,u;const h=function(f){let g=t[f],m;t[f]=function(){return u=o5(Array.prototype.slice.call(arguments,0)),m=g.apply(t,arguments),t._trace({method:f,args:u}),m}};for(s=0;s<n;s++)h(_h[s]);t.setAttr=function(){l.apply(t,arguments);const f=arguments[0];let g=arguments[1];(f==="shadowOffsetX"||f==="shadowOffsetY"||f==="shadowBlur")&&(g=g/this.canvas.getPixelRatio()),t._trace({property:f,val:g})}}_applyGlobalCompositeOperation(t){const n=t.attrs.globalCompositeOperation;!n||n==="source-over"||this.setAttr("globalCompositeOperation",n)}}p5.forEach(function(o){Object.defineProperty(Vl.prototype,o,{get(){return this._context[o]},set(t){this._context[o]=t}})});class _5 extends Vl{constructor(t,{willReadFrequently:n=!1}={}){super(t),this._context=t._canvas.getContext("2d",{willReadFrequently:n})}_fillColor(t){const n=t.fill();this.setAttr("fillStyle",n),t._fillFunc(this)}_fillPattern(t){this.setAttr("fillStyle",t._getFillPattern()),t._fillFunc(this)}_fillLinearGradient(t){const n=t._getLinearGradient();n&&(this.setAttr("fillStyle",n),t._fillFunc(this))}_fillRadialGradient(t){const n=t._getRadialGradient();n&&(this.setAttr("fillStyle",n),t._fillFunc(this))}_fill(t){const n=t.fill(),l=t.getFillPriority();if(n&&l==="color"){this._fillColor(t);return}const s=t.getFillPatternImage();if(s&&l==="pattern"){this._fillPattern(t);return}const u=t.getFillLinearGradientColorStops();if(u&&l==="linear-gradient"){this._fillLinearGradient(t);return}const h=t.getFillRadialGradientColorStops();if(h&&l==="radial-gradient"){this._fillRadialGradient(t);return}n?this._fillColor(t):s?this._fillPattern(t):u?this._fillLinearGradient(t):h&&this._fillRadialGradient(t)}_strokeLinearGradient(t){const n=t.getStrokeLinearGradientStartPoint(),l=t.getStrokeLinearGradientEndPoint(),s=t.getStrokeLinearGradientColorStops(),u=this.createLinearGradient(n.x,n.y,l.x,l.y);if(s){for(let h=0;h<s.length;h+=2)u.addColorStop(s[h],s[h+1]);this.setAttr("strokeStyle",u)}}_stroke(t){const n=t.dash(),l=t.getStrokeScaleEnabled();if(t.hasStroke()){if(!l){this.save();const u=this.getCanvas().getPixelRatio();this.setTransform(u,0,0,u,0,0)}this._applyLineCap(t),n&&t.dashEnabled()&&(this.setLineDash(n),this.setAttr("lineDashOffset",t.dashOffset())),this.setAttr("lineWidth",t.strokeWidth()),t.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),t.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(t):this.setAttr("strokeStyle",t.stroke()),t._strokeFunc(this),l||this.restore()}}_applyShadow(t){var n,l,s;const u=(n=t.getShadowRGBA())!==null&&n!==void 0?n:"black",h=(l=t.getShadowBlur())!==null&&l!==void 0?l:5,f=(s=t.getShadowOffset())!==null&&s!==void 0?s:{x:0,y:0},g=t.getAbsoluteScale(),m=this.canvas.getPixelRatio(),p=g.x*m,v=g.y*m;this.setAttr("shadowColor",u),this.setAttr("shadowBlur",h*Math.min(Math.abs(p),Math.abs(v))),this.setAttr("shadowOffsetX",f.x*p),this.setAttr("shadowOffsetY",f.y*v)}}class v5 extends Vl{constructor(t){super(t),this._context=t._canvas.getContext("2d",{willReadFrequently:!0})}_fill(t){this.save(),this.setAttr("fillStyle",t.colorKey),t._fillFuncHit(this),this.restore()}strokeShape(t){t.hasHitStroke()&&this._stroke(t)}_stroke(t){if(t.hasHitStroke()){const n=t.getStrokeScaleEnabled();if(!n){this.save();const u=this.getCanvas().getPixelRatio();this.setTransform(u,0,0,u,0,0)}this._applyLineCap(t);const l=t.hitStrokeWidth(),s=l==="auto"?t.strokeWidth():l;this.setAttr("lineWidth",s),this.setAttr("strokeStyle",t.colorKey),t._strokeFuncHit(this),n||this.restore()}}}let Ol;function S5(){if(Ol)return Ol;const o=M.createCanvasElement(),t=o.getContext("2d");return Ol=(function(){const n=F._global.devicePixelRatio||1,l=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return n/l})(),M.releaseCanvas(o),Ol}class uo{constructor(t){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const l=(t||{}).pixelRatio||F.pixelRatio||S5();this.pixelRatio=l,this._canvas=M.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(t){const n=this.pixelRatio;this.pixelRatio=t,this.setSize(this.getWidth()/n,this.getHeight()/n)}setWidth(t){this.width=this._canvas.width=t*this.pixelRatio,this._canvas.style.width=t+"px";const n=this.pixelRatio;this.getContext()._context.scale(n,n)}setHeight(t){this.height=this._canvas.height=t*this.pixelRatio,this._canvas.style.height=t+"px";const n=this.pixelRatio;this.getContext()._context.scale(n,n)}getWidth(){return this.width}getHeight(){return this.height}setSize(t,n){this.setWidth(t||0),this.setHeight(n||0)}toDataURL(t,n){try{return this._canvas.toDataURL(t,n)}catch{try{return this._canvas.toDataURL()}catch(s){return M.error("Unable to get data URL. "+s.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}class Na extends uo{constructor(t={width:0,height:0,willReadFrequently:!1}){super(t),this.context=new _5(this,{willReadFrequently:t.willReadFrequently}),this.setSize(t.width,t.height)}}function Sh(){const o=M.createCanvasElement();o.width=1,o.height=1;const t=o.getContext("2d",{willReadFrequently:!0});t.clearRect(0,0,1,1),t.fillStyle="rgba(255,0,255,1)",t.fillRect(0,0,1,1);const n=t.getImageData(0,0,1,1).data;return!(n[0]===255&&n[1]===0&&n[2]===255&&n[3]===255)}function bh(){var o,t;return typeof navigator>"u"?!1:(t=(o=navigator.brave)===null||o===void 0?void 0:o.isBrave())!==null&&t!==void 0?t:!1}let xh=!1;function b5(){return bh()&&Sh()&&!xh&&(xh=!0,M.error('Looks like you have "Brave shield" enabled in your browser. It breaks KonvaJS internals. Please disable it. You may need to ask your users to do the same.')),bh()&&Sh()}class co extends uo{constructor(t={width:0,height:0}){super(t),this.hitCanvas=!0,this.context=new v5(this),this.setSize(t.width,t.height),b5()}}const Et={get isDragging(){let o=!1;return Et._dragElements.forEach(t=>{t.dragStatus==="dragging"&&(o=!0)}),o},justDragged:!1,get node(){let o;return Et._dragElements.forEach(t=>{o=t.node}),o},_dragElements:new Map,_drag(o){const t=[];Et._dragElements.forEach((n,l)=>{const{node:s}=n,u=s.getStage();u.setPointersPositions(o),n.pointerId===void 0&&(n.pointerId=M._getFirstPointerId(o));const h=u._changedPointerPositions.find(f=>f.id===n.pointerId);if(h){if(n.dragStatus!=="dragging"){const f=s.dragDistance();if(Math.max(Math.abs(h.x-n.startPointerPos.x),Math.abs(h.y-n.startPointerPos.y))<f||(s.startDrag({evt:o}),!s.isDragging()))return}s._setDragPosition(o,n),t.push(s)}}),t.forEach(n=>{n.fire("dragmove",{type:"dragmove",target:n,evt:o},!0)})},_endDragBefore(o){const t=[];Et._dragElements.forEach(n=>{const{node:l}=n,s=l.getStage();if(o&&s.setPointersPositions(o),!s._changedPointerPositions.find(f=>f.id===n.pointerId))return;(n.dragStatus==="dragging"||n.dragStatus==="stopped")&&(Et.justDragged=!0,F._mouseListenClick=!1,F._touchListenClick=!1,F._pointerListenClick=!1,n.dragStatus="stopped");const h=n.node.getLayer()||n.node instanceof F.Stage&&n.node;h&&t.indexOf(h)===-1&&t.push(h)}),t.forEach(n=>{n.draw()})},_endDragAfter(o){Et._dragElements.forEach((t,n)=>{t.dragStatus==="stopped"&&t.node.fire("dragend",{type:"dragend",target:t.node,evt:o},!0),t.dragStatus!=="dragging"&&Et._dragElements.delete(n)})}};F.isBrowser&&(window.addEventListener("mouseup",Et._endDragBefore,!0),window.addEventListener("touchend",Et._endDragBefore,!0),window.addEventListener("touchcancel",Et._endDragBefore,!0),window.addEventListener("mousemove",Et._drag),window.addEventListener("touchmove",Et._drag),window.addEventListener("mouseup",Et._endDragAfter,!1),window.addEventListener("touchend",Et._endDragAfter,!1),window.addEventListener("touchcancel",Et._endDragAfter,!1));function Oa(o){return M._isString(o)?'"'+o+'"':Object.prototype.toString.call(o)==="[object Number]"||M._isBoolean(o)?o:Object.prototype.toString.call(o)}function i0(o){return o>255?255:o<0?0:Math.round(o)}function Q(){if(F.isUnminified)return function(o,t){return M._isNumber(o)||M.warn(Oa(o)+' is a not valid value for "'+t+'" attribute. The value should be a number.'),o}}function Kl(o){if(F.isUnminified)return function(t,n){let l=M._isNumber(t),s=M._isArray(t)&&t.length==o;return!l&&!s&&M.warn(Oa(t)+' is a not valid value for "'+n+'" attribute. The value should be a number or Array<number>('+o+")"),t}}function ho(){if(F.isUnminified)return function(o,t){return M._isNumber(o)||o==="auto"||M.warn(Oa(o)+' is a not valid value for "'+t+'" attribute. The value should be a number or "auto".'),o}}function Wa(){if(F.isUnminified)return function(o,t){return M._isString(o)||M.warn(Oa(o)+' is a not valid value for "'+t+'" attribute. The value should be a string.'),o}}function l0(){if(F.isUnminified)return function(o,t){const n=M._isString(o),l=Object.prototype.toString.call(o)==="[object CanvasGradient]"||o&&o.addColorStop;return n||l||M.warn(Oa(o)+' is a not valid value for "'+t+'" attribute. The value should be a string or a native gradient.'),o}}function x5(){if(F.isUnminified)return function(o,t){const n=Int8Array?Object.getPrototypeOf(Int8Array):null;return n&&o instanceof n||(M._isArray(o)?o.forEach(function(l){M._isNumber(l)||M.warn('"'+t+'" attribute has non numeric element '+l+". Make sure that all elements are numbers.")}):M.warn(Oa(o)+' is a not valid value for "'+t+'" attribute. The value should be a array of numbers.')),o}}function Be(){if(F.isUnminified)return function(o,t){return o===!0||o===!1||M.warn(Oa(o)+' is a not valid value for "'+t+'" attribute. The value should be a boolean.'),o}}function E5(o){if(F.isUnminified)return function(t,n){return t==null||M.isObject(t)||M.warn(Oa(t)+' is a not valid value for "'+n+'" attribute. The value should be an object with properties '+o),t}}const vi="get",Si="set",b={addGetterSetter(o,t,n,l,s){b.addGetter(o,t,n),b.addSetter(o,t,l,s),b.addOverloadedGetterSetter(o,t)},addGetter(o,t,n){const l=vi+M._capitalize(t);o.prototype[l]=o.prototype[l]||function(){const s=this.attrs[t];return s===void 0?n:s}},addSetter(o,t,n,l){const s=Si+M._capitalize(t);o.prototype[s]||b.overWriteSetter(o,t,n,l)},overWriteSetter(o,t,n,l){const s=Si+M._capitalize(t);o.prototype[s]=function(u){return n&&u!==void 0&&u!==null&&(u=n.call(this,u,t)),this._setAttr(t,u),l&&l.call(this),this}},addComponentsGetterSetter(o,t,n,l,s){const u=n.length,h=M._capitalize,f=vi+h(t),g=Si+h(t);o.prototype[f]=function(){const p={};for(let v=0;v<u;v++){const y=n[v];p[y]=this.getAttr(t+h(y))}return p};const m=E5(n);o.prototype[g]=function(p){const v=this.attrs[t];l&&(p=l.call(this,p,t)),m&&m.call(this,p,t);for(const y in p)p.hasOwnProperty(y)&&this._setAttr(t+h(y),p[y]);return p||n.forEach(y=>{this._setAttr(t+h(y),void 0)}),this._fireChangeEvent(t,v,p),s&&s.call(this),this},b.addOverloadedGetterSetter(o,t)},addOverloadedGetterSetter(o,t){const n=M._capitalize(t),l=Si+n,s=vi+n;o.prototype[t]=function(){return arguments.length?(this[l](arguments[0]),this):this[s]()}},addDeprecatedGetterSetter(o,t,n,l){M.error("Adding deprecated "+t);const s=vi+M._capitalize(t),u=t+" property is deprecated and will be removed soon. Look at Konva change log for more information.";o.prototype[s]=function(){M.error(u);const h=this.attrs[t];return h===void 0?n:h},b.addSetter(o,t,l,function(){M.error(u)}),b.addOverloadedGetterSetter(o,t)},backCompat(o,t){M.each(t,function(n,l){const s=o.prototype[l],u=vi+M._capitalize(n),h=Si+M._capitalize(n);function f(){s.apply(this,arguments),M.error('"'+n+'" method is deprecated and will be removed soon. Use ""'+l+'" instead.')}o.prototype[n]=f,o.prototype[u]=f,o.prototype[h]=f})},afterSetFilter(){this._filterUpToDate=!1}};function C5(o){const t=/(\w+)\(([^)]+)\)/g;let n;for(;(n=t.exec(o))!==null;){const[,l,s]=n;switch(l){case"blur":{const u=parseFloat(s.replace("px",""));return function(h){this.blurRadius(u*.5);const f=F.Filters;f&&f.Blur&&f.Blur.call(this,h)}}case"brightness":{const u=s.includes("%")?parseFloat(s)/100:parseFloat(s);return function(h){this.brightness(u);const f=F.Filters;f&&f.Brightness&&f.Brightness.call(this,h)}}case"contrast":{const u=parseFloat(s);return function(h){const f=100*(Math.sqrt(u)-1);this.contrast(f);const g=F.Filters;g&&g.Contrast&&g.Contrast.call(this,h)}}case"grayscale":return function(u){const h=F.Filters;h&&h.Grayscale&&h.Grayscale.call(this,u)};case"sepia":return function(u){const h=F.Filters;h&&h.Sepia&&h.Sepia.call(this,u)};case"invert":return function(u){const h=F.Filters;h&&h.Invert&&h.Invert.call(this,u)};default:M.warn(`CSS filter "${l}" is not supported in fallback mode. Consider using function filters for better compatibility.`);break}}return()=>{}}const jl="absoluteOpacity",zl="allEventListeners",aa="absoluteTransform",Eh="absoluteScale",Ja="canvas",T5="Change",A5="children",M5="konva",Wr="listening",R5="mouseenter",N5="mouseleave",O5="pointerenter",z5="pointerleave",D5="touchenter",G5="touchleave",Ch="set",Th="Shape",kl=" ",Ah="stage",Ma="transform",w5="Stage",Ir="visible",H5=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(kl);let B5=1;class K{constructor(t){this._id=B5++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(t),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(t){(t===Ma||t===aa)&&this._cache.get(t)?this._cache.get(t).dirty=!0:t?this._cache.delete(t):this._cache.clear()}_getCache(t,n){let l=this._cache.get(t);return(l===void 0||(t===Ma||t===aa)&&l.dirty===!0)&&(l=n.call(this),this._cache.set(t,l)),l}_calculate(t,n,l){if(!this._attachedDepsListeners.get(t)){const s=n.map(u=>u+"Change.konva").join(kl);this.on(s,()=>{this._clearCache(t)}),this._attachedDepsListeners.set(t,!0)}return this._getCache(t,l)}_getCanvasCache(){return this._cache.get(Ja)}_clearSelfAndDescendantCache(t){this._clearCache(t),t===aa&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(Ja)){const{scene:t,filter:n,hit:l,buffer:s}=this._cache.get(Ja);M.releaseCanvas(t,n,l,s),this._cache.delete(Ja)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(t){const n=t||{};let l={};(n.x===void 0||n.y===void 0||n.width===void 0||n.height===void 0)&&(l=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let s=Math.ceil(n.width||l.width),u=Math.ceil(n.height||l.height),h=n.pixelRatio,f=n.x===void 0?Math.floor(l.x):n.x,g=n.y===void 0?Math.floor(l.y):n.y,m=n.offset||0,p=n.drawBorder||!1,v=n.hitCanvasPixelRatio||1;if(!s||!u){M.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const y=Math.abs(Math.round(l.x)-f)>.5?1:0,E=Math.abs(Math.round(l.y)-g)>.5?1:0;s+=m*2+y,u+=m*2+E,f-=m,g-=m;const S=new Na({pixelRatio:h,width:s,height:u}),R=new Na({pixelRatio:h,width:0,height:0,willReadFrequently:!0}),O=new co({pixelRatio:v,width:s,height:u}),G=S.getContext(),z=O.getContext(),B=new Na({width:S.width/S.pixelRatio+Math.abs(f),height:S.height/S.pixelRatio+Math.abs(g),pixelRatio:S.pixelRatio}),H=B.getContext();return O.isCache=!0,S.isCache=!0,this._cache.delete(Ja),this._filterUpToDate=!1,n.imageSmoothingEnabled===!1&&(S.getContext()._context.imageSmoothingEnabled=!1,R.getContext()._context.imageSmoothingEnabled=!1),G.save(),z.save(),H.save(),G.translate(-f,-g),z.translate(-f,-g),H.translate(-f,-g),B.x=f,B.y=g,this._isUnderCache=!0,this._clearSelfAndDescendantCache(jl),this._clearSelfAndDescendantCache(Eh),this.drawScene(S,this,B),this.drawHit(O,this),this._isUnderCache=!1,G.restore(),z.restore(),p&&(G.save(),G.beginPath(),G.rect(0,0,s,u),G.closePath(),G.setAttr("strokeStyle","red"),G.setAttr("lineWidth",5),G.stroke(),G.restore()),this._cache.set(Ja,{scene:S,filter:R,hit:O,buffer:B,x:f,y:g}),this._requestDraw(),this}isCached(){return this._cache.has(Ja)}getClientRect(t){throw new Error('abstract "getClientRect" method call')}_transformedRect(t,n){const l=[{x:t.x,y:t.y},{x:t.x+t.width,y:t.y},{x:t.x+t.width,y:t.y+t.height},{x:t.x,y:t.y+t.height}];let s=1/0,u=1/0,h=-1/0,f=-1/0;const g=this.getAbsoluteTransform(n);return l.forEach(function(m){const p=g.point(m);s===void 0&&(s=h=p.x,u=f=p.y),s=Math.min(s,p.x),u=Math.min(u,p.y),h=Math.max(h,p.x),f=Math.max(f,p.y)}),{x:s,y:u,width:h-s,height:f-u}}_drawCachedSceneCanvas(t){t.save(),t._applyOpacity(this),t._applyGlobalCompositeOperation(this);const n=this._getCanvasCache();t.translate(n.x,n.y);const l=this._getCachedSceneCanvas(),s=l.pixelRatio;t.drawImage(l._canvas,0,0,l.width/s,l.height/s),t.restore()}_drawCachedHitCanvas(t){const n=this._getCanvasCache(),l=n.hit;t.save(),t.translate(n.x,n.y),t.drawImage(l._canvas,0,0,l.width/l.pixelRatio,l.height/l.pixelRatio),t.restore()}_getCachedSceneCanvas(){let t=this.filters(),n=this._getCanvasCache(),l=n.scene,s=n.filter,u=s.getContext(),h,f,g,m;if(!t||t.length===0)return l;if(this._filterUpToDate)return s;let p=!0;for(let y=0;y<t.length;y++)if(typeof t[y]=="string"&&vh(),typeof t[y]!="string"||!vh()){p=!1;break}const v=l.pixelRatio;if(s.setSize(l.width/l.pixelRatio,l.height/l.pixelRatio),p){const y=t.join(" ");return u.save(),u.setAttr("filter",y),u.drawImage(l._canvas,0,0,l.getWidth()/v,l.getHeight()/v),u.restore(),this._filterUpToDate=!0,s}try{for(h=t.length,u.clear(),u.drawImage(l._canvas,0,0,l.getWidth()/v,l.getHeight()/v),f=u.getImageData(0,0,s.getWidth(),s.getHeight()),g=0;g<h;g++)m=t[g],typeof m=="string"&&(m=C5(m)),m.call(this,f),u.putImageData(f,0,0)}catch(y){M.error("Unable to apply filter. "+y.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}return this._filterUpToDate=!0,s}on(t,n){if(this._cache&&this._cache.delete(zl),arguments.length===3)return this._delegate.apply(this,arguments);const l=t.split(kl);for(let s=0;s<l.length;s++){const h=l[s].split("."),f=h[0],g=h[1]||"";this.eventListeners[f]||(this.eventListeners[f]=[]),this.eventListeners[f].push({name:g,handler:n})}return this}off(t,n){let l=(t||"").split(kl),s=l.length,u,h,f,g,m,p;if(this._cache&&this._cache.delete(zl),!t)for(h in this.eventListeners)this._off(h);for(u=0;u<s;u++)if(f=l[u],g=f.split("."),m=g[0],p=g[1],m)this.eventListeners[m]&&this._off(m,p,n);else for(h in this.eventListeners)this._off(h,p,n);return this}dispatchEvent(t){const n={target:this,type:t.type,evt:t};return this.fire(t.type,n),this}addEventListener(t,n){return this.on(t,function(l){n.call(this,l.evt)}),this}removeEventListener(t){return this.off(t),this}_delegate(t,n,l){const s=this;this.on(t,function(u){const h=u.target.findAncestors(n,!0,s);for(let f=0;f<h.length;f++)u=M.cloneObject(u),u.currentTarget=h[f],l.call(h[f],u)})}remove(){return this.isDragging()&&this.stopDrag(),Et._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(aa),this._clearSelfAndDescendantCache(jl),this._clearSelfAndDescendantCache(Eh),this._clearSelfAndDescendantCache(Ah),this._clearSelfAndDescendantCache(Ir),this._clearSelfAndDescendantCache(Wr)}_remove(){this._clearCaches();const t=this.getParent();t&&t.children&&(t.children.splice(this.index,1),t._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(t){const n="get"+M._capitalize(t);return M._isFunction(this[n])?this[n]():this.attrs[t]}getAncestors(){let t=this.getParent(),n=[];for(;t;)n.push(t),t=t.getParent();return n}getAttrs(){return this.attrs||{}}setAttrs(t){return this._batchTransformChanges(()=>{let n,l;if(!t)return this;for(n in t)n!==A5&&(l=Ch+M._capitalize(n),M._isFunction(this[l])?this[l](t[n]):this._setAttr(n,t[n]))}),this}isListening(){return this._getCache(Wr,this._isListening)}_isListening(t){if(!this.listening())return!1;const l=this.getParent();return l&&l!==t&&this!==t?l._isListening(t):!0}isVisible(){return this._getCache(Ir,this._isVisible)}_isVisible(t){if(!this.visible())return!1;const l=this.getParent();return l&&l!==t&&this!==t?l._isVisible(t):!0}shouldDrawHit(t,n=!1){if(t)return this._isVisible(t)&&this._isListening(t);const l=this.getLayer();let s=!1;Et._dragElements.forEach(h=>{h.dragStatus==="dragging"&&(h.node.nodeType==="Stage"||h.node.getLayer()===l)&&(s=!0)});const u=!n&&!F.hitOnDragEnabled&&(s||F.isTransforming());return this.isListening()&&this.isVisible()&&!u}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let t=this.getDepth(),n=this,l=0,s,u,h,f;function g(p){for(s=[],u=p.length,h=0;h<u;h++)f=p[h],l++,f.nodeType!==Th&&(s=s.concat(f.getChildren().slice())),f._id===n._id&&(h=u);s.length>0&&s[0].getDepth()<=t&&g(s)}const m=this.getStage();return n.nodeType!==w5&&m&&g(m.getChildren()),l}getDepth(){let t=0,n=this.parent;for(;n;)t++,n=n.parent;return t}_batchTransformChanges(t){this._batchingTransformChange=!0,t(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(Ma),this._clearSelfAndDescendantCache(aa)),this._needClearTransformCache=!1}setPosition(t){return this._batchTransformChanges(()=>{this.x(t.x),this.y(t.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const t=this.getStage();if(!t)return null;const n=t.getPointerPosition();if(!n)return null;const l=this.getAbsoluteTransform().copy();return l.invert(),l.point(n)}getAbsolutePosition(t){let n=!1,l=this.parent;for(;l;){if(l.isCached()){n=!0;break}l=l.parent}n&&!t&&(t=!0);const s=this.getAbsoluteTransform(t).getMatrix(),u=new Se,h=this.offset();return u.m=s.slice(),u.translate(h.x,h.y),u.getTranslation()}setAbsolutePosition(t){const{x:n,y:l,...s}=this._clearTransform();this.attrs.x=n,this.attrs.y=l,this._clearCache(Ma);const u=this._getAbsoluteTransform().copy();return u.invert(),u.translate(t.x,t.y),t={x:this.attrs.x+u.getTranslation().x,y:this.attrs.y+u.getTranslation().y},this._setTransform(s),this.setPosition({x:t.x,y:t.y}),this._clearCache(Ma),this._clearSelfAndDescendantCache(aa),this}_setTransform(t){let n;for(n in t)this.attrs[n]=t[n]}_clearTransform(){const t={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,t}move(t){let n=t.x,l=t.y,s=this.x(),u=this.y();return n!==void 0&&(s+=n),l!==void 0&&(u+=l),this.setPosition({x:s,y:u}),this}_eachAncestorReverse(t,n){let l=[],s=this.getParent(),u,h;if(!(n&&n._id===this._id)){for(l.unshift(this);s&&(!n||s._id!==n._id);)l.unshift(s),s=s.parent;for(u=l.length,h=0;h<u;h++)t(l[h])}}rotate(t){return this.rotation(this.rotation()+t),this}moveToTop(){if(!this.parent)return M.warn("Node has no parent. moveToTop function is ignored."),!1;const t=this.index,n=this.parent.getChildren().length;return t<n-1?(this.parent.children.splice(t,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return M.warn("Node has no parent. moveUp function is ignored."),!1;const t=this.index,n=this.parent.getChildren().length;return t<n-1?(this.parent.children.splice(t,1),this.parent.children.splice(t+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return M.warn("Node has no parent. moveDown function is ignored."),!1;const t=this.index;return t>0?(this.parent.children.splice(t,1),this.parent.children.splice(t-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return M.warn("Node has no parent. moveToBottom function is ignored."),!1;const t=this.index;return t>0?(this.parent.children.splice(t,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(t){if(!this.parent)return M.warn("Node has no parent. zIndex parameter is ignored."),this;(t<0||t>=this.parent.children.length)&&M.warn("Unexpected value "+t+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const n=this.index;return this.parent.children.splice(n,1),this.parent.children.splice(t,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(jl,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let t=this.opacity();const n=this.getParent();return n&&!n._isUnderCache&&(t*=n.getAbsoluteOpacity()),t}moveTo(t){return this.getParent()!==t&&(this._remove(),t.add(this)),this}toObject(){let t=this.getAttrs(),n,l,s,u,h;const f={attrs:{},className:this.getClassName()};for(n in t)l=t[n],h=M.isObject(l)&&!M._isPlainObject(l)&&!M._isArray(l),!h&&(s=typeof this[n]=="function"&&this[n],delete t[n],u=s?s.call(this):null,t[n]=l,u!==l&&(f.attrs[n]=l));return M._prepareToStringify(f)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(t,n,l){const s=[];n&&this._isMatch(t)&&s.push(this);let u=this.parent;for(;u;){if(u===l)return s;u._isMatch(t)&&s.push(u),u=u.parent}return s}isAncestorOf(t){return!1}findAncestor(t,n,l){return this.findAncestors(t,n,l)[0]}_isMatch(t){if(!t)return!1;if(typeof t=="function")return t(this);let n=t.replace(/ /g,"").split(","),l=n.length,s,u;for(s=0;s<l;s++)if(u=n[s],M.isValidSelector(u)||(M.warn('Selector "'+u+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),M.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),M.warn("Konva is awesome, right?")),u.charAt(0)==="#"){if(this.id()===u.slice(1))return!0}else if(u.charAt(0)==="."){if(this.hasName(u.slice(1)))return!0}else if(this.className===u||this.nodeType===u)return!0;return!1}getLayer(){const t=this.getParent();return t?t.getLayer():null}getStage(){return this._getCache(Ah,this._getStage)}_getStage(){const t=this.getParent();return t?t.getStage():null}fire(t,n={},l){return n.target=n.target||this,l?this._fireAndBubble(t,n):this._fire(t,n),this}getAbsoluteTransform(t){return t?this._getAbsoluteTransform(t):this._getCache(aa,this._getAbsoluteTransform)}_getAbsoluteTransform(t){let n;if(t)return n=new Se,this._eachAncestorReverse(function(l){const s=l.transformsEnabled();s==="all"?n.multiply(l.getTransform()):s==="position"&&n.translate(l.x()-l.offsetX(),l.y()-l.offsetY())},t),n;{n=this._cache.get(aa)||new Se,this.parent?this.parent.getAbsoluteTransform().copyInto(n):n.reset();const l=this.transformsEnabled();if(l==="all")n.multiply(this.getTransform());else if(l==="position"){const s=this.attrs.x||0,u=this.attrs.y||0,h=this.attrs.offsetX||0,f=this.attrs.offsetY||0;n.translate(s-h,u-f)}return n.dirty=!1,n}}getAbsoluteScale(t){let n=this;for(;n;)n._isUnderCache&&(t=n),n=n.getParent();const s=this.getAbsoluteTransform(t).decompose();return{x:s.scaleX,y:s.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(Ma,this._getTransform)}_getTransform(){var t,n;const l=this._cache.get(Ma)||new Se;l.reset();const s=this.x(),u=this.y(),h=F.getAngle(this.rotation()),f=(t=this.attrs.scaleX)!==null&&t!==void 0?t:1,g=(n=this.attrs.scaleY)!==null&&n!==void 0?n:1,m=this.attrs.skewX||0,p=this.attrs.skewY||0,v=this.attrs.offsetX||0,y=this.attrs.offsetY||0;return(s!==0||u!==0)&&l.translate(s,u),h!==0&&l.rotate(h),(m!==0||p!==0)&&l.skew(m,p),(f!==1||g!==1)&&l.scale(f,g),(v!==0||y!==0)&&l.translate(-1*v,-1*y),l.dirty=!1,l}clone(t){let n=M.cloneObject(this.attrs),l,s,u,h,f;for(l in t)n[l]=t[l];const g=new this.constructor(n);for(l in this.eventListeners)for(s=this.eventListeners[l],u=s.length,h=0;h<u;h++)f=s[h],f.name.indexOf(M5)<0&&(g.eventListeners[l]||(g.eventListeners[l]=[]),g.eventListeners[l].push(f));return g}_toKonvaCanvas(t){t=t||{};const n=this.getClientRect(),l=this.getStage(),s=t.x!==void 0?t.x:Math.floor(n.x),u=t.y!==void 0?t.y:Math.floor(n.y),h=t.pixelRatio||1,f=new Na({width:t.width||Math.ceil(n.width)||(l?l.width():0),height:t.height||Math.ceil(n.height)||(l?l.height():0),pixelRatio:h}),g=f.getContext(),m=new Na({width:f.width/f.pixelRatio+Math.abs(s),height:f.height/f.pixelRatio+Math.abs(u),pixelRatio:f.pixelRatio});return t.imageSmoothingEnabled===!1&&(g._context.imageSmoothingEnabled=!1),g.save(),(s||u)&&g.translate(-1*s,-1*u),this.drawScene(f,void 0,m),g.restore(),f}toCanvas(t){return this._toKonvaCanvas(t)._canvas}toDataURL(t){t=t||{};const n=t.mimeType||null,l=t.quality||null,s=this._toKonvaCanvas(t).toDataURL(n,l);return t.callback&&t.callback(s),s}toImage(t){return new Promise((n,l)=>{try{const s=t?.callback;s&&delete t.callback,M._urlToImage(this.toDataURL(t),function(u){n(u),s?.(u)})}catch(s){l(s)}})}toBlob(t){return new Promise((n,l)=>{try{const s=t?.callback;s&&delete t.callback,this.toCanvas(t).toBlob(u=>{n(u),s?.(u)},t?.mimeType,t?.quality)}catch(s){l(s)}})}setSize(t){return this.width(t.width),this.height(t.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():F.dragDistance}_off(t,n,l){let s=this.eventListeners[t],u,h,f;for(u=0;u<s.length;u++)if(h=s[u].name,f=s[u].handler,(h!=="konva"||n==="konva")&&(!n||h===n)&&(!l||l===f)){if(s.splice(u,1),s.length===0){delete this.eventListeners[t];break}u--}}_fireChangeEvent(t,n,l){this._fire(t+T5,{oldVal:n,newVal:l})}addName(t){if(!this.hasName(t)){const n=this.name(),l=n?n+" "+t:t;this.name(l)}return this}hasName(t){if(!t)return!1;const n=this.name();return n?(n||"").split(/\s/g).indexOf(t)!==-1:!1}removeName(t){const n=(this.name()||"").split(/\s/g),l=n.indexOf(t);return l!==-1&&(n.splice(l,1),this.name(n.join(" "))),this}setAttr(t,n){const l=this[Ch+M._capitalize(t)];return M._isFunction(l)?l.call(this,n):this._setAttr(t,n),this}_requestDraw(){if(F.autoDrawEnabled){const t=this.getLayer()||this.getStage();t?.batchDraw()}}_setAttr(t,n){const l=this.attrs[t];l===n&&!M.isObject(n)||(n==null?delete this.attrs[t]:this.attrs[t]=n,this._shouldFireChangeEvents&&this._fireChangeEvent(t,l,n),this._requestDraw())}_setComponentAttr(t,n,l){let s;l!==void 0&&(s=this.attrs[t],s||(this.attrs[t]=this.getAttr(t)),this.attrs[t][n]=l,this._fireChangeEvent(t,s,l))}_fireAndBubble(t,n,l){n&&this.nodeType===Th&&(n.target=this);const s=[R5,N5,O5,z5,D5,G5];if(!(s.indexOf(t)!==-1&&(l&&(this===l||this.isAncestorOf&&this.isAncestorOf(l))||this.nodeType==="Stage"&&!l))){this._fire(t,n);const h=s.indexOf(t)!==-1&&l&&l.isAncestorOf&&l.isAncestorOf(this)&&!l.isAncestorOf(this.parent);(n&&!n.cancelBubble||!n)&&this.parent&&this.parent.isListening()&&!h&&(l&&l.parent?this._fireAndBubble.call(this.parent,t,n,l):this._fireAndBubble.call(this.parent,t,n))}}_getProtoListeners(t){var n,l,s;const u=(n=this._cache.get(zl))!==null&&n!==void 0?n:{};let h=u?.[t];if(h===void 0){h=[];let f=Object.getPrototypeOf(this);for(;f;){const g=(s=(l=f.eventListeners)===null||l===void 0?void 0:l[t])!==null&&s!==void 0?s:[];h.push(...g),f=Object.getPrototypeOf(f)}u[t]=h,this._cache.set(zl,u)}return h}_fire(t,n){n=n||{},n.currentTarget=this,n.type=t;const l=this._getProtoListeners(t);if(l)for(let u=0;u<l.length;u++)l[u].handler.call(this,n);const s=this.eventListeners[t];if(s)for(let u=0;u<s.length;u++)s[u].handler.call(this,n)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(t){const n=t?t.pointerId:void 0,l=this.getStage(),s=this.getAbsolutePosition();if(!l)return;const u=l._getPointerById(n)||l._changedPointerPositions[0]||s;Et._dragElements.set(this._id,{node:this,startPointerPos:u,offset:{x:u.x-s.x,y:u.y-s.y},dragStatus:"ready",pointerId:n})}startDrag(t,n=!0){Et._dragElements.has(this._id)||this._createDragElement(t);const l=Et._dragElements.get(this._id);l.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:t&&t.evt},n)}_setDragPosition(t,n){const l=this.getStage()._getPointerById(n.pointerId);if(!l)return;let s={x:l.x-n.offset.x,y:l.y-n.offset.y};const u=this.dragBoundFunc();if(u!==void 0){const h=u.call(this,s,t);h?s=h:M.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==s.x||this._lastPos.y!==s.y)&&(this.setAbsolutePosition(s),this._requestDraw()),this._lastPos=s}stopDrag(t){const n=Et._dragElements.get(this._id);n&&(n.dragStatus="stopped"),Et._endDragBefore(t),Et._endDragAfter(t)}setDraggable(t){this._setAttr("draggable",t),this._dragChange()}isDragging(){const t=Et._dragElements.get(this._id);return t?t.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(t){if(!(!(t.evt.button!==void 0)||F.dragButtons.indexOf(t.evt.button)>=0)||this.isDragging())return;let s=!1;Et._dragElements.forEach(u=>{this.isAncestorOf(u.node)&&(s=!0)}),s||this._createDragElement(t)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const n=Et._dragElements.get(this._id),l=n&&n.dragStatus==="dragging",s=n&&n.dragStatus==="ready";l?this.stopDrag():s&&Et._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(t={x:0,y:0}){const n=this.getStage();if(!n)return!1;const l={x:-t.x,y:-t.y,width:n.width()+2*t.x,height:n.height()+2*t.y};return M.haveIntersection(l,this.getClientRect())}static create(t,n){return M._isString(t)&&(t=JSON.parse(t)),this._createNode(t,n)}static _createNode(t,n){let l=K.prototype.getClassName.call(t),s=t.children,u,h,f;n&&(t.attrs.container=n),F[l]||(M.warn('Can not find a node with class name "'+l+'". Fallback to "Shape".'),l="Shape");const g=F[l];if(u=new g(t.attrs),s)for(h=s.length,f=0;f<h;f++)u.add(K._createNode(s[f]));return u}}K.prototype.nodeType="Node";K.prototype._attrsAffectingSize=[];K.prototype.eventListeners={};K.prototype.on.call(K.prototype,H5,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(Ma),this._clearSelfAndDescendantCache(aa)});K.prototype.on.call(K.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(Ir)});K.prototype.on.call(K.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(Wr)});K.prototype.on.call(K.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(jl)});const Rt=b.addGetterSetter;Rt(K,"zIndex");Rt(K,"absolutePosition");Rt(K,"position");Rt(K,"x",0,Q());Rt(K,"y",0,Q());Rt(K,"globalCompositeOperation","source-over",Wa());Rt(K,"opacity",1,Q());Rt(K,"name","",Wa());Rt(K,"id","",Wa());Rt(K,"rotation",0,Q());b.addComponentsGetterSetter(K,"scale",["x","y"]);Rt(K,"scaleX",1,Q());Rt(K,"scaleY",1,Q());b.addComponentsGetterSetter(K,"skew",["x","y"]);Rt(K,"skewX",0,Q());Rt(K,"skewY",0,Q());b.addComponentsGetterSetter(K,"offset",["x","y"]);Rt(K,"offsetX",0,Q());Rt(K,"offsetY",0,Q());Rt(K,"dragDistance",void 0,Q());Rt(K,"width",0,Q());Rt(K,"height",0,Q());Rt(K,"listening",!0,Be());Rt(K,"preventDefault",!0,Be());Rt(K,"filters",void 0,function(o){return this._filterUpToDate=!1,o});Rt(K,"visible",!0,Be());Rt(K,"transformsEnabled","all",Wa());Rt(K,"size");Rt(K,"dragBoundFunc");Rt(K,"draggable",!1,Be());b.backCompat(K,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});class be extends K{constructor(){super(...arguments),this.children=[]}getChildren(t){const n=this.children||[];return t?n.filter(t):n}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(t=>{t.parent=null,t.index=0,t.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(t=>{t.parent=null,t.index=0,t.destroy()}),this.children=[],this._requestDraw(),this}add(...t){if(t.length===0)return this;if(t.length>1){for(let l=0;l<t.length;l++)this.add(t[l]);return this}const n=t[0];return n.getParent()?(n.moveTo(this),this):(this._validateAdd(n),n.index=this.getChildren().length,n.parent=this,n._clearCaches(),this.getChildren().push(n),this._fire("add",{child:n}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(t){return this._generalFind(t,!1)}findOne(t){const n=this._generalFind(t,!0);return n.length>0?n[0]:void 0}_generalFind(t,n){const l=[];return this._descendants(s=>{const u=s._isMatch(t);return u&&l.push(s),!!(u&&n)}),l}_descendants(t){let n=!1;const l=this.getChildren();for(const s of l){if(n=t(s),n)return!0;if(s.hasChildren()&&(n=s._descendants(t),n))return!0}return!1}toObject(){const t=K.prototype.toObject.call(this);return t.children=[],this.getChildren().forEach(n=>{t.children.push(n.toObject())}),t}isAncestorOf(t){let n=t.getParent();for(;n;){if(n._id===this._id)return!0;n=n.getParent()}return!1}clone(t){const n=K.prototype.clone.call(this,t);return this.getChildren().forEach(function(l){n.add(l.clone())}),n}getAllIntersections(t){const n=[];return this.find("Shape").forEach(l=>{l.isVisible()&&l.intersects(t)&&n.push(l)}),n}_clearSelfAndDescendantCache(t){var n;super._clearSelfAndDescendantCache(t),!this.isCached()&&((n=this.children)===null||n===void 0||n.forEach(function(l){l._clearSelfAndDescendantCache(t)}))}_setChildrenIndices(){var t;(t=this.children)===null||t===void 0||t.forEach(function(n,l){n.index=l}),this._requestDraw()}drawScene(t,n,l){const s=this.getLayer(),u=t||s&&s.getCanvas(),h=u&&u.getContext(),f=this._getCanvasCache(),g=f&&f.scene,m=u&&u.isCache;if(!this.isVisible()&&!m)return this;if(g){h.save();const p=this.getAbsoluteTransform(n).getMatrix();h.transform(p[0],p[1],p[2],p[3],p[4],p[5]),this._drawCachedSceneCanvas(h),h.restore()}else this._drawChildren("drawScene",u,n,l);return this}drawHit(t,n){if(!this.shouldDrawHit(n))return this;const l=this.getLayer(),s=t||l&&l.hitCanvas,u=s&&s.getContext(),h=this._getCanvasCache();if(h&&h.hit){u.save();const g=this.getAbsoluteTransform(n).getMatrix();u.transform(g[0],g[1],g[2],g[3],g[4],g[5]),this._drawCachedHitCanvas(u),u.restore()}else this._drawChildren("drawHit",s,n);return this}_drawChildren(t,n,l,s){var u;const h=n&&n.getContext(),f=this.clipWidth(),g=this.clipHeight(),m=this.clipFunc(),p=typeof f=="number"&&typeof g=="number"||m,v=l===this;if(p){h.save();const E=this.getAbsoluteTransform(l);let S=E.getMatrix();h.transform(S[0],S[1],S[2],S[3],S[4],S[5]),h.beginPath();let R;if(m)R=m.call(this,h,this);else{const O=this.clipX(),G=this.clipY();h.rect(O||0,G||0,f,g)}h.clip.apply(h,R),S=E.copy().invert().getMatrix(),h.transform(S[0],S[1],S[2],S[3],S[4],S[5])}const y=!v&&this.globalCompositeOperation()!=="source-over"&&t==="drawScene";y&&(h.save(),h._applyGlobalCompositeOperation(this)),(u=this.children)===null||u===void 0||u.forEach(function(E){E[t](n,l,s)}),y&&h.restore(),p&&h.restore()}getClientRect(t={}){var n;const l=t.skipTransform,s=t.relativeTo;let u,h,f,g,m={x:1/0,y:1/0,width:0,height:0};const p=this;(n=this.children)===null||n===void 0||n.forEach(function(E){if(!E.visible())return;const S=E.getClientRect({relativeTo:p,skipShadow:t.skipShadow,skipStroke:t.skipStroke});S.width===0&&S.height===0||(u===void 0?(u=S.x,h=S.y,f=S.x+S.width,g=S.y+S.height):(u=Math.min(u,S.x),h=Math.min(h,S.y),f=Math.max(f,S.x+S.width),g=Math.max(g,S.y+S.height)))});const v=this.find("Shape");let y=!1;for(let E=0;E<v.length;E++)if(v[E]._isVisible(this)){y=!0;break}return y&&u!==void 0?m={x:u,y:h,width:f-u,height:g-h}:m={x:0,y:0,width:0,height:0},l?m:this._transformedRect(m,s)}}b.addComponentsGetterSetter(be,"clip",["x","y","width","height"]);b.addGetterSetter(be,"clipX",void 0,Q());b.addGetterSetter(be,"clipY",void 0,Q());b.addGetterSetter(be,"clipWidth",void 0,Q());b.addGetterSetter(be,"clipHeight",void 0,Q());b.addGetterSetter(be,"clipFunc");const zi=new Map,s0=F._global.PointerEvent!==void 0;function Br(o){return zi.get(o)}function fo(o){return{evt:o,pointerId:o.pointerId}}function r0(o,t){return zi.get(o)===t}function o0(o,t){Mi(o),t.getStage()&&(zi.set(o,t),s0&&t._fire("gotpointercapture",fo(new PointerEvent("gotpointercapture"))))}function Mi(o,t){const n=zi.get(o);if(!n)return;const l=n.getStage();l&&l.content,zi.delete(o),s0&&n._fire("lostpointercapture",fo(new PointerEvent("lostpointercapture")))}const U5="Stage",L5="string",Mh="px",j5="mouseout",u0="mouseleave",c0="mouseover",h0="mouseenter",f0="mousemove",d0="mousedown",g0="mouseup",xi="pointermove",Ei="pointerdown",Un="pointerup",Ci="pointercancel",k5="lostpointercapture",Dl="pointerout",Ti="pointerleave",Gl="pointerover",wl="pointerenter",$r="contextmenu",m0="touchstart",p0="touchend",y0="touchmove",_0="touchcancel",to="wheel",Y5=5,q5=[[h0,"_pointerenter"],[d0,"_pointerdown"],[f0,"_pointermove"],[g0,"_pointerup"],[u0,"_pointerleave"],[m0,"_pointerdown"],[y0,"_pointermove"],[p0,"_pointerup"],[_0,"_pointercancel"],[c0,"_pointerover"],[to,"_wheel"],[$r,"_contextmenu"],[Ei,"_pointerdown"],[xi,"_pointermove"],[Un,"_pointerup"],[Ci,"_pointercancel"],[Ti,"_pointerleave"],[k5,"_lostpointercapture"]],Ur={mouse:{[Dl]:j5,[Ti]:u0,[Gl]:c0,[wl]:h0,[xi]:f0,[Ei]:d0,[Un]:g0,[Ci]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[Dl]:"touchout",[Ti]:"touchleave",[Gl]:"touchover",[wl]:"touchenter",[xi]:y0,[Ei]:m0,[Un]:p0,[Ci]:_0,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[Dl]:Dl,[Ti]:Ti,[Gl]:Gl,[wl]:wl,[xi]:xi,[Ei]:Ei,[Un]:Un,[Ci]:Ci,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},Ai=o=>o.indexOf("pointer")>=0?"pointer":o.indexOf("touch")>=0?"touch":"mouse",Gn=o=>{const t=Ai(o);if(t==="pointer")return F.pointerEventsEnabled&&Ur.pointer;if(t==="touch")return Ur.touch;if(t==="mouse")return Ur.mouse};function Rh(o={}){return(o.clipFunc||o.clipWidth||o.clipHeight)&&M.warn("Stage does not support clipping. Please use clip for Layers or Groups."),o}const X5="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);",Ri=[];class Ql extends be{constructor(t){super(Rh(t)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),Ri.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{Rh(this.attrs)}),this._checkVisibility()}_validateAdd(t){const n=t.getType()==="Layer",l=t.getType()==="FastLayer";n||l||M.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const t=this.visible()?"":"none";this.content.style.display=t}setContainer(t){if(typeof t===L5){let n;if(t.charAt(0)==="."){const l=t.slice(1);t=document.getElementsByClassName(l)[0]}else t.charAt(0)!=="#"?n=t:n=t.slice(1),t=document.getElementById(n);if(!t)throw"Can not find container in document with id "+n}return this._setAttr("container",t),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),t.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){const t=this.children,n=t.length;for(let l=0;l<n;l++)t[l].clear();return this}clone(t){return t||(t={}),t.container=typeof document<"u"&&document.createElement("div"),be.prototype.clone.call(this,t)}destroy(){super.destroy();const t=this.content;t&&M._isInDocument(t)&&this.container().removeChild(t);const n=Ri.indexOf(this);return n>-1&&Ri.splice(n,1),M.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const t=this._pointerPositions[0]||this._changedPointerPositions[0];return t?{x:t.x,y:t.y}:(M.warn(X5),null)}_getPointerById(t){return this._pointerPositions.find(n=>n.id===t)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(t){t={...t},t.x=t.x||0,t.y=t.y||0,t.width=t.width||this.width(),t.height=t.height||this.height();const n=new Na({width:t.width,height:t.height,pixelRatio:t.pixelRatio||1}),l=n.getContext()._context,s=this.children;return(t.x||t.y)&&l.translate(-1*t.x,-1*t.y),s.forEach(function(u){if(!u.isVisible())return;const h=u._toKonvaCanvas(t);l.drawImage(h._canvas,t.x,t.y,h.getWidth()/h.getPixelRatio(),h.getHeight()/h.getPixelRatio())}),n}getIntersection(t){if(!t)return null;const n=this.children,l=n.length,s=l-1;for(let u=s;u>=0;u--){const h=n[u].getIntersection(t);if(h)return h}return null}_resizeDOM(){const t=this.width(),n=this.height();this.content&&(this.content.style.width=t+Mh,this.content.style.height=n+Mh),this.bufferCanvas.setSize(t,n),this.bufferHitCanvas.setSize(t,n),this.children.forEach(l=>{l.setSize({width:t,height:n}),l.draw()})}add(t,...n){if(arguments.length>1){for(let s=0;s<arguments.length;s++)this.add(arguments[s]);return this}super.add(t);const l=this.children.length;return l>Y5&&M.warn("The stage has "+l+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),t.setSize({width:this.width(),height:this.height()}),t.draw(),F.isBrowser&&this.content.appendChild(t.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(t){return r0(t,this)}setPointerCapture(t){o0(t,this)}releaseCapture(t){Mi(t)}getLayers(){return this.children}_bindContentEvents(){F.isBrowser&&q5.forEach(([t,n])=>{this.content.addEventListener(t,l=>{this[n](l)},{passive:!1})})}_pointerenter(t){this.setPointersPositions(t);const n=Gn(t.type);n&&this._fire(n.pointerenter,{evt:t,target:this,currentTarget:this})}_pointerover(t){this.setPointersPositions(t);const n=Gn(t.type);n&&this._fire(n.pointerover,{evt:t,target:this,currentTarget:this})}_getTargetShape(t){let n=this[t+"targetShape"];return n&&!n.getStage()&&(n=null),n}_pointerleave(t){const n=Gn(t.type),l=Ai(t.type);if(!n)return;this.setPointersPositions(t);const s=this._getTargetShape(l),u=!(F.isDragging()||F.isTransforming())||F.hitOnDragEnabled;s&&u?(s._fireAndBubble(n.pointerout,{evt:t}),s._fireAndBubble(n.pointerleave,{evt:t}),this._fire(n.pointerleave,{evt:t,target:this,currentTarget:this}),this[l+"targetShape"]=null):u&&(this._fire(n.pointerleave,{evt:t,target:this,currentTarget:this}),this._fire(n.pointerout,{evt:t,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(t){const n=Gn(t.type),l=Ai(t.type);if(!n)return;this.setPointersPositions(t);let s=!1;this._changedPointerPositions.forEach(u=>{const h=this.getIntersection(u);if(Et.justDragged=!1,F["_"+l+"ListenClick"]=!0,!h||!h.isListening()){this[l+"ClickStartShape"]=void 0;return}F.capturePointerEventsEnabled&&h.setPointerCapture(u.id),this[l+"ClickStartShape"]=h,h._fireAndBubble(n.pointerdown,{evt:t,pointerId:u.id}),s=!0;const f=t.type.indexOf("touch")>=0;h.preventDefault()&&t.cancelable&&f&&t.preventDefault()}),s||this._fire(n.pointerdown,{evt:t,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(t){const n=Gn(t.type),l=Ai(t.type);if(!n)return;const s=t.type.indexOf("touch")>=0||t.pointerType==="touch";if(F.isDragging()&&Et.node.preventDefault()&&t.cancelable&&s&&t.preventDefault(),this.setPointersPositions(t),!(!(F.isDragging()||F.isTransforming())||F.hitOnDragEnabled))return;const h={};let f=!1;const g=this._getTargetShape(l);this._changedPointerPositions.forEach(m=>{const p=Br(m.id)||this.getIntersection(m),v=m.id,y={evt:t,pointerId:v},E=g!==p;if(E&&g&&(g._fireAndBubble(n.pointerout,{...y},p),g._fireAndBubble(n.pointerleave,{...y},p)),p){if(h[p._id])return;h[p._id]=!0}p&&p.isListening()?(f=!0,E&&(p._fireAndBubble(n.pointerover,{...y},g),p._fireAndBubble(n.pointerenter,{...y},g),this[l+"targetShape"]=p),p._fireAndBubble(n.pointermove,{...y})):g&&(this._fire(n.pointerover,{evt:t,target:this,currentTarget:this,pointerId:v}),this[l+"targetShape"]=null)}),f||this._fire(n.pointermove,{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(t){const n=Gn(t.type),l=Ai(t.type);if(!n)return;this.setPointersPositions(t);const s=this[l+"ClickStartShape"],u=this[l+"ClickEndShape"],h={};let f=!1;this._changedPointerPositions.forEach(g=>{const m=Br(g.id)||this.getIntersection(g);if(m){if(m.releaseCapture(g.id),h[m._id])return;h[m._id]=!0}const p=g.id,v={evt:t,pointerId:p};let y=!1;F["_"+l+"InDblClickWindow"]?(y=!0,clearTimeout(this[l+"DblTimeout"])):Et.justDragged||(F["_"+l+"InDblClickWindow"]=!0,clearTimeout(this[l+"DblTimeout"])),this[l+"DblTimeout"]=setTimeout(function(){F["_"+l+"InDblClickWindow"]=!1},F.dblClickWindow),m&&m.isListening()?(f=!0,this[l+"ClickEndShape"]=m,m._fireAndBubble(n.pointerup,{...v}),F["_"+l+"ListenClick"]&&s&&s===m&&(m._fireAndBubble(n.pointerclick,{...v}),y&&u&&u===m&&m._fireAndBubble(n.pointerdblclick,{...v}))):(this[l+"ClickEndShape"]=null,f||(this._fire(n.pointerup,{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),f=!0),F["_"+l+"ListenClick"]&&this._fire(n.pointerclick,{evt:t,target:this,currentTarget:this,pointerId:p}),y&&this._fire(n.pointerdblclick,{evt:t,target:this,currentTarget:this,pointerId:p}))}),f||this._fire(n.pointerup,{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),F["_"+l+"ListenClick"]=!1,t.cancelable&&l!=="touch"&&l!=="pointer"&&t.preventDefault()}_contextmenu(t){this.setPointersPositions(t);const n=this.getIntersection(this.getPointerPosition());n&&n.isListening()?n._fireAndBubble($r,{evt:t}):this._fire($r,{evt:t,target:this,currentTarget:this})}_wheel(t){this.setPointersPositions(t);const n=this.getIntersection(this.getPointerPosition());n&&n.isListening()?n._fireAndBubble(to,{evt:t}):this._fire(to,{evt:t,target:this,currentTarget:this})}_pointercancel(t){this.setPointersPositions(t);const n=Br(t.pointerId)||this.getIntersection(this.getPointerPosition());n&&n._fireAndBubble(Un,fo(t)),Mi(t.pointerId)}_lostpointercapture(t){Mi(t.pointerId)}setPointersPositions(t){const n=this._getContentPosition();let l=null,s=null;t=t||window.event,t.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(t.touches,u=>{this._pointerPositions.push({id:u.identifier,x:(u.clientX-n.left)/n.scaleX,y:(u.clientY-n.top)/n.scaleY})}),Array.prototype.forEach.call(t.changedTouches||t.touches,u=>{this._changedPointerPositions.push({id:u.identifier,x:(u.clientX-n.left)/n.scaleX,y:(u.clientY-n.top)/n.scaleY})})):(l=(t.clientX-n.left)/n.scaleX,s=(t.clientY-n.top)/n.scaleY,this.pointerPos={x:l,y:s},this._pointerPositions=[{x:l,y:s,id:M._getFirstPointerId(t)}],this._changedPointerPositions=[{x:l,y:s,id:M._getFirstPointerId(t)}])}_setPointerPosition(t){M.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(t)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const t=this.content.getBoundingClientRect();return{top:t.top,left:t.left,scaleX:t.width/this.content.clientWidth||1,scaleY:t.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new Na({width:this.width(),height:this.height()}),this.bufferHitCanvas=new co({pixelRatio:1,width:this.width(),height:this.height()}),!F.isBrowser)return;const t=this.container();if(!t)throw"Stage has no container. A container is required.";t.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),t.appendChild(this.content),this._resizeDOM()}cache(){return M.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(t){t.batchDraw()}),this}}Ql.prototype.nodeType=U5;Bt(Ql);b.addGetterSetter(Ql,"container");F.isBrowser&&document.addEventListener("visibilitychange",()=>{Ri.forEach(o=>{o.batchDraw()})});const v0="hasShadow",S0="shadowRGBA",b0="patternImage",x0="linearGradient",E0="radialGradient";let Hl;function Lr(){return Hl||(Hl=M.createCanvasElement().getContext("2d"),Hl)}const Ni={};function P5(o){const t=this.attrs.fillRule;t?o.fill(t):o.fill()}function V5(o){o.stroke()}function K5(o){const t=this.attrs.fillRule;t?o.fill(t):o.fill()}function Q5(o){o.stroke()}function Z5(){this._clearCache(v0)}function J5(){this._clearCache(S0)}function F5(){this._clearCache(b0)}function W5(){this._clearCache(x0)}function I5(){this._clearCache(E0)}class k extends K{constructor(t){super(t);let n;for(;n=M.getRandomColor(),!(n&&!(n in Ni)););this.colorKey=n,Ni[n]=this}getContext(){return M.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return M.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(v0,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(b0,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const n=Lr().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(n&&n.setTransform){const l=new Se;l.translate(this.fillPatternX(),this.fillPatternY()),l.rotate(F.getAngle(this.fillPatternRotation())),l.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),l.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const s=l.getMatrix(),u=typeof DOMMatrix>"u"?{a:s[0],b:s[1],c:s[2],d:s[3],e:s[4],f:s[5]}:new DOMMatrix(s);n.setTransform(u)}return n}}_getLinearGradient(){return this._getCache(x0,this.__getLinearGradient)}__getLinearGradient(){const t=this.fillLinearGradientColorStops();if(t){const n=Lr(),l=this.fillLinearGradientStartPoint(),s=this.fillLinearGradientEndPoint(),u=n.createLinearGradient(l.x,l.y,s.x,s.y);for(let h=0;h<t.length;h+=2)u.addColorStop(t[h],t[h+1]);return u}}_getRadialGradient(){return this._getCache(E0,this.__getRadialGradient)}__getRadialGradient(){const t=this.fillRadialGradientColorStops();if(t){const n=Lr(),l=this.fillRadialGradientStartPoint(),s=this.fillRadialGradientEndPoint(),u=n.createRadialGradient(l.x,l.y,this.fillRadialGradientStartRadius(),s.x,s.y,this.fillRadialGradientEndRadius());for(let h=0;h<t.length;h+=2)u.addColorStop(t[h],t[h+1]);return u}}getShadowRGBA(){return this._getCache(S0,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const t=M.colorToRGBA(this.shadowColor());if(t)return"rgba("+t.r+","+t.g+","+t.b+","+t.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const t=this.hitStrokeWidth();return t==="auto"?this.hasStroke():this.strokeEnabled()&&!!t}intersects(t){const n=this.getStage();if(!n)return!1;const l=n.bufferHitCanvas;return l.getContext().clear(),this.drawHit(l,void 0,!0),l.context.getImageData(Math.round(t.x),Math.round(t.y),1,1).data[3]>0}destroy(){return K.prototype.destroy.call(this),delete Ni[this.colorKey],delete this.colorKey,this}_useBufferCanvas(t){var n;if(!((n=this.attrs.perfectDrawEnabled)!==null&&n!==void 0?n:!0))return!1;const s=t||this.hasFill(),u=this.hasStroke(),h=this.getAbsoluteOpacity()!==1;if(s&&u&&h)return!0;const f=this.hasShadow(),g=this.shadowForStrokeEnabled();return!!(s&&u&&f&&g)}setStrokeHitEnabled(t){M.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),t?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const t=this.size();return{x:this._centroid?-t.width/2:0,y:this._centroid?-t.height/2:0,width:t.width,height:t.height}}getClientRect(t={}){let n=!1,l=this.getParent();for(;l;){if(l.isCached()){n=!0;break}l=l.getParent()}const s=t.skipTransform,u=t.relativeTo||n&&this.getStage()||void 0,h=this.getSelfRect(),g=!t.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,m=h.width+g,p=h.height+g,v=!t.skipShadow&&this.hasShadow(),y=v?this.shadowOffsetX():0,E=v?this.shadowOffsetY():0,S=m+Math.abs(y),R=p+Math.abs(E),O=v&&this.shadowBlur()||0,G=S+O*2,z=R+O*2,B={width:G,height:z,x:-(g/2+O)+Math.min(y,0)+h.x,y:-(g/2+O)+Math.min(E,0)+h.y};return s?B:this._transformedRect(B,u)}drawScene(t,n,l){const s=this.getLayer(),u=t||s.getCanvas(),h=u.getContext(),f=this._getCanvasCache(),g=this.getSceneFunc(),m=this.hasShadow();let p;const v=n===this;if(!this.isVisible()&&!v)return this;if(f){h.save();const y=this.getAbsoluteTransform(n).getMatrix();return h.transform(y[0],y[1],y[2],y[3],y[4],y[5]),this._drawCachedSceneCanvas(h),h.restore(),this}if(!g)return this;if(h.save(),this._useBufferCanvas()){p=this.getStage();const y=l||p.bufferCanvas,E=y.getContext();E.clear(),E.save(),E._applyLineJoin(this),E._applyMiterLimit(this);const S=this.getAbsoluteTransform(n).getMatrix();E.transform(S[0],S[1],S[2],S[3],S[4],S[5]),g.call(this,E,this),E.restore();const R=y.pixelRatio;m&&h._applyShadow(this),h._applyOpacity(this),h._applyGlobalCompositeOperation(this),h.drawImage(y._canvas,y.x||0,y.y||0,y.width/R,y.height/R)}else{if(h._applyLineJoin(this),h._applyMiterLimit(this),!v){const y=this.getAbsoluteTransform(n).getMatrix();h.transform(y[0],y[1],y[2],y[3],y[4],y[5]),h._applyOpacity(this),h._applyGlobalCompositeOperation(this)}m&&h._applyShadow(this),g.call(this,h,this)}return h.restore(),this}drawHit(t,n,l=!1){if(!this.shouldDrawHit(n,l))return this;const s=this.getLayer(),u=t||s.hitCanvas,h=u&&u.getContext(),f=this.hitFunc()||this.sceneFunc(),g=this._getCanvasCache(),m=g&&g.hit;if(this.colorKey||M.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),m){h.save();const v=this.getAbsoluteTransform(n).getMatrix();return h.transform(v[0],v[1],v[2],v[3],v[4],v[5]),this._drawCachedHitCanvas(h),h.restore(),this}if(!f)return this;if(h.save(),h._applyLineJoin(this),h._applyMiterLimit(this),!(this===n)){const v=this.getAbsoluteTransform(n).getMatrix();h.transform(v[0],v[1],v[2],v[3],v[4],v[5])}return f.call(this,h,this),h.restore(),this}drawHitFromCache(t=0){const n=this._getCanvasCache(),l=this._getCachedSceneCanvas(),s=n.hit,u=s.getContext(),h=s.getWidth(),f=s.getHeight();u.clear(),u.drawImage(l._canvas,0,0,h,f);try{const g=u.getImageData(0,0,h,f),m=g.data,p=m.length,v=M._hexToRgb(this.colorKey);for(let y=0;y<p;y+=4)m[y+3]>t?(m[y]=v.r,m[y+1]=v.g,m[y+2]=v.b,m[y+3]=255):m[y+3]=0;u.putImageData(g,0,0)}catch(g){M.error("Unable to draw hit graph from cached scene canvas. "+g.message)}return this}hasPointerCapture(t){return r0(t,this)}setPointerCapture(t){o0(t,this)}releaseCapture(t){Mi(t)}}k.prototype._fillFunc=P5;k.prototype._strokeFunc=V5;k.prototype._fillFuncHit=K5;k.prototype._strokeFuncHit=Q5;k.prototype._centroid=!1;k.prototype.nodeType="Shape";Bt(k);k.prototype.eventListeners={};k.prototype.on.call(k.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",Z5);k.prototype.on.call(k.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",J5);k.prototype.on.call(k.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",F5);k.prototype.on.call(k.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",W5);k.prototype.on.call(k.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",I5);b.addGetterSetter(k,"stroke",void 0,l0());b.addGetterSetter(k,"strokeWidth",2,Q());b.addGetterSetter(k,"fillAfterStrokeEnabled",!1);b.addGetterSetter(k,"hitStrokeWidth","auto",ho());b.addGetterSetter(k,"strokeHitEnabled",!0,Be());b.addGetterSetter(k,"perfectDrawEnabled",!0,Be());b.addGetterSetter(k,"shadowForStrokeEnabled",!0,Be());b.addGetterSetter(k,"lineJoin");b.addGetterSetter(k,"lineCap");b.addGetterSetter(k,"miterLimit");b.addGetterSetter(k,"sceneFunc");b.addGetterSetter(k,"hitFunc");b.addGetterSetter(k,"dash");b.addGetterSetter(k,"dashOffset",0,Q());b.addGetterSetter(k,"shadowColor",void 0,Wa());b.addGetterSetter(k,"shadowBlur",0,Q());b.addGetterSetter(k,"shadowOpacity",1,Q());b.addComponentsGetterSetter(k,"shadowOffset",["x","y"]);b.addGetterSetter(k,"shadowOffsetX",0,Q());b.addGetterSetter(k,"shadowOffsetY",0,Q());b.addGetterSetter(k,"fillPatternImage");b.addGetterSetter(k,"fill",void 0,l0());b.addGetterSetter(k,"fillPatternX",0,Q());b.addGetterSetter(k,"fillPatternY",0,Q());b.addGetterSetter(k,"fillLinearGradientColorStops");b.addGetterSetter(k,"strokeLinearGradientColorStops");b.addGetterSetter(k,"fillRadialGradientStartRadius",0);b.addGetterSetter(k,"fillRadialGradientEndRadius",0);b.addGetterSetter(k,"fillRadialGradientColorStops");b.addGetterSetter(k,"fillPatternRepeat","repeat");b.addGetterSetter(k,"fillEnabled",!0);b.addGetterSetter(k,"strokeEnabled",!0);b.addGetterSetter(k,"shadowEnabled",!0);b.addGetterSetter(k,"dashEnabled",!0);b.addGetterSetter(k,"strokeScaleEnabled",!0);b.addGetterSetter(k,"fillPriority","color");b.addComponentsGetterSetter(k,"fillPatternOffset",["x","y"]);b.addGetterSetter(k,"fillPatternOffsetX",0,Q());b.addGetterSetter(k,"fillPatternOffsetY",0,Q());b.addComponentsGetterSetter(k,"fillPatternScale",["x","y"]);b.addGetterSetter(k,"fillPatternScaleX",1,Q());b.addGetterSetter(k,"fillPatternScaleY",1,Q());b.addComponentsGetterSetter(k,"fillLinearGradientStartPoint",["x","y"]);b.addComponentsGetterSetter(k,"strokeLinearGradientStartPoint",["x","y"]);b.addGetterSetter(k,"fillLinearGradientStartPointX",0);b.addGetterSetter(k,"strokeLinearGradientStartPointX",0);b.addGetterSetter(k,"fillLinearGradientStartPointY",0);b.addGetterSetter(k,"strokeLinearGradientStartPointY",0);b.addComponentsGetterSetter(k,"fillLinearGradientEndPoint",["x","y"]);b.addComponentsGetterSetter(k,"strokeLinearGradientEndPoint",["x","y"]);b.addGetterSetter(k,"fillLinearGradientEndPointX",0);b.addGetterSetter(k,"strokeLinearGradientEndPointX",0);b.addGetterSetter(k,"fillLinearGradientEndPointY",0);b.addGetterSetter(k,"strokeLinearGradientEndPointY",0);b.addComponentsGetterSetter(k,"fillRadialGradientStartPoint",["x","y"]);b.addGetterSetter(k,"fillRadialGradientStartPointX",0);b.addGetterSetter(k,"fillRadialGradientStartPointY",0);b.addComponentsGetterSetter(k,"fillRadialGradientEndPoint",["x","y"]);b.addGetterSetter(k,"fillRadialGradientEndPointX",0);b.addGetterSetter(k,"fillRadialGradientEndPointY",0);b.addGetterSetter(k,"fillPatternRotation",0);b.addGetterSetter(k,"fillRule",void 0,Wa());b.backCompat(k,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"});const $5="#",tg="beforeDraw",eg="draw",C0=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],ag=C0.length;class Ia extends be{constructor(t){super(t),this.canvas=new Na,this.hitCanvas=new co({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(t){return this.getContext().clear(t),this.getHitCanvas().getContext().clear(t),this}setZIndex(t){super.setZIndex(t);const n=this.getStage();return n&&n.content&&(n.content.removeChild(this.getNativeCanvasElement()),t<n.children.length-1?n.content.insertBefore(this.getNativeCanvasElement(),n.children[t+1].getCanvas()._canvas):n.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){K.prototype.moveToTop.call(this);const t=this.getStage();return t&&t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!K.prototype.moveUp.call(this))return!1;const n=this.getStage();return!n||!n.content?!1:(n.content.removeChild(this.getNativeCanvasElement()),this.index<n.children.length-1?n.content.insertBefore(this.getNativeCanvasElement(),n.children[this.index+1].getCanvas()._canvas):n.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(K.prototype.moveDown.call(this)){const t=this.getStage();if(t){const n=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),n[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(K.prototype.moveToBottom.call(this)){const t=this.getStage();if(t){const n=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),n[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const t=this.getNativeCanvasElement();return K.prototype.remove.call(this),t&&t.parentNode&&M._isInDocument(t)&&t.parentNode.removeChild(t),this}getStage(){return this.parent}setSize({width:t,height:n}){return this.canvas.setSize(t,n),this.hitCanvas.setSize(t,n),this._setSmoothEnabled(),this}_validateAdd(t){const n=t.getType();n!=="Group"&&n!=="Shape"&&M.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(t){return t={...t},t.width=t.width||this.getWidth(),t.height=t.height||this.getHeight(),t.x=t.x!==void 0?t.x:this.x(),t.y=t.y!==void 0?t.y:this.y(),K.prototype._toKonvaCanvas.call(this,t)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){M.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){M.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,M.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(t){if(!this.isListening()||!this.isVisible())return null;let n=1,l=!1;for(;;){for(let s=0;s<ag;s++){const u=C0[s],h=this._getIntersection({x:t.x+u.x*n,y:t.y+u.y*n}),f=h.shape;if(f)return f;if(l=!!h.antialiased,!h.antialiased)break}if(l)n+=1;else return null}}_getIntersection(t){const n=this.hitCanvas.pixelRatio,l=this.hitCanvas.context.getImageData(Math.round(t.x*n),Math.round(t.y*n),1,1).data,s=l[3];if(s===255){const u=M._rgbToHex(l[0],l[1],l[2]),h=Ni[$5+u];return h?{shape:h}:{antialiased:!0}}else if(s>0)return{antialiased:!0};return{}}drawScene(t,n,l){const s=this.getLayer(),u=t||s&&s.getCanvas();return this._fire(tg,{node:this}),this.clearBeforeDraw()&&u.getContext().clear(),be.prototype.drawScene.call(this,u,n,l),this._fire(eg,{node:this}),this}drawHit(t,n){const l=this.getLayer(),s=t||l&&l.hitCanvas;return l&&l.clearBeforeDraw()&&l.getHitCanvas().getContext().clear(),be.prototype.drawHit.call(this,s,n),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(t){M.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(t)}getHitGraphEnabled(t){return M.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const t=this.parent;!!this.hitCanvas._canvas.parentNode?t.content.removeChild(this.hitCanvas._canvas):t.content.appendChild(this.hitCanvas._canvas)}destroy(){return M.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}}Ia.prototype.nodeType="Layer";Bt(Ia);b.addGetterSetter(Ia,"imageSmoothingEnabled",!0);b.addGetterSetter(Ia,"clearBeforeDraw",!0);b.addGetterSetter(Ia,"hitGraphEnabled",!0,Be());class go extends Ia{constructor(t){super(t),this.listening(!1),M.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}go.prototype.nodeType="FastLayer";Bt(go);class Ln extends be{_validateAdd(t){const n=t.getType();n!=="Group"&&n!=="Shape"&&M.throw("You may only add groups and shapes to groups.")}}Ln.prototype.nodeType="Group";Bt(Ln);const jr=(function(){return Fa.performance&&Fa.performance.now?function(){return Fa.performance.now()}:function(){return new Date().getTime()}})();class Oe{constructor(t,n){this.id=Oe.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:jr(),frameRate:0},this.func=t,this.setLayers(n)}setLayers(t){let n=[];return t&&(n=Array.isArray(t)?t:[t]),this.layers=n,this}getLayers(){return this.layers}addLayer(t){const n=this.layers,l=n.length;for(let s=0;s<l;s++)if(n[s]._id===t._id)return!1;return this.layers.push(t),!0}isRunning(){const n=Oe.animations,l=n.length;for(let s=0;s<l;s++)if(n[s].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=jr(),Oe._addAnimation(this),this}stop(){return Oe._removeAnimation(this),this}_updateFrameObject(t){this.frame.timeDiff=t-this.frame.lastTime,this.frame.lastTime=t,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(t){this.animations.push(t),this._handleAnimation()}static _removeAnimation(t){const n=t.id,l=this.animations,s=l.length;for(let u=0;u<s;u++)if(l[u].id===n){this.animations.splice(u,1);break}}static _runFrames(){const t={},n=this.animations;for(let l=0;l<n.length;l++){const s=n[l],u=s.layers,h=s.func;s._updateFrameObject(jr());const f=u.length;let g;if(h?g=h.call(s,s.frame)!==!1:g=!0,!!g)for(let m=0;m<f;m++){const p=u[m];p._id!==void 0&&(t[p._id]=p)}}for(const l in t)t.hasOwnProperty(l)&&t[l].batchDraw()}static _animationLoop(){const t=Oe;t.animations.length?(t._runFrames(),M.requestAnimFrame(t._animationLoop)):t.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,M.requestAnimFrame(this._animationLoop))}}Oe.animations=[];Oe.animIdCounter=0;Oe.animRunning=!1;const ng={node:1,duration:1,easing:1,onFinish:1,yoyo:1},ig=1,Nh=2,Oh=3,zh=["fill","stroke","shadowColor"];let lg=0;class sg{constructor(t,n,l,s,u,h,f){this.prop=t,this.propFunc=n,this.begin=s,this._pos=s,this.duration=h,this._change=0,this.prevPos=0,this.yoyo=f,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=l,this._change=u-this.begin,this.pause()}fire(t){const n=this[t];n&&n()}setTime(t){t>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():t<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=t,this.update())}getTime(){return this._time}setPosition(t){this.prevPos=this._pos,this.propFunc(t),this._pos=t}getPosition(t){return t===void 0&&(t=this._time),this.func(t,this.begin,this._change,this.duration)}play(){this.state=Nh,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=Oh,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(t){this.pause(),this._time=t,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const t=this.getTimer()-this._startTime;this.state===Nh?this.setTime(t):this.state===Oh&&this.setTime(this.duration-t)}pause(){this.state=ig,this.fire("onPause")}getTimer(){return new Date().getTime()}}class zt{constructor(t){const n=this,l=t.node,s=l._id,u=t.easing||Oi.Linear,h=!!t.yoyo;let f,g;typeof t.duration>"u"?f=.3:t.duration===0?f=.001:f=t.duration,this.node=l,this._id=lg++;const m=l.getLayer()||(l instanceof F.Stage?l.getLayers():null);m||M.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new Oe(function(){n.tween.onEnterFrame()},m),this.tween=new sg(g,function(p){n._tweenFunc(p)},u,0,1,f*1e3,h),this._addListeners(),zt.attrs[s]||(zt.attrs[s]={}),zt.attrs[s][this._id]||(zt.attrs[s][this._id]={}),zt.tweens[s]||(zt.tweens[s]={});for(g in t)ng[g]===void 0&&this._addAttr(g,t[g]);this.reset(),this.onFinish=t.onFinish,this.onReset=t.onReset,this.onUpdate=t.onUpdate}_addAttr(t,n){const l=this.node,s=l._id;let u,h,f,g,m;const p=zt.tweens[s][t];p&&delete zt.attrs[s][p][t];let v=l.getAttr(t);if(M._isArray(n))if(u=[],h=Math.max(n.length,v.length),t==="points"&&n.length!==v.length&&(n.length>v.length?(g=v,v=M._prepareArrayForTween(v,n,l.closed())):(f=n,n=M._prepareArrayForTween(n,v,l.closed()))),t.indexOf("fill")===0)for(let y=0;y<h;y++)if(y%2===0)u.push(n[y]-v[y]);else{const E=M.colorToRGBA(v[y]);m=M.colorToRGBA(n[y]),v[y]=E,u.push({r:m.r-E.r,g:m.g-E.g,b:m.b-E.b,a:m.a-E.a})}else for(let y=0;y<h;y++)u.push(n[y]-v[y]);else zh.indexOf(t)!==-1?(v=M.colorToRGBA(v),m=M.colorToRGBA(n),u={r:m.r-v.r,g:m.g-v.g,b:m.b-v.b,a:m.a-v.a}):u=n-v;zt.attrs[s][this._id][t]={start:v,diff:u,end:n,trueEnd:f,trueStart:g},zt.tweens[s][t]=this._id}_tweenFunc(t){const n=this.node,l=zt.attrs[n._id][this._id];let s,u,h,f,g,m,p,v;for(s in l){if(u=l[s],h=u.start,f=u.diff,v=u.end,M._isArray(h))if(g=[],p=Math.max(h.length,v.length),s.indexOf("fill")===0)for(m=0;m<p;m++)m%2===0?g.push((h[m]||0)+f[m]*t):g.push("rgba("+Math.round(h[m].r+f[m].r*t)+","+Math.round(h[m].g+f[m].g*t)+","+Math.round(h[m].b+f[m].b*t)+","+(h[m].a+f[m].a*t)+")");else for(m=0;m<p;m++)g.push((h[m]||0)+f[m]*t);else zh.indexOf(s)!==-1?g="rgba("+Math.round(h.r+f.r*t)+","+Math.round(h.g+f.g*t)+","+Math.round(h.b+f.b*t)+","+(h.a+f.a*t)+")":g=h+f*t;n.setAttr(s,g)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const t=this.node,n=zt.attrs[t._id][this._id];n.points&&n.points.trueEnd&&t.setAttr("points",n.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const t=this.node,n=zt.attrs[t._id][this._id];n.points&&n.points.trueStart&&t.points(n.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(t){return this.tween.seek(t*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){const t=this.node._id,n=this._id,l=zt.tweens[t];this.pause(),this.anim&&this.anim.stop();for(const s in l)delete zt.tweens[t][s];delete zt.attrs[t][n],zt.tweens[t]&&(Object.keys(zt.tweens[t]).length===0&&delete zt.tweens[t],Object.keys(zt.attrs[t]).length===0&&delete zt.attrs[t])}}zt.attrs={};zt.tweens={};K.prototype.to=function(o){const t=o.onFinish;o.node=this,o.onFinish=function(){this.destroy(),t&&t()},new zt(o).play()};const Oi={BackEaseIn(o,t,n,l){return n*(o/=l)*o*((1.70158+1)*o-1.70158)+t},BackEaseOut(o,t,n,l){return n*((o=o/l-1)*o*((1.70158+1)*o+1.70158)+1)+t},BackEaseInOut(o,t,n,l){let s=1.70158;return(o/=l/2)<1?n/2*(o*o*(((s*=1.525)+1)*o-s))+t:n/2*((o-=2)*o*(((s*=1.525)+1)*o+s)+2)+t},ElasticEaseIn(o,t,n,l,s,u){let h=0;return o===0?t:(o/=l)===1?t+n:(u||(u=l*.3),!s||s<Math.abs(n)?(s=n,h=u/4):h=u/(2*Math.PI)*Math.asin(n/s),-(s*Math.pow(2,10*(o-=1))*Math.sin((o*l-h)*(2*Math.PI)/u))+t)},ElasticEaseOut(o,t,n,l,s,u){let h=0;return o===0?t:(o/=l)===1?t+n:(u||(u=l*.3),!s||s<Math.abs(n)?(s=n,h=u/4):h=u/(2*Math.PI)*Math.asin(n/s),s*Math.pow(2,-10*o)*Math.sin((o*l-h)*(2*Math.PI)/u)+n+t)},ElasticEaseInOut(o,t,n,l,s,u){let h=0;return o===0?t:(o/=l/2)===2?t+n:(u||(u=l*(.3*1.5)),!s||s<Math.abs(n)?(s=n,h=u/4):h=u/(2*Math.PI)*Math.asin(n/s),o<1?-.5*(s*Math.pow(2,10*(o-=1))*Math.sin((o*l-h)*(2*Math.PI)/u))+t:s*Math.pow(2,-10*(o-=1))*Math.sin((o*l-h)*(2*Math.PI)/u)*.5+n+t)},BounceEaseOut(o,t,n,l){return(o/=l)<1/2.75?n*(7.5625*o*o)+t:o<2/2.75?n*(7.5625*(o-=1.5/2.75)*o+.75)+t:o<2.5/2.75?n*(7.5625*(o-=2.25/2.75)*o+.9375)+t:n*(7.5625*(o-=2.625/2.75)*o+.984375)+t},BounceEaseIn(o,t,n,l){return n-Oi.BounceEaseOut(l-o,0,n,l)+t},BounceEaseInOut(o,t,n,l){return o<l/2?Oi.BounceEaseIn(o*2,0,n,l)*.5+t:Oi.BounceEaseOut(o*2-l,0,n,l)*.5+n*.5+t},EaseIn(o,t,n,l){return n*(o/=l)*o+t},EaseOut(o,t,n,l){return-n*(o/=l)*(o-2)+t},EaseInOut(o,t,n,l){return(o/=l/2)<1?n/2*o*o+t:-n/2*(--o*(o-2)-1)+t},StrongEaseIn(o,t,n,l){return n*(o/=l)*o*o*o*o+t},StrongEaseOut(o,t,n,l){return n*((o=o/l-1)*o*o*o*o+1)+t},StrongEaseInOut(o,t,n,l){return(o/=l/2)<1?n/2*o*o*o*o*o+t:n/2*((o-=2)*o*o*o*o+2)+t},Linear(o,t,n,l){return n*o/l+t}},jn=M._assign(F,{Util:M,Transform:Se,Node:K,Container:be,Stage:Ql,stages:Ri,Layer:Ia,FastLayer:go,Group:Ln,DD:Et,Shape:k,shapes:Ni,Animation:Oe,Tween:zt,Easings:Oi,Context:Vl,Canvas:uo});class na extends k{_sceneFunc(t){const n=F.getAngle(this.angle()),l=this.clockwise();t.beginPath(),t.arc(0,0,this.outerRadius(),0,n,l),t.arc(0,0,this.innerRadius(),n,0,!l),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}getSelfRect(){const t=this.innerRadius(),n=this.outerRadius(),l=this.clockwise(),s=F.getAngle(l?360-this.angle():this.angle()),u=Math.cos(Math.min(s,Math.PI)),h=1,f=Math.sin(Math.min(Math.max(Math.PI,s),3*Math.PI/2)),g=Math.sin(Math.min(s,Math.PI/2)),m=u*(u>0?t:n),p=h*n,v=f*(f>0?t:n),y=g*(g>0?n:t);return{x:m,y:l?-1*y:v,width:p-m,height:y-v}}}na.prototype._centroid=!0;na.prototype.className="Arc";na.prototype._attrsAffectingSize=["innerRadius","outerRadius","angle","clockwise"];Bt(na);b.addGetterSetter(na,"innerRadius",0,Q());b.addGetterSetter(na,"outerRadius",0,Q());b.addGetterSetter(na,"angle",0,Q());b.addGetterSetter(na,"clockwise",!1,Be());function eo(o,t,n,l,s,u,h){const f=Math.sqrt(Math.pow(n-o,2)+Math.pow(l-t,2)),g=Math.sqrt(Math.pow(s-n,2)+Math.pow(u-l,2)),m=h*f/(f+g),p=h*g/(f+g),v=n-m*(s-o),y=l-m*(u-t),E=n+p*(s-o),S=l+p*(u-t);return[v,y,E,S]}function Dh(o,t){const n=o.length,l=[];for(let s=2;s<n-2;s+=2){const u=eo(o[s-2],o[s-1],o[s],o[s+1],o[s+2],o[s+3],t);isNaN(u[0])||(l.push(u[0]),l.push(u[1]),l.push(o[s]),l.push(o[s+1]),l.push(u[2]),l.push(u[3]))}return l}class ia extends k{constructor(t){super(t),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(t){const n=this.points(),l=n.length,s=this.tension(),u=this.closed(),h=this.bezier();if(!l)return;let f=0;if(t.beginPath(),t.moveTo(n[0],n[1]),s!==0&&l>4){const g=this.getTensionPoints(),m=g.length;for(f=u?0:4,u||t.quadraticCurveTo(g[0],g[1],g[2],g[3]);f<m-2;)t.bezierCurveTo(g[f++],g[f++],g[f++],g[f++],g[f++],g[f++]);u||t.quadraticCurveTo(g[m-2],g[m-1],n[l-2],n[l-1])}else if(h)for(f=2;f<l;)t.bezierCurveTo(n[f++],n[f++],n[f++],n[f++],n[f++],n[f++]);else for(f=2;f<l;f+=2)t.lineTo(n[f],n[f+1]);u?(t.closePath(),t.fillStrokeShape(this)):t.strokeShape(this)}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():Dh(this.points(),this.tension())}_getTensionPointsClosed(){const t=this.points(),n=t.length,l=this.tension(),s=eo(t[n-2],t[n-1],t[0],t[1],t[2],t[3],l),u=eo(t[n-4],t[n-3],t[n-2],t[n-1],t[0],t[1],l),h=Dh(t,l);return[s[2],s[3]].concat(h).concat([u[0],u[1],t[n-2],t[n-1],u[2],u[3],s[0],s[1],t[0],t[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let t=this.points();if(t.length<4)return{x:t[0]||0,y:t[1]||0,width:0,height:0};this.tension()!==0?t=[t[0],t[1],...this._getTensionPoints(),t[t.length-2],t[t.length-1]]:t=this.points();let n=t[0],l=t[0],s=t[1],u=t[1],h,f;for(let g=0;g<t.length/2;g++)h=t[g*2],f=t[g*2+1],n=Math.min(n,h),l=Math.max(l,h),s=Math.min(s,f),u=Math.max(u,f);return{x:n,y:s,width:l-n,height:u-s}}}ia.prototype.className="Line";ia.prototype._attrsAffectingSize=["points","bezier","tension"];Bt(ia);b.addGetterSetter(ia,"closed",!1);b.addGetterSetter(ia,"bezier",!1);b.addGetterSetter(ia,"tension",0,Q());b.addGetterSetter(ia,"points",[],x5());const rg=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],og=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],ug=[[1],[1,1],[1,2,1],[1,3,3,1]],Gh=(o,t,n)=>{let l,s;const h=n/2;l=0;for(let f=0;f<20;f++)s=h*rg[20][f]+h,l+=og[20][f]*cg(o,t,s);return h*l},wh=(o,t,n)=>{n===void 0&&(n=1);const l=o[0]-2*o[1]+o[2],s=t[0]-2*t[1]+t[2],u=2*o[1]-2*o[0],h=2*t[1]-2*t[0],f=4*(l*l+s*s),g=4*(l*u+s*h),m=u*u+h*h;if(f===0)return n*Math.sqrt(Math.pow(o[2]-o[0],2)+Math.pow(t[2]-t[0],2));const p=g/(2*f),v=m/f,y=n+p,E=v-p*p,S=y*y+E>0?Math.sqrt(y*y+E):0,R=p*p+E>0?Math.sqrt(p*p+E):0,O=p+Math.sqrt(p*p+E)!==0?E*Math.log(Math.abs((y+S)/(p+R))):0;return Math.sqrt(f)/2*(y*S-p*R+O)};function cg(o,t,n){const l=ao(1,n,o),s=ao(1,n,t),u=l*l+s*s;return Math.sqrt(u)}const ao=(o,t,n)=>{const l=n.length-1;let s,u;if(l===0)return 0;if(o===0){u=0;for(let h=0;h<=l;h++)u+=ug[l][h]*Math.pow(1-t,l-h)*Math.pow(t,h)*n[h];return u}else{s=new Array(l);for(let h=0;h<l;h++)s[h]=l*(n[h+1]-n[h]);return ao(o-1,t,s)}},Hh=(o,t,n)=>{let l=1,s=o/t,u=(o-n(s))/t,h=0;for(;l>.001;){const f=n(s+u),g=Math.abs(o-f)/t;if(g<l)l=g,s+=u;else{const m=n(s-u),p=Math.abs(o-m)/t;p<l?(l=p,s-=u):u/=2}if(h++,h>500)break}return s};class Dt extends k{constructor(t){super(t),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=Dt.parsePathData(this.data()),this.pathLength=Dt.getPathLength(this.dataArray)}_sceneFunc(t){const n=this.dataArray;t.beginPath();let l=!1;for(let s=0;s<n.length;s++){const u=n[s].command,h=n[s].points;switch(u){case"L":t.lineTo(h[0],h[1]);break;case"M":t.moveTo(h[0],h[1]);break;case"C":t.bezierCurveTo(h[0],h[1],h[2],h[3],h[4],h[5]);break;case"Q":t.quadraticCurveTo(h[0],h[1],h[2],h[3]);break;case"A":const f=h[0],g=h[1],m=h[2],p=h[3],v=h[4],y=h[5],E=h[6],S=h[7],R=m>p?m:p,O=m>p?1:m/p,G=m>p?p/m:1;t.translate(f,g),t.rotate(E),t.scale(O,G),t.arc(0,0,R,v,v+y,1-S),t.scale(1/O,1/G),t.rotate(-E),t.translate(-f,-g);break;case"z":l=!0,t.closePath();break}}!l&&!this.hasFill()?t.strokeShape(this):t.fillStrokeShape(this)}getSelfRect(){let t=[];this.dataArray.forEach(function(g){if(g.command==="A"){const m=g.points[4],p=g.points[5],v=g.points[4]+p;let y=Math.PI/180;if(Math.abs(m-v)<y&&(y=Math.abs(m-v)),p<0)for(let E=m-y;E>v;E-=y){const S=Dt.getPointOnEllipticalArc(g.points[0],g.points[1],g.points[2],g.points[3],E,0);t.push(S.x,S.y)}else for(let E=m+y;E<v;E+=y){const S=Dt.getPointOnEllipticalArc(g.points[0],g.points[1],g.points[2],g.points[3],E,0);t.push(S.x,S.y)}}else if(g.command==="C")for(let m=0;m<=1;m+=.01){const p=Dt.getPointOnCubicBezier(m,g.start.x,g.start.y,g.points[0],g.points[1],g.points[2],g.points[3],g.points[4],g.points[5]);t.push(p.x,p.y)}else t=t.concat(g.points)});let n=t[0],l=t[0],s=t[1],u=t[1],h,f;for(let g=0;g<t.length/2;g++)h=t[g*2],f=t[g*2+1],isNaN(h)||(n=Math.min(n,h),l=Math.max(l,h)),isNaN(f)||(s=Math.min(s,f),u=Math.max(u,f));return{x:n,y:s,width:l-n,height:u-s}}getLength(){return this.pathLength}getPointAtLength(t){return Dt.getPointAtLengthOfDataArray(t,this.dataArray)}static getLineLength(t,n,l,s){return Math.sqrt((l-t)*(l-t)+(s-n)*(s-n))}static getPathLength(t){let n=0;for(let l=0;l<t.length;++l)n+=t[l].pathLength;return n}static getPointAtLengthOfDataArray(t,n){let l,s=0,u=n.length;if(!u)return null;for(;s<u&&t>n[s].pathLength;)t-=n[s].pathLength,++s;if(s===u)return l=n[s-1].points.slice(-2),{x:l[0],y:l[1]};if(t<.01)return n[s].command==="M"?(l=n[s].points.slice(0,2),{x:l[0],y:l[1]}):{x:n[s].start.x,y:n[s].start.y};const h=n[s],f=h.points;switch(h.command){case"L":return Dt.getPointOnLine(t,h.start.x,h.start.y,f[0],f[1]);case"C":return Dt.getPointOnCubicBezier(Hh(t,Dt.getPathLength(n),R=>Gh([h.start.x,f[0],f[2],f[4]],[h.start.y,f[1],f[3],f[5]],R)),h.start.x,h.start.y,f[0],f[1],f[2],f[3],f[4],f[5]);case"Q":return Dt.getPointOnQuadraticBezier(Hh(t,Dt.getPathLength(n),R=>wh([h.start.x,f[0],f[2]],[h.start.y,f[1],f[3]],R)),h.start.x,h.start.y,f[0],f[1],f[2],f[3]);case"A":const g=f[0],m=f[1],p=f[2],v=f[3],y=f[5],E=f[6];let S=f[4];return S+=y*t/h.pathLength,Dt.getPointOnEllipticalArc(g,m,p,v,S,E)}return null}static getPointOnLine(t,n,l,s,u,h,f){h=h??n,f=f??l;const g=this.getLineLength(n,l,s,u);if(g<1e-10)return{x:n,y:l};if(s===n)return{x:h,y:f+(u>l?t:-t)};const m=(u-l)/(s-n),p=Math.sqrt(t*t/(1+m*m))*(s<n?-1:1),v=m*p;if(Math.abs(f-l-m*(h-n))<1e-10)return{x:h+p,y:f+v};const y=((h-n)*(s-n)+(f-l)*(u-l))/(g*g),E=n+y*(s-n),S=l+y*(u-l),R=this.getLineLength(h,f,E,S),O=Math.sqrt(t*t-R*R),G=Math.sqrt(O*O/(1+m*m))*(s<n?-1:1),z=m*G;return{x:E+G,y:S+z}}static getPointOnCubicBezier(t,n,l,s,u,h,f,g,m){function p(O){return O*O*O}function v(O){return 3*O*O*(1-O)}function y(O){return 3*O*(1-O)*(1-O)}function E(O){return(1-O)*(1-O)*(1-O)}const S=g*p(t)+h*v(t)+s*y(t)+n*E(t),R=m*p(t)+f*v(t)+u*y(t)+l*E(t);return{x:S,y:R}}static getPointOnQuadraticBezier(t,n,l,s,u,h,f){function g(E){return E*E}function m(E){return 2*E*(1-E)}function p(E){return(1-E)*(1-E)}const v=h*g(t)+s*m(t)+n*p(t),y=f*g(t)+u*m(t)+l*p(t);return{x:v,y}}static getPointOnEllipticalArc(t,n,l,s,u,h){const f=Math.cos(h),g=Math.sin(h),m={x:l*Math.cos(u),y:s*Math.sin(u)};return{x:t+(m.x*f-m.y*g),y:n+(m.x*g+m.y*f)}}static parsePathData(t){if(!t)return[];let n=t;const l=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];n=n.replace(new RegExp(" ","g"),",");for(let v=0;v<l.length;v++)n=n.replace(new RegExp(l[v],"g"),"|"+l[v]);const s=n.split("|"),u=[],h=[];let f=0,g=0;const m=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let p;for(let v=1;v<s.length;v++){let y=s[v],E=y.charAt(0);for(y=y.slice(1),h.length=0;p=m.exec(y);)h.push(p[0]);let S=[],R=E==="A"||E==="a"?0:-1;for(let O=0,G=h.length;O<G;O++){const z=h[O];if(z==="00"){S.push(0,0),R>=0&&(R+=2,R>=7&&(R-=7));continue}if(R>=0){if(R===3){if(/^[01]{2}\d+(?:\.\d+)?$/.test(z)){S.push(parseInt(z[0],10)),S.push(parseInt(z[1],10)),S.push(parseFloat(z.slice(2))),R+=3,R>=7&&(R-=7);continue}if(z==="11"||z==="10"||z==="01"){S.push(parseInt(z[0],10)),S.push(parseInt(z[1],10)),R+=2,R>=7&&(R-=7);continue}if(z==="0"||z==="1"){S.push(parseInt(z,10)),R+=1,R>=7&&(R-=7);continue}}else if(R===4){if(/^[01]\d+(?:\.\d+)?$/.test(z)){S.push(parseInt(z[0],10)),S.push(parseFloat(z.slice(1))),R+=2,R>=7&&(R-=7);continue}if(z==="0"||z==="1"){S.push(parseInt(z,10)),R+=1,R>=7&&(R-=7);continue}}const B=parseFloat(z);isNaN(B)?S.push(0):S.push(B),R+=1,R>=7&&(R-=7)}else{const B=parseFloat(z);isNaN(B)?S.push(0):S.push(B)}}for(;S.length>0&&!isNaN(S[0]);){let O="",G=[];const z=f,B=g;let H,Z,X,J,W,nt,st,ut,$,rt;switch(E){case"l":f+=S.shift(),g+=S.shift(),O="L",G.push(f,g);break;case"L":f=S.shift(),g=S.shift(),G.push(f,g);break;case"m":const it=S.shift(),et=S.shift();if(f+=it,g+=et,O="M",u.length>2&&u[u.length-1].command==="z"){for(let C=u.length-2;C>=0;C--)if(u[C].command==="M"){f=u[C].points[0]+it,g=u[C].points[1]+et;break}}G.push(f,g),E="l";break;case"M":f=S.shift(),g=S.shift(),O="M",G.push(f,g),E="L";break;case"h":f+=S.shift(),O="L",G.push(f,g);break;case"H":f=S.shift(),O="L",G.push(f,g);break;case"v":g+=S.shift(),O="L",G.push(f,g);break;case"V":g=S.shift(),O="L",G.push(f,g);break;case"C":G.push(S.shift(),S.shift(),S.shift(),S.shift()),f=S.shift(),g=S.shift(),G.push(f,g);break;case"c":G.push(f+S.shift(),g+S.shift(),f+S.shift(),g+S.shift()),f+=S.shift(),g+=S.shift(),O="C",G.push(f,g);break;case"S":Z=f,X=g,H=u[u.length-1],H.command==="C"&&(Z=f+(f-H.points[2]),X=g+(g-H.points[3])),G.push(Z,X,S.shift(),S.shift()),f=S.shift(),g=S.shift(),O="C",G.push(f,g);break;case"s":Z=f,X=g,H=u[u.length-1],H.command==="C"&&(Z=f+(f-H.points[2]),X=g+(g-H.points[3])),G.push(Z,X,f+S.shift(),g+S.shift()),f+=S.shift(),g+=S.shift(),O="C",G.push(f,g);break;case"Q":G.push(S.shift(),S.shift()),f=S.shift(),g=S.shift(),G.push(f,g);break;case"q":G.push(f+S.shift(),g+S.shift()),f+=S.shift(),g+=S.shift(),O="Q",G.push(f,g);break;case"T":Z=f,X=g,H=u[u.length-1],H.command==="Q"&&(Z=f+(f-H.points[0]),X=g+(g-H.points[1])),f=S.shift(),g=S.shift(),O="Q",G.push(Z,X,f,g);break;case"t":Z=f,X=g,H=u[u.length-1],H.command==="Q"&&(Z=f+(f-H.points[0]),X=g+(g-H.points[1])),f+=S.shift(),g+=S.shift(),O="Q",G.push(Z,X,f,g);break;case"A":J=S.shift(),W=S.shift(),nt=S.shift(),st=S.shift(),ut=S.shift(),$=f,rt=g,f=S.shift(),g=S.shift(),O="A",G=this.convertEndpointToCenterParameterization($,rt,f,g,st,ut,J,W,nt);break;case"a":J=S.shift(),W=S.shift(),nt=S.shift(),st=S.shift(),ut=S.shift(),$=f,rt=g,f+=S.shift(),g+=S.shift(),O="A",G=this.convertEndpointToCenterParameterization($,rt,f,g,st,ut,J,W,nt);break}u.push({command:O||E,points:G,start:{x:z,y:B},pathLength:this.calcLength(z,B,O||E,G)})}(E==="z"||E==="Z")&&u.push({command:"z",points:[],start:void 0,pathLength:0})}return u}static calcLength(t,n,l,s){let u,h,f,g;const m=Dt;switch(l){case"L":return m.getLineLength(t,n,s[0],s[1]);case"C":return Gh([t,s[0],s[2],s[4]],[n,s[1],s[3],s[5]],1);case"Q":return wh([t,s[0],s[2]],[n,s[1],s[3]],1);case"A":u=0;const p=s[4],v=s[5],y=s[4]+v;let E=Math.PI/180;if(Math.abs(p-y)<E&&(E=Math.abs(p-y)),h=m.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],p,0),v<0)for(g=p-E;g>y;g-=E)f=m.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],g,0),u+=m.getLineLength(h.x,h.y,f.x,f.y),h=f;else for(g=p+E;g<y;g+=E)f=m.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],g,0),u+=m.getLineLength(h.x,h.y,f.x,f.y),h=f;return f=m.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],y,0),u+=m.getLineLength(h.x,h.y,f.x,f.y),u}return 0}static convertEndpointToCenterParameterization(t,n,l,s,u,h,f,g,m){const p=m*(Math.PI/180),v=Math.cos(p)*(t-l)/2+Math.sin(p)*(n-s)/2,y=-1*Math.sin(p)*(t-l)/2+Math.cos(p)*(n-s)/2,E=v*v/(f*f)+y*y/(g*g);E>1&&(f*=Math.sqrt(E),g*=Math.sqrt(E));let S=Math.sqrt((f*f*(g*g)-f*f*(y*y)-g*g*(v*v))/(f*f*(y*y)+g*g*(v*v)));u===h&&(S*=-1),isNaN(S)&&(S=0);const R=S*f*y/g,O=S*-g*v/f,G=(t+l)/2+Math.cos(p)*R-Math.sin(p)*O,z=(n+s)/2+Math.sin(p)*R+Math.cos(p)*O,B=function(st){return Math.sqrt(st[0]*st[0]+st[1]*st[1])},H=function(st,ut){return(st[0]*ut[0]+st[1]*ut[1])/(B(st)*B(ut))},Z=function(st,ut){return(st[0]*ut[1]<st[1]*ut[0]?-1:1)*Math.acos(H(st,ut))},X=Z([1,0],[(v-R)/f,(y-O)/g]),J=[(v-R)/f,(y-O)/g],W=[(-1*v-R)/f,(-1*y-O)/g];let nt=Z(J,W);return H(J,W)<=-1&&(nt=Math.PI),H(J,W)>=1&&(nt=0),h===0&&nt>0&&(nt=nt-2*Math.PI),h===1&&nt<0&&(nt=nt+2*Math.PI),[G,z,f,g,X,nt,p,h]}}Dt.prototype.className="Path";Dt.prototype._attrsAffectingSize=["data"];Bt(Dt);b.addGetterSetter(Dt,"data");class $a extends ia{_sceneFunc(t){super._sceneFunc(t);const n=Math.PI*2,l=this.points();let s=l;const u=this.tension()!==0&&l.length>4;u&&(s=this.getTensionPoints());const h=this.pointerLength(),f=l.length;let g,m;if(u){const y=[s[s.length-4],s[s.length-3],s[s.length-2],s[s.length-1],l[f-2],l[f-1]],E=Dt.calcLength(s[s.length-4],s[s.length-3],"C",y),S=Dt.getPointOnQuadraticBezier(Math.min(1,1-h/E),y[0],y[1],y[2],y[3],y[4],y[5]);g=l[f-2]-S.x,m=l[f-1]-S.y}else g=l[f-2]-l[f-4],m=l[f-1]-l[f-3];const p=(Math.atan2(m,g)+n)%n,v=this.pointerWidth();this.pointerAtEnding()&&(t.save(),t.beginPath(),t.translate(l[f-2],l[f-1]),t.rotate(p),t.moveTo(0,0),t.lineTo(-h,v/2),t.lineTo(-h,-v/2),t.closePath(),t.restore(),this.__fillStroke(t)),this.pointerAtBeginning()&&(t.save(),t.beginPath(),t.translate(l[0],l[1]),u?(g=(s[0]+s[2])/2-l[0],m=(s[1]+s[3])/2-l[1]):(g=l[2]-l[0],m=l[3]-l[1]),t.rotate((Math.atan2(-m,-g)+n)%n),t.moveTo(0,0),t.lineTo(-h,v/2),t.lineTo(-h,-v/2),t.closePath(),t.restore(),this.__fillStroke(t))}__fillStroke(t){const n=this.dashEnabled();n&&(this.attrs.dashEnabled=!1,t.setLineDash([])),t.fillStrokeShape(this),n&&(this.attrs.dashEnabled=!0)}getSelfRect(){const t=super.getSelfRect(),n=this.pointerWidth()/2;return{x:t.x,y:t.y-n,width:t.width,height:t.height+n*2}}}$a.prototype.className="Arrow";Bt($a);b.addGetterSetter($a,"pointerLength",10,Q());b.addGetterSetter($a,"pointerWidth",10,Q());b.addGetterSetter($a,"pointerAtBeginning",!1);b.addGetterSetter($a,"pointerAtEnding",!0);class kn extends k{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(t){this.radius()!==t/2&&this.radius(t/2)}setHeight(t){this.radius()!==t/2&&this.radius(t/2)}}kn.prototype._centroid=!0;kn.prototype.className="Circle";kn.prototype._attrsAffectingSize=["radius"];Bt(kn);b.addGetterSetter(kn,"radius",0,Q());class za extends k{_sceneFunc(t){const n=this.radiusX(),l=this.radiusY();t.beginPath(),t.save(),n!==l&&t.scale(1,l/n),t.arc(0,0,n,0,Math.PI*2,!1),t.restore(),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(t){this.radiusX(t/2)}setHeight(t){this.radiusY(t/2)}}za.prototype.className="Ellipse";za.prototype._centroid=!0;za.prototype._attrsAffectingSize=["radiusX","radiusY"];Bt(za);b.addComponentsGetterSetter(za,"radius",["x","y"]);b.addGetterSetter(za,"radiusX",0,Q());b.addGetterSetter(za,"radiusY",0,Q());class ze extends k{constructor(t){super(t),this._loadListener=()=>{this._requestDraw()},this.on("imageChange.konva",n=>{this._removeImageLoad(n.oldVal),this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const t=this.image();t&&t.complete||t&&t.readyState===4||t&&t.addEventListener&&t.addEventListener("load",this._loadListener)}_removeImageLoad(t){t&&t.removeEventListener&&t.removeEventListener("load",this._loadListener)}destroy(){return this._removeImageLoad(this.image()),super.destroy(),this}_useBufferCanvas(){const t=!!this.cornerRadius(),n=this.hasShadow();return t&&n?!0:super._useBufferCanvas(!0)}_sceneFunc(t){const n=this.getWidth(),l=this.getHeight(),s=this.cornerRadius(),u=this.attrs.image;let h;if(u){const f=this.attrs.cropWidth,g=this.attrs.cropHeight;f&&g?h=[u,this.cropX(),this.cropY(),f,g,0,0,n,l]:h=[u,0,0,n,l]}(this.hasFill()||this.hasStroke()||s)&&(t.beginPath(),s?M.drawRoundedRectPath(t,n,l,s):t.rect(0,0,n,l),t.closePath(),t.fillStrokeShape(this)),u&&(s&&t.clip(),t.drawImage.apply(t,h))}_hitFunc(t){const n=this.width(),l=this.height(),s=this.cornerRadius();t.beginPath(),s?M.drawRoundedRectPath(t,n,l,s):t.rect(0,0,n,l),t.closePath(),t.fillStrokeShape(this)}getWidth(){var t,n;return(t=this.attrs.width)!==null&&t!==void 0?t:(n=this.image())===null||n===void 0?void 0:n.width}getHeight(){var t,n;return(t=this.attrs.height)!==null&&t!==void 0?t:(n=this.image())===null||n===void 0?void 0:n.height}static fromURL(t,n,l=null){const s=M.createImageElement();s.onload=function(){const u=new ze({image:s});n(u)},s.onerror=l,s.crossOrigin="Anonymous",s.src=t}}ze.prototype.className="Image";Bt(ze);b.addGetterSetter(ze,"cornerRadius",0,Kl(4));b.addGetterSetter(ze,"image");b.addComponentsGetterSetter(ze,"crop",["x","y","width","height"]);b.addGetterSetter(ze,"cropX",0,Q());b.addGetterSetter(ze,"cropY",0,Q());b.addGetterSetter(ze,"cropWidth",0,Q());b.addGetterSetter(ze,"cropHeight",0,Q());const T0=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],hg="Change.konva",fg="none",no="up",io="right",lo="down",so="left",dg=T0.length;class mo extends Ln{constructor(t){super(t),this.on("add.konva",function(n){this._addListeners(n.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(t){let n=this,l;const s=function(){n._sync()};for(l=0;l<dg;l++)t.on(T0[l]+hg,s)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let t=this.getText(),n=this.getTag(),l,s,u,h,f,g,m;if(t&&n){switch(l=t.width(),s=t.height(),u=n.pointerDirection(),h=n.pointerWidth(),m=n.pointerHeight(),f=0,g=0,u){case no:f=l/2,g=-1*m;break;case io:f=l+h,g=s/2;break;case lo:f=l/2,g=s+m;break;case so:f=-1*h,g=s/2;break}n.setAttrs({x:-1*f,y:-1*g,width:l,height:s}),t.setAttrs({x:-1*f,y:-1*g})}}}mo.prototype.className="Label";Bt(mo);class tn extends k{_sceneFunc(t){const n=this.width(),l=this.height(),s=this.pointerDirection(),u=this.pointerWidth(),h=this.pointerHeight(),f=this.cornerRadius();let g=0,m=0,p=0,v=0;typeof f=="number"?g=m=p=v=Math.min(f,n/2,l/2):(g=Math.min(f[0]||0,n/2,l/2),m=Math.min(f[1]||0,n/2,l/2),v=Math.min(f[2]||0,n/2,l/2),p=Math.min(f[3]||0,n/2,l/2)),t.beginPath(),t.moveTo(g,0),s===no&&(t.lineTo((n-u)/2,0),t.lineTo(n/2,-1*h),t.lineTo((n+u)/2,0)),t.lineTo(n-m,0),t.arc(n-m,m,m,Math.PI*3/2,0,!1),s===io&&(t.lineTo(n,(l-h)/2),t.lineTo(n+u,l/2),t.lineTo(n,(l+h)/2)),t.lineTo(n,l-v),t.arc(n-v,l-v,v,0,Math.PI/2,!1),s===lo&&(t.lineTo((n+u)/2,l),t.lineTo(n/2,l+h),t.lineTo((n-u)/2,l)),t.lineTo(p,l),t.arc(p,l-p,p,Math.PI/2,Math.PI,!1),s===so&&(t.lineTo(0,(l+h)/2),t.lineTo(-1*u,l/2),t.lineTo(0,(l-h)/2)),t.lineTo(0,g),t.arc(g,g,g,Math.PI,Math.PI*3/2,!1),t.closePath(),t.fillStrokeShape(this)}getSelfRect(){let t=0,n=0,l=this.pointerWidth(),s=this.pointerHeight(),u=this.pointerDirection(),h=this.width(),f=this.height();return u===no?(n-=s,f+=s):u===lo?f+=s:u===so?(t-=l*1.5,h+=l):u===io&&(h+=l*1.5),{x:t,y:n,width:h,height:f}}}tn.prototype.className="Tag";Bt(tn);b.addGetterSetter(tn,"pointerDirection",fg);b.addGetterSetter(tn,"pointerWidth",0,Q());b.addGetterSetter(tn,"pointerHeight",0,Q());b.addGetterSetter(tn,"cornerRadius",0,Kl(4));class Di extends k{_sceneFunc(t){const n=this.cornerRadius(),l=this.width(),s=this.height();t.beginPath(),n?M.drawRoundedRectPath(t,l,s,n):t.rect(0,0,l,s),t.closePath(),t.fillStrokeShape(this)}}Di.prototype.className="Rect";Bt(Di);b.addGetterSetter(Di,"cornerRadius",0,Kl(4));class Da extends k{_sceneFunc(t){const n=this._getPoints(),l=this.radius(),s=this.sides(),u=this.cornerRadius();if(t.beginPath(),u)M.drawRoundedPolygonPath(t,n,s,l,u);else{t.moveTo(n[0].x,n[0].y);for(let h=1;h<n.length;h++)t.lineTo(n[h].x,n[h].y)}t.closePath(),t.fillStrokeShape(this)}_getPoints(){const t=this.attrs.sides,n=this.attrs.radius||0,l=[];for(let s=0;s<t;s++)l.push({x:n*Math.sin(s*2*Math.PI/t),y:-1*n*Math.cos(s*2*Math.PI/t)});return l}getSelfRect(){const t=this._getPoints();let n=t[0].x,l=t[0].y,s=t[0].x,u=t[0].y;return t.forEach(h=>{n=Math.min(n,h.x),l=Math.max(l,h.x),s=Math.min(s,h.y),u=Math.max(u,h.y)}),{x:n,y:s,width:l-n,height:u-s}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(t){this.radius(t/2)}setHeight(t){this.radius(t/2)}}Da.prototype.className="RegularPolygon";Da.prototype._centroid=!0;Da.prototype._attrsAffectingSize=["radius"];Bt(Da);b.addGetterSetter(Da,"radius",0,Q());b.addGetterSetter(Da,"sides",0,Q());b.addGetterSetter(Da,"cornerRadius",0,Kl(4));const Bh=Math.PI*2;class en extends k{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.innerRadius(),0,Bh,!1),t.moveTo(this.outerRadius(),0),t.arc(0,0,this.outerRadius(),Bh,0,!0),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}}en.prototype.className="Ring";en.prototype._centroid=!0;en.prototype._attrsAffectingSize=["innerRadius","outerRadius"];Bt(en);b.addGetterSetter(en,"innerRadius",0,Q());b.addGetterSetter(en,"outerRadius",0,Q());class qe extends k{constructor(t){super(t),this._updated=!0,this.anim=new Oe(()=>{const n=this._updated;return this._updated=!1,n}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(t){const n=this.animation(),l=this.frameIndex(),s=l*4,u=this.animations()[n],h=this.frameOffsets(),f=u[s+0],g=u[s+1],m=u[s+2],p=u[s+3],v=this.image();if((this.hasFill()||this.hasStroke())&&(t.beginPath(),t.rect(0,0,m,p),t.closePath(),t.fillStrokeShape(this)),v)if(h){const y=h[n],E=l*2;t.drawImage(v,f,g,m,p,y[E+0],y[E+1],m,p)}else t.drawImage(v,f,g,m,p,0,0,m,p)}_hitFunc(t){const n=this.animation(),l=this.frameIndex(),s=l*4,u=this.animations()[n],h=this.frameOffsets(),f=u[s+2],g=u[s+3];if(t.beginPath(),h){const m=h[n],p=l*2;t.rect(m[p+0],m[p+1],f,g)}else t.rect(0,0,f,g);t.closePath(),t.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const t=this;this.interval=setInterval(function(){t._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const t=this.getLayer();this.anim.setLayers(t),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const t=this.frameIndex(),n=this.animation(),l=this.animations(),s=l[n],u=s.length/4;t<u-1?this.frameIndex(t+1):this.frameIndex(0)}}qe.prototype.className="Sprite";Bt(qe);b.addGetterSetter(qe,"animation");b.addGetterSetter(qe,"animations");b.addGetterSetter(qe,"frameOffsets");b.addGetterSetter(qe,"image");b.addGetterSetter(qe,"frameIndex",0,Q());b.addGetterSetter(qe,"frameRate",17,Q());b.backCompat(qe,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});class Ga extends k{_sceneFunc(t){const n=this.innerRadius(),l=this.outerRadius(),s=this.numPoints();t.beginPath(),t.moveTo(0,0-l);for(let u=1;u<s*2;u++){const h=u%2===0?l:n,f=h*Math.sin(u*Math.PI/s),g=-1*h*Math.cos(u*Math.PI/s);t.lineTo(f,g)}t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}}Ga.prototype.className="Star";Ga.prototype._centroid=!0;Ga.prototype._attrsAffectingSize=["innerRadius","outerRadius"];Bt(Ga);b.addGetterSetter(Ga,"numPoints",5,Q());b.addGetterSetter(Ga,"innerRadius",0,Q());b.addGetterSetter(Ga,"outerRadius",0,Q());function Ra(o){return[...o].reduce((t,n,l,s)=>{if(new RegExp("\\p{Emoji}","u").test(n)){const u=s[l+1];u&&new RegExp("\\p{Emoji_Modifier}|\\u200D","u").test(u)?(t.push(n+u),s[l+1]=""):t.push(n)}else new RegExp("\\p{Regional_Indicator}{2}","u").test(n+(s[l+1]||""))?t.push(n+s[l+1]):l>0&&new RegExp("\\p{Mn}|\\p{Me}|\\p{Mc}","u").test(n)?t[t.length-1]+=n:n&&t.push(n);return t},[])}const wn="auto",gg="center",A0="inherit",Hn="justify",mg="Change.konva",pg="2d",Uh="-",M0="left",yg="text",_g="Text",vg="top",Sg="bottom",Lh="middle",R0="normal",bg="px ",Bl=" ",xg="right",jh="rtl",Eg="word",Cg="char",kh="none",kr="…",N0=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],Tg=N0.length;function Ag(o){return o.split(",").map(t=>{t=t.trim();const n=t.indexOf(" ")>=0,l=t.indexOf('"')>=0||t.indexOf("'")>=0;return n&&!l&&(t=`"${t}"`),t}).join(", ")}let Ul;function Yr(){return Ul||(Ul=M.createCanvasElement().getContext(pg),Ul)}function Mg(o){o.fillText(this._partialText,this._partialTextX,this._partialTextY)}function Rg(o){o.setAttr("miterLimit",2),o.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function Ng(o){return o=o||{},!o.fillLinearGradientColorStops&&!o.fillRadialGradientColorStops&&!o.fillPatternImage&&(o.fill=o.fill||"black"),o}class wt extends k{constructor(t){super(Ng(t)),this._partialTextX=0,this._partialTextY=0;for(let n=0;n<Tg;n++)this.on(N0[n]+mg,this._setTextData);this._setTextData()}_sceneFunc(t){var n,l;const s=this.textArr,u=s.length;if(!this.text())return;let h=this.padding(),f=this.fontSize(),g=this.lineHeight()*f,m=this.verticalAlign(),p=this.direction(),v=0,y=this.align(),E=this.getWidth(),S=this.letterSpacing(),R=this.charRenderFunc(),O=this.fill(),G=this.textDecoration(),z=G.indexOf("underline")!==-1,B=G.indexOf("line-through")!==-1,H;p=p===A0?t.direction:p;let Z=g/2,X=Lh;if(!F.legacyTextRendering){const J=this.measureSize("M");X="alphabetic";const W=(n=J.fontBoundingBoxAscent)!==null&&n!==void 0?n:J.actualBoundingBoxAscent,nt=(l=J.fontBoundingBoxDescent)!==null&&l!==void 0?l:J.actualBoundingBoxDescent;Z=(W-nt)/2+g/2}for(p===jh&&t.setAttr("direction",p),t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",X),t.setAttr("textAlign",M0),m===Lh?v=(this.getHeight()-u*g-h*2)/2:m===Sg&&(v=this.getHeight()-u*g-h*2),t.translate(h,v+h),H=0;H<u;H++){let J=0,W=0;const nt=s[H],st=nt.text,ut=nt.width,$=nt.lastInParagraph;if(t.save(),y===xg?J+=E-ut-h*2:y===gg&&(J+=(E-ut-h*2)/2),z){t.save(),t.beginPath();const rt=F.legacyTextRendering?Math.round(f/2):Math.round(f/4),it=J,et=Z+W+rt;t.moveTo(it,et);const C=y===Hn&&!$?E-h*2:ut;t.lineTo(it+Math.round(C),et),t.lineWidth=f/15;const L=this._getLinearGradient();t.strokeStyle=L||O,t.stroke(),t.restore()}if(p!==jh&&(S!==0||y===Hn||R)){const rt=st.split(" ").length-1,it=Ra(st);for(let et=0;et<it.length;et++){const C=it[et];if(C===" "&&!$&&y===Hn&&(J+=(E-h*2-ut)/rt),this._partialTextX=J,this._partialTextY=Z+W,this._partialText=C,R){t.save();const T=s.slice(0,H).reduce((P,at)=>P+Ra(at.text).length,0),Y=et+T;R({char:C,index:Y,x:J,y:Z+W,lineIndex:H,column:et,isLastInLine:$,width:this.measureSize(C).width,context:t})}t.fillStrokeShape(this),R&&t.restore(),J+=this.measureSize(C).width+S}}else S!==0&&t.setAttr("letterSpacing",`${S}px`),this._partialTextX=J,this._partialTextY=Z+W,this._partialText=st,t.fillStrokeShape(this);if(B){t.save(),t.beginPath();const rt=F.legacyTextRendering?0:-Math.round(f/4),it=y===Hn?0:J;t.moveTo(it,Z+W+rt);const et=y===Hn&&!$?E-h*2:ut;t.lineTo(it+Math.round(et),Z+W+rt),t.lineWidth=f/15;const C=this._getLinearGradient();t.strokeStyle=C||O,t.stroke(),t.restore()}t.restore(),u>1&&(Z+=g)}}_hitFunc(t){const n=this.getWidth(),l=this.getHeight();t.beginPath(),t.rect(0,0,n,l),t.closePath(),t.fillStrokeShape(this)}setText(t){const n=M._isString(t)?t:t==null?"":t+"";return this._setAttr(yg,n),this}getWidth(){return this.attrs.width===wn||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===wn||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return M.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(t){var n,l,s,u,h,f,g,m,p,v,y;let E=Yr(),S=this.fontSize(),R;E.save(),E.font=this._getContextFont(),R=E.measureText(t),E.restore();const O=S/100;return{actualBoundingBoxAscent:(n=R.actualBoundingBoxAscent)!==null&&n!==void 0?n:71.58203125*O,actualBoundingBoxDescent:(l=R.actualBoundingBoxDescent)!==null&&l!==void 0?l:0,actualBoundingBoxLeft:(s=R.actualBoundingBoxLeft)!==null&&s!==void 0?s:-7.421875*O,actualBoundingBoxRight:(u=R.actualBoundingBoxRight)!==null&&u!==void 0?u:75.732421875*O,alphabeticBaseline:(h=R.alphabeticBaseline)!==null&&h!==void 0?h:0,emHeightAscent:(f=R.emHeightAscent)!==null&&f!==void 0?f:100*O,emHeightDescent:(g=R.emHeightDescent)!==null&&g!==void 0?g:-20*O,fontBoundingBoxAscent:(m=R.fontBoundingBoxAscent)!==null&&m!==void 0?m:91*O,fontBoundingBoxDescent:(p=R.fontBoundingBoxDescent)!==null&&p!==void 0?p:21*O,hangingBaseline:(v=R.hangingBaseline)!==null&&v!==void 0?v:72.80000305175781*O,ideographicBaseline:(y=R.ideographicBaseline)!==null&&y!==void 0?y:-21*O,width:R.width,height:S}}_getContextFont(){return this.fontStyle()+Bl+this.fontVariant()+Bl+(this.fontSize()+bg)+Ag(this.fontFamily())}_addTextLine(t){this.align()===Hn&&(t=t.trim());const l=this._getTextWidth(t);return this.textArr.push({text:t,width:l,lastInParagraph:!1})}_getTextWidth(t){const n=this.letterSpacing(),l=t.length;return Yr().measureText(t).width+n*l}_setTextData(){let t=this.text().split(`
`),n=+this.fontSize(),l=0,s=this.lineHeight()*n,u=this.attrs.width,h=this.attrs.height,f=u!==wn&&u!==void 0,g=h!==wn&&h!==void 0,m=this.padding(),p=u-m*2,v=h-m*2,y=0,E=this.wrap(),S=E!==kh,R=E!==Cg&&S,O=this.ellipsis();this.textArr=[],Yr().font=this._getContextFont();const G=O?this._getTextWidth(kr):0;for(let z=0,B=t.length;z<B;++z){let H=t[z],Z=this._getTextWidth(H);if(f&&Z>p)for(;H.length>0;){let X=0,J=Ra(H).length,W="",nt=0;for(;X<J;){const st=X+J>>>1,ut=Ra(H),$=ut.slice(0,st+1).join(""),rt=this._getTextWidth($);(O&&g&&y+s>v?rt+G:rt)<=p?(X=st+1,W=$,nt=rt):J=st}if(W){if(R){const $=Ra(H),rt=Ra(W),it=$[rt.length],et=it===Bl||it===Uh;let C;if(et&&nt<=p)C=rt.length;else{const L=rt.lastIndexOf(Bl),T=rt.lastIndexOf(Uh);C=Math.max(L,T)+1}C>0&&(X=C,W=$.slice(0,X).join(""),nt=this._getTextWidth(W))}if(W=W.trimRight(),this._addTextLine(W),l=Math.max(l,nt),y+=s,this._shouldHandleEllipsis(y)){this._tryToAddEllipsisToLastLine();break}if(H=Ra(H).slice(X).join("").trimLeft(),H.length>0&&(Z=this._getTextWidth(H),Z<=p)){this._addTextLine(H),y+=s,l=Math.max(l,Z);break}}else break}else this._addTextLine(H),y+=s,l=Math.max(l,Z),this._shouldHandleEllipsis(y)&&z<B-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),g&&y+s>v)break}this.textHeight=n,this.textWidth=l}_shouldHandleEllipsis(t){const n=+this.fontSize(),l=this.lineHeight()*n,s=this.attrs.height,u=s!==wn&&s!==void 0,h=this.padding(),f=s-h*2;return!(this.wrap()!==kh)||u&&t+l>f}_tryToAddEllipsisToLastLine(){const t=this.attrs.width,n=t!==wn&&t!==void 0,l=this.padding(),s=t-l*2,u=this.ellipsis(),h=this.textArr[this.textArr.length-1];!h||!u||(n&&(this._getTextWidth(h.text+kr)<s||(h.text=h.text.slice(0,h.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(h.text+kr))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const t=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,n=this.hasShadow();return t&&n?!0:super._useBufferCanvas()}}wt.prototype._fillFunc=Mg;wt.prototype._strokeFunc=Rg;wt.prototype.className=_g;wt.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"];Bt(wt);b.overWriteSetter(wt,"width",ho());b.overWriteSetter(wt,"height",ho());b.addGetterSetter(wt,"direction",A0);b.addGetterSetter(wt,"fontFamily","Arial");b.addGetterSetter(wt,"fontSize",12,Q());b.addGetterSetter(wt,"fontStyle",R0);b.addGetterSetter(wt,"fontVariant",R0);b.addGetterSetter(wt,"padding",0,Q());b.addGetterSetter(wt,"align",M0);b.addGetterSetter(wt,"verticalAlign",vg);b.addGetterSetter(wt,"lineHeight",1,Q());b.addGetterSetter(wt,"wrap",Eg);b.addGetterSetter(wt,"ellipsis",!1,Be());b.addGetterSetter(wt,"letterSpacing",0,Q());b.addGetterSetter(wt,"text","",Wa());b.addGetterSetter(wt,"textDecoration","");b.addGetterSetter(wt,"charRenderFunc",void 0);const Og="",O0="normal";function z0(o){o.fillText(this.partialText,0,0)}function D0(o){o.strokeText(this.partialText,0,0)}class Zt extends k{constructor(t){super(t),this.dummyCanvas=M.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return Dt.getPathLength(this.dataArray)}_getPointAtLength(t){if(!this.attrs.data)return null;const n=this.pathLength;return t>n?null:Dt.getPointAtLengthOfDataArray(t,this.dataArray)}_readDataAttribute(){this.dataArray=Dt.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(t){t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",this.textBaseline()),t.setAttr("textAlign","left"),t.save();const n=this.textDecoration(),l=this.fill(),s=this.fontSize(),u=this.glyphInfo;n==="underline"&&t.beginPath();for(let h=0;h<u.length;h++){t.save();const f=u[h].p0;t.translate(f.x,f.y),t.rotate(u[h].rotation),this.partialText=u[h].text,t.fillStrokeShape(this),n==="underline"&&(h===0&&t.moveTo(0,s/2+1),t.lineTo(s,s/2+1)),t.restore()}n==="underline"&&(t.strokeStyle=l,t.lineWidth=s/20,t.stroke()),t.restore()}_hitFunc(t){t.beginPath();const n=this.glyphInfo;if(n.length>=1){const l=n[0].p0;t.moveTo(l.x,l.y)}for(let l=0;l<n.length;l++){const s=n[l].p1;t.lineTo(s.x,s.y)}t.setAttr("lineWidth",this.fontSize()),t.setAttr("strokeStyle",this.colorKey),t.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return M.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(t){return wt.prototype.setText.call(this,t)}_getContextFont(){return wt.prototype._getContextFont.call(this)}_getTextSize(t){const l=this.dummyCanvas.getContext("2d");l.save(),l.font=this._getContextFont();const s=l.measureText(t);return l.restore(),{width:s.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const t=Ra(this.text()),n=[];let l=0;for(let v=0;v<t.length;v++)n.push({char:t[v],width:this._getTextSize(t[v]).width}),l+=n[v].width;const{height:s}=this._getTextSize(this.attrs.text);if(this.textWidth=l,this.textHeight=s,this.glyphInfo=[],!this.attrs.data)return null;const u=this.letterSpacing(),h=this.align(),f=this.kerningFunc(),g=Math.max(this.textWidth+((this.attrs.text||"").length-1)*u,0);let m=0;h==="center"&&(m=Math.max(0,this.pathLength/2-g/2)),h==="right"&&(m=Math.max(0,this.pathLength-g));let p=m;for(let v=0;v<n.length;v++){const y=this._getPointAtLength(p);if(!y)return;const E=n[v].char;let S=n[v].width+u;if(E===" "&&h==="justify"){const H=this.text().split(" ").length-1;S+=(this.pathLength-g)/H}const R=this._getPointAtLength(p+S);if(!R)return;const O=Dt.getLineLength(y.x,y.y,R.x,R.y);let G=0;if(f)try{G=f(n[v-1].char,E)*this.fontSize()}catch{G=0}y.x+=G,R.x+=G,this.textWidth+=G;const z=Dt.getPointOnLine(G+O/2,y.x,y.y,R.x,R.y),B=Math.atan2(R.y-y.y,R.x-y.x);this.glyphInfo.push({transposeX:z.x,transposeY:z.y,text:t[v],rotation:B,p0:y,p1:R}),p+=S}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const t=[];this.glyphInfo.forEach(function(m){t.push(m.p0.x),t.push(m.p0.y),t.push(m.p1.x),t.push(m.p1.y)});let n=t[0]||0,l=t[0]||0,s=t[1]||0,u=t[1]||0,h,f;for(let m=0;m<t.length/2;m++)h=t[m*2],f=t[m*2+1],n=Math.min(n,h),l=Math.max(l,h),s=Math.min(s,f),u=Math.max(u,f);const g=this.fontSize();return{x:n-g/2,y:s-g/2,width:l-n+g,height:u-s+g}}destroy(){return M.releaseCanvas(this.dummyCanvas),super.destroy()}}Zt.prototype._fillFunc=z0;Zt.prototype._strokeFunc=D0;Zt.prototype._fillFuncHit=z0;Zt.prototype._strokeFuncHit=D0;Zt.prototype.className="TextPath";Zt.prototype._attrsAffectingSize=["text","fontSize","data"];Bt(Zt);b.addGetterSetter(Zt,"data");b.addGetterSetter(Zt,"fontFamily","Arial");b.addGetterSetter(Zt,"fontSize",12,Q());b.addGetterSetter(Zt,"fontStyle",O0);b.addGetterSetter(Zt,"align","left");b.addGetterSetter(Zt,"letterSpacing",0,Q());b.addGetterSetter(Zt,"textBaseline","middle");b.addGetterSetter(Zt,"fontVariant",O0);b.addGetterSetter(Zt,"text",Og);b.addGetterSetter(Zt,"textDecoration","");b.addGetterSetter(Zt,"kerningFunc",void 0);const G0="tr-konva",zg=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(o=>o+`.${G0}`).join(" "),Yh="nodesRect",Dg=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange","draggableChange"],Gg={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},wg="ontouchstart"in F._global;function Hg(o,t,n){if(o==="rotater")return n;t+=M.degToRad(Gg[o]||0);const l=(M.radToDeg(t)%360+360)%360;return M._inRange(l,315+22.5,360)||M._inRange(l,0,22.5)?"ns-resize":M._inRange(l,45-22.5,45+22.5)?"nesw-resize":M._inRange(l,90-22.5,90+22.5)?"ew-resize":M._inRange(l,135-22.5,135+22.5)?"nwse-resize":M._inRange(l,180-22.5,180+22.5)?"ns-resize":M._inRange(l,225-22.5,225+22.5)?"nesw-resize":M._inRange(l,270-22.5,270+22.5)?"ew-resize":M._inRange(l,315-22.5,315+22.5)?"nwse-resize":(M.error("Transformer has unknown angle for cursor detection: "+l),"pointer")}const Xl=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function Bg(o){return{x:o.x+o.width/2*Math.cos(o.rotation)+o.height/2*Math.sin(-o.rotation),y:o.y+o.height/2*Math.cos(o.rotation)+o.width/2*Math.sin(o.rotation)}}function w0(o,t,n){const l=n.x+(o.x-n.x)*Math.cos(t)-(o.y-n.y)*Math.sin(t),s=n.y+(o.x-n.x)*Math.sin(t)+(o.y-n.y)*Math.cos(t);return{...o,rotation:o.rotation+t,x:l,y:s}}function Ug(o,t){const n=Bg(o);return w0(o,t,n)}function Lg(o,t,n){let l=t;for(let s=0;s<o.length;s++){const u=F.getAngle(o[s]),h=Math.abs(u-t)%(Math.PI*2);Math.min(h,Math.PI*2-h)<n&&(l=u)}return l}let ro=0;class yt extends Ln{constructor(t){super(t),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(zg,this.update),this.getNode()&&this.update()}attachTo(t){return this.setNode(t),this}setNode(t){return M.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([t])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return G0+this._id}setNodes(t=[]){this._nodes&&this._nodes.length&&this.detach();const n=t.filter(s=>s.isAncestorOf(this)?(M.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=t=n,t.length===1&&this.useSingleNodeRotation()?this.rotation(t[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(s=>{const u=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()};if(s._attrsAffectingSize.length){const h=s._attrsAffectingSize.map(f=>f+"Change."+this._getEventNamespace()).join(" ");s.on(h,u)}s.on(Dg.map(h=>h+`.${this._getEventNamespace()}`).join(" "),u),s.on(`absoluteTransformChange.${this._getEventNamespace()}`,u),this._proxyDrag(s)}),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(t){let n;t.on(`dragstart.${this._getEventNamespace()}`,l=>{n=t.getAbsolutePosition(),!this.isDragging()&&t!==this.findOne(".back")&&this.startDrag(l,!1)}),t.on(`dragmove.${this._getEventNamespace()}`,l=>{if(!n)return;const s=t.getAbsolutePosition(),u=s.x-n.x,h=s.y-n.y;this.nodes().forEach(f=>{if(f===t||f.isDragging())return;const g=f.getAbsolutePosition();f.setAbsolutePosition({x:g.x+u,y:g.y+h}),f.startDrag(l)}),n=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(t=>{t.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(Yh),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(Yh,this.__getNodeRect)}__getNodeShape(t,n=this.rotation(),l){const s=t.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),u=t.getAbsoluteScale(l),h=t.getAbsolutePosition(l),f=s.x*u.x-t.offsetX()*u.x,g=s.y*u.y-t.offsetY()*u.y,m=(F.getAngle(t.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),p={x:h.x+f*Math.cos(m)+g*Math.sin(-m),y:h.y+g*Math.cos(m)+f*Math.sin(m),width:s.width*u.x,height:s.height*u.y,rotation:m};return w0(p,-F.getAngle(n),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};const n=[];this.nodes().map(m=>{const p=m.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),v=[{x:p.x,y:p.y},{x:p.x+p.width,y:p.y},{x:p.x+p.width,y:p.y+p.height},{x:p.x,y:p.y+p.height}],y=m.getAbsoluteTransform();v.forEach(function(E){const S=y.point(E);n.push(S)})});const l=new Se;l.rotate(-F.getAngle(this.rotation()));let s=1/0,u=1/0,h=-1/0,f=-1/0;n.forEach(function(m){const p=l.point(m);s===void 0&&(s=h=p.x,u=f=p.y),s=Math.min(s,p.x),u=Math.min(u,p.y),h=Math.max(h,p.x),f=Math.max(f,p.y)}),l.invert();const g=l.point({x:s,y:u});return{x:g.x,y:g.y,width:h-s,height:f-u,rotation:F.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),Xl.forEach(t=>{this._createAnchor(t)}),this._createAnchor("rotater")}_createAnchor(t){const n=new Di({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:t+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:wg?10:"auto"}),l=this;n.on("mousedown touchstart",function(s){l._handleMouseDown(s)}),n.on("dragstart",s=>{n.stopDrag(),s.cancelBubble=!0}),n.on("dragend",s=>{s.cancelBubble=!0}),n.on("mouseenter",()=>{const s=F.getAngle(this.rotation()),u=this.rotateAnchorCursor(),h=Hg(t,s,u);n.getStage().content&&(n.getStage().content.style.cursor=h),this._cursorChange=!0}),n.on("mouseout",()=>{n.getStage().content&&(n.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(n)}_createBack(){const t=new k({name:"back",width:0,height:0,sceneFunc(n,l){const s=l.getParent(),u=s.padding();n.beginPath(),n.rect(-u,-u,l.width()+u*2,l.height()+u*2),n.moveTo(l.width()/2,-u),s.rotateEnabled()&&s.rotateLineVisible()&&n.lineTo(l.width()/2,-s.rotateAnchorOffset()*M._sign(l.height())-u),n.fillStrokeShape(l)},hitFunc:(n,l)=>{if(!this.shouldOverdrawWholeArea())return;const s=this.padding();n.beginPath(),n.rect(-s,-s,l.width()+s*2,l.height()+s*2),n.fillStrokeShape(l)}});this.add(t),this._proxyDrag(t),t.on("dragstart",n=>{n.cancelBubble=!0}),t.on("dragmove",n=>{n.cancelBubble=!0}),t.on("dragend",n=>{n.cancelBubble=!0}),this.on("dragmove",n=>{this.update()})}_handleMouseDown(t){if(this._transforming)return;this._movingAnchorName=t.target.name().split(" ")[0];const n=this._getNodeRect(),l=n.width,s=n.height,u=Math.sqrt(Math.pow(l,2)+Math.pow(s,2));this.sin=Math.abs(s/u),this.cos=Math.abs(l/u),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const h=t.target.getAbsolutePosition(),f=t.target.getStage().getPointerPosition();this._anchorDragOffset={x:f.x-h.x,y:f.y-h.y},ro++,this._fire("transformstart",{evt:t.evt,target:this.getNode()}),this._nodes.forEach(g=>{g._fire("transformstart",{evt:t.evt,target:g})})}_handleMouseMove(t){let n,l,s;const u=this.findOne("."+this._movingAnchorName),h=u.getStage();h.setPointersPositions(t);const f=h.getPointerPosition();let g={x:f.x-this._anchorDragOffset.x,y:f.y-this._anchorDragOffset.y};const m=u.getAbsolutePosition();this.anchorDragBoundFunc()&&(g=this.anchorDragBoundFunc()(m,g,t)),u.setAbsolutePosition(g);const p=u.getAbsolutePosition();if(m.x===p.x&&m.y===p.y)return;if(this._movingAnchorName==="rotater"){const z=this._getNodeRect();n=u.x()-z.width/2,l=-u.y()+z.height/2;let B=Math.atan2(-l,n)+Math.PI/2;z.height<0&&(B-=Math.PI);const Z=F.getAngle(this.rotation())+B,X=F.getAngle(this.rotationSnapTolerance()),W=Lg(this.rotationSnaps(),Z,X)-z.rotation,nt=Ug(z,W);this._fitNodesInto(nt,t);return}const v=this.shiftBehavior();let y;v==="inverted"?y=this.keepRatio()&&!t.shiftKey:v==="none"?y=this.keepRatio():y=this.keepRatio()||t.shiftKey;let E=this.centeredScaling()||t.altKey;if(this._movingAnchorName==="top-left"){if(y){const z=E?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};s=Math.sqrt(Math.pow(z.x-u.x(),2)+Math.pow(z.y-u.y(),2));const B=this.findOne(".top-left").x()>z.x?-1:1,H=this.findOne(".top-left").y()>z.y?-1:1;n=s*this.cos*B,l=s*this.sin*H,this.findOne(".top-left").x(z.x-n),this.findOne(".top-left").y(z.y-l)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(u.y());else if(this._movingAnchorName==="top-right"){if(y){const z=E?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};s=Math.sqrt(Math.pow(u.x()-z.x,2)+Math.pow(z.y-u.y(),2));const B=this.findOne(".top-right").x()<z.x?-1:1,H=this.findOne(".top-right").y()>z.y?-1:1;n=s*this.cos*B,l=s*this.sin*H,this.findOne(".top-right").x(z.x+n),this.findOne(".top-right").y(z.y-l)}var S=u.position();this.findOne(".top-left").y(S.y),this.findOne(".bottom-right").x(S.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(u.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(u.x());else if(this._movingAnchorName==="bottom-left"){if(y){const z=E?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};s=Math.sqrt(Math.pow(z.x-u.x(),2)+Math.pow(u.y()-z.y,2));const B=z.x<u.x()?-1:1,H=u.y()<z.y?-1:1;n=s*this.cos*B,l=s*this.sin*H,u.x(z.x-n),u.y(z.y+l)}S=u.position(),this.findOne(".top-left").x(S.x),this.findOne(".bottom-right").y(S.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(u.y());else if(this._movingAnchorName==="bottom-right"){if(y){const z=E?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};s=Math.sqrt(Math.pow(u.x()-z.x,2)+Math.pow(u.y()-z.y,2));const B=this.findOne(".bottom-right").x()<z.x?-1:1,H=this.findOne(".bottom-right").y()<z.y?-1:1;n=s*this.cos*B,l=s*this.sin*H,this.findOne(".bottom-right").x(z.x+n),this.findOne(".bottom-right").y(z.y+l)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));if(E=this.centeredScaling()||t.altKey,E){const z=this.findOne(".top-left"),B=this.findOne(".bottom-right"),H=z.x(),Z=z.y(),X=this.getWidth()-B.x(),J=this.getHeight()-B.y();B.move({x:-H,y:-Z}),z.move({x:X,y:J})}const R=this.findOne(".top-left").getAbsolutePosition();n=R.x,l=R.y;const O=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),G=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:n,y:l,width:O,height:G,rotation:F.getAngle(this.rotation())},t)}_handleMouseUp(t){this._removeEvents(t)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(t){var n;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const l=this.getNode();ro--,this._fire("transformend",{evt:t,target:l}),(n=this.getLayer())===null||n===void 0||n.batchDraw(),l&&this._nodes.forEach(s=>{var u;s._fire("transformend",{evt:t,target:s}),(u=s.getLayer())===null||u===void 0||u.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(t,n){const l=this._getNodeRect(),s=1;if(M._inRange(t.width,-this.padding()*2-s,s)){this.update();return}if(M._inRange(t.height,-this.padding()*2-s,s)){this.update();return}const u=new Se;if(u.rotate(F.getAngle(this.rotation())),this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("left")>=0){const y=u.point({x:-this.padding()*2,y:0});t.x+=y.x,t.y+=y.y,t.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=y.x,this._anchorDragOffset.y-=y.y}else if(this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("right")>=0){const y=u.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=y.x,this._anchorDragOffset.y-=y.y,t.width+=this.padding()*2}if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("top")>=0){const y=u.point({x:0,y:-this.padding()*2});t.x+=y.x,t.y+=y.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=y.x,this._anchorDragOffset.y-=y.y,t.height+=this.padding()*2}else if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const y=u.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=y.x,this._anchorDragOffset.y-=y.y,t.height+=this.padding()*2}if(this.boundBoxFunc()){const y=this.boundBoxFunc()(l,t);y?t=y:M.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const h=1e7,f=new Se;f.translate(l.x,l.y),f.rotate(l.rotation),f.scale(l.width/h,l.height/h);const g=new Se,m=t.width/h,p=t.height/h;this.flipEnabled()===!1?(g.translate(t.x,t.y),g.rotate(t.rotation),g.translate(t.width<0?t.width:0,t.height<0?t.height:0),g.scale(Math.abs(m),Math.abs(p))):(g.translate(t.x,t.y),g.rotate(t.rotation),g.scale(m,p));const v=g.multiply(f.invert());this._nodes.forEach(y=>{var E;if(!y.getStage())return;const S=y.getParent().getAbsoluteTransform(),R=y.getTransform().copy();R.translate(y.offsetX(),y.offsetY());const O=new Se;O.multiply(S.copy().invert()).multiply(v).multiply(S).multiply(R);const G=O.decompose();y.setAttrs(G),(E=y.getLayer())===null||E===void 0||E.batchDraw()}),this.rotation(M._getRotation(t.rotation)),this._nodes.forEach(y=>{this._fire("transform",{evt:n,target:y}),y._fire("transform",{evt:n,target:y})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(t,n){this.findOne(t).setAttrs(n)}update(){var t;const n=this._getNodeRect();this.rotation(M._getRotation(n.rotation));const l=n.width,s=n.height,u=this.enabledAnchors(),h=this.resizeEnabled(),f=this.padding(),g=this.anchorSize(),m=this.find("._anchor");m.forEach(v=>{v.setAttrs({width:g,height:g,offsetX:g/2,offsetY:g/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:g/2+f,offsetY:g/2+f,visible:h&&u.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:l/2,y:0,offsetY:g/2+f,visible:h&&u.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:l,y:0,offsetX:g/2-f,offsetY:g/2+f,visible:h&&u.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:s/2,offsetX:g/2+f,visible:h&&u.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:l,y:s/2,offsetX:g/2-f,visible:h&&u.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:s,offsetX:g/2+f,offsetY:g/2-f,visible:h&&u.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:l/2,y:s,offsetY:g/2-f,visible:h&&u.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:l,y:s,offsetX:g/2-f,offsetY:g/2-f,visible:h&&u.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:l/2,y:-this.rotateAnchorOffset()*M._sign(s)-f,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:l,height:s,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),draggable:this.nodes().some(v=>v.draggable()),x:0,y:0});const p=this.anchorStyleFunc();p&&m.forEach(v=>{p(v)}),(t=this.getLayer())===null||t===void 0||t.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const t=this.findOne("."+this._movingAnchorName);t&&t.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),Ln.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return K.prototype.toObject.call(this)}clone(t){return K.prototype.clone.call(this,t)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}}yt.isTransforming=()=>ro>0;function jg(o){return o instanceof Array||M.warn("enabledAnchors value should be an array"),o instanceof Array&&o.forEach(function(t){Xl.indexOf(t)===-1&&M.warn("Unknown anchor name: "+t+". Available names are: "+Xl.join(", "))}),o||[]}yt.prototype.className="Transformer";Bt(yt);b.addGetterSetter(yt,"enabledAnchors",Xl,jg);b.addGetterSetter(yt,"flipEnabled",!0,Be());b.addGetterSetter(yt,"resizeEnabled",!0);b.addGetterSetter(yt,"anchorSize",10,Q());b.addGetterSetter(yt,"rotateEnabled",!0);b.addGetterSetter(yt,"rotateLineVisible",!0);b.addGetterSetter(yt,"rotationSnaps",[]);b.addGetterSetter(yt,"rotateAnchorOffset",50,Q());b.addGetterSetter(yt,"rotateAnchorCursor","crosshair");b.addGetterSetter(yt,"rotationSnapTolerance",5,Q());b.addGetterSetter(yt,"borderEnabled",!0);b.addGetterSetter(yt,"anchorStroke","rgb(0, 161, 255)");b.addGetterSetter(yt,"anchorStrokeWidth",1,Q());b.addGetterSetter(yt,"anchorFill","white");b.addGetterSetter(yt,"anchorCornerRadius",0,Q());b.addGetterSetter(yt,"borderStroke","rgb(0, 161, 255)");b.addGetterSetter(yt,"borderStrokeWidth",1,Q());b.addGetterSetter(yt,"borderDash");b.addGetterSetter(yt,"keepRatio",!0);b.addGetterSetter(yt,"shiftBehavior","default");b.addGetterSetter(yt,"centeredScaling",!1);b.addGetterSetter(yt,"ignoreStroke",!1);b.addGetterSetter(yt,"padding",0,Q());b.addGetterSetter(yt,"nodes");b.addGetterSetter(yt,"node");b.addGetterSetter(yt,"boundBoxFunc");b.addGetterSetter(yt,"anchorDragBoundFunc");b.addGetterSetter(yt,"anchorStyleFunc");b.addGetterSetter(yt,"shouldOverdrawWholeArea",!1);b.addGetterSetter(yt,"useSingleNodeRotation",!0);b.backCompat(yt,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"});class la extends k{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.radius(),0,F.getAngle(this.angle()),this.clockwise()),t.lineTo(0,0),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(t){this.radius(t/2)}setHeight(t){this.radius(t/2)}}la.prototype.className="Wedge";la.prototype._centroid=!0;la.prototype._attrsAffectingSize=["radius"];Bt(la);b.addGetterSetter(la,"radius",0,Q());b.addGetterSetter(la,"angle",0,Q());b.addGetterSetter(la,"clockwise",!1);b.backCompat(la,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});function qh(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const kg=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],Yg=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function qg(o,t){const n=o.data,l=o.width,s=o.height;let u,h,f,g,m,p,v,y,E,S,R,O,G,z,B,H,Z,X,J,W;const nt=t+t+1,st=l-1,ut=s-1,$=t+1,rt=$*($+1)/2,it=new qh,et=kg[t],C=Yg[t];let L=null,T=it,Y=null,P=null;for(let at=1;at<nt;at++)T=T.next=new qh,at===$&&(L=T);T.next=it,f=h=0;for(let at=0;at<s;at++){O=G=z=B=g=m=p=v=0,y=$*(H=n[h]),E=$*(Z=n[h+1]),S=$*(X=n[h+2]),R=$*(J=n[h+3]),g+=rt*H,m+=rt*Z,p+=rt*X,v+=rt*J,T=it;for(let ht=0;ht<$;ht++)T.r=H,T.g=Z,T.b=X,T.a=J,T=T.next;for(let ht=1;ht<$;ht++)u=h+((st<ht?st:ht)<<2),g+=(T.r=H=n[u])*(W=$-ht),m+=(T.g=Z=n[u+1])*W,p+=(T.b=X=n[u+2])*W,v+=(T.a=J=n[u+3])*W,O+=H,G+=Z,z+=X,B+=J,T=T.next;Y=it,P=L;for(let ht=0;ht<l;ht++)n[h+3]=J=v*et>>C,J!==0?(J=255/J,n[h]=(g*et>>C)*J,n[h+1]=(m*et>>C)*J,n[h+2]=(p*et>>C)*J):n[h]=n[h+1]=n[h+2]=0,g-=y,m-=E,p-=S,v-=R,y-=Y.r,E-=Y.g,S-=Y.b,R-=Y.a,u=f+((u=ht+t+1)<st?u:st)<<2,O+=Y.r=n[u],G+=Y.g=n[u+1],z+=Y.b=n[u+2],B+=Y.a=n[u+3],g+=O,m+=G,p+=z,v+=B,Y=Y.next,y+=H=P.r,E+=Z=P.g,S+=X=P.b,R+=J=P.a,O-=H,G-=Z,z-=X,B-=J,P=P.next,h+=4;f+=l}for(let at=0;at<l;at++){G=z=B=O=m=p=v=g=0,h=at<<2,y=$*(H=n[h]),E=$*(Z=n[h+1]),S=$*(X=n[h+2]),R=$*(J=n[h+3]),g+=rt*H,m+=rt*Z,p+=rt*X,v+=rt*J,T=it;for(let Nt=0;Nt<$;Nt++)T.r=H,T.g=Z,T.b=X,T.a=J,T=T.next;let ht=l;for(let Nt=1;Nt<=t;Nt++)h=ht+at<<2,g+=(T.r=H=n[h])*(W=$-Nt),m+=(T.g=Z=n[h+1])*W,p+=(T.b=X=n[h+2])*W,v+=(T.a=J=n[h+3])*W,O+=H,G+=Z,z+=X,B+=J,T=T.next,Nt<ut&&(ht+=l);h=at,Y=it,P=L;for(let Nt=0;Nt<s;Nt++)u=h<<2,n[u+3]=J=v*et>>C,J>0?(J=255/J,n[u]=(g*et>>C)*J,n[u+1]=(m*et>>C)*J,n[u+2]=(p*et>>C)*J):n[u]=n[u+1]=n[u+2]=0,g-=y,m-=E,p-=S,v-=R,y-=Y.r,E-=Y.g,S-=Y.b,R-=Y.a,u=at+((u=Nt+$)<ut?u:ut)*l<<2,g+=O+=Y.r=n[u],m+=G+=Y.g=n[u+1],p+=z+=Y.b=n[u+2],v+=B+=Y.a=n[u+3],Y=Y.next,y+=H=P.r,E+=Z=P.g,S+=X=P.b,R+=J=P.a,O-=H,G-=Z,z-=X,B-=J,P=P.next,h+=l}}const Xg=function(t){const n=Math.round(this.blurRadius());n>0&&qg(t,n)};b.addGetterSetter(K,"blurRadius",0,Q(),b.afterSetFilter);const Pg=function(o){const t=this.brightness()*255,n=o.data,l=n.length;for(let s=0;s<l;s+=4)n[s]+=t,n[s+1]+=t,n[s+2]+=t};b.addGetterSetter(K,"brightness",0,Q(),b.afterSetFilter);const Vg=function(o){const t=this.brightness(),n=o.data,l=n.length;for(let s=0;s<l;s+=4)n[s]=Math.min(255,n[s]*t),n[s+1]=Math.min(255,n[s+1]*t),n[s+2]=Math.min(255,n[s+2]*t)},Kg=function(o){const t=Math.pow((this.contrast()+100)/100,2),n=o.data,l=n.length;let s=150,u=150,h=150;for(let f=0;f<l;f+=4)s=n[f],u=n[f+1],h=n[f+2],s/=255,s-=.5,s*=t,s+=.5,s*=255,u/=255,u-=.5,u*=t,u+=.5,u*=255,h/=255,h-=.5,h*=t,h+=.5,h*=255,s=s<0?0:s>255?255:s,u=u<0?0:u>255?255:u,h=h<0?0:h>255?255:h,n[f]=s,n[f+1]=u,n[f+2]=h};b.addGetterSetter(K,"contrast",0,Q(),b.afterSetFilter);const Qg=function(o){var t,n,l,s,u,h,f,g,m;const p=o.data,v=o.width,y=o.height,E=Math.min(1,Math.max(0,(n=(t=this.embossStrength)===null||t===void 0?void 0:t.call(this))!==null&&n!==void 0?n:.5)),S=Math.min(1,Math.max(0,(s=(l=this.embossWhiteLevel)===null||l===void 0?void 0:l.call(this))!==null&&s!==void 0?s:.5)),O=(f={"top-left":315,top:270,"top-right":225,right:180,"bottom-right":135,bottom:90,"bottom-left":45,left:0}[(h=(u=this.embossDirection)===null||u===void 0?void 0:u.call(this))!==null&&h!==void 0?h:"top-left"])!==null&&f!==void 0?f:315,G=!!((m=(g=this.embossBlend)===null||g===void 0?void 0:g.call(this))!==null&&m!==void 0&&m),z=E*10,B=S*255,H=O*Math.PI/180,Z=Math.cos(H),X=Math.sin(H),J=128/1020*z,W=new Uint8ClampedArray(p),nt=new Float32Array(v*y);for(let it=0,et=0;et<p.length;et+=4,it++)nt[it]=.2126*W[et]+.7152*W[et+1]+.0722*W[et+2];const st=[-1,0,1,-2,0,2,-1,0,1],ut=[-1,-2,-1,0,0,0,1,2,1],$=[-v-1,-v,-v+1,-1,0,1,v-1,v,v+1],rt=it=>it<0?0:it>255?255:it;for(let it=1;it<y-1;it++)for(let et=1;et<v-1;et++){const C=it*v+et;let L=0,T=0;L+=nt[C+$[0]]*st[0],T+=nt[C+$[0]]*ut[0],L+=nt[C+$[1]]*st[1],T+=nt[C+$[1]]*ut[1],L+=nt[C+$[2]]*st[2],T+=nt[C+$[2]]*ut[2],L+=nt[C+$[3]]*st[3],T+=nt[C+$[3]]*ut[3],L+=nt[C+$[5]]*st[5],T+=nt[C+$[5]]*ut[5],L+=nt[C+$[6]]*st[6],T+=nt[C+$[6]]*ut[6],L+=nt[C+$[7]]*st[7],T+=nt[C+$[7]]*ut[7],L+=nt[C+$[8]]*st[8],T+=nt[C+$[8]]*ut[8];const Y=Z*L+X*T,P=rt(B+Y*J),at=C*4;if(G){const ht=P-B;p[at]=rt(W[at]+ht),p[at+1]=rt(W[at+1]+ht),p[at+2]=rt(W[at+2]+ht),p[at+3]=W[at+3]}else p[at]=p[at+1]=p[at+2]=P,p[at+3]=W[at+3]}for(let it=0;it<v;it++){let et=it*4,C=((y-1)*v+it)*4;p[et]=W[et],p[et+1]=W[et+1],p[et+2]=W[et+2],p[et+3]=W[et+3],p[C]=W[C],p[C+1]=W[C+1],p[C+2]=W[C+2],p[C+3]=W[C+3]}for(let it=1;it<y-1;it++){let et=it*v*4,C=(it*v+(v-1))*4;p[et]=W[et],p[et+1]=W[et+1],p[et+2]=W[et+2],p[et+3]=W[et+3],p[C]=W[C],p[C+1]=W[C+1],p[C+2]=W[C+2],p[C+3]=W[C+3]}return o};b.addGetterSetter(K,"embossStrength",.5,Q(),b.afterSetFilter);b.addGetterSetter(K,"embossWhiteLevel",.5,Q(),b.afterSetFilter);b.addGetterSetter(K,"embossDirection","top-left",void 0,b.afterSetFilter);b.addGetterSetter(K,"embossBlend",!1,void 0,b.afterSetFilter);function qr(o,t,n,l,s){const u=n-t,h=s-l;if(u===0)return l+h/2;if(h===0)return l;let f=(o-t)/u;return f=h*f+l,f}const Zg=function(o){const t=o.data,n=t.length;let l=t[0],s=l,u,h=t[1],f=h,g,m=t[2],p=m,v;const y=this.enhance();if(y===0)return;for(let B=0;B<n;B+=4)u=t[B+0],u<l?l=u:u>s&&(s=u),g=t[B+1],g<h?h=g:g>f&&(f=g),v=t[B+2],v<m?m=v:v>p&&(p=v);s===l&&(s=255,l=0),f===h&&(f=255,h=0),p===m&&(p=255,m=0);let E,S,R,O,G,z;if(y>0)E=s+y*(255-s),S=l-y*(l-0),R=f+y*(255-f),O=h-y*(h-0),G=p+y*(255-p),z=m-y*(m-0);else{const B=(s+l)*.5;E=s+y*(s-B),S=l+y*(l-B);const H=(f+h)*.5;R=f+y*(f-H),O=h+y*(h-H);const Z=(p+m)*.5;G=p+y*(p-Z),z=m+y*(m-Z)}for(let B=0;B<n;B+=4)t[B+0]=qr(t[B+0],l,s,S,E),t[B+1]=qr(t[B+1],h,f,O,R),t[B+2]=qr(t[B+2],m,p,z,G)};b.addGetterSetter(K,"enhance",0,Q(),b.afterSetFilter);const Jg=function(o){const t=o.data,n=t.length;for(let l=0;l<n;l+=4){const s=.34*t[l]+.5*t[l+1]+.16*t[l+2];t[l]=s,t[l+1]=s,t[l+2]=s}};b.addGetterSetter(K,"hue",0,Q(),b.afterSetFilter);b.addGetterSetter(K,"saturation",0,Q(),b.afterSetFilter);b.addGetterSetter(K,"luminance",0,Q(),b.afterSetFilter);const Fg=function(o){const t=o.data,n=t.length,l=1,s=Math.pow(2,this.saturation()),u=Math.abs(this.hue()+360)%360,h=this.luminance()*127,f=l*s*Math.cos(u*Math.PI/180),g=l*s*Math.sin(u*Math.PI/180),m=.299*l+.701*f+.167*g,p=.587*l-.587*f+.33*g,v=.114*l-.114*f-.497*g,y=.299*l-.299*f-.328*g,E=.587*l+.413*f+.035*g,S=.114*l-.114*f+.293*g,R=.299*l-.3*f+1.25*g,O=.587*l-.586*f-1.05*g,G=.114*l+.886*f-.2*g;let z,B,H,Z;for(let X=0;X<n;X+=4)z=t[X+0],B=t[X+1],H=t[X+2],Z=t[X+3],t[X+0]=m*z+p*B+v*H+h,t[X+1]=y*z+E*B+S*H+h,t[X+2]=R*z+O*B+G*H+h,t[X+3]=Z},Wg=function(o){const t=o.data,n=t.length,l=Math.pow(2,this.value()),s=Math.pow(2,this.saturation()),u=Math.abs(this.hue()+360)%360,h=l*s*Math.cos(u*Math.PI/180),f=l*s*Math.sin(u*Math.PI/180),g=.299*l+.701*h+.167*f,m=.587*l-.587*h+.33*f,p=.114*l-.114*h-.497*f,v=.299*l-.299*h-.328*f,y=.587*l+.413*h+.035*f,E=.114*l-.114*h+.293*f,S=.299*l-.3*h+1.25*f,R=.587*l-.586*h-1.05*f,O=.114*l+.886*h-.2*f;for(let G=0;G<n;G+=4){const z=t[G+0],B=t[G+1],H=t[G+2],Z=t[G+3];t[G+0]=g*z+m*B+p*H,t[G+1]=v*z+y*B+E*H,t[G+2]=S*z+R*B+O*H,t[G+3]=Z}};b.addGetterSetter(K,"hue",0,Q(),b.afterSetFilter);b.addGetterSetter(K,"saturation",0,Q(),b.afterSetFilter);b.addGetterSetter(K,"value",0,Q(),b.afterSetFilter);const Ig=function(o){const t=o.data,n=t.length;for(let l=0;l<n;l+=4)t[l]=255-t[l],t[l+1]=255-t[l+1],t[l+2]=255-t[l+2]},$g=function(o,t,n){const l=o.data,s=t.data,u=o.width,h=o.height,f=n.polarCenterX||u/2,g=n.polarCenterY||h/2;let m=Math.sqrt(f*f+g*g),p=u-f,v=h-g;const y=Math.sqrt(p*p+v*v);m=y>m?y:m;const E=h,S=u,R=360/S*Math.PI/180;for(let O=0;O<S;O+=1){const G=Math.sin(O*R),z=Math.cos(O*R);for(let B=0;B<E;B+=1){p=Math.floor(f+m*B/E*z),v=Math.floor(g+m*B/E*G);let H=(v*u+p)*4;const Z=l[H+0],X=l[H+1],J=l[H+2],W=l[H+3];H=(O+B*u)*4,s[H+0]=Z,s[H+1]=X,s[H+2]=J,s[H+3]=W}}},t4=function(o,t,n){const l=o.data,s=t.data,u=o.width,h=o.height,f=n.polarCenterX||u/2,g=n.polarCenterY||h/2;let m=Math.sqrt(f*f+g*g),p=u-f,v=h-g;const y=Math.sqrt(p*p+v*v);m=y>m?y:m;const E=h,S=u,R=0;let O,G;for(p=0;p<u;p+=1)for(v=0;v<h;v+=1){const z=p-f,B=v-g,H=Math.sqrt(z*z+B*B)*E/m;let Z=(Math.atan2(B,z)*180/Math.PI+360+R)%360;Z=Z*S/360,O=Math.floor(Z),G=Math.floor(H);let X=(G*u+O)*4;const J=l[X+0],W=l[X+1],nt=l[X+2],st=l[X+3];X=(v*u+p)*4,s[X+0]=J,s[X+1]=W,s[X+2]=nt,s[X+3]=st}},e4=function(o){const t=o.width,n=o.height;let l,s,u,h,f,g,m,p,v,y,E=Math.round(this.kaleidoscopePower());const S=Math.round(this.kaleidoscopeAngle()),R=Math.floor(t*(S%360)/360);if(E<1)return;const O=M.createCanvasElement();O.width=t,O.height=n;const G=O.getContext("2d").getImageData(0,0,t,n);M.releaseCanvas(O),$g(o,G,{polarCenterX:t/2,polarCenterY:n/2});let z=t/Math.pow(2,E);for(;z<=8;)z=z*2,E-=1;z=Math.ceil(z);let B=z,H=0,Z=B,X=1;for(R+z>t&&(H=B,Z=0,X=-1),s=0;s<n;s+=1)for(l=H;l!==Z;l+=X)u=Math.round(l+R)%t,v=(t*s+u)*4,f=G.data[v+0],g=G.data[v+1],m=G.data[v+2],p=G.data[v+3],y=(t*s+l)*4,G.data[y+0]=f,G.data[y+1]=g,G.data[y+2]=m,G.data[y+3]=p;for(s=0;s<n;s+=1)for(B=Math.floor(z),h=0;h<E;h+=1){for(l=0;l<B+1;l+=1)v=(t*s+l)*4,f=G.data[v+0],g=G.data[v+1],m=G.data[v+2],p=G.data[v+3],y=(t*s+B*2-l-1)*4,G.data[y+0]=f,G.data[y+1]=g,G.data[y+2]=m,G.data[y+3]=p;B*=2}t4(G,o,{})};b.addGetterSetter(K,"kaleidoscopePower",2,Q(),b.afterSetFilter);b.addGetterSetter(K,"kaleidoscopeAngle",0,Q(),b.afterSetFilter);function Ll(o,t,n){let l=(n*o.width+t)*4;const s=[];return s.push(o.data[l++],o.data[l++],o.data[l++],o.data[l++]),s}function bi(o,t){return Math.sqrt(Math.pow(o[0]-t[0],2)+Math.pow(o[1]-t[1],2)+Math.pow(o[2]-t[2],2))}function a4(o){const t=[0,0,0];for(let n=0;n<o.length;n++)t[0]+=o[n][0],t[1]+=o[n][1],t[2]+=o[n][2];return t[0]/=o.length,t[1]/=o.length,t[2]/=o.length,t}function n4(o,t){const n=Ll(o,0,0),l=Ll(o,o.width-1,0),s=Ll(o,0,o.height-1),u=Ll(o,o.width-1,o.height-1),h=t||10;if(bi(n,l)<h&&bi(l,u)<h&&bi(u,s)<h&&bi(s,n)<h){const f=a4([l,n,u,s]),g=[];for(let m=0;m<o.width*o.height;m++){const p=bi(f,[o.data[m*4],o.data[m*4+1],o.data[m*4+2]]);g[m]=p<h?0:255}return g}}function i4(o,t){for(let n=0;n<o.width*o.height;n++)o.data[4*n+3]=t[n]}function l4(o,t,n){const l=[1,1,1,1,0,1,1,1,1],s=Math.round(Math.sqrt(l.length)),u=Math.floor(s/2),h=[];for(let f=0;f<n;f++)for(let g=0;g<t;g++){const m=f*t+g;let p=0;for(let v=0;v<s;v++)for(let y=0;y<s;y++){const E=f+v-u,S=g+y-u;if(E>=0&&E<n&&S>=0&&S<t){const R=E*t+S,O=l[v*s+y];p+=o[R]*O}}h[m]=p===2040?255:0}return h}function s4(o,t,n){const l=[1,1,1,1,1,1,1,1,1],s=Math.round(Math.sqrt(l.length)),u=Math.floor(s/2),h=[];for(let f=0;f<n;f++)for(let g=0;g<t;g++){const m=f*t+g;let p=0;for(let v=0;v<s;v++)for(let y=0;y<s;y++){const E=f+v-u,S=g+y-u;if(E>=0&&E<n&&S>=0&&S<t){const R=E*t+S,O=l[v*s+y];p+=o[R]*O}}h[m]=p>=1020?255:0}return h}function r4(o,t,n){const l=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],s=Math.round(Math.sqrt(l.length)),u=Math.floor(s/2),h=[];for(let f=0;f<n;f++)for(let g=0;g<t;g++){const m=f*t+g;let p=0;for(let v=0;v<s;v++)for(let y=0;y<s;y++){const E=f+v-u,S=g+y-u;if(E>=0&&E<n&&S>=0&&S<t){const R=E*t+S,O=l[v*s+y];p+=o[R]*O}}h[m]=p}return h}const o4=function(o){const t=this.threshold();let n=n4(o,t);return n&&(n=l4(n,o.width,o.height),n=s4(n,o.width,o.height),n=r4(n,o.width,o.height),i4(o,n)),o};b.addGetterSetter(K,"threshold",0,Q(),b.afterSetFilter);const u4=function(o){const t=this.noise()*255,n=o.data,l=n.length,s=t/2;for(let u=0;u<l;u+=4)n[u+0]+=s-2*s*Math.random(),n[u+1]+=s-2*s*Math.random(),n[u+2]+=s-2*s*Math.random()};b.addGetterSetter(K,"noise",.2,Q(),b.afterSetFilter);const c4=function(o){let t=Math.ceil(this.pixelSize()),n=o.width,l=o.height,s=Math.ceil(n/t),u=Math.ceil(l/t),h=o.data;if(t<=0){M.error("pixelSize value can not be <= 0");return}for(let f=0;f<s;f+=1)for(let g=0;g<u;g+=1){let m=0,p=0,v=0,y=0;const E=f*t,S=E+t,R=g*t,O=R+t;let G=0;for(let z=E;z<S;z+=1)if(!(z>=n))for(let B=R;B<O;B+=1){if(B>=l)continue;const H=(n*B+z)*4;m+=h[H+0],p+=h[H+1],v+=h[H+2],y+=h[H+3],G+=1}m=m/G,p=p/G,v=v/G,y=y/G;for(let z=E;z<S;z+=1)if(!(z>=n))for(let B=R;B<O;B+=1){if(B>=l)continue;const H=(n*B+z)*4;h[H+0]=m,h[H+1]=p,h[H+2]=v,h[H+3]=y}}};b.addGetterSetter(K,"pixelSize",8,Q(),b.afterSetFilter);const h4=function(o){const t=Math.round(this.levels()*254)+1,n=o.data,l=n.length,s=255/t;for(let u=0;u<l;u+=1)n[u]=Math.floor(n[u]/s)*s};b.addGetterSetter(K,"levels",.5,Q(),b.afterSetFilter);const f4=function(o){const t=o.data,n=t.length,l=this.red(),s=this.green(),u=this.blue();for(let h=0;h<n;h+=4){const f=(.34*t[h]+.5*t[h+1]+.16*t[h+2])/255;t[h]=f*l,t[h+1]=f*s,t[h+2]=f*u,t[h+3]=t[h+3]}};b.addGetterSetter(K,"red",0,function(o){return this._filterUpToDate=!1,o>255?255:o<0?0:Math.round(o)});b.addGetterSetter(K,"green",0,function(o){return this._filterUpToDate=!1,o>255?255:o<0?0:Math.round(o)});b.addGetterSetter(K,"blue",0,i0,b.afterSetFilter);const d4=function(o){const t=o.data,n=t.length,l=this.red(),s=this.green(),u=this.blue(),h=this.alpha();for(let f=0;f<n;f+=4){const g=1-h;t[f]=l*h+t[f]*g,t[f+1]=s*h+t[f+1]*g,t[f+2]=u*h+t[f+2]*g}};b.addGetterSetter(K,"red",0,function(o){return this._filterUpToDate=!1,o>255?255:o<0?0:Math.round(o)});b.addGetterSetter(K,"green",0,function(o){return this._filterUpToDate=!1,o>255?255:o<0?0:Math.round(o)});b.addGetterSetter(K,"blue",0,i0,b.afterSetFilter);b.addGetterSetter(K,"alpha",1,function(o){return this._filterUpToDate=!1,o>1?1:o<0?0:o});const g4=function(o){const t=o.data,n=t.length;for(let l=0;l<n;l+=4){const s=t[l+0],u=t[l+1],h=t[l+2];t[l+0]=Math.min(255,s*.393+u*.769+h*.189),t[l+1]=Math.min(255,s*.349+u*.686+h*.168),t[l+2]=Math.min(255,s*.272+u*.534+h*.131)}},m4=function(o){const n=o.data;for(let l=0;l<n.length;l+=4){const s=n[l],u=n[l+1],h=n[l+2];.2126*s+.7152*u+.0722*h>=128&&(n[l]=255-s,n[l+1]=255-u,n[l+2]=255-h)}return o},p4=function(o){const t=this.threshold()*255,n=o.data,l=n.length;for(let s=0;s<l;s+=1)n[s]=n[s]<t?0:255};b.addGetterSetter(K,"threshold",.5,Q(),b.afterSetFilter);jn.Util._assign(jn,{Arc:na,Arrow:$a,Circle:kn,Ellipse:za,Image:ze,Label:mo,Tag:tn,Line:ia,Path:Dt,Rect:Di,RegularPolygon:Da,Ring:en,Sprite:qe,Star:Ga,Text:wt,TextPath:Zt,Transformer:yt,Wedge:la,Filters:{Blur:Xg,Brightness:Vg,Brighten:Pg,Contrast:Kg,Emboss:Qg,Enhance:Zg,Grayscale:Jg,HSL:Fg,HSV:Wg,Invert:Ig,Kaleidoscope:e4,Mask:o4,Noise:u4,Pixelate:c4,Posterize:h4,RGB:f4,RGBA:d4,Sepia:g4,Solarize:m4,Threshold:p4}});var Xr={exports:{}},Pr={exports:{}},Vr={exports:{}},Kr={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xh;function y4(){return Xh||(Xh=1,(function(o){function t(C,L){var T=C.length;C.push(L);t:for(;0<T;){var Y=T-1>>>1,P=C[Y];if(0<s(P,L))C[Y]=L,C[T]=P,T=Y;else break t}}function n(C){return C.length===0?null:C[0]}function l(C){if(C.length===0)return null;var L=C[0],T=C.pop();if(T!==L){C[0]=T;t:for(var Y=0,P=C.length,at=P>>>1;Y<at;){var ht=2*(Y+1)-1,Nt=C[ht],Ut=ht+1,he=C[Ut];if(0>s(Nt,T))Ut<P&&0>s(he,Nt)?(C[Y]=he,C[Ut]=T,Y=Ut):(C[Y]=Nt,C[ht]=T,Y=ht);else if(Ut<P&&0>s(he,T))C[Y]=he,C[Ut]=T,Y=Ut;else break t}}return L}function s(C,L){var T=C.sortIndex-L.sortIndex;return T!==0?T:C.id-L.id}if(o.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;o.unstable_now=function(){return u.now()}}else{var h=Date,f=h.now();o.unstable_now=function(){return h.now()-f}}var g=[],m=[],p=1,v=null,y=3,E=!1,S=!1,R=!1,O=!1,G=typeof setTimeout=="function"?setTimeout:null,z=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;function H(C){for(var L=n(m);L!==null;){if(L.callback===null)l(m);else if(L.startTime<=C)l(m),L.sortIndex=L.expirationTime,t(g,L);else break;L=n(m)}}function Z(C){if(R=!1,H(C),!S)if(n(g)!==null)S=!0,X||(X=!0,$());else{var L=n(m);L!==null&&et(Z,L.startTime-C)}}var X=!1,J=-1,W=5,nt=-1;function st(){return O?!0:!(o.unstable_now()-nt<W)}function ut(){if(O=!1,X){var C=o.unstable_now();nt=C;var L=!0;try{t:{S=!1,R&&(R=!1,z(J),J=-1),E=!0;var T=y;try{e:{for(H(C),v=n(g);v!==null&&!(v.expirationTime>C&&st());){var Y=v.callback;if(typeof Y=="function"){v.callback=null,y=v.priorityLevel;var P=Y(v.expirationTime<=C);if(C=o.unstable_now(),typeof P=="function"){v.callback=P,H(C),L=!0;break e}v===n(g)&&l(g),H(C)}else l(g);v=n(g)}if(v!==null)L=!0;else{var at=n(m);at!==null&&et(Z,at.startTime-C),L=!1}}break t}finally{v=null,y=T,E=!1}L=void 0}}finally{L?$():X=!1}}}var $;if(typeof B=="function")$=function(){B(ut)};else if(typeof MessageChannel<"u"){var rt=new MessageChannel,it=rt.port2;rt.port1.onmessage=ut,$=function(){it.postMessage(null)}}else $=function(){G(ut,0)};function et(C,L){J=G(function(){C(o.unstable_now())},L)}o.unstable_IdlePriority=5,o.unstable_ImmediatePriority=1,o.unstable_LowPriority=4,o.unstable_NormalPriority=3,o.unstable_Profiling=null,o.unstable_UserBlockingPriority=2,o.unstable_cancelCallback=function(C){C.callback=null},o.unstable_forceFrameRate=function(C){0>C||125<C?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<C?Math.floor(1e3/C):5},o.unstable_getCurrentPriorityLevel=function(){return y},o.unstable_next=function(C){switch(y){case 1:case 2:case 3:var L=3;break;default:L=y}var T=y;y=L;try{return C()}finally{y=T}},o.unstable_requestPaint=function(){O=!0},o.unstable_runWithPriority=function(C,L){switch(C){case 1:case 2:case 3:case 4:case 5:break;default:C=3}var T=y;y=C;try{return L()}finally{y=T}},o.unstable_scheduleCallback=function(C,L,T){var Y=o.unstable_now();switch(typeof T=="object"&&T!==null?(T=T.delay,T=typeof T=="number"&&0<T?Y+T:Y):T=Y,C){case 1:var P=-1;break;case 2:P=250;break;case 5:P=1073741823;break;case 4:P=1e4;break;default:P=5e3}return P=T+P,C={id:p++,callback:L,priorityLevel:C,startTime:T,expirationTime:P,sortIndex:-1},T>Y?(C.sortIndex=T,t(m,C),n(g)===null&&C===n(m)&&(R?(z(J),J=-1):R=!0,et(Z,T-Y))):(C.sortIndex=P,t(g,C),S||E||(S=!0,X||(X=!0,$()))),C},o.unstable_shouldYield=st,o.unstable_wrapCallback=function(C){var L=y;return function(){var T=y;y=L;try{return C.apply(this,arguments)}finally{y=T}}}})(Kr)),Kr}var Ph;function _4(){return Ph||(Ph=1,Vr.exports=y4()),Vr.exports}/**
 * @license React
 * react-reconciler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vh;function v4(){return Vh||(Vh=1,(function(o){o.exports=function(t){function n(e,a,i,r){return new hf(e,a,i,r)}function l(){}function s(e){var a="https://react.dev/errors/"+e;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)a+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+e+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function u(e){var a=e,i=e;if(e.alternate)for(;a.return;)a=a.return;else{e=a;do a=e,(a.flags&4098)!==0&&(i=a.return),e=a.return;while(e)}return a.tag===3?i:null}function h(e){if(u(e)!==e)throw Error(s(188))}function f(e){var a=e.alternate;if(!a){if(a=u(e),a===null)throw Error(s(188));return a!==e?null:e}for(var i=e,r=a;;){var c=i.return;if(c===null)break;var d=c.alternate;if(d===null){if(r=c.return,r!==null){i=r;continue}break}if(c.child===d.child){for(d=c.child;d;){if(d===i)return h(c),e;if(d===r)return h(c),a;d=d.sibling}throw Error(s(188))}if(i.return!==r.return)i=c,r=d;else{for(var _=!1,x=c.child;x;){if(x===i){_=!0,i=c,r=d;break}if(x===r){_=!0,r=c,i=d;break}x=x.sibling}if(!_){for(x=d.child;x;){if(x===i){_=!0,i=d,r=c;break}if(x===r){_=!0,r=d,i=c;break}x=x.sibling}if(!_)throw Error(s(189))}}if(i.alternate!==r)throw Error(s(190))}if(i.tag!==3)throw Error(s(188));return i.stateNode.current===i?e:a}function g(e){var a=e.tag;if(a===5||a===26||a===27||a===6)return e;for(e=e.child;e!==null;){if(a=g(e),a!==null)return a;e=e.sibling}return null}function m(e){var a=e.tag;if(a===5||a===26||a===27||a===6)return e;for(e=e.child;e!==null;){if(e.tag!==4&&(a=m(e),a!==null))return a;e=e.sibling}return null}function p(e){return e===null||typeof e!="object"?null:(e=Dc&&e[Dc]||e["@@iterator"],typeof e=="function"?e:null)}function v(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===yf?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case cn:return"Fragment";case tr:return"Profiler";case Oc:return"StrictMode";case ar:return"Suspense";case nr:return"SuspenseList";case lr:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case un:return"Portal";case pa:return(e.displayName||"Context")+".Provider";case zc:return(e._context.displayName||"Context")+".Consumer";case er:var a=e.render;return e=e.displayName,e||(e=a.displayName||a.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ir:return a=e.displayName||null,a!==null?a:v(e.type)||"Memo";case ya:a=e._payload,e=e._init;try{return v(e(a))}catch{}}return null}function y(e){return{current:e}}function E(e){0>dn||(e.current=cr[dn],cr[dn]=null,dn--)}function S(e,a){dn++,cr[dn]=e.current,e.current=a}function R(e){return e>>>=0,e===0?32:31-(wd(e)/Hd|0)|0}function O(e){var a=e&42;if(a!==0)return a;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function G(e,a,i){var r=e.pendingLanes;if(r===0)return 0;var c=0,d=e.suspendedLanes,_=e.pingedLanes;e=e.warmLanes;var x=r&134217727;return x!==0?(r=x&~d,r!==0?c=O(r):(_&=x,_!==0?c=O(_):i||(i=x&~e,i!==0&&(c=O(i))))):(x=r&~d,x!==0?c=O(x):_!==0?c=O(_):i||(i=r&~e,i!==0&&(c=O(i)))),c===0?0:a!==0&&a!==c&&(a&d)===0&&(d=c&-c,i=a&-a,d>=i||d===32&&(i&4194048)!==0)?a:c}function z(e,a){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&a)===0}function B(e,a){switch(e){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function H(){var e=rl;return rl<<=1,(rl&4194048)===0&&(rl=256),e}function Z(){var e=ol;return ol<<=1,(ol&62914560)===0&&(ol=4194304),e}function X(e){for(var a=[],i=0;31>i;i++)a.push(e);return a}function J(e,a){e.pendingLanes|=a,a!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function W(e,a,i,r,c,d){var _=e.pendingLanes;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=i,e.entangledLanes&=i,e.errorRecoveryDisabledLanes&=i,e.shellSuspendCounter=0;var x=e.entanglements,D=e.expirationTimes,U=e.hiddenUpdates;for(i=_&~i;0<i;){var V=31-pe(i),I=1<<V;x[V]=0,D[V]=-1;var tt=U[V];if(tt!==null)for(U[V]=null,V=0;V<tt.length;V++){var ft=tt[V];ft!==null&&(ft.lane&=-536870913)}i&=~I}r!==0&&nt(e,r,0),d!==0&&c===0&&e.tag!==0&&(e.suspendedLanes|=d&~(_&~a))}function nt(e,a,i){e.pendingLanes|=a,e.suspendedLanes&=~a;var r=31-pe(a);e.entangledLanes|=a,e.entanglements[r]=e.entanglements[r]|1073741824|i&4194090}function st(e,a){var i=e.entangledLanes|=a;for(e=e.entanglements;i;){var r=31-pe(i),c=1<<r;c&a|e[r]&a&&(e[r]|=a),i&=~c}}function ut(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function $(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function rt(e){if(typeof kd=="function"&&Yd(e),ye&&typeof ye.setStrictMode=="function")try{ye.setStrictMode(oi,e)}catch{}}function it(e){if(dr===void 0)try{throw Error()}catch(i){var a=i.stack.trim().match(/\n( *(at )?)/);dr=a&&a[1]||"",nh=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+dr+e+nh}function et(e,a){if(!e||gr)return"";gr=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(a){var I=function(){throw Error()};if(Object.defineProperty(I.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(I,[])}catch(ft){var tt=ft}Reflect.construct(e,[],I)}else{try{I.call()}catch(ft){tt=ft}e.call(I.prototype)}}else{try{throw Error()}catch(ft){tt=ft}(I=e())&&typeof I.catch=="function"&&I.catch(function(){})}}catch(ft){if(ft&&tt&&typeof ft.stack=="string")return[ft.stack,tt.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var c=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");c&&c.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=r.DetermineComponentFrameRoot(),_=d[0],x=d[1];if(_&&x){var D=_.split(`
`),U=x.split(`
`);for(c=r=0;r<D.length&&!D[r].includes("DetermineComponentFrameRoot");)r++;for(;c<U.length&&!U[c].includes("DetermineComponentFrameRoot");)c++;if(r===D.length||c===U.length)for(r=D.length-1,c=U.length-1;1<=r&&0<=c&&D[r]!==U[c];)c--;for(;1<=r&&0<=c;r--,c--)if(D[r]!==U[c]){if(r!==1||c!==1)do if(r--,c--,0>c||D[r]!==U[c]){var V=`
`+D[r].replace(" at new "," at ");return e.displayName&&V.includes("<anonymous>")&&(V=V.replace("<anonymous>",e.displayName)),V}while(1<=r&&0<=c);break}}}finally{gr=!1,Error.prepareStackTrace=i}return(i=e?e.displayName||e.name:"")?it(i):""}function C(e){switch(e.tag){case 26:case 27:case 5:return it(e.type);case 16:return it("Lazy");case 13:return it("Suspense");case 19:return it("SuspenseList");case 0:case 15:return et(e.type,!1);case 11:return et(e.type.render,!1);case 1:return et(e.type,!0);case 31:return it("Activity");default:return""}}function L(e){try{var a="";do a+=C(e),e=e.return;while(e);return a}catch(i){return`
Error generating stack: `+i.message+`
`+i.stack}}function T(e,a){if(typeof e=="object"&&e!==null){var i=ih.get(e);return i!==void 0?i:(a={value:e,source:a,stack:L(a)},ih.set(e,a),a)}return{value:e,source:a,stack:L(a)}}function Y(e,a){mn[pn++]=hl,mn[pn++]=cl,cl=e,hl=a}function P(e,a,i){Ce[Te++]=Fe,Ce[Te++]=We,Ce[Te++]=qa,qa=e;var r=Fe;e=We;var c=32-pe(r)-1;r&=~(1<<c),i+=1;var d=32-pe(a)+c;if(30<d){var _=c-c%5;d=(r&(1<<_)-1).toString(32),r>>=_,c-=_,Fe=1<<32-pe(a)+c|i<<c|r,We=d+e}else Fe=1<<d|i<<c|r,We=e}function at(e){e.return!==null&&(Y(e,1),P(e,1,0))}function ht(e){for(;e===cl;)cl=mn[--pn],mn[pn]=null,hl=mn[--pn],mn[pn]=null;for(;e===qa;)qa=Ce[--Te],Ce[Te]=null,We=Ce[--Te],Ce[Te]=null,Fe=Ce[--Te],Ce[Te]=null}function Nt(e,a){S(va,a),S(ui,e),S(te,null),e=Sf(a),E(te),S(te,e)}function Ut(){E(te),E(ui),E(va)}function he(e){e.memoizedState!==null&&S(fl,e);var a=te.current,i=bf(a,e.type);a!==i&&(S(ui,e),S(te,i))}function Gi(e){ui.current===e&&(E(te),E(ui)),fl.current===e&&(E(fl),Ze?Ya._currentValue=hn:Ya._currentValue2=hn)}function sa(e){var a=Error(s(418,""));throw Xn(T(a,e)),mr}function yo(e,a){if(!Ee)throw Error(s(175));_d(e.stateNode,e.type,e.memoizedProps,a,e)||sa(e)}function _o(e){for(le=e.return;le;)switch(le.tag){case 5:case 13:ke=!1;return;case 27:case 3:ke=!0;return;default:le=le.return}}function Yn(e){if(!Ee||e!==le)return!1;if(!bt)return _o(e),bt=!0,!1;var a=e.tag;if(Vt?a!==3&&a!==27&&(a!==5||Vc(e.type)&&!sl(e.type,e.memoizedProps))&&Kt&&sa(e):a!==3&&(a!==5||Vc(e.type)&&!sl(e.type,e.memoizedProps))&&Kt&&sa(e),_o(e),a===13){if(!Ee)throw Error(s(316));if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));Kt=bd(e)}else Kt=Vt&&a===27?cd(e.type,Kt):le?Pc(e.stateNode):null;return!0}function qn(){Ee&&(Kt=le=null,bt=!1)}function vo(){var e=Xa;return e!==null&&(ue===null?ue=e:ue.push.apply(ue,e),Xa=null),e}function Xn(e){Xa===null?Xa=[e]:Xa.push(e)}function Y0(e,a){return e===a&&(e!==0||1/e===1/a)||e!==e&&a!==a}function ra(e,a,i){Ze?(S(dl,a._currentValue),a._currentValue=i):(S(dl,a._currentValue2),a._currentValue2=i)}function Xe(e){var a=dl.current;Ze?e._currentValue=a:e._currentValue2=a,E(dl)}function Fl(e,a,i){for(;e!==null;){var r=e.alternate;if((e.childLanes&a)!==a?(e.childLanes|=a,r!==null&&(r.childLanes|=a)):r!==null&&(r.childLanes&a)!==a&&(r.childLanes|=a),e===i)break;e=e.return}}function Wl(e,a,i,r){var c=e.child;for(c!==null&&(c.return=e);c!==null;){var d=c.dependencies;if(d!==null){var _=c.child;d=d.firstContext;t:for(;d!==null;){var x=d;d=c;for(var D=0;D<a.length;D++)if(x.context===a[D]){d.lanes|=i,x=d.alternate,x!==null&&(x.lanes|=i),Fl(d.return,i,e),r||(_=null);break t}d=x.next}}else if(c.tag===18){if(_=c.return,_===null)throw Error(s(341));_.lanes|=i,d=_.alternate,d!==null&&(d.lanes|=i),Fl(_,i,e),_=null}else _=c.child;if(_!==null)_.return=c;else for(_=c;_!==null;){if(_===e){_=null;break}if(c=_.sibling,c!==null){c.return=_.return,_=c;break}_=_.return}c=_}}function Pn(e,a,i,r){e=null;for(var c=a,d=!1;c!==null;){if(!d){if((c.flags&524288)!==0)d=!0;else if((c.flags&262144)!==0)break}if(c.tag===10){var _=c.alternate;if(_===null)throw Error(s(387));if(_=_.memoizedProps,_!==null){var x=c.type;_e(c.pendingProps.value,_.value)||(e!==null?e.push(x):e=[x])}}else if(c===fl.current){if(_=c.alternate,_===null)throw Error(s(387));_.memoizedState.memoizedState!==c.memoizedState.memoizedState&&(e!==null?e.push(Ya):e=[Ya])}c=c.return}e!==null&&Wl(a,e,i,r),a.flags|=262144}function wi(e){for(e=e.firstContext;e!==null;){var a=e.context;if(!_e(Ze?a._currentValue:a._currentValue2,e.memoizedValue))return!0;e=e.next}return!1}function Ha(e){Pa=e,Ie=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function ae(e){return So(Pa,e)}function Hi(e,a){return Pa===null&&Ha(e),So(e,a)}function So(e,a){var i=Ze?a._currentValue:a._currentValue2;if(a={context:a,memoizedValue:i,next:null},Ie===null){if(e===null)throw Error(s(308));Ie=a,e.dependencies={lanes:0,firstContext:a},e.flags|=524288}else Ie=Ie.next=a;return i}function Il(){return{controller:new qd,data:new Map,refCount:0}}function Vn(e){e.refCount--,e.refCount===0&&Xd(Pd,function(){e.controller.abort()})}function Ue(e){e!==yn&&e.next===null&&(yn===null?gl=yn=e:yn=yn.next=e),ml=!0,pr||(pr=!0,q0())}function an(e,a){if(!yr&&ml){yr=!0;do for(var i=!1,r=gl;r!==null;){if(e!==0){var c=r.pendingLanes;if(c===0)var d=0;else{var _=r.suspendedLanes,x=r.pingedLanes;d=(1<<31-pe(42|e)+1)-1,d&=c&~(_&~x),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(i=!0,To(r,d))}else d=_t,d=G(r,r===Ot?d:0,r.cancelPendingCommit!==null||r.timeoutHandle!==ka),(d&3)===0||z(r,d)||(i=!0,To(r,d));r=r.next}while(i);yr=!1}}function bo(){xo()}function xo(){ml=pr=!1;var e=0;_n!==0&&(Of()&&(e=_n),_n=0);for(var a=we(),i=null,r=gl;r!==null;){var c=r.next,d=Eo(r,a);d===0?(r.next=null,i===null?gl=c:i.next=c,c===null&&(yn=i)):(i=r,(e!==0||(d&3)!==0)&&(ml=!0)),r=c}an(e)}function Eo(e,a){for(var i=e.suspendedLanes,r=e.pingedLanes,c=e.expirationTimes,d=e.pendingLanes&-62914561;0<d;){var _=31-pe(d),x=1<<_,D=c[_];D===-1?((x&i)===0||(x&r)!==0)&&(c[_]=B(x,a)):D<=a&&(e.expiredLanes|=x),d&=~x}if(a=Ot,i=_t,i=G(e,e===a?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==ka),r=e.callbackNode,i===0||e===a&&(Tt===2||Tt===9)||e.cancelPendingCommit!==null)return r!==null&&r!==null&&hr(r),e.callbackNode=null,e.callbackPriority=0;if((i&3)===0||z(e,i)){if(a=i&-i,a===e.callbackPriority)return a;switch(r!==null&&hr(r),$(i)){case 2:case 8:i=Ld;break;case 32:i=fr;break;case 268435456:i=jd;break;default:i=fr}return r=Co.bind(null,e),i=ul(i,r),e.callbackPriority=a,e.callbackNode=i,a}return r!==null&&r!==null&&hr(r),e.callbackPriority=2,e.callbackNode=null,2}function Co(e,a){if(ee!==0&&ee!==5)return e.callbackNode=null,e.callbackPriority=0,null;var i=e.callbackNode;if(ii()&&e.callbackNode!==i)return null;var r=_t;return r=G(e,e===Ot?r:0,e.cancelPendingCommit!==null||e.timeoutHandle!==ka),r===0?null:(sc(e,r,a),Eo(e,we()),e.callbackNode!=null&&e.callbackNode===i?Co.bind(null,e):null)}function To(e,a){if(ii())return null;sc(e,a,!0)}function q0(){Bf?Uf(function(){(pt&6)!==0?ul(ah,bo):xo()}):ul(ah,bo)}function $l(){return _n===0&&(_n=H()),_n}function X0(e,a){if(ci===null){var i=ci=[];_r=0,vn=$l(),Sn={status:"pending",value:void 0,then:function(r){i.push(r)}}}return _r++,a.then(Ao,Ao),a}function Ao(){if(--_r===0&&ci!==null){Sn!==null&&(Sn.status="fulfilled");var e=ci;ci=null,vn=0,Sn=null;for(var a=0;a<e.length;a++)(0,e[a])()}}function P0(e,a){var i=[],r={status:"pending",value:null,reason:null,then:function(c){i.push(c)}};return e.then(function(){r.status="fulfilled",r.value=a;for(var c=0;c<i.length;c++)(0,i[c])(a)},function(c){for(r.status="rejected",r.reason=c,c=0;c<i.length;c++)(0,i[c])(void 0)}),r}function ts(){var e=Va.current;return e!==null?e:Ot.pooledCache}function Bi(e,a){a===null?S(Va,Va.current):S(Va,a.pool)}function Mo(){var e=ts();return e===null?null:{parent:Ze?Lt._currentValue:Lt._currentValue2,pool:e}}function Ui(e,a){if(_e(e,a))return!0;if(typeof e!="object"||e===null||typeof a!="object"||a===null)return!1;var i=Object.keys(e),r=Object.keys(a);if(i.length!==r.length)return!1;for(r=0;r<i.length;r++){var c=i[r];if(!Vd.call(a,c)||!_e(e[c],a[c]))return!1}return!0}function Ro(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Li(){}function No(e,a,i){switch(i=e[i],i===void 0?e.push(a):i!==a&&(a.then(Li,Li),a=i),a.status){case"fulfilled":return a.value;case"rejected":throw e=a.reason,zo(e),e;default:if(typeof a.status=="string")a.then(Li,Li);else{if(e=Ot,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=a,e.status="pending",e.then(function(r){if(a.status==="pending"){var c=a;c.status="fulfilled",c.value=r}},function(r){if(a.status==="pending"){var c=a;c.status="rejected",c.reason=r}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw e=a.reason,zo(e),e}throw bn=a,hi}}function Oo(){if(bn===null)throw Error(s(459));var e=bn;return bn=null,e}function zo(e){if(e===hi||e===pl)throw Error(s(483))}function ji(){for(var e=xn,a=Sr=xn=0;a<e;){var i=Ae[a];Ae[a++]=null;var r=Ae[a];Ae[a++]=null;var c=Ae[a];Ae[a++]=null;var d=Ae[a];if(Ae[a++]=null,r!==null&&c!==null){var _=r.pending;_===null?c.next=c:(c.next=_.next,_.next=c),r.pending=c}d!==0&&Do(i,c,d)}}function ki(e,a,i,r){Ae[xn++]=e,Ae[xn++]=a,Ae[xn++]=i,Ae[xn++]=r,Sr|=r,e.lanes|=r,e=e.alternate,e!==null&&(e.lanes|=r)}function es(e,a,i,r){return ki(e,a,i,r),Yi(e)}function nn(e,a){return ki(e,null,null,a),Yi(e)}function Do(e,a,i){e.lanes|=i;var r=e.alternate;r!==null&&(r.lanes|=i);for(var c=!1,d=e.return;d!==null;)d.childLanes|=i,r=d.alternate,r!==null&&(r.childLanes|=i),d.tag===22&&(e=d.stateNode,e===null||e._visibility&1||(c=!0)),e=d,d=d.return;return e.tag===3?(d=e.stateNode,c&&a!==null&&(c=31-pe(i),e=d.hiddenUpdates,r=e[c],r===null?e[c]=[a]:r.push(a),a.lane=i|536870912),d):null}function Yi(e){if(50<yi)throw yi=0,zr=null,Error(s(185));for(var a=e.return;a!==null;)e=a,a=e.return;return e.tag===3?e.stateNode:null}function as(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ns(e,a){e=e.updateQueue,a.updateQueue===e&&(a.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function oa(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ua(e,a,i){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,(pt&2)!==0){var c=r.pending;return c===null?a.next=a:(a.next=c.next,c.next=a),r.pending=a,a=Yi(e),Do(e,null,i),a}return ki(e,r,a,i),Yi(e)}function Kn(e,a,i){if(a=a.updateQueue,a!==null&&(a=a.shared,(i&4194048)!==0)){var r=a.lanes;r&=e.pendingLanes,i|=r,a.lanes=i,st(e,i)}}function is(e,a){var i=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,i===r)){var c=null,d=null;if(i=i.firstBaseUpdate,i!==null){do{var _={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};d===null?c=d=_:d=d.next=_,i=i.next}while(i!==null);d===null?c=d=a:d=d.next=a}else c=d=a;i={baseState:r.baseState,firstBaseUpdate:c,lastBaseUpdate:d,shared:r.shared,callbacks:r.callbacks},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=a:e.next=a,i.lastBaseUpdate=a}function Qn(){if(br){var e=Sn;if(e!==null)throw e}}function Zn(e,a,i,r){br=!1;var c=e.updateQueue;Sa=!1;var d=c.firstBaseUpdate,_=c.lastBaseUpdate,x=c.shared.pending;if(x!==null){c.shared.pending=null;var D=x,U=D.next;D.next=null,_===null?d=U:_.next=U,_=D;var V=e.alternate;V!==null&&(V=V.updateQueue,x=V.lastBaseUpdate,x!==_&&(x===null?V.firstBaseUpdate=U:x.next=U,V.lastBaseUpdate=D))}if(d!==null){var I=c.baseState;_=0,V=U=D=null,x=d;do{var tt=x.lane&-536870913,ft=tt!==x.lane;if(ft?(_t&tt)===tt:(r&tt)===tt){tt!==0&&tt===vn&&(br=!0),V!==null&&(V=V.next={lane:0,tag:x.tag,payload:x.payload,callback:null,next:null});t:{var Ne=e,_i=x;tt=a;var Za=i;switch(_i.tag){case 1:if(Ne=_i.payload,typeof Ne=="function"){I=Ne.call(Za,I,tt);break t}I=Ne;break t;case 3:Ne.flags=Ne.flags&-65537|128;case 0:if(Ne=_i.payload,tt=typeof Ne=="function"?Ne.call(Za,I,tt):Ne,tt==null)break t;I=$s({},I,tt);break t;case 2:Sa=!0}}tt=x.callback,tt!==null&&(e.flags|=64,ft&&(e.flags|=8192),ft=c.callbacks,ft===null?c.callbacks=[tt]:ft.push(tt))}else ft={lane:tt,tag:x.tag,payload:x.payload,callback:x.callback,next:null},V===null?(U=V=ft,D=I):V=V.next=ft,_|=tt;if(x=x.next,x===null){if(x=c.shared.pending,x===null)break;ft=x,x=ft.next,ft.next=null,c.lastBaseUpdate=ft,c.shared.pending=null}}while(!0);V===null&&(D=I),c.baseState=D,c.firstBaseUpdate=U,c.lastBaseUpdate=V,d===null&&(c.shared.lanes=0),Ea|=_,e.lanes=_,e.memoizedState=I}}function Go(e,a){if(typeof e!="function")throw Error(s(191,e));e.call(a)}function wo(e,a){var i=e.callbacks;if(i!==null)for(e.callbacks=null,e=0;e<i.length;e++)Go(i[e],a)}function Ho(e,a){e=ta,S(_l,e),S(En,a),ta=e|a.baseLanes}function ls(){S(_l,ta),S(En,En.current)}function ss(){ta=_l.current,E(En),E(_l)}function kt(){throw Error(s(321))}function rs(e,a){if(a===null)return!1;for(var i=0;i<a.length&&i<e.length;i++)if(!_e(e[i],a[i]))return!1;return!0}function os(e,a,i,r,c,d){return ba=d,dt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,ot.H=e===null||e.memoizedState===null?sh:rh,Ka=!1,d=i(r,c),Ka=!1,Cn&&(d=Uo(a,i,r,c)),Bo(e),d}function Bo(e){ot.H=bl;var a=At!==null&&At.next!==null;if(ba=0,Xt=At=dt=null,vl=!1,fi=0,Tn=null,a)throw Error(s(300));e===null||Ft||(e=e.dependencies,e!==null&&wi(e)&&(Ft=!0))}function Uo(e,a,i,r){dt=e;var c=0;do{if(Cn&&(Tn=null),fi=0,Cn=!1,25<=c)throw Error(s(301));if(c+=1,Xt=At=null,e.updateQueue!=null){var d=e.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}ot.H=Qd,d=a(i,r)}while(Cn);return d}function V0(){var e=ot.H,a=e.useState()[0];return a=typeof a.then=="function"?Jn(a):a,e=e.useState()[0],(At!==null?At.memoizedState:null)!==e&&(dt.flags|=1024),a}function us(){var e=Sl!==0;return Sl=0,e}function cs(e,a,i){a.updateQueue=e.updateQueue,a.flags&=-2053,e.lanes&=~i}function hs(e){if(vl){for(e=e.memoizedState;e!==null;){var a=e.queue;a!==null&&(a.pending=null),e=e.next}vl=!1}ba=0,Xt=At=dt=null,Cn=!1,fi=Sl=0,Tn=null}function se(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xt===null?dt.memoizedState=Xt=e:Xt=Xt.next=e,Xt}function qt(){if(At===null){var e=dt.alternate;e=e!==null?e.memoizedState:null}else e=At.next;var a=Xt===null?dt.memoizedState:Xt.next;if(a!==null)Xt=a,At=e;else{if(e===null)throw dt.alternate===null?Error(s(467)):Error(s(310));At=e,e={memoizedState:At.memoizedState,baseState:At.baseState,baseQueue:At.baseQueue,queue:At.queue,next:null},Xt===null?dt.memoizedState=Xt=e:Xt=Xt.next=e}return Xt}function fs(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Jn(e){var a=fi;return fi+=1,Tn===null&&(Tn=[]),e=No(Tn,e,a),a=dt,(Xt===null?a.memoizedState:Xt.next)===null&&(a=a.alternate,ot.H=a===null||a.memoizedState===null?sh:rh),e}function qi(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Jn(e);if(e.$$typeof===pa)return ae(e)}throw Error(s(438,String(e)))}function ds(e){var a=null,i=dt.updateQueue;if(i!==null&&(a=i.memoCache),a==null){var r=dt.alternate;r!==null&&(r=r.updateQueue,r!==null&&(r=r.memoCache,r!=null&&(a={data:r.data.map(function(c){return c.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),i===null&&(i=fs(),dt.updateQueue=i),i.memoCache=a,i=a.data[a.index],i===void 0)for(i=a.data[a.index]=Array(e),r=0;r<e;r++)i[r]=pf;return a.index++,i}function Pe(e,a){return typeof a=="function"?a(e):a}function Xi(e){var a=qt();return gs(a,At,e)}function gs(e,a,i){var r=e.queue;if(r===null)throw Error(s(311));r.lastRenderedReducer=i;var c=e.baseQueue,d=r.pending;if(d!==null){if(c!==null){var _=c.next;c.next=d.next,d.next=_}a.baseQueue=c=d,r.pending=null}if(d=e.baseState,c===null)e.memoizedState=d;else{a=c.next;var x=_=null,D=null,U=a,V=!1;do{var I=U.lane&-536870913;if(I!==U.lane?(_t&I)===I:(ba&I)===I){var tt=U.revertLane;if(tt===0)D!==null&&(D=D.next={lane:0,revertLane:0,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null}),I===vn&&(V=!0);else if((ba&tt)===tt){U=U.next,tt===vn&&(V=!0);continue}else I={lane:0,revertLane:U.revertLane,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},D===null?(x=D=I,_=d):D=D.next=I,dt.lanes|=tt,Ea|=tt;I=U.action,Ka&&i(d,I),d=U.hasEagerState?U.eagerState:i(d,I)}else tt={lane:I,revertLane:U.revertLane,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},D===null?(x=D=tt,_=d):D=D.next=tt,dt.lanes|=I,Ea|=I;U=U.next}while(U!==null&&U!==a);if(D===null?_=d:D.next=x,!_e(d,e.memoizedState)&&(Ft=!0,V&&(i=Sn,i!==null)))throw i;e.memoizedState=d,e.baseState=_,e.baseQueue=D,r.lastRenderedState=d}return c===null&&(r.lanes=0),[e.memoizedState,r.dispatch]}function ms(e){var a=qt(),i=a.queue;if(i===null)throw Error(s(311));i.lastRenderedReducer=e;var r=i.dispatch,c=i.pending,d=a.memoizedState;if(c!==null){i.pending=null;var _=c=c.next;do d=e(d,_.action),_=_.next;while(_!==c);_e(d,a.memoizedState)||(Ft=!0),a.memoizedState=d,a.baseQueue===null&&(a.baseState=d),i.lastRenderedState=d}return[d,r]}function Lo(e,a,i){var r=dt,c=qt(),d=bt;if(d){if(i===void 0)throw Error(s(407));i=i()}else i=a();var _=!_e((At||c).memoizedState,i);_&&(c.memoizedState=i,Ft=!0),c=c.queue;var x=Yo.bind(null,r,c,e);if(Fn(2048,8,x,[e]),c.getSnapshot!==a||_||Xt!==null&&Xt.memoizedState.tag&1){if(r.flags|=2048,ln(9,Pi(),ko.bind(null,r,c,i,a),null),Ot===null)throw Error(s(349));d||(ba&124)!==0||jo(r,a,i)}return i}function jo(e,a,i){e.flags|=16384,e={getSnapshot:a,value:i},a=dt.updateQueue,a===null?(a=fs(),dt.updateQueue=a,a.stores=[e]):(i=a.stores,i===null?a.stores=[e]:i.push(e))}function ko(e,a,i,r){a.value=i,a.getSnapshot=r,qo(a)&&Xo(e)}function Yo(e,a,i){return i(function(){qo(a)&&Xo(e)})}function qo(e){var a=e.getSnapshot;e=e.value;try{var i=a();return!_e(e,i)}catch{return!0}}function Xo(e){var a=nn(e,2);a!==null&&ge(a,e,2)}function ps(e){var a=se();if(typeof e=="function"){var i=e;if(e=i(),Ka){rt(!0);try{i()}finally{rt(!1)}}}return a.memoizedState=a.baseState=e,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pe,lastRenderedState:e},a}function Po(e,a,i,r){return e.baseState=i,gs(e,At,typeof r=="function"?r:Pe)}function K0(e,a,i,r,c){if(Ki(e))throw Error(s(485));if(e=a.action,e!==null){var d={payload:c,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){d.listeners.push(_)}};ot.T!==null?i(!0):d.isTransition=!1,r(d),i=a.pending,i===null?(d.next=a.pending=d,Vo(a,d)):(d.next=i.next,a.pending=i.next=d)}}function Vo(e,a){var i=a.action,r=a.payload,c=e.state;if(a.isTransition){var d=ot.T,_={};ot.T=_;try{var x=i(c,r),D=ot.S;D!==null&&D(_,x),Ko(e,a,x)}catch(U){ys(e,a,U)}finally{ot.T=d}}else try{d=i(c,r),Ko(e,a,d)}catch(U){ys(e,a,U)}}function Ko(e,a,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(r){Qo(e,a,r)},function(r){return ys(e,a,r)}):Qo(e,a,i)}function Qo(e,a,i){a.status="fulfilled",a.value=i,Zo(a),e.state=i,a=e.pending,a!==null&&(i=a.next,i===a?e.pending=null:(i=i.next,a.next=i,Vo(e,i)))}function ys(e,a,i){var r=e.pending;if(e.pending=null,r!==null){r=r.next;do a.status="rejected",a.reason=i,Zo(a),a=a.next;while(a!==r)}e.action=null}function Zo(e){e=e.listeners;for(var a=0;a<e.length;a++)(0,e[a])()}function Jo(e,a){return a}function Fo(e,a){if(bt){var i=Ot.formState;if(i!==null){t:{var r=dt;if(bt){if(Kt){var c=od(Kt,ke);if(c){Kt=Pc(c),r=ud(c);break t}}sa(r)}r=!1}r&&(a=i[0])}}i=se(),i.memoizedState=i.baseState=a,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Jo,lastRenderedState:a},i.queue=r,i=gu.bind(null,dt,r),r.dispatch=i,r=ps(!1);var d=bs.bind(null,dt,!1,r.queue);return r=se(),c={state:a,dispatch:null,action:e,pending:null},r.queue=c,i=K0.bind(null,dt,c,d,i),c.dispatch=i,r.memoizedState=e,[a,i,!1]}function Wo(e){var a=qt();return Io(a,At,e)}function Io(e,a,i){if(a=gs(e,a,Jo)[0],e=Xi(Pe)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var r=Jn(a)}catch(_){throw _===hi?pl:_}else r=a;a=qt();var c=a.queue,d=c.dispatch;return i!==a.memoizedState&&(dt.flags|=2048,ln(9,Pi(),Q0.bind(null,c,i),null)),[r,d,e]}function Q0(e,a){e.action=a}function $o(e){var a=qt(),i=At;if(i!==null)return Io(a,i,e);qt(),a=a.memoizedState,i=qt();var r=i.queue.dispatch;return i.memoizedState=e,[a,r,!1]}function ln(e,a,i,r){return e={tag:e,create:i,deps:r,inst:a,next:null},a=dt.updateQueue,a===null&&(a=fs(),dt.updateQueue=a),i=a.lastEffect,i===null?a.lastEffect=e.next=e:(r=i.next,i.next=e,e.next=r,a.lastEffect=e),e}function Pi(){return{destroy:void 0,resource:void 0}}function tu(){return qt().memoizedState}function Vi(e,a,i,r){var c=se();r=r===void 0?null:r,dt.flags|=e,c.memoizedState=ln(1|a,Pi(),i,r)}function Fn(e,a,i,r){var c=qt();r=r===void 0?null:r;var d=c.memoizedState.inst;At!==null&&r!==null&&rs(r,At.memoizedState.deps)?c.memoizedState=ln(a,d,i,r):(dt.flags|=e,c.memoizedState=ln(1|a,d,i,r))}function eu(e,a){Vi(8390656,8,e,a)}function au(e,a){Fn(2048,8,e,a)}function nu(e,a){return Fn(4,2,e,a)}function iu(e,a){return Fn(4,4,e,a)}function lu(e,a){if(typeof a=="function"){e=e();var i=a(e);return function(){typeof i=="function"?i():a(null)}}if(a!=null)return e=e(),a.current=e,function(){a.current=null}}function su(e,a,i){i=i!=null?i.concat([e]):null,Fn(4,4,lu.bind(null,a,e),i)}function _s(){}function ru(e,a){var i=qt();a=a===void 0?null:a;var r=i.memoizedState;return a!==null&&rs(a,r[1])?r[0]:(i.memoizedState=[e,a],e)}function ou(e,a){var i=qt();a=a===void 0?null:a;var r=i.memoizedState;if(a!==null&&rs(a,r[1]))return r[0];if(r=e(),Ka){rt(!0);try{e()}finally{rt(!1)}}return i.memoizedState=[r,a],r}function vs(e,a,i){return i===void 0||(ba&1073741824)!==0?e.memoizedState=a:(e.memoizedState=i,e=lc(),dt.lanes|=e,Ea|=e,i)}function uu(e,a,i,r){return _e(i,a)?i:En.current!==null?(e=vs(e,i,r),_e(e,a)||(Ft=!0),e):(ba&42)===0?(Ft=!0,e.memoizedState=i):(e=lc(),dt.lanes|=e,Ea|=e,a)}function cu(e,a,i,r,c){var d=Je();Jt(d!==0&&8>d?d:8);var _=ot.T,x={};ot.T=x,bs(e,!1,a,i);try{var D=c(),U=ot.S;if(U!==null&&U(x,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var V=P0(D,r);Wn(e,a,V,de(e))}else Wn(e,a,r,de(e))}catch(I){Wn(e,a,{then:function(){},status:"rejected",reason:I},de())}finally{Jt(d),ot.T=_}}function hu(e){var a=e.memoizedState;if(a!==null)return a;a={memoizedState:hn,baseState:hn,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pe,lastRenderedState:hn},next:null};var i={};return a.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pe,lastRenderedState:i},next:null},e.memoizedState=a,e=e.alternate,e!==null&&(e.memoizedState=a),a}function Ss(){return ae(Ya)}function fu(){return qt().memoizedState}function du(){return qt().memoizedState}function Z0(e){for(var a=e.return;a!==null;){switch(a.tag){case 24:case 3:var i=de();e=oa(i);var r=ua(a,e,i);r!==null&&(ge(r,a,i),Kn(r,a,i)),a={cache:Il()},e.payload=a;return}a=a.return}}function J0(e,a,i){var r=de();i={lane:r,revertLane:0,action:i,hasEagerState:!1,eagerState:null,next:null},Ki(e)?mu(a,i):(i=es(e,a,i,r),i!==null&&(ge(i,e,r),pu(i,a,r)))}function gu(e,a,i){var r=de();Wn(e,a,i,r)}function Wn(e,a,i,r){var c={lane:r,revertLane:0,action:i,hasEagerState:!1,eagerState:null,next:null};if(Ki(e))mu(a,c);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=a.lastRenderedReducer,d!==null))try{var _=a.lastRenderedState,x=d(_,i);if(c.hasEagerState=!0,c.eagerState=x,_e(x,_))return ki(e,a,c,0),Ot===null&&ji(),!1}catch{}finally{}if(i=es(e,a,c,r),i!==null)return ge(i,e,r),pu(i,a,r),!0}return!1}function bs(e,a,i,r){if(r={lane:2,revertLane:$l(),action:r,hasEagerState:!1,eagerState:null,next:null},Ki(e)){if(a)throw Error(s(479))}else a=es(e,i,r,2),a!==null&&ge(a,e,2)}function Ki(e){var a=e.alternate;return e===dt||a!==null&&a===dt}function mu(e,a){Cn=vl=!0;var i=e.pending;i===null?a.next=a:(a.next=i.next,i.next=a),e.pending=a}function pu(e,a,i){if((i&4194048)!==0){var r=a.lanes;r&=e.pendingLanes,i|=r,a.lanes=i,st(e,i)}}function Qi(e){var a=di;return di+=1,An===null&&(An=[]),No(An,e,a)}function In(e,a){a=a.props.ref,e.ref=a!==void 0?a:null}function Zi(e,a){throw a.$$typeof===gf?Error(s(525)):(e=Object.prototype.toString.call(a),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":e)))}function yu(e){var a=e._init;return a(e._payload)}function _u(e){function a(N,A){if(e){var w=N.deletions;w===null?(N.deletions=[A],N.flags|=16):w.push(A)}}function i(N,A){if(!e)return null;for(;A!==null;)a(N,A),A=A.sibling;return null}function r(N){for(var A=new Map;N!==null;)N.key!==null?A.set(N.key,N):A.set(N.index,N),N=N.sibling;return A}function c(N,A){return N=Qe(N,A),N.index=0,N.sibling=null,N}function d(N,A,w){return N.index=w,e?(w=N.alternate,w!==null?(w=w.index,w<A?(N.flags|=67108866,A):w):(N.flags|=67108866,A)):(N.flags|=1048576,A)}function _(N){return e&&N.alternate===null&&(N.flags|=67108866),N}function x(N,A,w,q){return A===null||A.tag!==6?(A=Fs(w,N.mode,q),A.return=N,A):(A=c(A,w),A.return=N,A)}function D(N,A,w,q){var lt=w.type;return lt===cn?V(N,A,w.props.children,q,w.key):A!==null&&(A.elementType===lt||typeof lt=="object"&&lt!==null&&lt.$$typeof===ya&&yu(lt)===A.type)?(A=c(A,w.props),In(A,w),A.return=N,A):(A=nl(w.type,w.key,w.props,null,N.mode,q),In(A,w),A.return=N,A)}function U(N,A,w,q){return A===null||A.tag!==4||A.stateNode.containerInfo!==w.containerInfo||A.stateNode.implementation!==w.implementation?(A=Ws(w,N.mode,q),A.return=N,A):(A=c(A,w.children||[]),A.return=N,A)}function V(N,A,w,q,lt){return A===null||A.tag!==7?(A=ja(w,N.mode,q,lt),A.return=N,A):(A=c(A,w),A.return=N,A)}function I(N,A,w){if(typeof A=="string"&&A!==""||typeof A=="number"||typeof A=="bigint")return A=Fs(""+A,N.mode,w),A.return=N,A;if(typeof A=="object"&&A!==null){switch(A.$$typeof){case il:return w=nl(A.type,A.key,A.props,null,N.mode,w),In(w,A),w.return=N,w;case un:return A=Ws(A,N.mode,w),A.return=N,A;case ya:var q=A._init;return A=q(A._payload),I(N,A,w)}if(ll(A)||p(A))return A=ja(A,N.mode,w,null),A.return=N,A;if(typeof A.then=="function")return I(N,Qi(A),w);if(A.$$typeof===pa)return I(N,Hi(N,A),w);Zi(N,A)}return null}function tt(N,A,w,q){var lt=A!==null?A.key:null;if(typeof w=="string"&&w!==""||typeof w=="number"||typeof w=="bigint")return lt!==null?null:x(N,A,""+w,q);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case il:return w.key===lt?D(N,A,w,q):null;case un:return w.key===lt?U(N,A,w,q):null;case ya:return lt=w._init,w=lt(w._payload),tt(N,A,w,q)}if(ll(w)||p(w))return lt!==null?null:V(N,A,w,q,null);if(typeof w.then=="function")return tt(N,A,Qi(w),q);if(w.$$typeof===pa)return tt(N,A,Hi(N,w),q);Zi(N,w)}return null}function ft(N,A,w,q,lt){if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return N=N.get(w)||null,x(A,N,""+q,lt);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case il:return N=N.get(q.key===null?w:q.key)||null,D(A,N,q,lt);case un:return N=N.get(q.key===null?w:q.key)||null,U(A,N,q,lt);case ya:var Gt=q._init;return q=Gt(q._payload),ft(N,A,w,q,lt)}if(ll(q)||p(q))return N=N.get(w)||null,V(A,N,q,lt,null);if(typeof q.then=="function")return ft(N,A,w,Qi(q),lt);if(q.$$typeof===pa)return ft(N,A,w,Hi(A,q),lt);Zi(A,q)}return null}function Ne(N,A,w,q){for(var lt=null,Gt=null,ct=A,vt=A=0,It=null;ct!==null&&vt<w.length;vt++){ct.index>vt?(It=ct,ct=null):It=ct.sibling;var St=tt(N,ct,w[vt],q);if(St===null){ct===null&&(ct=It);break}e&&ct&&St.alternate===null&&a(N,ct),A=d(St,A,vt),Gt===null?lt=St:Gt.sibling=St,Gt=St,ct=It}if(vt===w.length)return i(N,ct),bt&&Y(N,vt),lt;if(ct===null){for(;vt<w.length;vt++)ct=I(N,w[vt],q),ct!==null&&(A=d(ct,A,vt),Gt===null?lt=ct:Gt.sibling=ct,Gt=ct);return bt&&Y(N,vt),lt}for(ct=r(ct);vt<w.length;vt++)It=ft(ct,N,vt,w[vt],q),It!==null&&(e&&It.alternate!==null&&ct.delete(It.key===null?vt:It.key),A=d(It,A,vt),Gt===null?lt=It:Gt.sibling=It,Gt=It);return e&&ct.forEach(function(Aa){return a(N,Aa)}),bt&&Y(N,vt),lt}function _i(N,A,w,q){if(w==null)throw Error(s(151));for(var lt=null,Gt=null,ct=A,vt=A=0,It=null,St=w.next();ct!==null&&!St.done;vt++,St=w.next()){ct.index>vt?(It=ct,ct=null):It=ct.sibling;var Aa=tt(N,ct,St.value,q);if(Aa===null){ct===null&&(ct=It);break}e&&ct&&Aa.alternate===null&&a(N,ct),A=d(Aa,A,vt),Gt===null?lt=Aa:Gt.sibling=Aa,Gt=Aa,ct=It}if(St.done)return i(N,ct),bt&&Y(N,vt),lt;if(ct===null){for(;!St.done;vt++,St=w.next())St=I(N,St.value,q),St!==null&&(A=d(St,A,vt),Gt===null?lt=St:Gt.sibling=St,Gt=St);return bt&&Y(N,vt),lt}for(ct=r(ct);!St.done;vt++,St=w.next())St=ft(ct,N,vt,St.value,q),St!==null&&(e&&St.alternate!==null&&ct.delete(St.key===null?vt:St.key),A=d(St,A,vt),Gt===null?lt=St:Gt.sibling=St,Gt=St);return e&&ct.forEach(function(Fd){return a(N,Fd)}),bt&&Y(N,vt),lt}function Za(N,A,w,q){if(typeof w=="object"&&w!==null&&w.type===cn&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case il:t:{for(var lt=w.key;A!==null;){if(A.key===lt){if(lt=w.type,lt===cn){if(A.tag===7){i(N,A.sibling),q=c(A,w.props.children),q.return=N,N=q;break t}}else if(A.elementType===lt||typeof lt=="object"&&lt!==null&&lt.$$typeof===ya&&yu(lt)===A.type){i(N,A.sibling),q=c(A,w.props),In(q,w),q.return=N,N=q;break t}i(N,A);break}else a(N,A);A=A.sibling}w.type===cn?(q=ja(w.props.children,N.mode,q,w.key),q.return=N,N=q):(q=nl(w.type,w.key,w.props,null,N.mode,q),In(q,w),q.return=N,N=q)}return _(N);case un:t:{for(lt=w.key;A!==null;){if(A.key===lt)if(A.tag===4&&A.stateNode.containerInfo===w.containerInfo&&A.stateNode.implementation===w.implementation){i(N,A.sibling),q=c(A,w.children||[]),q.return=N,N=q;break t}else{i(N,A);break}else a(N,A);A=A.sibling}q=Ws(w,N.mode,q),q.return=N,N=q}return _(N);case ya:return lt=w._init,w=lt(w._payload),Za(N,A,w,q)}if(ll(w))return Ne(N,A,w,q);if(p(w)){if(lt=p(w),typeof lt!="function")throw Error(s(150));return w=lt.call(w),_i(N,A,w,q)}if(typeof w.then=="function")return Za(N,A,Qi(w),q);if(w.$$typeof===pa)return Za(N,A,Hi(N,w),q);Zi(N,w)}return typeof w=="string"&&w!==""||typeof w=="number"||typeof w=="bigint"?(w=""+w,A!==null&&A.tag===6?(i(N,A.sibling),q=c(A,w),q.return=N,N=q):(i(N,A),q=Fs(w,N.mode,q),q.return=N,N=q),_(N)):i(N,A)}return function(N,A,w,q){try{di=0;var lt=Za(N,A,w,q);return An=null,lt}catch(ct){if(ct===hi||ct===pl)throw ct;var Gt=n(29,ct,null,N.mode);return Gt.lanes=q,Gt.return=N,Gt}finally{}}}function ca(e){var a=e.alternate;S(Qt,Qt.current&1),S(Me,e),Ye===null&&(a===null||En.current!==null||a.memoizedState!==null)&&(Ye=e)}function vu(e){if(e.tag===22){if(S(Qt,Qt.current),S(Me,e),Ye===null){var a=e.alternate;a!==null&&a.memoizedState!==null&&(Ye=e)}}else ha()}function ha(){S(Qt,Qt.current),S(Me,Me.current)}function Ve(e){E(Me),Ye===e&&(Ye=null),E(Qt)}function Ji(e){for(var a=e;a!==null;){if(a.tag===13){var i=a.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||rr(i)||or(i)))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===e)break;for(;a.sibling===null;){if(a.return===null||a.return===e)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}function xs(e,a,i,r){a=e.memoizedState,i=i(r,a),i=i==null?a:$s({},a,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}function Su(e,a,i,r,c,d,_){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,d,_):a.prototype&&a.prototype.isPureReactComponent?!Ui(i,r)||!Ui(c,d):!0}function bu(e,a,i,r){e=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(i,r),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(i,r),a.state!==e&&xr.enqueueReplaceState(a,a.state,null)}function Ba(e,a){var i=a;if("ref"in a){i={};for(var r in a)r!=="ref"&&(i[r]=a[r])}if(e=e.defaultProps){i===a&&(i=$s({},i));for(var c in e)i[c]===void 0&&(i[c]=e[c])}return i}function Fi(e,a){try{var i=e.onUncaughtError;i(a.value,{componentStack:a.stack})}catch(r){setTimeout(function(){throw r})}}function xu(e,a,i){try{var r=e.onCaughtError;r(i.value,{componentStack:i.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(c){setTimeout(function(){throw c})}}function Es(e,a,i){return i=oa(i),i.tag=3,i.payload={element:null},i.callback=function(){Fi(e,a)},i}function Eu(e){return e=oa(e),e.tag=3,e}function Cu(e,a,i,r){var c=i.type.getDerivedStateFromError;if(typeof c=="function"){var d=r.value;e.payload=function(){return c(d)},e.callback=function(){xu(a,i,r)}}var _=i.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(e.callback=function(){xu(a,i,r),typeof c!="function"&&(Ca===null?Ca=new Set([this]):Ca.add(this));var x=r.stack;this.componentDidCatch(r.value,{componentStack:x!==null?x:""})})}function F0(e,a,i,r,c){if(i.flags|=32768,r!==null&&typeof r=="object"&&typeof r.then=="function"){if(a=i.alternate,a!==null&&Pn(a,i,c,!0),i=Me.current,i!==null){switch(i.tag){case 13:return Ye===null?Ks():i.alternate===null&&jt===0&&(jt=3),i.flags&=-257,i.flags|=65536,i.lanes=c,r===yl?i.flags|=16384:(a=i.updateQueue,a===null?i.updateQueue=new Set([r]):a.add(r),Zs(e,r,c)),!1;case 22:return i.flags|=65536,r===yl?i.flags|=16384:(a=i.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([r])},i.updateQueue=a):(i=a.retryQueue,i===null?a.retryQueue=new Set([r]):i.add(r)),Zs(e,r,c)),!1}throw Error(s(435,i.tag))}return Zs(e,r,c),Ks(),!1}if(bt)return a=Me.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=c,r!==mr&&(e=Error(s(422),{cause:r}),Xn(T(e,i)))):(r!==mr&&(a=Error(s(423),{cause:r}),Xn(T(a,i))),e=e.current.alternate,e.flags|=65536,c&=-c,e.lanes|=c,r=T(r,i),c=Es(e.stateNode,r,c),is(e,c),jt!==4&&(jt=2)),!1;var d=Error(s(520),{cause:r});if(d=T(d,i),mi===null?mi=[d]:mi.push(d),jt!==4&&(jt=2),a===null)return!0;r=T(r,i),i=a;do{switch(i.tag){case 3:return i.flags|=65536,e=c&-c,i.lanes|=e,e=Es(i.stateNode,r,e),is(i,e),!1;case 1:if(a=i.type,d=i.stateNode,(i.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Ca===null||!Ca.has(d))))return i.flags|=65536,c&=-c,i.lanes|=c,c=Eu(c),Cu(c,e,i,r),is(i,c),!1}i=i.return}while(i!==null);return!1}function $t(e,a,i,r){a.child=e===null?oh(a,null,i,r):Mn(a,e.child,i,r)}function Tu(e,a,i,r,c){i=i.render;var d=a.ref;if("ref"in r){var _={};for(var x in r)x!=="ref"&&(_[x]=r[x])}else _=r;return Ha(a),r=os(e,a,i,_,d,c),x=us(),e!==null&&!Ft?(cs(e,a,c),Ke(e,a,c)):(bt&&x&&at(a),a.flags|=1,$t(e,a,r,c),a.child)}function Au(e,a,i,r,c){if(e===null){var d=i.type;return typeof d=="function"&&!Js(d)&&d.defaultProps===void 0&&i.compare===null?(a.tag=15,a.type=d,Mu(e,a,d,r,c)):(e=nl(i.type,null,r,a,a.mode,c),e.ref=a.ref,e.return=a,a.child=e)}if(d=e.child,!Os(e,c)){var _=d.memoizedProps;if(i=i.compare,i=i!==null?i:Ui,i(_,r)&&e.ref===a.ref)return Ke(e,a,c)}return a.flags|=1,e=Qe(d,r),e.ref=a.ref,e.return=a,a.child=e}function Mu(e,a,i,r,c){if(e!==null){var d=e.memoizedProps;if(Ui(d,r)&&e.ref===a.ref)if(Ft=!1,a.pendingProps=r=d,Os(e,c))(e.flags&131072)!==0&&(Ft=!0);else return a.lanes=e.lanes,Ke(e,a,c)}return Cs(e,a,i,r,c)}function Ru(e,a,i){var r=a.pendingProps,c=r.children,d=e!==null?e.memoizedState:null;if(r.mode==="hidden"){if((a.flags&128)!==0){if(r=d!==null?d.baseLanes|i:i,e!==null){for(c=a.child=e.child,d=0;c!==null;)d=d|c.lanes|c.childLanes,c=c.sibling;a.childLanes=d&~r}else a.childLanes=0,a.child=null;return Nu(e,a,r,i)}if((i&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},e!==null&&Bi(a,d!==null?d.cachePool:null),d!==null?Ho(a,d):ls(),vu(a);else return a.lanes=a.childLanes=536870912,Nu(e,a,d!==null?d.baseLanes|i:i,i)}else d!==null?(Bi(a,d.cachePool),Ho(a,d),ha(),a.memoizedState=null):(e!==null&&Bi(a,null),ls(),ha());return $t(e,a,c,i),a.child}function Nu(e,a,i,r){var c=ts();return c=c===null?null:{parent:Ze?Lt._currentValue:Lt._currentValue2,pool:c},a.memoizedState={baseLanes:i,cachePool:c},e!==null&&Bi(a,null),ls(),vu(a),e!==null&&Pn(e,a,r,!0),null}function Wi(e,a){var i=a.ref;if(i===null)e!==null&&e.ref!==null&&(a.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(s(284));(e===null||e.ref!==i)&&(a.flags|=4194816)}}function Cs(e,a,i,r,c){return Ha(a),i=os(e,a,i,r,void 0,c),r=us(),e!==null&&!Ft?(cs(e,a,c),Ke(e,a,c)):(bt&&r&&at(a),a.flags|=1,$t(e,a,i,c),a.child)}function Ou(e,a,i,r,c,d){return Ha(a),a.updateQueue=null,i=Uo(a,r,i,c),Bo(e),r=us(),e!==null&&!Ft?(cs(e,a,d),Ke(e,a,d)):(bt&&r&&at(a),a.flags|=1,$t(e,a,i,d),a.child)}function zu(e,a,i,r,c){if(Ha(a),a.stateNode===null){var d=gn,_=i.contextType;typeof _=="object"&&_!==null&&(d=ae(_)),d=new i(r,d),a.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=xr,a.stateNode=d,d._reactInternals=a,d=a.stateNode,d.props=r,d.state=a.memoizedState,d.refs={},as(a),_=i.contextType,d.context=typeof _=="object"&&_!==null?ae(_):gn,d.state=a.memoizedState,_=i.getDerivedStateFromProps,typeof _=="function"&&(xs(a,i,_,r),d.state=a.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(_=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),_!==d.state&&xr.enqueueReplaceState(d,d.state,null),Zn(a,r,d,c),Qn(),d.state=a.memoizedState),typeof d.componentDidMount=="function"&&(a.flags|=4194308),r=!0}else if(e===null){d=a.stateNode;var x=a.memoizedProps,D=Ba(i,x);d.props=D;var U=d.context,V=i.contextType;_=gn,typeof V=="object"&&V!==null&&(_=ae(V));var I=i.getDerivedStateFromProps;V=typeof I=="function"||typeof d.getSnapshotBeforeUpdate=="function",x=a.pendingProps!==x,V||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(x||U!==_)&&bu(a,d,r,_),Sa=!1;var tt=a.memoizedState;d.state=tt,Zn(a,r,d,c),Qn(),U=a.memoizedState,x||tt!==U||Sa?(typeof I=="function"&&(xs(a,i,I,r),U=a.memoizedState),(D=Sa||Su(a,i,D,r,tt,U,_))?(V||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(a.flags|=4194308)):(typeof d.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=r,a.memoizedState=U),d.props=r,d.state=U,d.context=_,r=D):(typeof d.componentDidMount=="function"&&(a.flags|=4194308),r=!1)}else{d=a.stateNode,ns(e,a),_=a.memoizedProps,V=Ba(i,_),d.props=V,I=a.pendingProps,tt=d.context,U=i.contextType,D=gn,typeof U=="object"&&U!==null&&(D=ae(U)),x=i.getDerivedStateFromProps,(U=typeof x=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(_!==I||tt!==D)&&bu(a,d,r,D),Sa=!1,tt=a.memoizedState,d.state=tt,Zn(a,r,d,c),Qn();var ft=a.memoizedState;_!==I||tt!==ft||Sa||e!==null&&e.dependencies!==null&&wi(e.dependencies)?(typeof x=="function"&&(xs(a,i,x,r),ft=a.memoizedState),(V=Sa||Su(a,i,V,r,tt,ft,D)||e!==null&&e.dependencies!==null&&wi(e.dependencies))?(U||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(r,ft,D),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(r,ft,D)),typeof d.componentDidUpdate=="function"&&(a.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof d.componentDidUpdate!="function"||_===e.memoizedProps&&tt===e.memoizedState||(a.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===e.memoizedProps&&tt===e.memoizedState||(a.flags|=1024),a.memoizedProps=r,a.memoizedState=ft),d.props=r,d.state=ft,d.context=D,r=V):(typeof d.componentDidUpdate!="function"||_===e.memoizedProps&&tt===e.memoizedState||(a.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===e.memoizedProps&&tt===e.memoizedState||(a.flags|=1024),r=!1)}return d=r,Wi(e,a),r=(a.flags&128)!==0,d||r?(d=a.stateNode,i=r&&typeof i.getDerivedStateFromError!="function"?null:d.render(),a.flags|=1,e!==null&&r?(a.child=Mn(a,e.child,null,c),a.child=Mn(a,null,i,c)):$t(e,a,i,c),a.memoizedState=d.state,e=a.child):e=Ke(e,a,c),e}function Du(e,a,i,r){return qn(),a.flags|=256,$t(e,a,i,r),a.child}function Ts(e){return{baseLanes:e,cachePool:Mo()}}function As(e,a,i){return e=e!==null?e.childLanes&~i:0,a&&(e|=Re),e}function Gu(e,a,i){var r=a.pendingProps,c=!1,d=(a.flags&128)!==0,_;if((_=d)||(_=e!==null&&e.memoizedState===null?!1:(Qt.current&2)!==0),_&&(c=!0,a.flags&=-129),_=(a.flags&32)!==0,a.flags&=-33,e===null){if(bt){if(c?ca(a):ha(),bt){var x=Kt,D;(D=x)&&(x=yd(x,ke),x!==null?(a.memoizedState={dehydrated:x,treeContext:qa!==null?{id:Fe,overflow:We}:null,retryLane:536870912,hydrationErrors:null},D=n(18,null,null,0),D.stateNode=x,D.return=a,a.child=D,le=a,Kt=null,D=!0):D=!1),D||sa(a)}if(x=a.memoizedState,x!==null&&(x=x.dehydrated,x!==null))return or(x)?a.lanes=32:a.lanes=536870912,null;Ve(a)}return x=r.children,r=r.fallback,c?(ha(),c=a.mode,x=Ii({mode:"hidden",children:x},c),r=ja(r,c,i,null),x.return=a,r.return=a,x.sibling=r,a.child=x,c=a.child,c.memoizedState=Ts(i),c.childLanes=As(e,_,i),a.memoizedState=Er,r):(ca(a),Ms(a,x))}if(D=e.memoizedState,D!==null&&(x=D.dehydrated,x!==null)){if(d)a.flags&256?(ca(a),a.flags&=-257,a=Rs(e,a,i)):a.memoizedState!==null?(ha(),a.child=e.child,a.flags|=128,a=null):(ha(),c=r.fallback,x=a.mode,r=Ii({mode:"visible",children:r.children},x),c=ja(c,x,i,null),c.flags|=2,r.return=a,c.return=a,r.sibling=c,a.child=r,Mn(a,e.child,null,i),r=a.child,r.memoizedState=Ts(i),r.childLanes=As(e,_,i),a.memoizedState=Er,a=c);else if(ca(a),or(x))_=sd(x).digest,r=Error(s(419)),r.stack="",r.digest=_,Xn({value:r,source:null,stack:null}),a=Rs(e,a,i);else if(Ft||Pn(e,a,i,!1),_=(i&e.childLanes)!==0,Ft||_){if(_=Ot,_!==null&&(r=i&-i,r=(r&42)!==0?1:ut(r),r=(r&(_.suspendedLanes|i))!==0?0:r,r!==0&&r!==D.retryLane))throw D.retryLane=r,nn(e,r),ge(_,e,r),ch;rr(x)||Ks(),a=Rs(e,a,i)}else rr(x)?(a.flags|=192,a.child=e.child,a=null):(e=D.treeContext,Ee&&(Kt=dd(x),le=a,bt=!0,Xa=null,ke=!1,e!==null&&(Ce[Te++]=Fe,Ce[Te++]=We,Ce[Te++]=qa,Fe=e.id,We=e.overflow,qa=a)),a=Ms(a,r.children),a.flags|=4096);return a}return c?(ha(),c=r.fallback,x=a.mode,D=e.child,d=D.sibling,r=Qe(D,{mode:"hidden",children:r.children}),r.subtreeFlags=D.subtreeFlags&65011712,d!==null?c=Qe(d,c):(c=ja(c,x,i,null),c.flags|=2),c.return=a,r.return=a,r.sibling=c,a.child=r,r=c,c=a.child,x=e.child.memoizedState,x===null?x=Ts(i):(D=x.cachePool,D!==null?(d=Ze?Lt._currentValue:Lt._currentValue2,D=D.parent!==d?{parent:d,pool:d}:D):D=Mo(),x={baseLanes:x.baseLanes|i,cachePool:D}),c.memoizedState=x,c.childLanes=As(e,_,i),a.memoizedState=Er,r):(ca(a),i=e.child,e=i.sibling,i=Qe(i,{mode:"visible",children:r.children}),i.return=a,i.sibling=null,e!==null&&(_=a.deletions,_===null?(a.deletions=[e],a.flags|=16):_.push(e)),a.child=i,a.memoizedState=null,i)}function Ms(e,a){return a=Ii({mode:"visible",children:a},e.mode),a.return=e,e.child=a}function Ii(e,a){return e=n(22,e,null,a),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Rs(e,a,i){return Mn(a,e.child,null,i),e=Ms(a,a.pendingProps.children),e.flags|=2,a.memoizedState=null,e}function wu(e,a,i){e.lanes|=a;var r=e.alternate;r!==null&&(r.lanes|=a),Fl(e.return,a,i)}function Ns(e,a,i,r,c){var d=e.memoizedState;d===null?e.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:r,tail:i,tailMode:c}:(d.isBackwards=a,d.rendering=null,d.renderingStartTime=0,d.last=r,d.tail=i,d.tailMode=c)}function Hu(e,a,i){var r=a.pendingProps,c=r.revealOrder,d=r.tail;if($t(e,a,r.children,i),r=Qt.current,(r&2)!==0)r=r&1|2,a.flags|=128;else{if(e!==null&&(e.flags&128)!==0)t:for(e=a.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&wu(e,i,a);else if(e.tag===19)wu(e,i,a);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===a)break t;for(;e.sibling===null;){if(e.return===null||e.return===a)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}switch(S(Qt,r),c){case"forwards":for(i=a.child,c=null;i!==null;)e=i.alternate,e!==null&&Ji(e)===null&&(c=i),i=i.sibling;i=c,i===null?(c=a.child,a.child=null):(c=i.sibling,i.sibling=null),Ns(a,!1,c,i,d);break;case"backwards":for(i=null,c=a.child,a.child=null;c!==null;){if(e=c.alternate,e!==null&&Ji(e)===null){a.child=c;break}e=c.sibling,c.sibling=i,i=c,c=e}Ns(a,!0,i,null,d);break;case"together":Ns(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function Ke(e,a,i){if(e!==null&&(a.dependencies=e.dependencies),Ea|=a.lanes,(i&a.childLanes)===0)if(e!==null){if(Pn(e,a,i,!1),(i&a.childLanes)===0)return null}else return null;if(e!==null&&a.child!==e.child)throw Error(s(153));if(a.child!==null){for(e=a.child,i=Qe(e,e.pendingProps),a.child=i,i.return=a;e.sibling!==null;)e=e.sibling,i=i.sibling=Qe(e,e.pendingProps),i.return=a;i.sibling=null}return a.child}function Os(e,a){return(e.lanes&a)!==0?!0:(e=e.dependencies,!!(e!==null&&wi(e)))}function W0(e,a,i){switch(a.tag){case 3:Nt(a,a.stateNode.containerInfo),ra(a,Lt,e.memoizedState.cache),qn();break;case 27:case 5:he(a);break;case 4:Nt(a,a.stateNode.containerInfo);break;case 10:ra(a,a.type,a.memoizedProps.value);break;case 13:var r=a.memoizedState;if(r!==null)return r.dehydrated!==null?(ca(a),a.flags|=128,null):(i&a.child.childLanes)!==0?Gu(e,a,i):(ca(a),e=Ke(e,a,i),e!==null?e.sibling:null);ca(a);break;case 19:var c=(e.flags&128)!==0;if(r=(i&a.childLanes)!==0,r||(Pn(e,a,i,!1),r=(i&a.childLanes)!==0),c){if(r)return Hu(e,a,i);a.flags|=128}if(c=a.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),S(Qt,Qt.current),r)break;return null;case 22:case 23:return a.lanes=0,Ru(e,a,i);case 24:ra(a,Lt,e.memoizedState.cache)}return Ke(e,a,i)}function Bu(e,a,i){if(e!==null)if(e.memoizedProps!==a.pendingProps)Ft=!0;else{if(!Os(e,i)&&(a.flags&128)===0)return Ft=!1,W0(e,a,i);Ft=(e.flags&131072)!==0}else Ft=!1,bt&&(a.flags&1048576)!==0&&P(a,hl,a.index);switch(a.lanes=0,a.tag){case 16:t:{e=a.pendingProps;var r=a.elementType,c=r._init;if(r=c(r._payload),a.type=r,typeof r=="function")Js(r)?(e=Ba(r,e),a.tag=1,a=zu(null,a,r,e,i)):(a.tag=0,a=Cs(null,a,r,e,i));else{if(r!=null){if(c=r.$$typeof,c===er){a.tag=11,a=Tu(null,a,r,e,i);break t}else if(c===ir){a.tag=14,a=Au(null,a,r,e,i);break t}}throw a=v(r)||r,Error(s(306,a,""))}}return a;case 0:return Cs(e,a,a.type,a.pendingProps,i);case 1:return r=a.type,c=Ba(r,a.pendingProps),zu(e,a,r,c,i);case 3:t:{if(Nt(a,a.stateNode.containerInfo),e===null)throw Error(s(387));var d=a.pendingProps;c=a.memoizedState,r=c.element,ns(e,a),Zn(a,d,null,i);var _=a.memoizedState;if(d=_.cache,ra(a,Lt,d),d!==c.cache&&Wl(a,[Lt],i,!0),Qn(),d=_.element,Ee&&c.isDehydrated)if(c={element:d,isDehydrated:!1,cache:_.cache},a.updateQueue.baseState=c,a.memoizedState=c,a.flags&256){a=Du(e,a,d,i);break t}else if(d!==r){r=T(Error(s(424)),a),Xn(r),a=Du(e,a,d,i);break t}else for(Ee&&(Kt=fd(a.stateNode.containerInfo),le=a,bt=!0,Xa=null,ke=!0),i=oh(a,null,d,i),a.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(qn(),d===r){a=Ke(e,a,i);break t}$t(e,a,d,i)}a=a.child}return a;case 26:if(Ge)return Wi(e,a),e===null?(i=Qc(a.type,null,a.pendingProps,null))?a.memoizedState=i:bt||(a.stateNode=Nd(a.type,a.pendingProps,va.current,a)):a.memoizedState=Qc(a.type,e.memoizedProps,a.pendingProps,e.memoizedState),null;case 27:if(Vt)return he(a),e===null&&Vt&&bt&&(r=a.stateNode=$c(a.type,a.pendingProps,va.current,te.current,!1),le=a,ke=!0,Kt=gd(a.type,r,Kt)),$t(e,a,a.pendingProps.children,i),Wi(e,a),e===null&&(a.flags|=4194304),a.child;case 5:return e===null&&bt&&(Ad(a.type,a.pendingProps,te.current),(c=r=Kt)&&(r=md(r,a.type,a.pendingProps,ke),r!==null?(a.stateNode=r,le=a,Kt=hd(r),ke=!1,c=!0):c=!1),c||sa(a)),he(a),c=a.type,d=a.pendingProps,_=e!==null?e.memoizedProps:null,r=d.children,sl(c,d)?r=null:_!==null&&sl(c,_)&&(a.flags|=32),a.memoizedState!==null&&(c=os(e,a,V0,null,null,i),Ze?Ya._currentValue=c:Ya._currentValue2=c),Wi(e,a),$t(e,a,r,i),a.child;case 6:return e===null&&bt&&(Md(a.pendingProps,te.current),(e=i=Kt)&&(i=pd(i,a.pendingProps,ke),i!==null?(a.stateNode=i,le=a,Kt=null,e=!0):e=!1),e||sa(a)),null;case 13:return Gu(e,a,i);case 4:return Nt(a,a.stateNode.containerInfo),r=a.pendingProps,e===null?a.child=Mn(a,null,r,i):$t(e,a,r,i),a.child;case 11:return Tu(e,a,a.type,a.pendingProps,i);case 7:return $t(e,a,a.pendingProps,i),a.child;case 8:return $t(e,a,a.pendingProps.children,i),a.child;case 12:return $t(e,a,a.pendingProps.children,i),a.child;case 10:return r=a.pendingProps,ra(a,a.type,r.value),$t(e,a,r.children,i),a.child;case 9:return c=a.type._context,r=a.pendingProps.children,Ha(a),c=ae(c),r=r(c),a.flags|=1,$t(e,a,r,i),a.child;case 14:return Au(e,a,a.type,a.pendingProps,i);case 15:return Mu(e,a,a.type,a.pendingProps,i);case 19:return Hu(e,a,i);case 31:return r=a.pendingProps,i=a.mode,r={mode:r.mode,children:r.children},e===null?(i=Ii(r,i),i.ref=a.ref,a.child=i,i.return=a,a=i):(i=Qe(e.child,r),i.ref=a.ref,a.child=i,i.return=a,a=i),a;case 22:return Ru(e,a,i);case 24:return Ha(a),r=ae(Lt),e===null?(c=ts(),c===null&&(c=Ot,d=Il(),c.pooledCache=d,d.refCount++,d!==null&&(c.pooledCacheLanes|=i),c=d),a.memoizedState={parent:r,cache:c},as(a),ra(a,Lt,c)):((e.lanes&i)!==0&&(ns(e,a),Zn(a,null,null,i),Qn()),c=e.memoizedState,d=a.memoizedState,c.parent!==r?(c={parent:r,cache:r},a.memoizedState=c,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=c),ra(a,Lt,r)):(r=d.cache,ra(a,Lt,r),r!==c.cache&&Wl(a,[Lt],i,!0))),$t(e,a,a.pendingProps.children,i),a.child;case 29:throw a.pendingProps}throw Error(s(156,a.tag))}function fe(e){e.flags|=4}function Uu(e,a){if(e!==null&&e.child===a.child)return!1;if((a.flags&16)!==0)return!0;for(e=a.child;e!==null;){if((e.flags&13878)!==0||(e.subtreeFlags&13878)!==0)return!0;e=e.sibling}return!1}function zs(e,a,i,r){if(ne)for(i=a.child;i!==null;){if(i.tag===5||i.tag===6)sr(e,i.stateNode);else if(!(i.tag===4||Vt&&i.tag===27)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break;for(;i.sibling===null;){if(i.return===null||i.return===a)return;i=i.return}i.sibling.return=i.return,i=i.sibling}else if(_a)for(var c=a.child;c!==null;){if(c.tag===5){var d=c.stateNode;i&&r&&(d=qc(d,c.type,c.memoizedProps)),sr(e,d)}else if(c.tag===6)d=c.stateNode,i&&r&&(d=Xc(d,c.memoizedProps)),sr(e,d);else if(c.tag!==4){if(c.tag===22&&c.memoizedState!==null)d=c.child,d!==null&&(d.return=c),zs(e,c,!0,!0);else if(c.child!==null){c.child.return=c,c=c.child;continue}}if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return;c=c.return}c.sibling.return=c.return,c=c.sibling}}function Lu(e,a,i,r){var c=!1;if(_a)for(var d=a.child;d!==null;){if(d.tag===5){var _=d.stateNode;i&&r&&(_=qc(_,d.type,d.memoizedProps)),kc(e,_)}else if(d.tag===6)_=d.stateNode,i&&r&&(_=Xc(_,d.memoizedProps)),kc(e,_);else if(d.tag!==4){if(d.tag===22&&d.memoizedState!==null)c=d.child,c!==null&&(c.return=d),Lu(e,d,!0,!0),c=!0;else if(d.child!==null){d.child.return=d,d=d.child;continue}}if(d===a)break;for(;d.sibling===null;){if(d.return===null||d.return===a)return c;d=d.return}d.sibling.return=d.return,d=d.sibling}return c}function ju(e,a){if(_a&&Uu(e,a)){e=a.stateNode;var i=e.containerInfo,r=jc();Lu(r,a,!1,!1),e.pendingChildren=r,fe(a),ld(i,r)}}function Ds(e,a,i,r){if(ne)e.memoizedProps!==r&&fe(a);else if(_a){var c=e.stateNode,d=e.memoizedProps;if((e=Uu(e,a))||d!==r){var _=te.current;d=id(c,i,d,r,!e,null),d===c?a.stateNode=c:(wc(d,i,r,_)&&fe(a),a.stateNode=d,e?zs(d,a,!1,!1):fe(a))}else a.stateNode=c}}function Gs(e,a,i){if(Df(a,i)){if(e.flags|=16777216,!Bc(a,i))if(cc())e.flags|=8192;else throw bn=yl,vr}else e.flags&=-16777217}function ku(e,a){if(zd(a)){if(e.flags|=16777216,!Ic(a))if(cc())e.flags|=8192;else throw bn=yl,vr}else e.flags&=-16777217}function $i(e,a){a!==null&&(e.flags|=4),e.flags&16384&&(a=e.tag!==22?Z():536870912,e.lanes|=a,On|=a)}function $n(e,a){if(!bt)switch(e.tailMode){case"hidden":a=e.tail;for(var i=null;a!==null;)a.alternate!==null&&(i=a),a=a.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var r=null;i!==null;)i.alternate!==null&&(r=i),i=i.sibling;r===null?a||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ht(e){var a=e.alternate!==null&&e.alternate.child===e.child,i=0,r=0;if(a)for(var c=e.child;c!==null;)i|=c.lanes|c.childLanes,r|=c.subtreeFlags&65011712,r|=c.flags&65011712,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)i|=c.lanes|c.childLanes,r|=c.subtreeFlags,r|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=r,e.childLanes=i,a}function I0(e,a,i){var r=a.pendingProps;switch(ht(a),a.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ht(a),null;case 1:return Ht(a),null;case 3:return i=a.stateNode,r=null,e!==null&&(r=e.memoizedState.cache),a.memoizedState.cache!==r&&(a.flags|=2048),Xe(Lt),Ut(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(Yn(a)?fe(a):e===null||e.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,vo())),ju(e,a),Ht(a),null;case 26:if(Ge){i=a.type;var c=a.memoizedState;return e===null?(fe(a),c!==null?(Ht(a),ku(a,c)):(Ht(a),Gs(a,i,r))):c?c!==e.memoizedState?(fe(a),Ht(a),ku(a,c)):(Ht(a),a.flags&=-16777217):(ne?e.memoizedProps!==r&&fe(a):Ds(e,a,i,r),Ht(a),Gs(a,i,r)),null}case 27:if(Vt){if(Gi(a),i=va.current,c=a.type,e!==null&&a.stateNode!=null)ne?e.memoizedProps!==r&&fe(a):Ds(e,a,c,r);else{if(!r){if(a.stateNode===null)throw Error(s(166));return Ht(a),null}e=te.current,Yn(a)?yo(a,e):(e=$c(c,r,i,e,!0),a.stateNode=e,fe(a))}return Ht(a),null}case 5:if(Gi(a),i=a.type,e!==null&&a.stateNode!=null)Ds(e,a,i,r);else{if(!r){if(a.stateNode===null)throw Error(s(166));return Ht(a),null}e=te.current,Yn(a)?yo(a,e):(c=Cf(i,r,va.current,e,a),zs(c,a,!1,!1),a.stateNode=c,wc(c,i,r,e)&&fe(a))}return Ht(a),Gs(a,a.type,a.pendingProps),null;case 6:if(e&&a.stateNode!=null)i=e.memoizedProps,ne?i!==r&&fe(a):_a&&(i!==r?(a.stateNode=Hc(r,va.current,te.current,a),fe(a)):a.stateNode=e.stateNode);else{if(typeof r!="string"&&a.stateNode===null)throw Error(s(166));if(e=va.current,i=te.current,Yn(a)){if(!Ee)throw Error(s(176));if(e=a.stateNode,i=a.memoizedProps,r=null,c=le,c!==null)switch(c.tag){case 27:case 5:r=c.memoizedProps}vd(e,i,a,r)||sa(a)}else a.stateNode=Hc(r,e,i,a)}return Ht(a),null;case 13:if(r=a.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(c=Yn(a),r!==null&&r.dehydrated!==null){if(e===null){if(!c)throw Error(s(318));if(!Ee)throw Error(s(344));if(c=a.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(s(317));Sd(c,a)}else qn(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Ht(a),c=!1}else c=vo(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=c),c=!0;if(!c)return a.flags&256?(Ve(a),a):(Ve(a),null)}if(Ve(a),(a.flags&128)!==0)return a.lanes=i,a;if(i=r!==null,e=e!==null&&e.memoizedState!==null,i){r=a.child,c=null,r.alternate!==null&&r.alternate.memoizedState!==null&&r.alternate.memoizedState.cachePool!==null&&(c=r.alternate.memoizedState.cachePool.pool);var d=null;r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(d=r.memoizedState.cachePool.pool),d!==c&&(r.flags|=2048)}return i!==e&&i&&(a.child.flags|=8192),$i(a,a.updateQueue),Ht(a),null;case 4:return Ut(),ju(e,a),e===null&&Rf(a.stateNode.containerInfo),Ht(a),null;case 10:return Xe(a.type),Ht(a),null;case 19:if(E(Qt),c=a.memoizedState,c===null)return Ht(a),null;if(r=(a.flags&128)!==0,d=c.rendering,d===null)if(r)$n(c,!1);else{if(jt!==0||e!==null&&(e.flags&128)!==0)for(e=a.child;e!==null;){if(d=Ji(e),d!==null){for(a.flags|=128,$n(c,!1),e=d.updateQueue,a.updateQueue=e,$i(a,e),a.subtreeFlags=0,e=i,i=a.child;i!==null;)Cc(i,e),i=i.sibling;return S(Qt,Qt.current&1|2),a.child}e=e.sibling}c.tail!==null&&we()>pi&&(a.flags|=128,r=!0,$n(c,!1),a.lanes=4194304)}else{if(!r)if(e=Ji(d),e!==null){if(a.flags|=128,r=!0,e=e.updateQueue,a.updateQueue=e,$i(a,e),$n(c,!0),c.tail===null&&c.tailMode==="hidden"&&!d.alternate&&!bt)return Ht(a),null}else 2*we()-c.renderingStartTime>pi&&i!==536870912&&(a.flags|=128,r=!0,$n(c,!1),a.lanes=4194304);c.isBackwards?(d.sibling=a.child,a.child=d):(e=c.last,e!==null?e.sibling=d:a.child=d,c.last=d)}return c.tail!==null?(a=c.tail,c.rendering=a,c.tail=a.sibling,c.renderingStartTime=we(),a.sibling=null,e=Qt.current,S(Qt,r?e&1|2:e&1),a):(Ht(a),null);case 22:case 23:return Ve(a),ss(),r=a.memoizedState!==null,e!==null?e.memoizedState!==null!==r&&(a.flags|=8192):r&&(a.flags|=8192),r?(i&536870912)!==0&&(a.flags&128)===0&&(Ht(a),a.subtreeFlags&6&&(a.flags|=8192)):Ht(a),i=a.updateQueue,i!==null&&$i(a,i.retryQueue),i=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),r=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(r=a.memoizedState.cachePool.pool),r!==i&&(a.flags|=2048),e!==null&&E(Va),null;case 24:return i=null,e!==null&&(i=e.memoizedState.cache),a.memoizedState.cache!==i&&(a.flags|=2048),Xe(Lt),Ht(a),null;case 25:return null;case 30:return null}throw Error(s(156,a.tag))}function $0(e,a){switch(ht(a),a.tag){case 1:return e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 3:return Xe(Lt),Ut(),e=a.flags,(e&65536)!==0&&(e&128)===0?(a.flags=e&-65537|128,a):null;case 26:case 27:case 5:return Gi(a),null;case 13:if(Ve(a),e=a.memoizedState,e!==null&&e.dehydrated!==null){if(a.alternate===null)throw Error(s(340));qn()}return e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 19:return E(Qt),null;case 4:return Ut(),null;case 10:return Xe(a.type),null;case 22:case 23:return Ve(a),ss(),e!==null&&E(Va),e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 24:return Xe(Lt),null;case 25:return null;default:return null}}function Yu(e,a){switch(ht(a),a.tag){case 3:Xe(Lt),Ut();break;case 26:case 27:case 5:Gi(a);break;case 4:Ut();break;case 13:Ve(a);break;case 19:E(Qt);break;case 10:Xe(a.type);break;case 22:case 23:Ve(a),ss(),e!==null&&E(Va);break;case 24:Xe(Lt)}}function ti(e,a){try{var i=a.updateQueue,r=i!==null?i.lastEffect:null;if(r!==null){var c=r.next;i=c;do{if((i.tag&e)===e){r=void 0;var d=i.create,_=i.inst;r=d(),_.destroy=r}i=i.next}while(i!==c)}}catch(x){Ct(a,a.return,x)}}function fa(e,a,i){try{var r=a.updateQueue,c=r!==null?r.lastEffect:null;if(c!==null){var d=c.next;r=d;do{if((r.tag&e)===e){var _=r.inst,x=_.destroy;if(x!==void 0){_.destroy=void 0,c=a;var D=i,U=x;try{U()}catch(V){Ct(c,D,V)}}}r=r.next}while(r!==d)}}catch(V){Ct(a,a.return,V)}}function qu(e){var a=e.updateQueue;if(a!==null){var i=e.stateNode;try{wo(a,i)}catch(r){Ct(e,e.return,r)}}}function Xu(e,a,i){i.props=Ba(e.type,e.memoizedProps),i.state=e.memoizedState;try{i.componentWillUnmount()}catch(r){Ct(e,a,r)}}function ei(e,a){try{var i=e.ref;if(i!==null){switch(e.tag){case 26:case 27:case 5:var r=li(e.stateNode);break;case 30:r=e.stateNode;break;default:r=e.stateNode}typeof i=="function"?e.refCleanup=i(r):i.current=r}}catch(c){Ct(e,a,c)}}function Le(e,a){var i=e.ref,r=e.refCleanup;if(i!==null)if(typeof r=="function")try{r()}catch(c){Ct(e,a,c)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(c){Ct(e,a,c)}else i.current=null}function Pu(e){var a=e.type,i=e.memoizedProps,r=e.stateNode;try{Qf(r,a,i,e)}catch(c){Ct(e,e.return,c)}}function ws(e,a,i){try{Zf(e.stateNode,e.type,i,a,e)}catch(r){Ct(e,e.return,r)}}function Vu(e){return e.tag===5||e.tag===3||(Ge?e.tag===26:!1)||(Vt?e.tag===27&&fn(e.type):!1)||e.tag===4}function Hs(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||Vu(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(Vt&&e.tag===27&&fn(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Bs(e,a,i){var r=e.tag;if(r===5||r===6)e=e.stateNode,a?Ff(i,e,a):Vf(i,e);else if(r!==4&&(Vt&&r===27&&fn(e.type)&&(i=e.stateNode,a=null),e=e.child,e!==null))for(Bs(e,a,i),e=e.sibling;e!==null;)Bs(e,a,i),e=e.sibling}function tl(e,a,i){var r=e.tag;if(r===5||r===6)e=e.stateNode,a?Jf(i,e,a):Pf(i,e);else if(r!==4&&(Vt&&r===27&&fn(e.type)&&(i=e.stateNode),e=e.child,e!==null))for(tl(e,a,i),e=e.sibling;e!==null;)tl(e,a,i),e=e.sibling}function Ku(e,a,i){e=e.containerInfo;try{Yc(e,i)}catch(r){Ct(a,a.return,r)}}function Qu(e){var a=e.stateNode,i=e.memoizedProps;try{Gd(e.type,i,a,e)}catch(r){Ct(e,e.return,r)}}function tf(e,a){for(xf(e.containerInfo),Wt=a;Wt!==null;)if(e=Wt,a=e.child,(e.subtreeFlags&1024)!==0&&a!==null)a.return=e,Wt=a;else for(;Wt!==null;){e=Wt;var i=e.alternate;switch(a=e.flags,e.tag){case 0:break;case 11:case 15:break;case 1:if((a&1024)!==0&&i!==null){a=void 0;var r=e,c=i.memoizedProps;i=i.memoizedState;var d=r.stateNode;try{var _=Ba(r.type,c,r.elementType===r.type);a=d.getSnapshotBeforeUpdate(_,i),d.__reactInternalSnapshotBeforeUpdate=a}catch(x){Ct(r,r.return,x)}}break;case 3:(a&1024)!==0&&ne&&nd(e.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(s(163))}if(a=e.sibling,a!==null){a.return=e.return,Wt=a;break}Wt=e.return}}function Zu(e,a,i){var r=i.flags;switch(i.tag){case 0:case 11:case 15:da(e,i),r&4&&ti(5,i);break;case 1:if(da(e,i),r&4)if(e=i.stateNode,a===null)try{e.componentDidMount()}catch(_){Ct(i,i.return,_)}else{var c=Ba(i.type,a.memoizedProps);a=a.memoizedState;try{e.componentDidUpdate(c,a,e.__reactInternalSnapshotBeforeUpdate)}catch(_){Ct(i,i.return,_)}}r&64&&qu(i),r&512&&ei(i,i.return);break;case 3:if(da(e,i),r&64&&(e=i.updateQueue,e!==null)){if(a=null,i.child!==null)switch(i.child.tag){case 27:case 5:a=li(i.child.stateNode);break;case 1:a=i.child.stateNode}try{wo(e,a)}catch(_){Ct(i,i.return,_)}}break;case 27:Vt&&a===null&&r&4&&Qu(i);case 26:case 5:da(e,i),a===null&&r&4&&Pu(i),r&512&&ei(i,i.return);break;case 12:da(e,i);break;case 13:da(e,i),r&4&&Fu(e,i),r&64&&(e=i.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(i=of.bind(null,i),rd(e,i))));break;case 22:if(r=i.memoizedState!==null||$e,!r){a=a!==null&&a.memoizedState!==null||Yt,c=$e;var d=Yt;$e=r,(Yt=a)&&!d?ga(e,i,(i.subtreeFlags&8772)!==0):da(e,i),$e=c,Yt=d}break;case 30:break;default:da(e,i)}}function Ju(e){var a=e.alternate;a!==null&&(e.alternate=null,Ju(a)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(a=e.stateNode,a!==null&&zf(a)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function De(e,a,i){for(i=i.child;i!==null;)Us(e,a,i),i=i.sibling}function Us(e,a,i){if(ye&&typeof ye.onCommitFiberUnmount=="function")try{ye.onCommitFiberUnmount(oi,i)}catch{}switch(i.tag){case 26:if(Ge){Yt||Le(i,a),De(e,a,i),i.memoizedState?Jc(i.memoizedState):i.stateNode&&Wc(i.stateNode);break}case 27:if(Vt){Yt||Le(i,a);var r=Pt,c=oe;fn(i.type)&&(Pt=i.stateNode,oe=!1),De(e,a,i),th(i.stateNode),Pt=r,oe=c;break}case 5:Yt||Le(i,a);case 6:if(ne){if(r=Pt,c=oe,Pt=null,De(e,a,i),Pt=r,oe=c,Pt!==null)if(oe)try{If(Pt,i.stateNode)}catch(d){Ct(i,a,d)}else try{Wf(Pt,i.stateNode)}catch(d){Ct(i,a,d)}}else De(e,a,i);break;case 18:ne&&Pt!==null&&(oe?Td(Pt,i.stateNode):Cd(Pt,i.stateNode));break;case 4:ne?(r=Pt,c=oe,Pt=i.stateNode.containerInfo,oe=!0,De(e,a,i),Pt=r,oe=c):(_a&&Ku(i.stateNode,i,jc()),De(e,a,i));break;case 0:case 11:case 14:case 15:Yt||fa(2,i,a),Yt||fa(4,i,a),De(e,a,i);break;case 1:Yt||(Le(i,a),r=i.stateNode,typeof r.componentWillUnmount=="function"&&Xu(i,a,r)),De(e,a,i);break;case 21:De(e,a,i);break;case 22:Yt=(r=Yt)||i.memoizedState!==null,De(e,a,i),Yt=r;break;default:De(e,a,i)}}function Fu(e,a){if(Ee&&a.memoizedState===null&&(e=a.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Ed(e)}catch(i){Ct(a,a.return,i)}}function ef(e){switch(e.tag){case 13:case 19:var a=e.stateNode;return a===null&&(a=e.stateNode=new hh),a;case 22:return e=e.stateNode,a=e._retryCache,a===null&&(a=e._retryCache=new hh),a;default:throw Error(s(435,e.tag))}}function Ls(e,a){var i=ef(e);a.forEach(function(r){var c=uf.bind(null,e,r);i.has(r)||(i.add(r),r.then(c,c))})}function ie(e,a){var i=a.deletions;if(i!==null)for(var r=0;r<i.length;r++){var c=i[r],d=e,_=a;if(ne){var x=_;t:for(;x!==null;){switch(x.tag){case 27:if(Vt){if(fn(x.type)){Pt=x.stateNode,oe=!1;break t}break}case 5:Pt=x.stateNode,oe=!1;break t;case 3:case 4:Pt=x.stateNode.containerInfo,oe=!0;break t}x=x.return}if(Pt===null)throw Error(s(160));Us(d,_,c),Pt=null,oe=!1}else Us(d,_,c);d=c.alternate,d!==null&&(d.return=null),c.return=null}if(a.subtreeFlags&13878)for(a=a.child;a!==null;)Wu(a,e),a=a.sibling}function Wu(e,a){var i=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:ie(a,e),re(e),r&4&&(fa(3,e,e.return),ti(3,e),fa(5,e,e.return));break;case 1:ie(a,e),re(e),r&512&&(Yt||i===null||Le(i,i.return)),r&64&&$e&&(e=e.updateQueue,e!==null&&(r=e.callbacks,r!==null&&(i=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=i===null?r:i.concat(r))));break;case 26:if(Ge){var c=He;if(ie(a,e),re(e),r&512&&(Yt||i===null||Le(i,i.return)),r&4){r=i!==null?i.memoizedState:null;var d=e.memoizedState;i===null?d===null?e.stateNode===null?e.stateNode=Rd(c,e.type,e.memoizedProps,e):Fc(c,e.type,e.stateNode):e.stateNode=Zc(c,d,e.memoizedProps):r!==d?(r===null?i.stateNode!==null&&Wc(i.stateNode):Jc(r),d===null?Fc(c,e.type,e.stateNode):Zc(c,d,e.memoizedProps)):d===null&&e.stateNode!==null&&ws(e,e.memoizedProps,i.memoizedProps)}break}case 27:if(Vt){ie(a,e),re(e),r&512&&(Yt||i===null||Le(i,i.return)),i!==null&&r&4&&ws(e,e.memoizedProps,i.memoizedProps);break}case 5:if(ie(a,e),re(e),r&512&&(Yt||i===null||Le(i,i.return)),ne){if(e.flags&32){c=e.stateNode;try{Lc(c)}catch(V){Ct(e,e.return,V)}}r&4&&e.stateNode!=null&&(c=e.memoizedProps,ws(e,c,i!==null?i.memoizedProps:c)),r&1024&&(Cr=!0)}break;case 6:if(ie(a,e),re(e),r&4&&ne){if(e.stateNode===null)throw Error(s(162));r=e.memoizedProps,i=i!==null?i.memoizedProps:r,c=e.stateNode;try{Kf(c,i,r)}catch(V){Ct(e,e.return,V)}}break;case 3:if(Ge?(Od(),c=He,He=ur(a.containerInfo),ie(a,e),He=c):ie(a,e),re(e),r&4){if(ne&&Ee&&i!==null&&i.memoizedState.isDehydrated)try{xd(a.containerInfo)}catch(V){Ct(e,e.return,V)}if(_a){r=a.containerInfo,i=a.pendingChildren;try{Yc(r,i)}catch(V){Ct(e,e.return,V)}}}Cr&&(Cr=!1,Iu(e));break;case 4:Ge?(i=He,He=ur(e.stateNode.containerInfo),ie(a,e),re(e),He=i):(ie(a,e),re(e)),r&4&&_a&&Ku(e.stateNode,e,e.stateNode.pendingChildren);break;case 12:ie(a,e),re(e);break;case 13:ie(a,e),re(e),e.child.flags&8192&&e.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(Rr=we()),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,Ls(e,r)));break;case 22:c=e.memoizedState!==null;var _=i!==null&&i.memoizedState!==null,x=$e,D=Yt;if($e=x||c,Yt=D||_,ie(a,e),Yt=D,$e=x,re(e),r&8192&&(a=e.stateNode,a._visibility=c?a._visibility&-2:a._visibility|1,c&&(i===null||_||$e||Yt||Ua(e)),ne)){t:if(i=null,ne)for(a=e;;){if(a.tag===5||Ge&&a.tag===26){if(i===null){_=i=a;try{d=_.stateNode,c?$f(d):ed(_.stateNode,_.memoizedProps)}catch(V){Ct(_,_.return,V)}}}else if(a.tag===6){if(i===null){_=a;try{var U=_.stateNode;c?td(U):ad(U,_.memoizedProps)}catch(V){Ct(_,_.return,V)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===e)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===e)break t;for(;a.sibling===null;){if(a.return===null||a.return===e)break t;i===a&&(i=null),a=a.return}i===a&&(i=null),a.sibling.return=a.return,a=a.sibling}}r&4&&(r=e.updateQueue,r!==null&&(i=r.retryQueue,i!==null&&(r.retryQueue=null,Ls(e,i))));break;case 19:ie(a,e),re(e),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,Ls(e,r)));break;case 30:break;case 21:break;default:ie(a,e),re(e)}}function re(e){var a=e.flags;if(a&2){try{if(ne){for(var i,r=e.return;r!==null;){if(Vu(r)){i=r;break}r=r.return}if(i==null)throw Error(s(160));switch(i.tag){case 27:if(Vt){var c=i.stateNode,d=Hs(e);tl(e,d,c);break}case 5:var _=i.stateNode;i.flags&32&&(Lc(_),i.flags&=-33);var x=Hs(e);tl(e,x,_);break;case 3:case 4:var D=i.stateNode.containerInfo,U=Hs(e);Bs(e,U,D);break;default:throw Error(s(161))}}}catch(V){Ct(e,e.return,V)}e.flags&=-3}a&4096&&(e.flags&=-4097)}function Iu(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var a=e;Iu(a),a.tag===5&&a.flags&1024&&Hf(a.stateNode),e=e.sibling}}function da(e,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Zu(e,a.alternate,a),a=a.sibling}function Ua(e){for(e=e.child;e!==null;){var a=e;switch(a.tag){case 0:case 11:case 14:case 15:fa(4,a,a.return),Ua(a);break;case 1:Le(a,a.return);var i=a.stateNode;typeof i.componentWillUnmount=="function"&&Xu(a,a.return,i),Ua(a);break;case 27:Vt&&th(a.stateNode);case 26:case 5:Le(a,a.return),Ua(a);break;case 22:a.memoizedState===null&&Ua(a);break;case 30:Ua(a);break;default:Ua(a)}e=e.sibling}}function ga(e,a,i){for(i=i&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var r=a.alternate,c=e,d=a,_=d.flags;switch(d.tag){case 0:case 11:case 15:ga(c,d,i),ti(4,d);break;case 1:if(ga(c,d,i),r=d,c=r.stateNode,typeof c.componentDidMount=="function")try{c.componentDidMount()}catch(U){Ct(r,r.return,U)}if(r=d,c=r.updateQueue,c!==null){var x=r.stateNode;try{var D=c.shared.hiddenCallbacks;if(D!==null)for(c.shared.hiddenCallbacks=null,c=0;c<D.length;c++)Go(D[c],x)}catch(U){Ct(r,r.return,U)}}i&&_&64&&qu(d),ei(d,d.return);break;case 27:Vt&&Qu(d);case 26:case 5:ga(c,d,i),i&&r===null&&_&4&&Pu(d),ei(d,d.return);break;case 12:ga(c,d,i);break;case 13:ga(c,d,i),i&&_&4&&Fu(c,d);break;case 22:d.memoizedState===null&&ga(c,d,i),ei(d,d.return);break;case 30:break;default:ga(c,d,i)}a=a.sibling}}function js(e,a){var i=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),e=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(e=a.memoizedState.cachePool.pool),e!==i&&(e!=null&&e.refCount++,i!=null&&Vn(i))}function ks(e,a){e=null,a.alternate!==null&&(e=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==e&&(a.refCount++,e!=null&&Vn(e))}function je(e,a,i,r){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)$u(e,a,i,r),a=a.sibling}function $u(e,a,i,r){var c=a.flags;switch(a.tag){case 0:case 11:case 15:je(e,a,i,r),c&2048&&ti(9,a);break;case 1:je(e,a,i,r);break;case 3:je(e,a,i,r),c&2048&&(e=null,a.alternate!==null&&(e=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==e&&(a.refCount++,e!=null&&Vn(e)));break;case 12:if(c&2048){je(e,a,i,r),e=a.stateNode;try{var d=a.memoizedProps,_=d.id,x=d.onPostCommit;typeof x=="function"&&x(_,a.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(D){Ct(a,a.return,D)}}else je(e,a,i,r);break;case 13:je(e,a,i,r);break;case 23:break;case 22:d=a.stateNode,_=a.alternate,a.memoizedState!==null?d._visibility&2?je(e,a,i,r):ai(e,a):d._visibility&2?je(e,a,i,r):(d._visibility|=2,sn(e,a,i,r,(a.subtreeFlags&10256)!==0)),c&2048&&js(_,a);break;case 24:je(e,a,i,r),c&2048&&ks(a.alternate,a);break;default:je(e,a,i,r)}}function sn(e,a,i,r,c){for(c=c&&(a.subtreeFlags&10256)!==0,a=a.child;a!==null;){var d=e,_=a,x=i,D=r,U=_.flags;switch(_.tag){case 0:case 11:case 15:sn(d,_,x,D,c),ti(8,_);break;case 23:break;case 22:var V=_.stateNode;_.memoizedState!==null?V._visibility&2?sn(d,_,x,D,c):ai(d,_):(V._visibility|=2,sn(d,_,x,D,c)),c&&U&2048&&js(_.alternate,_);break;case 24:sn(d,_,x,D,c),c&&U&2048&&ks(_.alternate,_);break;default:sn(d,_,x,D,c)}a=a.sibling}}function ai(e,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var i=e,r=a,c=r.flags;switch(r.tag){case 22:ai(i,r),c&2048&&js(r.alternate,r);break;case 24:ai(i,r),c&2048&&ks(r.alternate,r);break;default:ai(i,r)}a=a.sibling}}function La(e){if(e.subtreeFlags&Rn)for(e=e.child;e!==null;)tc(e),e=e.sibling}function tc(e){switch(e.tag){case 26:La(e),e.flags&Rn&&(e.memoizedState!==null?Dd(He,e.memoizedState,e.memoizedProps):Uc(e.type,e.memoizedProps));break;case 5:La(e),e.flags&Rn&&Uc(e.type,e.memoizedProps);break;case 3:case 4:if(Ge){var a=He;He=ur(e.stateNode.containerInfo),La(e),He=a}else La(e);break;case 22:e.memoizedState===null&&(a=e.alternate,a!==null&&a.memoizedState!==null?(a=Rn,Rn=16777216,La(e),Rn=a):La(e));break;default:La(e)}}function ec(e){var a=e.alternate;if(a!==null&&(e=a.child,e!==null)){a.child=null;do a=e.sibling,e.sibling=null,e=a;while(e!==null)}}function ni(e){var a=e.deletions;if((e.flags&16)!==0){if(a!==null)for(var i=0;i<a.length;i++){var r=a[i];Wt=r,nc(r,e)}ec(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)ac(e),e=e.sibling}function ac(e){switch(e.tag){case 0:case 11:case 15:ni(e),e.flags&2048&&fa(9,e,e.return);break;case 3:ni(e);break;case 12:ni(e);break;case 22:var a=e.stateNode;e.memoizedState!==null&&a._visibility&2&&(e.return===null||e.return.tag!==13)?(a._visibility&=-3,el(e)):ni(e);break;default:ni(e)}}function el(e){var a=e.deletions;if((e.flags&16)!==0){if(a!==null)for(var i=0;i<a.length;i++){var r=a[i];Wt=r,nc(r,e)}ec(e)}for(e=e.child;e!==null;){switch(a=e,a.tag){case 0:case 11:case 15:fa(8,a,a.return),el(a);break;case 22:i=a.stateNode,i._visibility&2&&(i._visibility&=-3,el(a));break;default:el(a)}e=e.sibling}}function nc(e,a){for(;Wt!==null;){var i=Wt;switch(i.tag){case 0:case 11:case 15:fa(8,i,a);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var r=i.memoizedState.cachePool.pool;r!=null&&r.refCount++}break;case 24:Vn(i.memoizedState.cache)}if(r=i.child,r!==null)r.return=i,Wt=r;else t:for(i=e;Wt!==null;){r=Wt;var c=r.sibling,d=r.return;if(Ju(r),r===i){Wt=null;break t}if(c!==null){c.return=d,Wt=c;break t}Wt=d}}}function Ys(e){var a=Mf(e);if(a!=null){if(typeof a.memoizedProps["data-testname"]!="string")throw Error(s(364));return a}if(e=Lf(e),e===null)throw Error(s(362));return e.stateNode.current}function qs(e,a){var i=e.tag;switch(a.$$typeof){case xl:if(e.type===a.value)return!0;break;case El:t:{for(a=a.value,e=[e,0],i=0;i<e.length;){var r=e[i++],c=r.tag,d=e[i++],_=a[d];if(c!==5&&c!==26&&c!==27||!ri(r)){for(;_!=null&&qs(r,_);)d++,_=a[d];if(d===a.length){a=!0;break t}else for(r=r.child;r!==null;)e.push(r,d),r=r.sibling}}a=!1}return a;case Cl:if((i===5||i===26||i===27)&&Yf(e.stateNode,a.value))return!0;break;case Al:if((i===5||i===6||i===26||i===27)&&(e=kf(e),e!==null&&0<=e.indexOf(a.value)))return!0;break;case Tl:if((i===5||i===26||i===27)&&(e=e.memoizedProps["data-testname"],typeof e=="string"&&e.toLowerCase()===a.value.toLowerCase()))return!0;break;default:throw Error(s(365))}return!1}function Xs(e){switch(e.$$typeof){case xl:return"<"+(v(e.value)||"Unknown")+">";case El:return":has("+(Xs(e)||"")+")";case Cl:return'[role="'+e.value+'"]';case Al:return'"'+e.value+'"';case Tl:return'[data-testname="'+e.value+'"]';default:throw Error(s(365))}}function ic(e,a){var i=[];e=[e,0];for(var r=0;r<e.length;){var c=e[r++],d=c.tag,_=e[r++],x=a[_];if(d!==5&&d!==26&&d!==27||!ri(c)){for(;x!=null&&qs(c,x);)_++,x=a[_];if(_===a.length)i.push(c);else for(c=c.child;c!==null;)e.push(c,_),c=c.sibling}}return i}function Ps(e,a){if(!si)throw Error(s(363));e=Ys(e),e=ic(e,a),a=[],e=Array.from(e);for(var i=0;i<e.length;){var r=e[i++],c=r.tag;if(c===5||c===26||c===27)ri(r)||a.push(r.stateNode);else for(r=r.child;r!==null;)e.push(r),r=r.sibling}return a}function de(){if((pt&2)!==0&&_t!==0)return _t&-_t;if(ot.T!==null){var e=vn;return e!==0?e:$l()}return Nf()}function lc(){Re===0&&(Re=(_t&536870912)===0||bt?H():536870912);var e=Me.current;return e!==null&&(e.flags|=32),Re}function ge(e,a,i){(e===Ot&&(Tt===2||Tt===9)||e.cancelPendingCommit!==null)&&(rn(e,0),ma(e,_t,Re,!1)),J(e,i),((pt&2)===0||e!==Ot)&&(e===Ot&&((pt&2)===0&&(Qa|=i),jt===4&&ma(e,_t,Re,!1)),Ue(e))}function sc(e,a,i){if((pt&6)!==0)throw Error(s(327));var r=!i&&(a&124)===0&&(a&e.expiredLanes)===0||z(e,a),c=r?lf(e,a):Qs(e,a,!0),d=r;do{if(c===0){Nn&&!r&&ma(e,a,0,!1);break}else{if(i=e.current.alternate,d&&!af(i)){c=Qs(e,a,!1),d=!1;continue}if(c===2){if(d=a,e.errorRecoveryDisabledLanes&d)var _=0;else _=e.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){a=_;t:{var x=e;c=mi;var D=Ee&&x.current.memoizedState.isDehydrated;if(D&&(rn(x,_).flags|=256),_=Qs(x,_,!1),_!==2){if(Tr&&!D){x.errorRecoveryDisabledLanes|=d,Qa|=d,c=4;break t}d=ue,ue=c,d!==null&&(ue===null?ue=d:ue.push.apply(ue,d))}c=_}if(d=!1,c!==2)continue}}if(c===1){rn(e,0),ma(e,a,0,!0);break}t:{switch(r=e,d=c,d){case 0:case 1:throw Error(s(345));case 4:if((a&4194048)!==a)break;case 6:ma(r,a,Re,!xa);break t;case 2:ue=null;break;case 3:case 5:break;default:throw Error(s(329))}if((a&62914560)===a&&(c=Rr+300-we(),10<c)){if(ma(r,a,Re,!xa),G(r,0,!0)!==0)break t;r.timeoutHandle=Tf(rc.bind(null,r,i,ue,Ml,Mr,a,Re,Qa,On,xa,d,2,-0,0),c);break t}rc(r,i,ue,Ml,Mr,a,Re,Qa,On,xa,d,0,-0,0)}}break}while(!0);Ue(e)}function rc(e,a,i,r,c,d,_,x,D,U,V,I,tt,ft){if(e.timeoutHandle=ka,I=a.subtreeFlags,(I&8192||(I&16785408)===16785408)&&(Gf(),tc(a),I=wf(),I!==null)){e.cancelPendingCommit=I(pc.bind(null,e,a,d,i,r,c,_,x,D,V,1,tt,ft)),ma(e,d,_,!U);return}pc(e,a,d,i,r,c,_,x,D)}function af(e){for(var a=e;;){var i=a.tag;if((i===0||i===11||i===15)&&a.flags&16384&&(i=a.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var r=0;r<i.length;r++){var c=i[r],d=c.getSnapshot;c=c.value;try{if(!_e(d(),c))return!1}catch{return!1}}if(i=a.child,a.subtreeFlags&16384&&i!==null)i.return=a,a=i;else{if(a===e)break;for(;a.sibling===null;){if(a.return===null||a.return===e)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function ma(e,a,i,r){a&=~Ar,a&=~Qa,e.suspendedLanes|=a,e.pingedLanes&=~a,r&&(e.warmLanes|=a),r=e.expirationTimes;for(var c=a;0<c;){var d=31-pe(c),_=1<<d;r[d]=-1,c&=~_}i!==0&&nt(e,i,a)}function oc(){return(pt&6)===0?(an(0),!1):!0}function Vs(){if(mt!==null){if(Tt===0)var e=mt.return;else e=mt,Ie=Pa=null,hs(e),An=null,di=0,e=mt;for(;e!==null;)Yu(e.alternate,e),e=e.return;mt=null}}function rn(e,a){var i=e.timeoutHandle;i!==ka&&(e.timeoutHandle=ka,Af(i)),i=e.cancelPendingCommit,i!==null&&(e.cancelPendingCommit=null,i()),Vs(),Ot=e,mt=i=Qe(e.current,null),_t=a,Tt=0,ve=null,xa=!1,Nn=z(e,a),Tr=!1,On=Re=Ar=Qa=Ea=jt=0,ue=mi=null,Mr=!1,(a&8)!==0&&(a|=a&32);var r=e.entangledLanes;if(r!==0)for(e=e.entanglements,r&=a;0<r;){var c=31-pe(r),d=1<<c;a|=e[c],r&=~d}return ta=a,ji(),i}function uc(e,a){dt=null,ot.H=bl,a===hi||a===pl?(a=Oo(),Tt=3):a===vr?(a=Oo(),Tt=4):Tt=a===ch?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,ve=a,mt===null&&(jt=1,Fi(e,T(a,e.current)))}function cc(){var e=Me.current;return e===null?!0:(_t&4194048)===_t?Ye===null:(_t&62914560)===_t||(_t&536870912)!==0?e===Ye:!1}function hc(){var e=ot.H;return ot.H=bl,e===null?bl:e}function fc(){var e=ot.A;return ot.A=Zd,e}function Ks(){jt=4,xa||(_t&4194048)!==_t&&Me.current!==null||(Nn=!0),(Ea&134217727)===0&&(Qa&134217727)===0||Ot===null||ma(Ot,_t,Re,!1)}function Qs(e,a,i){var r=pt;pt|=2;var c=hc(),d=fc();(Ot!==e||_t!==a)&&(Ml=null,rn(e,a)),a=!1;var _=jt;t:do try{if(Tt!==0&&mt!==null){var x=mt,D=ve;switch(Tt){case 8:Vs(),_=6;break t;case 3:case 2:case 9:case 6:Me.current===null&&(a=!0);var U=Tt;if(Tt=0,ve=null,on(e,x,D,U),i&&Nn){_=0;break t}break;default:U=Tt,Tt=0,ve=null,on(e,x,D,U)}}nf(),_=jt;break}catch(V){uc(e,V)}while(!0);return a&&e.shellSuspendCounter++,Ie=Pa=null,pt=r,ot.H=c,ot.A=d,mt===null&&(Ot=null,_t=0,ji()),_}function nf(){for(;mt!==null;)dc(mt)}function lf(e,a){var i=pt;pt|=2;var r=hc(),c=fc();Ot!==e||_t!==a?(Ml=null,pi=we()+500,rn(e,a)):Nn=z(e,a);t:do try{if(Tt!==0&&mt!==null){a=mt;var d=ve;e:switch(Tt){case 1:Tt=0,ve=null,on(e,a,d,1);break;case 2:case 9:if(Ro(d)){Tt=0,ve=null,gc(a);break}a=function(){Tt!==2&&Tt!==9||Ot!==e||(Tt=7),Ue(e)},d.then(a,a);break t;case 3:Tt=7;break t;case 4:Tt=5;break t;case 7:Ro(d)?(Tt=0,ve=null,gc(a)):(Tt=0,ve=null,on(e,a,d,7));break;case 5:var _=null;switch(mt.tag){case 26:_=mt.memoizedState;case 5:case 27:var x=mt,D=x.type,U=x.pendingProps;if(_?Ic(_):Bc(D,U)){Tt=0,ve=null;var V=x.sibling;if(V!==null)mt=V;else{var I=x.return;I!==null?(mt=I,al(I)):mt=null}break e}}Tt=0,ve=null,on(e,a,d,5);break;case 6:Tt=0,ve=null,on(e,a,d,6);break;case 8:Vs(),jt=6;break t;default:throw Error(s(462))}}sf();break}catch(tt){uc(e,tt)}while(!0);return Ie=Pa=null,ot.H=r,ot.A=c,pt=i,mt!==null?0:(Ot=null,_t=0,ji(),jt)}function sf(){for(;mt!==null&&!Bd();)dc(mt)}function dc(e){var a=Bu(e.alternate,e,ta);e.memoizedProps=e.pendingProps,a===null?al(e):mt=a}function gc(e){var a=e,i=a.alternate;switch(a.tag){case 15:case 0:a=Ou(i,a,a.pendingProps,a.type,void 0,_t);break;case 11:a=Ou(i,a,a.pendingProps,a.type.render,a.ref,_t);break;case 5:hs(a);default:Yu(i,a),a=mt=Cc(a,ta),a=Bu(i,a,ta)}e.memoizedProps=e.pendingProps,a===null?al(e):mt=a}function on(e,a,i,r){Ie=Pa=null,hs(a),An=null,di=0;var c=a.return;try{if(F0(e,c,a,i,_t)){jt=1,Fi(e,T(i,e.current)),mt=null;return}}catch(d){if(c!==null)throw mt=c,d;jt=1,Fi(e,T(i,e.current)),mt=null;return}a.flags&32768?(bt||r===1?e=!0:Nn||(_t&536870912)!==0?e=!1:(xa=e=!0,(r===2||r===9||r===3||r===6)&&(r=Me.current,r!==null&&r.tag===13&&(r.flags|=16384))),mc(a,e)):al(a)}function al(e){var a=e;do{if((a.flags&32768)!==0){mc(a,xa);return}e=a.return;var i=I0(a.alternate,a,ta);if(i!==null){mt=i;return}if(a=a.sibling,a!==null){mt=a;return}mt=a=e}while(a!==null);jt===0&&(jt=5)}function mc(e,a){do{var i=$0(e.alternate,e);if(i!==null){i.flags&=32767,mt=i;return}if(i=e.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!a&&(e=e.sibling,e!==null)){mt=e;return}mt=e=i}while(e!==null);jt=6,mt=null}function pc(e,a,i,r,c,d,_,x,D){e.cancelPendingCommit=null;do ii();while(ee!==0);if((pt&6)!==0)throw Error(s(327));if(a!==null){if(a===e.current)throw Error(s(177));if(d=a.lanes|a.childLanes,d|=Sr,W(e,i,d,_,x,D),e===Ot&&(mt=Ot=null,_t=0),zn=a,Ta=e,Dn=i,Nr=d,Or=c,fh=r,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,cf(fr,function(){return bc(),null})):(e.callbackNode=null,e.callbackPriority=0),r=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||r){r=ot.T,ot.T=null,c=Je(),Jt(2),_=pt,pt|=4;try{tf(e,a,i)}finally{pt=_,Jt(c),ot.T=r}}ee=1,yc(),_c(),vc()}}function yc(){if(ee===1){ee=0;var e=Ta,a=zn,i=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||i){i=ot.T,ot.T=null;var r=Je();Jt(2);var c=pt;pt|=4;try{Wu(a,e),Ef(e.containerInfo)}finally{pt=c,Jt(r),ot.T=i}}e.current=a,ee=2}}function _c(){if(ee===2){ee=0;var e=Ta,a=zn,i=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||i){i=ot.T,ot.T=null;var r=Je();Jt(2);var c=pt;pt|=4;try{Zu(e,a.alternate,a)}finally{pt=c,Jt(r),ot.T=i}}ee=3}}function vc(){if(ee===4||ee===3){ee=0,Ud();var e=Ta,a=zn,i=Dn,r=fh;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?ee=5:(ee=0,zn=Ta=null,Sc(e,e.pendingLanes));var c=e.pendingLanes;if(c===0&&(Ca=null),$(i),a=a.stateNode,ye&&typeof ye.onCommitFiberRoot=="function")try{ye.onCommitFiberRoot(oi,a,void 0,(a.current.flags&128)===128)}catch{}if(r!==null){a=ot.T,c=Je(),Jt(2),ot.T=null;try{for(var d=e.onRecoverableError,_=0;_<r.length;_++){var x=r[_];d(x.value,{componentStack:x.stack})}}finally{ot.T=a,Jt(c)}}(Dn&3)!==0&&ii(),Ue(e),c=e.pendingLanes,(i&4194090)!==0&&(c&42)!==0?e===zr?yi++:(yi=0,zr=e):yi=0,an(0)}}function Sc(e,a){(e.pooledCacheLanes&=a)===0&&(a=e.pooledCache,a!=null&&(e.pooledCache=null,Vn(a)))}function ii(e){return yc(),_c(),vc(),bc()}function bc(){if(ee!==5)return!1;var e=Ta,a=Nr;Nr=0;var i=$(Dn),r=32>i?32:i;i=ot.T;var c=Je();try{Jt(r),ot.T=null,r=Or,Or=null;var d=Ta,_=Dn;if(ee=0,zn=Ta=null,Dn=0,(pt&6)!==0)throw Error(s(331));var x=pt;if(pt|=4,ac(d.current),$u(d,d.current,_,r),pt=x,an(0,!1),ye&&typeof ye.onPostCommitFiberRoot=="function")try{ye.onPostCommitFiberRoot(oi,d)}catch{}return!0}finally{Jt(c),ot.T=i,Sc(e,a)}}function xc(e,a,i){a=T(i,a),a=Es(e.stateNode,a,2),e=ua(e,a,2),e!==null&&(J(e,2),Ue(e))}function Ct(e,a,i){if(e.tag===3)xc(e,e,i);else for(;a!==null;){if(a.tag===3){xc(a,e,i);break}else if(a.tag===1){var r=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ca===null||!Ca.has(r))){e=T(i,e),i=Eu(2),r=ua(a,i,2),r!==null&&(Cu(i,r,a,e),J(r,2),Ue(r));break}}a=a.return}}function Zs(e,a,i){var r=e.pingCache;if(r===null){r=e.pingCache=new Jd;var c=new Set;r.set(a,c)}else c=r.get(a),c===void 0&&(c=new Set,r.set(a,c));c.has(i)||(Tr=!0,c.add(i),e=rf.bind(null,e,a,i),a.then(e,e))}function rf(e,a,i){var r=e.pingCache;r!==null&&r.delete(a),e.pingedLanes|=e.suspendedLanes&i,e.warmLanes&=~i,Ot===e&&(_t&i)===i&&(jt===4||jt===3&&(_t&62914560)===_t&&300>we()-Rr?(pt&2)===0&&rn(e,0):Ar|=i,On===_t&&(On=0)),Ue(e)}function Ec(e,a){a===0&&(a=Z()),e=nn(e,a),e!==null&&(J(e,a),Ue(e))}function of(e){var a=e.memoizedState,i=0;a!==null&&(i=a.retryLane),Ec(e,i)}function uf(e,a){var i=0;switch(e.tag){case 13:var r=e.stateNode,c=e.memoizedState;c!==null&&(i=c.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(s(314))}r!==null&&r.delete(a),Ec(e,i)}function cf(e,a){return ul(e,a)}function hf(e,a,i,r){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Js(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Qe(e,a){var i=e.alternate;return i===null?(i=n(e.tag,a,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=a,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&65011712,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,a=e.dependencies,i.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i.refCleanup=e.refCleanup,i}function Cc(e,a){e.flags&=65011714;var i=e.alternate;return i===null?(e.childLanes=0,e.lanes=a,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=i.childLanes,e.lanes=i.lanes,e.child=i.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=i.memoizedProps,e.memoizedState=i.memoizedState,e.updateQueue=i.updateQueue,e.type=i.type,a=i.dependencies,e.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),e}function nl(e,a,i,r,c,d){var _=0;if(r=e,typeof e=="function")Js(e)&&(_=1);else if(typeof e=="string")_=Ge&&Vt?Kc(e,i,te.current)?26:eh(e)?27:5:Ge?Kc(e,i,te.current)?26:5:Vt&&eh(e)?27:5;else t:switch(e){case lr:return e=n(31,i,a,c),e.elementType=lr,e.lanes=d,e;case cn:return ja(i.children,c,d,a);case Oc:_=8,c|=24;break;case tr:return e=n(12,i,a,c|2),e.elementType=tr,e.lanes=d,e;case ar:return e=n(13,i,a,c),e.elementType=ar,e.lanes=d,e;case nr:return e=n(19,i,a,c),e.elementType=nr,e.lanes=d,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case mf:case pa:_=10;break t;case zc:_=9;break t;case er:_=11;break t;case ir:_=14;break t;case ya:_=16,r=null;break t}_=29,i=Error(s(130,e===null?"null":typeof e,"")),r=null}return a=n(_,i,a,c),a.elementType=e,a.type=r,a.lanes=d,a}function ja(e,a,i,r){return e=n(7,e,r,a),e.lanes=i,e}function Fs(e,a,i){return e=n(6,e,null,a),e.lanes=i,e}function Ws(e,a,i){return a=n(4,e.children!==null?e.children:[],e.key,a),a.lanes=i,a.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},a}function ff(e,a,i,r,c,d,_,x){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=ka,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=X(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=X(0),this.hiddenUpdates=X(null),this.identifierPrefix=r,this.onUncaughtError=c,this.onCaughtError=d,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=x,this.incompleteTransitions=new Map}function Tc(e,a,i,r,c,d,_,x,D,U,V,I){return e=new ff(e,a,i,_,x,D,U,I),a=1,d===!0&&(a|=24),d=n(3,null,null,a),e.current=d,d.stateNode=e,a=Il(),a.refCount++,e.pooledCache=a,a.refCount++,d.memoizedState={element:r,isDehydrated:i,cache:a},as(d),e}function Ac(e){return e?(e=gn,e):gn}function Mc(e){var a=e._reactInternals;if(a===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=f(a),e=e!==null?g(e):null,e===null?null:li(e.stateNode)}function Rc(e,a,i,r,c,d){c=Ac(c),r.context===null?r.context=c:r.pendingContext=c,r=oa(a),r.payload={element:i},d=d===void 0?null:d,d!==null&&(r.callback=d),i=ua(e,r,a),i!==null&&(ge(i,e,a),Kn(i,e,a))}function Nc(e,a){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<a?i:a}}function Is(e,a){Nc(e,a),(e=e.alternate)&&Nc(e,a)}var gt={},df=n2(),me=_4(),$s=Object.assign,gf=Symbol.for("react.element"),il=Symbol.for("react.transitional.element"),un=Symbol.for("react.portal"),cn=Symbol.for("react.fragment"),Oc=Symbol.for("react.strict_mode"),tr=Symbol.for("react.profiler"),mf=Symbol.for("react.provider"),zc=Symbol.for("react.consumer"),pa=Symbol.for("react.context"),er=Symbol.for("react.forward_ref"),ar=Symbol.for("react.suspense"),nr=Symbol.for("react.suspense_list"),ir=Symbol.for("react.memo"),ya=Symbol.for("react.lazy"),lr=Symbol.for("react.activity"),pf=Symbol.for("react.memo_cache_sentinel"),Dc=Symbol.iterator,yf=Symbol.for("react.client.reference"),ll=Array.isArray,ot=df.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,_f=t.rendererVersion,vf=t.rendererPackageName,Gc=t.extraDevToolsConfig,li=t.getPublicInstance,Sf=t.getRootHostContext,bf=t.getChildHostContext,xf=t.prepareForCommit,Ef=t.resetAfterCommit,Cf=t.createInstance;t.cloneMutableInstance;var sr=t.appendInitialChild,wc=t.finalizeInitialChildren,sl=t.shouldSetTextContent,Hc=t.createTextInstance;t.cloneMutableTextInstance;var Tf=t.scheduleTimeout,Af=t.cancelTimeout,ka=t.noTimeout,Ze=t.isPrimaryRenderer;t.warnsIfNotActing;var ne=t.supportsMutation,_a=t.supportsPersistence,Ee=t.supportsHydration,Mf=t.getInstanceFromNode;t.beforeActiveInstanceBlur;var Rf=t.preparePortalMount;t.prepareScopeUpdate,t.getInstanceFromScope;var Jt=t.setCurrentUpdatePriority,Je=t.getCurrentUpdatePriority,Nf=t.resolveUpdatePriority;t.trackSchedulerEvent,t.resolveEventType,t.resolveEventTimeStamp;var Of=t.shouldAttemptEagerTransition,zf=t.detachDeletedInstance;t.requestPostPaintCallback;var Df=t.maySuspendCommit,Bc=t.preloadInstance,Gf=t.startSuspendingCommit,Uc=t.suspendInstance;t.suspendOnActiveViewTransition;var wf=t.waitForCommitToBeReady,hn=t.NotPendingTransition,Ya=t.HostTransitionContext,Hf=t.resetFormInstance;t.bindToConsole;var Bf=t.supportsMicrotasks,Uf=t.scheduleMicrotask,si=t.supportsTestSelectors,Lf=t.findFiberRoot,jf=t.getBoundingRect,kf=t.getTextContent,ri=t.isHiddenSubtree,Yf=t.matchAccessibilityRole,qf=t.setFocusIfFocusable,Xf=t.setupIntersectionObserver,Pf=t.appendChild,Vf=t.appendChildToContainer,Kf=t.commitTextUpdate,Qf=t.commitMount,Zf=t.commitUpdate,Jf=t.insertBefore,Ff=t.insertInContainerBefore,Wf=t.removeChild,If=t.removeChildFromContainer,Lc=t.resetTextContent,$f=t.hideInstance,td=t.hideTextInstance,ed=t.unhideInstance,ad=t.unhideTextInstance;t.cancelViewTransitionName,t.cancelRootViewTransitionName,t.restoreRootViewTransitionName,t.cloneRootViewTransitionContainer,t.removeRootViewTransitionClone,t.measureClonedInstance,t.hasInstanceChanged,t.hasInstanceAffectedParent,t.startViewTransition,t.startGestureTransition,t.stopGestureTransition,t.getCurrentGestureOffset,t.subscribeToGestureDirection,t.createViewTransitionInstance;var nd=t.clearContainer;t.createFragmentInstance,t.updateFragmentInstanceFiber,t.commitNewChildToFragmentInstance,t.deleteChildFromFragmentInstance;var id=t.cloneInstance,jc=t.createContainerChildSet,kc=t.appendChildToContainerChildSet,ld=t.finalizeContainerChildren,Yc=t.replaceContainerChildren,qc=t.cloneHiddenInstance,Xc=t.cloneHiddenTextInstance,rr=t.isSuspenseInstancePending,or=t.isSuspenseInstanceFallback,sd=t.getSuspenseInstanceFallbackErrorDetails,rd=t.registerSuspenseInstanceRetry,od=t.canHydrateFormStateMarker,ud=t.isFormStateMarkerMatching,Pc=t.getNextHydratableSibling,cd=t.getNextHydratableSiblingAfterSingleton,hd=t.getFirstHydratableChild,fd=t.getFirstHydratableChildWithinContainer,dd=t.getFirstHydratableChildWithinSuspenseInstance,gd=t.getFirstHydratableChildWithinSingleton,md=t.canHydrateInstance,pd=t.canHydrateTextInstance,yd=t.canHydrateSuspenseInstance,_d=t.hydrateInstance,vd=t.hydrateTextInstance,Sd=t.hydrateSuspenseInstance,bd=t.getNextHydratableInstanceAfterSuspenseInstance,xd=t.commitHydratedContainer,Ed=t.commitHydratedSuspenseInstance,Cd=t.clearSuspenseBoundary,Td=t.clearSuspenseBoundaryFromContainer,Vc=t.shouldDeleteUnhydratedTailInstances;t.diffHydratedPropsForDevWarnings,t.diffHydratedTextForDevWarnings,t.describeHydratableInstanceForDevWarnings;var Ad=t.validateHydratableInstance,Md=t.validateHydratableTextInstance,Ge=t.supportsResources,Kc=t.isHostHoistableType,ur=t.getHoistableRoot,Qc=t.getResource,Zc=t.acquireResource,Jc=t.releaseResource,Rd=t.hydrateHoistable,Fc=t.mountHoistable,Wc=t.unmountHoistable,Nd=t.createHoistableInstance,Od=t.prepareToCommitHoistables,zd=t.mayResourceSuspendCommit,Ic=t.preloadResource,Dd=t.suspendResource,Vt=t.supportsSingletons,$c=t.resolveSingletonInstance,Gd=t.acquireSingletonInstance,th=t.releaseSingletonInstance,eh=t.isHostSingletonType,fn=t.isSingletonScope,cr=[],dn=-1,gn={},pe=Math.clz32?Math.clz32:R,wd=Math.log,Hd=Math.LN2,rl=256,ol=4194304,ul=me.unstable_scheduleCallback,hr=me.unstable_cancelCallback,Bd=me.unstable_shouldYield,Ud=me.unstable_requestPaint,we=me.unstable_now,ah=me.unstable_ImmediatePriority,Ld=me.unstable_UserBlockingPriority,fr=me.unstable_NormalPriority,jd=me.unstable_IdlePriority,kd=me.log,Yd=me.unstable_setDisableYieldValue,oi=null,ye=null,dr,nh,gr=!1,ih=new WeakMap,mn=[],pn=0,cl=null,hl=0,Ce=[],Te=0,qa=null,Fe=1,We="",te=y(null),ui=y(null),va=y(null),fl=y(null),le=null,Kt=null,bt=!1,Xa=null,ke=!1,mr=Error(s(519)),_e=typeof Object.is=="function"?Object.is:Y0,dl=y(null),Pa=null,Ie=null,qd=typeof AbortController<"u"?AbortController:function(){var e=[],a=this.signal={aborted:!1,addEventListener:function(i,r){e.push(r)}};this.abort=function(){a.aborted=!0,e.forEach(function(i){return i()})}},Xd=me.unstable_scheduleCallback,Pd=me.unstable_NormalPriority,Lt={$$typeof:pa,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},gl=null,yn=null,pr=!1,ml=!1,yr=!1,_n=0,ci=null,_r=0,vn=0,Sn=null,lh=ot.S;ot.S=function(e,a){typeof a=="object"&&a!==null&&typeof a.then=="function"&&X0(e,a),lh!==null&&lh(e,a)};var Va=y(null),Vd=Object.prototype.hasOwnProperty,hi=Error(s(460)),vr=Error(s(474)),pl=Error(s(542)),yl={then:function(){}},bn=null,Ae=[],xn=0,Sr=0,Sa=!1,br=!1,En=y(null),_l=y(0),ba=0,dt=null,At=null,Xt=null,vl=!1,Cn=!1,Ka=!1,Sl=0,fi=0,Tn=null,Kd=0,bl={readContext:ae,use:qi,useCallback:kt,useContext:kt,useEffect:kt,useImperativeHandle:kt,useLayoutEffect:kt,useInsertionEffect:kt,useMemo:kt,useReducer:kt,useRef:kt,useState:kt,useDebugValue:kt,useDeferredValue:kt,useTransition:kt,useSyncExternalStore:kt,useId:kt,useHostTransitionStatus:kt,useFormState:kt,useActionState:kt,useOptimistic:kt,useMemoCache:kt,useCacheRefresh:kt},sh={readContext:ae,use:qi,useCallback:function(e,a){return se().memoizedState=[e,a===void 0?null:a],e},useContext:ae,useEffect:eu,useImperativeHandle:function(e,a,i){i=i!=null?i.concat([e]):null,Vi(4194308,4,lu.bind(null,a,e),i)},useLayoutEffect:function(e,a){return Vi(4194308,4,e,a)},useInsertionEffect:function(e,a){Vi(4,2,e,a)},useMemo:function(e,a){var i=se();a=a===void 0?null:a;var r=e();if(Ka){rt(!0);try{e()}finally{rt(!1)}}return i.memoizedState=[r,a],r},useReducer:function(e,a,i){var r=se();if(i!==void 0){var c=i(a);if(Ka){rt(!0);try{i(a)}finally{rt(!1)}}}else c=a;return r.memoizedState=r.baseState=c,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:c},r.queue=e,e=e.dispatch=J0.bind(null,dt,e),[r.memoizedState,e]},useRef:function(e){var a=se();return e={current:e},a.memoizedState=e},useState:function(e){e=ps(e);var a=e.queue,i=gu.bind(null,dt,a);return a.dispatch=i,[e.memoizedState,i]},useDebugValue:_s,useDeferredValue:function(e,a){var i=se();return vs(i,e,a)},useTransition:function(){var e=ps(!1);return e=cu.bind(null,dt,e.queue,!0,!1),se().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,a,i){var r=dt,c=se();if(bt){if(i===void 0)throw Error(s(407));i=i()}else{if(i=a(),Ot===null)throw Error(s(349));(_t&124)!==0||jo(r,a,i)}c.memoizedState=i;var d={value:i,getSnapshot:a};return c.queue=d,eu(Yo.bind(null,r,d,e),[e]),r.flags|=2048,ln(9,Pi(),ko.bind(null,r,d,i,a),null),i},useId:function(){var e=se(),a=Ot.identifierPrefix;if(bt){var i=We,r=Fe;i=(r&~(1<<32-pe(r)-1)).toString(32)+i,a="«"+a+"R"+i,i=Sl++,0<i&&(a+="H"+i.toString(32)),a+="»"}else i=Kd++,a="«"+a+"r"+i.toString(32)+"»";return e.memoizedState=a},useHostTransitionStatus:Ss,useFormState:Fo,useActionState:Fo,useOptimistic:function(e){var a=se();a.memoizedState=a.baseState=e;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=i,a=bs.bind(null,dt,!0,i),i.dispatch=a,[e,a]},useMemoCache:ds,useCacheRefresh:function(){return se().memoizedState=Z0.bind(null,dt)}},rh={readContext:ae,use:qi,useCallback:ru,useContext:ae,useEffect:au,useImperativeHandle:su,useInsertionEffect:nu,useLayoutEffect:iu,useMemo:ou,useReducer:Xi,useRef:tu,useState:function(){return Xi(Pe)},useDebugValue:_s,useDeferredValue:function(e,a){var i=qt();return uu(i,At.memoizedState,e,a)},useTransition:function(){var e=Xi(Pe)[0],a=qt().memoizedState;return[typeof e=="boolean"?e:Jn(e),a]},useSyncExternalStore:Lo,useId:fu,useHostTransitionStatus:Ss,useFormState:Wo,useActionState:Wo,useOptimistic:function(e,a){var i=qt();return Po(i,At,e,a)},useMemoCache:ds,useCacheRefresh:du},Qd={readContext:ae,use:qi,useCallback:ru,useContext:ae,useEffect:au,useImperativeHandle:su,useInsertionEffect:nu,useLayoutEffect:iu,useMemo:ou,useReducer:ms,useRef:tu,useState:function(){return ms(Pe)},useDebugValue:_s,useDeferredValue:function(e,a){var i=qt();return At===null?vs(i,e,a):uu(i,At.memoizedState,e,a)},useTransition:function(){var e=ms(Pe)[0],a=qt().memoizedState;return[typeof e=="boolean"?e:Jn(e),a]},useSyncExternalStore:Lo,useId:fu,useHostTransitionStatus:Ss,useFormState:$o,useActionState:$o,useOptimistic:function(e,a){var i=qt();return At!==null?Po(i,At,e,a):(i.baseState=e,[e,i.queue.dispatch])},useMemoCache:ds,useCacheRefresh:du},An=null,di=0,Mn=_u(!0),oh=_u(!1),Me=y(null),Ye=null,Qt=y(0),xr={enqueueSetState:function(e,a,i){e=e._reactInternals;var r=de(),c=oa(r);c.payload=a,i!=null&&(c.callback=i),a=ua(e,c,r),a!==null&&(ge(a,e,r),Kn(a,e,r))},enqueueReplaceState:function(e,a,i){e=e._reactInternals;var r=de(),c=oa(r);c.tag=1,c.payload=a,i!=null&&(c.callback=i),a=ua(e,c,r),a!==null&&(ge(a,e,r),Kn(a,e,r))},enqueueForceUpdate:function(e,a){e=e._reactInternals;var i=de(),r=oa(i);r.tag=2,a!=null&&(r.callback=a),a=ua(e,r,i),a!==null&&(ge(a,e,i),Kn(a,e,i))}},uh=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},ch=Error(s(461)),Ft=!1,Er={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null},$e=!1,Yt=!1,Cr=!1,hh=typeof WeakSet=="function"?WeakSet:Set,Wt=null,Pt=null,oe=!1,He=null,Rn=8192,Zd={getCacheForType:function(e){var a=ae(Lt),i=a.data.get(e);return i===void 0&&(i=e(),a.data.set(e,i)),i}},xl=0,El=1,Cl=2,Tl=3,Al=4;if(typeof Symbol=="function"&&Symbol.for){var gi=Symbol.for;xl=gi("selector.component"),El=gi("selector.has_pseudo_class"),Cl=gi("selector.role"),Tl=gi("selector.test_id"),Al=gi("selector.text")}var Jd=typeof WeakMap=="function"?WeakMap:Map,pt=0,Ot=null,mt=null,_t=0,Tt=0,ve=null,xa=!1,Nn=!1,Tr=!1,ta=0,jt=0,Ea=0,Qa=0,Ar=0,Re=0,On=0,mi=null,ue=null,Mr=!1,Rr=0,pi=1/0,Ml=null,Ca=null,ee=0,Ta=null,zn=null,Dn=0,Nr=0,Or=null,fh=null,yi=0,zr=null;return gt.attemptContinuousHydration=function(e){if(e.tag===13){var a=nn(e,67108864);a!==null&&ge(a,e,67108864),Is(e,67108864)}},gt.attemptHydrationAtCurrentPriority=function(e){if(e.tag===13){var a=de();a=ut(a);var i=nn(e,a);i!==null&&ge(i,e,a),Is(e,a)}},gt.attemptSynchronousHydration=function(e){switch(e.tag){case 3:if(e=e.stateNode,e.current.memoizedState.isDehydrated){var a=O(e.pendingLanes);if(a!==0){for(e.pendingLanes|=2,e.entangledLanes|=2;a;){var i=1<<31-pe(a);e.entanglements[1]|=i,a&=~i}Ue(e),(pt&6)===0&&(pi=we()+500,an(0))}}break;case 13:a=nn(e,2),a!==null&&ge(a,e,2),oc(),Is(e,2)}},gt.batchedUpdates=function(e,a){return e(a)},gt.createComponentSelector=function(e){return{$$typeof:xl,value:e}},gt.createContainer=function(e,a,i,r,c,d,_,x,D,U){return Tc(e,a,!1,null,i,r,d,_,x,D,U,null)},gt.createHasPseudoClassSelector=function(e){return{$$typeof:El,value:e}},gt.createHydrationContainer=function(e,a,i,r,c,d,_,x,D,U,V,I,tt){return e=Tc(i,r,!0,e,c,d,x,D,U,V,I,tt),e.context=Ac(null),i=e.current,r=de(),r=ut(r),c=oa(r),c.callback=a??null,ua(i,c,r),a=r,e.current.lanes=a,J(e,a),Ue(e),e},gt.createPortal=function(e,a,i){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:un,key:r==null?null:""+r,children:e,containerInfo:a,implementation:i}},gt.createRoleSelector=function(e){return{$$typeof:Cl,value:e}},gt.createTestNameSelector=function(e){return{$$typeof:Tl,value:e}},gt.createTextSelector=function(e){return{$$typeof:Al,value:e}},gt.defaultOnCaughtError=function(e){console.error(e)},gt.defaultOnRecoverableError=function(e){uh(e)},gt.defaultOnUncaughtError=function(e){uh(e)},gt.deferredUpdates=function(e){var a=ot.T,i=Je();try{return Jt(32),ot.T=null,e()}finally{Jt(i),ot.T=a}},gt.discreteUpdates=function(e,a,i,r,c){var d=ot.T,_=Je();try{return Jt(2),ot.T=null,e(a,i,r,c)}finally{Jt(_),ot.T=d,pt===0&&(pi=we()+500)}},gt.findAllNodes=Ps,gt.findBoundingRects=function(e,a){if(!si)throw Error(s(363));a=Ps(e,a),e=[];for(var i=0;i<a.length;i++)e.push(jf(a[i]));for(a=e.length-1;0<a;a--){i=e[a];for(var r=i.x,c=r+i.width,d=i.y,_=d+i.height,x=a-1;0<=x;x--)if(a!==x){var D=e[x],U=D.x,V=U+D.width,I=D.y,tt=I+D.height;if(r>=U&&d>=I&&c<=V&&_<=tt){e.splice(a,1);break}else if(r!==U||i.width!==D.width||tt<d||I>_){if(!(d!==I||i.height!==D.height||V<r||U>c)){U>r&&(D.width+=U-r,D.x=r),V<c&&(D.width=c-U),e.splice(a,1);break}}else{I>d&&(D.height+=I-d,D.y=d),tt<_&&(D.height=_-I),e.splice(a,1);break}}}return e},gt.findHostInstance=Mc,gt.findHostInstanceWithNoPortals=function(e){return e=f(e),e=e!==null?m(e):null,e===null?null:li(e.stateNode)},gt.findHostInstanceWithWarning=function(e){return Mc(e)},gt.flushPassiveEffects=ii,gt.flushSyncFromReconciler=function(e){var a=pt;pt|=1;var i=ot.T,r=Je();try{if(Jt(2),ot.T=null,e)return e()}finally{Jt(r),ot.T=i,pt=a,(pt&6)===0&&an(0)}},gt.flushSyncWork=oc,gt.focusWithin=function(e,a){if(!si)throw Error(s(363));for(e=Ys(e),a=ic(e,a),a=Array.from(a),e=0;e<a.length;){var i=a[e++],r=i.tag;if(!ri(i)){if((r===5||r===26||r===27)&&qf(i.stateNode))return!0;for(i=i.child;i!==null;)a.push(i),i=i.sibling}}return!1},gt.getFindAllNodesFailureDescription=function(e,a){if(!si)throw Error(s(363));var i=0,r=[];e=[Ys(e),0];for(var c=0;c<e.length;){var d=e[c++],_=d.tag,x=e[c++],D=a[x];if((_!==5&&_!==26&&_!==27||!ri(d))&&(qs(d,D)&&(r.push(Xs(D)),x++,x>i&&(i=x)),x<a.length))for(d=d.child;d!==null;)e.push(d,x),d=d.sibling}if(i<a.length){for(e=[];i<a.length;i++)e.push(Xs(a[i]));return`findAllNodes was able to match part of the selector:
  `+(r.join(" > ")+`

No matching component was found for:
  `)+e.join(" > ")}return null},gt.getPublicRootInstance=function(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 27:case 5:return li(e.child.stateNode);default:return e.child.stateNode}},gt.injectIntoDevTools=function(){var e={bundleType:0,version:_f,rendererPackageName:vf,currentDispatcherRef:ot,reconcilerVersion:"19.1.0"};if(Gc!==null&&(e.rendererConfig=Gc),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")e=!1;else{var a=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(a.isDisabled||!a.supportsFiber)e=!0;else{try{oi=a.inject(e),ye=a}catch{}e=!!a.checkDCE}}return e},gt.isAlreadyRendering=function(){return(pt&6)!==0},gt.observeVisibleRects=function(e,a,i,r){if(!si)throw Error(s(363));e=Ps(e,a);var c=Xf(e,i,r).disconnect;return{disconnect:function(){c()}}},gt.shouldError=function(){return null},gt.shouldSuspend=function(){return!1},gt.startHostTransition=function(e,a,i,r){if(e.tag!==5)throw Error(s(476));var c=hu(e).queue;cu(e,c,a,hn,i===null?l:function(){var d=hu(e).next.queue;return Wn(e,d,{},de()),i(r)})},gt.updateContainer=function(e,a,i,r){var c=a.current,d=de();return Rc(c,d,e,a,i,r),d},gt.updateContainerSync=function(e,a,i,r){return Rc(a.current,2,e,a,i,r),2},gt},o.exports.default=o.exports,Object.defineProperty(o.exports,"__esModule",{value:!0})})(Pr)),Pr.exports}var Kh;function S4(){return Kh||(Kh=1,Xr.exports=v4()),Xr.exports}var b4=S4();const x4=i2(b4);var Qr={exports:{}},ea={};/**
 * @license React
 * react-reconciler-constants.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qh;function E4(){return Qh||(Qh=1,ea.ConcurrentRoot=1,ea.ContinuousEventPriority=8,ea.DefaultEventPriority=32,ea.DiscreteEventPriority=2,ea.IdleEventPriority=268435456,ea.LegacyRoot=0,ea.NoEventPriority=0),ea}var Zh;function C4(){return Zh||(Zh=1,Qr.exports=E4()),Qr.exports}var Zl=C4();const Jh={children:!0,ref:!0,key:!0,style:!0,forwardedRef:!0,unstable_applyCache:!0,unstable_applyDrawHitFromCache:!0};let Fh=!1,Wh=!1;const Pl=".react-konva-event",T4=`ReactKonva: You have a Konva node with draggable = true and position defined but no onDragMove or onDragEnd events are handled.
Position of a node will be changed during drag&drop, so you should update state of the react app as well.
Consider to add onDragMove or onDragEnd events.
For more info see: https://github.com/konvajs/react-konva/issues/256
`,A4=`ReactKonva: You are using "zIndex" attribute for a Konva node.
react-konva may get confused with ordering. Just define correct order of elements in your render function of a component.
For more info see: https://github.com/konvajs/react-konva/issues/194
`,M4={};function Jl(o,t,n=M4){if(!Fh&&"zIndex"in t&&(console.warn(A4),Fh=!0),!Wh&&t.draggable){var l=t.x!==void 0||t.y!==void 0,s=t.onDragEnd||t.onDragMove;l&&!s&&(console.warn(T4),Wh=!0)}for(var u in n)if(!Jh[u]){var h=u.slice(0,2)==="on",f=n[u]!==t[u];if(h&&f){var g=u.substr(2).toLowerCase();g.substr(0,7)==="content"&&(g="content"+g.substr(7,1).toUpperCase()+g.substr(8)),o.off(g,n[u])}var m=!t.hasOwnProperty(u);m&&o.setAttr(u,void 0)}var p=t._useStrictMode,v={},y=!1;const E={};for(var u in t)if(!Jh[u]){var h=u.slice(0,2)==="on",S=n[u]!==t[u];if(h&&S){var g=u.substr(2).toLowerCase();g.substr(0,7)==="content"&&(g="content"+g.substr(7,1).toUpperCase()+g.substr(8)),t[u]&&(E[g]=t[u])}!h&&(t[u]!==n[u]||p&&t[u]!==o.getAttr(u))&&(y=!0,v[u]=t[u])}y&&(o.setAttrs(v),wa(o));for(var g in E)o.off(g+Pl),o.on(g+Pl,E[g])}function wa(o){if(!F.autoDrawEnabled){var t=o.getLayer()||o.getStage();t&&t.batchDraw()}}var Zr={exports:{}},Jr={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ih;function R4(){return Ih||(Ih=1,(function(o){function t(C,L){var T=C.length;C.push(L);t:for(;0<T;){var Y=T-1>>>1,P=C[Y];if(0<s(P,L))C[Y]=L,C[T]=P,T=Y;else break t}}function n(C){return C.length===0?null:C[0]}function l(C){if(C.length===0)return null;var L=C[0],T=C.pop();if(T!==L){C[0]=T;t:for(var Y=0,P=C.length,at=P>>>1;Y<at;){var ht=2*(Y+1)-1,Nt=C[ht],Ut=ht+1,he=C[Ut];if(0>s(Nt,T))Ut<P&&0>s(he,Nt)?(C[Y]=he,C[Ut]=T,Y=Ut):(C[Y]=Nt,C[ht]=T,Y=ht);else if(Ut<P&&0>s(he,T))C[Y]=he,C[Ut]=T,Y=Ut;else break t}}return L}function s(C,L){var T=C.sortIndex-L.sortIndex;return T!==0?T:C.id-L.id}if(o.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;o.unstable_now=function(){return u.now()}}else{var h=Date,f=h.now();o.unstable_now=function(){return h.now()-f}}var g=[],m=[],p=1,v=null,y=3,E=!1,S=!1,R=!1,O=!1,G=typeof setTimeout=="function"?setTimeout:null,z=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;function H(C){for(var L=n(m);L!==null;){if(L.callback===null)l(m);else if(L.startTime<=C)l(m),L.sortIndex=L.expirationTime,t(g,L);else break;L=n(m)}}function Z(C){if(R=!1,H(C),!S)if(n(g)!==null)S=!0,X||(X=!0,$());else{var L=n(m);L!==null&&et(Z,L.startTime-C)}}var X=!1,J=-1,W=5,nt=-1;function st(){return O?!0:!(o.unstable_now()-nt<W)}function ut(){if(O=!1,X){var C=o.unstable_now();nt=C;var L=!0;try{t:{S=!1,R&&(R=!1,z(J),J=-1),E=!0;var T=y;try{e:{for(H(C),v=n(g);v!==null&&!(v.expirationTime>C&&st());){var Y=v.callback;if(typeof Y=="function"){v.callback=null,y=v.priorityLevel;var P=Y(v.expirationTime<=C);if(C=o.unstable_now(),typeof P=="function"){v.callback=P,H(C),L=!0;break e}v===n(g)&&l(g),H(C)}else l(g);v=n(g)}if(v!==null)L=!0;else{var at=n(m);at!==null&&et(Z,at.startTime-C),L=!1}}break t}finally{v=null,y=T,E=!1}L=void 0}}finally{L?$():X=!1}}}var $;if(typeof B=="function")$=function(){B(ut)};else if(typeof MessageChannel<"u"){var rt=new MessageChannel,it=rt.port2;rt.port1.onmessage=ut,$=function(){it.postMessage(null)}}else $=function(){G(ut,0)};function et(C,L){J=G(function(){C(o.unstable_now())},L)}o.unstable_IdlePriority=5,o.unstable_ImmediatePriority=1,o.unstable_LowPriority=4,o.unstable_NormalPriority=3,o.unstable_Profiling=null,o.unstable_UserBlockingPriority=2,o.unstable_cancelCallback=function(C){C.callback=null},o.unstable_forceFrameRate=function(C){0>C||125<C?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<C?Math.floor(1e3/C):5},o.unstable_getCurrentPriorityLevel=function(){return y},o.unstable_next=function(C){switch(y){case 1:case 2:case 3:var L=3;break;default:L=y}var T=y;y=L;try{return C()}finally{y=T}},o.unstable_requestPaint=function(){O=!0},o.unstable_runWithPriority=function(C,L){switch(C){case 1:case 2:case 3:case 4:case 5:break;default:C=3}var T=y;y=C;try{return L()}finally{y=T}},o.unstable_scheduleCallback=function(C,L,T){var Y=o.unstable_now();switch(typeof T=="object"&&T!==null?(T=T.delay,T=typeof T=="number"&&0<T?Y+T:Y):T=Y,C){case 1:var P=-1;break;case 2:P=250;break;case 5:P=1073741823;break;case 4:P=1e4;break;default:P=5e3}return P=T+P,C={id:p++,callback:L,priorityLevel:C,startTime:T,expirationTime:P,sortIndex:-1},T>Y?(C.sortIndex=T,t(m,C),n(g)===null&&C===n(m)&&(R?(z(J),J=-1):R=!0,et(Z,T-Y))):(C.sortIndex=P,t(g,C),S||E||(S=!0,X||(X=!0,$()))),C},o.unstable_shouldYield=st,o.unstable_wrapCallback=function(C){var L=y;return function(){var T=y;y=L;try{return C.apply(this,arguments)}finally{y=T}}}})(Jr)),Jr}var $h;function N4(){return $h||($h=1,Zr.exports=R4()),Zr.exports}var Fr=N4();const H0={},O4={};jn.Node.prototype._applyProps=Jl;let B0=Zl.DefaultEventPriority;function z4(o,t){if(typeof t=="string"){console.error(`Do not use plain text as child of Konva.Node. You are using text: ${t}`);return}o.add(t),wa(o)}function D4(o,t,n){let l=jn[o];l||(console.error(`Konva has no node with the type ${o}. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: "import "konva/lib/shapes/${o}"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html`),l=jn.Group);const s={},u={};for(var h in t)if(h!=="ref"){var f=h.slice(0,2)==="on";f?u[h]=t[h]:s[h]=t[h]}const g=new l(s);return Jl(g,u),g}function G4(o,t,n){console.error(`Text components are not supported for now in ReactKonva. Your text is: "${o}"`)}function w4(o,t,n){return!1}function H4(o){return o}function B4(){return null}function U4(){return null}function L4(o,t,n,l){return O4}function j4(){}function k4(o){}function Y4(o,t){return!1}function q4(){return H0}function X4(){return H0}const P4=setTimeout,V4=clearTimeout,K4=!0,Q4=o=>{o()},Z4=-1;function J4(o,t){return!1}const F4=!1,W4=!1,I4=!0,$4=!1,t3=!1;function e3(o,t){t.parent===o?t.moveToTop():o.add(t),wa(o)}function a3(o,t){t.parent===o?t.moveToTop():o.add(t),wa(o)}function U0(o,t,n){t._remove(),o.add(t),t.setZIndex(n.getZIndex()),wa(o)}function n3(o,t,n){U0(o,t,n)}function i3(o,t){t.destroy(),t.off(Pl),wa(o)}function l3(o,t){t.destroy(),t.off(Pl),wa(o)}function s3(o,t,n){console.error(`Text components are not yet supported in ReactKonva. You text is: "${n}"`)}function r3(o,t,n){}function o3(o,t,n,l){Jl(o,l,n)}function u3(o){o.hide(),wa(o)}function c3(o){}function h3(o,t){(t.visible==null||t.visible)&&o.show()}function f3(o,t){}function d3(o){}function g3(){}function m3(){return Zl.DefaultEventPriority}function p3(){}function y3(){return null}function _3(o){B0=o}function v3(){return B0}function S3(){return Zl.DiscreteEventPriority}function b3(){return!1}function x3(){}function E3(){return!1}function C3(){return!0}function T3(){}function A3(){}function M3(){return null}const R3=null;function N3(){}const O3=Object.freeze(Object.defineProperty({__proto__:null,NotPendingTransition:R3,appendChild:e3,appendChildToContainer:a3,appendInitialChild:z4,cancelTimeout:V4,clearContainer:d3,commitMount:r3,commitTextUpdate:s3,commitUpdate:o3,createInstance:D4,createTextInstance:G4,detachDeletedInstance:g3,finalizeInitialChildren:w4,getChildHostContext:X4,getCurrentEventPriority:m3,getCurrentUpdatePriority:v3,getInstanceFromScope:y3,getPublicInstance:H4,getRootHostContext:q4,hideInstance:u3,hideTextInstance:c3,idlePriority:Fr.unstable_IdlePriority,insertBefore:U0,insertInContainerBefore:n3,isPrimaryRenderer:F4,maySuspendCommit:E3,noTimeout:Z4,now:Fr.unstable_now,preloadInstance:C3,prepareForCommit:B4,preparePortalMount:U4,prepareScopeUpdate:p3,prepareUpdate:L4,removeChild:i3,removeChildFromContainer:l3,requestPostPaintCallback:x3,resetAfterCommit:j4,resetFormInstance:N3,resetTextContent:k4,resolveUpdatePriority:S3,run:Fr.unstable_runWithPriority,scheduleMicrotask:Q4,scheduleTimeout:P4,setCurrentUpdatePriority:_3,shouldAttemptEagerTransition:b3,shouldDeprioritizeSubtree:Y4,shouldSetTextContent:J4,startSuspendingCommit:T3,supportsHydration:t3,supportsMicrotasks:K4,supportsMutation:I4,supportsPersistence:$4,suspendInstance:A3,unhideInstance:h3,unhideTextInstance:f3,waitForCommitToBeReady:M3,warnsIfNotActing:W4},Symbol.toStringTag,{value:"Module"}));function L0(o,t,n){if(!o)return;if(n(o)===!0)return o;let l=o.child;for(;l;){const s=L0(l,t,n);if(s)return s;l=l.sibling}}function j0(o){try{return Object.defineProperties(o,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return o}}const po=j0(xt.createContext(null));class k0 extends xt.Component{render(){return xt.createElement(po.Provider,{value:this._reactInternals},this.props.children)}}function z3(){const o=xt.useContext(po);if(o===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const t=xt.useId();return xt.useMemo(()=>{for(const n of[o,o?.alternate]){if(!n)continue;const l=L0(n,!1,s=>{let u=s.memoizedState;for(;u;){if(u.memoizedState===t)return!0;u=u.next}});if(l)return l}},[o,t])}const D3=Symbol.for("react.context"),G3=o=>o!==null&&typeof o=="object"&&"$$typeof"in o&&o.$$typeof===D3;function w3(){const o=z3(),[t]=xt.useState(()=>new Map);t.clear();let n=o;for(;n;){const l=n.type;G3(l)&&l!==po&&!t.has(l)&&t.set(l,xt.use(j0(l))),n=n.return}return t}function H3(){const o=w3();return xt.useMemo(()=>Array.from(o.keys()).reduce((t,n)=>l=>xt.createElement(t,null,xt.createElement(n.Provider,{...l,value:o.get(n)})),t=>xt.createElement(k0,{...t})),[o])}if(Mt.version.indexOf("19")===-1)throw new Error("react-konva version 19 is only compatible with React 19. Make sure to have the last version of react-konva and react or downgrade react-konva to version 18.");function B3(o){const t=Mt.useRef({});return Mt.useLayoutEffect(()=>{t.current=o}),Mt.useLayoutEffect(()=>()=>{t.current={}},[]),t.current}const U3=()=>{const o=Mt.useRef(0);return Mt.useMemo(()=>{o.current++},[]),o.current>1},L3=o=>{const t=Mt.useRef(null),n=Mt.useRef(null),l=Mt.useRef(null),s=B3(o),u=H3(),h=Mt.useRef(!1),f=m=>{const{forwardedRef:p}=o;p&&(typeof p=="function"?p(m):p.current=m)},g=U3();return Mt.useLayoutEffect(()=>h.current&&g?()=>{h.current=!1,f(null),Bn.updateContainer(null,l.current,null),n.current.destroy()}:(h.current=!0,n.current=new jn.Stage({width:o.width,height:o.height,container:t.current}),f(n.current),l.current=Bn.createContainer(n.current,Zl.ConcurrentRoot,null,!1,null,"",console.error,console.error,console.error,null),Bn.updateContainer(Mt.createElement(u,{},o.children),l.current,null,()=>{}),()=>{g||(f(null),Bn.updateContainer(null,l.current,null),n.current.destroy())}),[]),Mt.useLayoutEffect(()=>{f(n.current),Jl(n.current,o,s),Bn.updateContainer(Mt.createElement(u,{},o.children),l.current,null)}),Mt.createElement("div",{ref:t,id:o.id,accessKey:o.accessKey,className:o.className,role:o.role,style:o.style,tabIndex:o.tabIndex,title:o.title})},Bn=x4(O3);Bn.injectIntoDevTools({findHostInstanceByFiber:()=>null,bundleType:0,version:Mt.version,rendererPackageName:"react-konva"});Mt.forwardRef((o,t)=>Mt.createElement(k0,{},Mt.createElement(L3,{...o,forwardedRef:t})));oo.div`
  .body {
    --global--size: clamp(2rem, 3em, 5rem);
    --anim--hover-time: 400ms;
    --anim--hover-ease: cubic-bezier(0.25, 1, 0.5, 1);
  }

  /* Base Styles */
  .body {
    width: 100%;
    height: 100%;
    margin: 0;
    padding: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: var(--global--size);
    background-color: #d7d7d7;
    font-family: "Inter", sans-serif;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    overflow: hidden;
  }

  /* ========== BUTTON ========== */

  /* Button Wrap Container */
  .button-wrap {
    position: relative;
    z-index: 2;
    border-radius: 999px;
    background: transparent;
    pointer-events: none;
    transition: all var(--anim--hover-time) var(--anim--hover-ease);
  }

  /* Button Shadow Container */
  .button-shadow {
    --shadow-cuttoff-fix: 2em;
    position: absolute;
    width: calc(100% + var(--shadow-cuttoff-fix));
    height: calc(100% + var(--shadow-cuttoff-fix));
    top: calc(0% - var(--shadow-cuttoff-fix) / 2);
    left: calc(0% - var(--shadow-cuttoff-fix) / 2);
    filter: blur(clamp(2px, 0.125em, 12px));
    -webkit-filter: blur(clamp(2px, 0.125em, 12px));
    -moz-filter: blur(clamp(2px, 0.125em, 12px));
    -ms-filter: blur(clamp(2px, 0.125em, 12px));
    overflow: visible;
    pointer-events: none;
  }

  /* Shadow */
  .button-shadow::after {
    content: "";
    position: absolute;
    z-index: 0;
    inset: 0;
    border-radius: 999px;
    background: linear-gradient(180deg, rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.1));
    width: calc(100% - var(--shadow-cuttoff-fix) - 0.25em);
    height: calc(100% - var(--shadow-cuttoff-fix) - 0.25em);
    top: calc(var(--shadow-cuttoff-fix) - 0.5em);
    left: calc(var(--shadow-cuttoff-fix) - 0.875em);
    padding: 0.125em;
    box-sizing: border-box;
    mask:
      linear-gradient(#000 0 0) content-box,
      linear-gradient(#000 0 0);
    mask-composite: exclude;
    transition: all var(--anim--hover-time) var(--anim--hover-ease);
    overflow: visible;
    opacity: 1;
  }

  /* ========== BUTTON BASE STYLES ========== */

  .button {
    /* Basic Styling */
    --border-width: clamp(1px, 0.0625em, 4px);
    all: unset;
    cursor: pointer;
    position: relative;
    -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
    pointer-events: auto;
    z-index: 3;
    background: linear-gradient(
      -75deg,
      rgba(255, 255, 255, 0.05),
      rgba(255, 255, 255, 0.2),
      rgba(255, 255, 255, 0.05)
    );
    border-radius: 999px;
    box-shadow:
      inset 0 0.125em 0.125em rgba(0, 0, 0, 0.05),
      inset 0 -0.125em 0.125em rgba(255, 255, 255, 0.5),
      0 0.25em 0.125em -0.125em rgba(0, 0, 0, 0.2),
      0 0 0.1em 0.25em inset rgba(255, 255, 255, 0.2),
      0 0 0 0 rgba(255, 255, 255, 1);
    backdrop-filter: blur(clamp(1px, 0.125em, 4px));
    -webkit-backdrop-filter: blur(clamp(1px, 0.125em, 4px));
    -moz-backdrop-filter: blur(clamp(1px, 0.125em, 4px));
    -ms-backdrop-filter: blur(clamp(1px, 0.125em, 4px));
    transition: all var(--anim--hover-time) var(--anim--hover-ease);
  }

  .button:hover {
    transform: scale(0.975);
    backdrop-filter: blur(0.01em);
    -webkit-backdrop-filter: blur(0.01em);
    -moz-backdrop-filter: blur(0.01em);
    -ms-backdrop-filter: blur(0.01em);
    box-shadow:
      inset 0 0.125em 0.125em rgba(0, 0, 0, 0.05),
      inset 0 -0.125em 0.125em rgba(255, 255, 255, 0.5),
      0 0.15em 0.05em -0.1em rgba(0, 0, 0, 0.25),
      0 0 0.05em 0.1em inset rgba(255, 255, 255, 0.5),
      0 0 0 0 rgba(255, 255, 255, 1);
  }

  /* Button Text */
  .button .span {
    position: relative;
    display: block;
    user-select: none;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    font-family: "Inter", sans-serif;
    letter-spacing: -0.05em;
    font-weight: 500;
    font-size: 1em;
    color: rgba(50, 50, 50, 1);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-shadow: 0em 0.25em 0.05em rgba(0, 0, 0, 0.1);
    transition: all var(--anim--hover-time) var(--anim--hover-ease);
    padding-inline: 1.5em;
    padding-block: 0.875em;
  }

  .button:hover .span {
    text-shadow: 0.025em 0.025em 0.025em rgba(0, 0, 0, 0.12);
  }

  /* Text */
  .button .span::after {
    content: "";
    display: block;
    position: absolute;
    z-index: 1;
    width: calc(100% - var(--border-width)); /* Prevent overlapping border */
    height: calc(100% - var(--border-width));
    top: calc(0% + var(--border-width) / 2);
    left: calc(0% + var(--border-width) / 2);
    box-sizing: border-box;
    border-radius: 999px;
    overflow: clip;
    background: linear-gradient(
      var(--angle-2),
      rgba(255, 255, 255, 0) 0%,
      rgba(255, 255, 255, 0.5) 40% 50%,
      rgba(255, 255, 255, 0) 55%
    );
    z-index: 3;
    mix-blend-mode: screen;
    pointer-events: none;
    background-size: 200% 200%;
    background-position: 0% 50%;
    background-repeat: no-repeat;
    transition:
      background-position calc(var(--anim--hover-time) * 1.25)
        var(--anim--hover-ease),
      --angle-2 calc(var(--anim--hover-time) * 1.25) var(--anim--hover-ease);
  }

  .button:hover .span::after {
    background-position: 25% 50%;
  }

  .button:active .span::after {
    background-position: 50% 15%;
    --angle-2: -15deg;
  }

  /* ========== BUTTON OUTLINE ========== */

  /* Outline */
  .button::after {
    content: "";
    position: absolute;
    z-index: 1;
    inset: 0;
    border-radius: 999px;
    width: calc(100% + var(--border-width));
    height: calc(100% + var(--border-width));
    top: calc(0% - var(--border-width) / 2);
    left: calc(0% - var(--border-width) / 2);
    padding: var(--border-width);
    box-sizing: border-box;
    background: conic-gradient(
        from var(--angle-1) at 50% 50%,
        rgba(0, 0, 0, 0.5),
        rgba(0, 0, 0, 0) 5% 40%,
        rgba(0, 0, 0, 0.5) 50%,
        rgba(0, 0, 0, 0) 60% 95%,
        rgba(0, 0, 0, 0.5)
      ),
      linear-gradient(180deg, rgba(255, 255, 255, 0.5), rgba(255, 255, 255, 0.5));
    mask:
      linear-gradient(#000 0 0) content-box,
      linear-gradient(#000 0 0);
    mask-composite: exclude;
    transition:
      all var(--anim--hover-time) var(--anim--hover-ease),
      --angle-1 500ms ease;
    box-shadow: inset 0 0 0 calc(var(--border-width) / 2) rgba(255, 255, 255, 0.5);
  }

  .button:hover::after {
    --angle-1: -125deg;
  }

  .button:active::after {
    --angle-1: -75deg;
  }

  /* Shadow Hover */
  .button-wrap:has(button:hover) .button-shadow {
    filter: blur(clamp(2px, 0.0625em, 6px));
    -webkit-filter: blur(clamp(2px, 0.0625em, 6px));
    -moz-filter: blur(clamp(2px, 0.0625em, 6px));
    -ms-filter: blur(clamp(2px, 0.0625em, 6px));
    transition: filter var(--anim--hover-time) var(--anim--hover-ease);
  }

  .button-wrap:has(button:hover) .button-shadow::after {
    top: calc(var(--shadow-cuttoff-fix) - 0.875em);
    opacity: 1;
  }

  /* Rotation */
  .button-wrap:has(button:active) {
    transform: rotate3d(1, 0, 0, 25deg);
  }

  .button-wrap:has(button:active) button {
    box-shadow:
      inset 0 0.125em 0.125em rgba(0, 0, 0, 0.05),
      inset 0 -0.125em 0.125em rgba(255, 255, 255, 0.5),
      0 0.125em 0.125em -0.125em rgba(0, 0, 0, 0.2),
      0 0 0.1em 0.25em inset rgba(255, 255, 255, 0.2),
      0 0.225em 0.05em 0 rgba(0, 0, 0, 0.05),
      0 0.25em 0 0 rgba(255, 255, 255, 0.75),
      inset 0 0.25em 0.05em 0 rgba(0, 0, 0, 0.15);
  }

  .button-wrap:has(button:active) .button-shadow {
    filter: blur(clamp(2px, 0.125em, 12px));
    -webkit-filter: blur(clamp(2px, 0.125em, 12px));
    -moz-filter: blur(clamp(2px, 0.125em, 12px));
    -ms-filter: blur(clamp(2px, 0.125em, 12px));
  }

  .button-wrap:has(button:active) .button-shadow::after {
    top: calc(var(--shadow-cuttoff-fix) - 0.5em);
    opacity: 0.75;
  }

  .button-wrap:has(button:active) span {
    text-shadow: 0.025em 0.25em 0.05em rgba(0, 0, 0, 0.12);
  }`;const j3=({doanim:o})=>j.jsx(k3,{doanim:o,children:j.jsx("div",{className:"loader"})}),k3=oo.div`
  .loader {
    display: block;
    --height-of-loader: 4px;
    --loader-color: #0071e2;
    width: 100%;
    height: var(--height-of-loader);
    border-radius: 50%;
    background-color: rgba(0, 0, 0, 0.2);
    position: relative;
  }

  .loader::before {
    content: "";
    position: absolute;
    background: linear-gradient(
      90deg,
      rgba(5, 255, 213, 1) 0%,
      rgba(39, 59, 242, 1) 50%,
      rgba(132, 35, 250, 1) 100%
    );
    top: 0;
    left: 0;
    width: 0%;
    height: 100%;
    border-radius: 50%;
    box-shadow: 
    10px 5px 15px rgba(5, 255, 213, 0.6), 
    /* Noticeable blue/purple glow (from middle/end of gradient) */
    10px 5px 25px rgba(39, 59, 242, 0.7),
    10px 5px 40px rgba(132, 35, 250, 0.5);
    );

    animation: ${o=>o.doanim?"moving 1s ease-in-out forwards":"none"};

    --animation-key: ${o=>o.doanim?"start":"stop"};
  }

  @keyframes moving {
    50% {
      width: 100%;
    }

    100% {
      width: 0;
      right: 0;
      left: unset;
    }
  }
`;function Y3(o){return o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function q3(o,t,n={caseSensitive:!1}){let l=o;const s=Object.entries(t).filter(([u,h])=>u!==""&&h!=="");s.sort((u,h)=>h[0].length-u[0].length);for(const[u,h]of s){const f=Y3(u),g=n.caseSensitive?"g":"gi",m=new RegExp(`(?<![\\w$])${f}(?![\\w$])`,g);l=l.replace(m,p=>{if(!n.caseSensitive&&/[A-ZÇÝĞÜŞÖ]/i.test(p)){if(p.toUpperCase()===p)return h.toUpperCase();if(p[0]===p[0].toUpperCase())return h[0].toUpperCase()+h.slice(1)}return h})}return l}function X3(o,t){if(!o||!o.message)return"Näbelli ýalňyşlyk.";let n=o.message;for(const[l,s]of Object.entries(t)){const u=new RegExp(`\\b${s}\\b`,"g");n=n.replace(u,l)}return n=n.replace(/is not defined/g,"kesgitlenmedik üýtgeýän").replace(/Cannot read property/g,"Özlügi okap bolmaýar").replace(/Unexpected token/g,"Nädogry nyşan tapyldy").replace(/Unexpected number/g,"Nädogry san").replace(/Unexpected identifier/g,"Nädogry belgi tapyldy").replace(/Invalid or unexpected token/g,"Nädogry ýa-da garaşylmadyk nyşan").replace(/has already been declared/g,"eýýäm girizildi").replace(/Identifier/g,"Guty").replace(/SyntaxError/g,"Sýntaks ýalňyşlygy").replace(/ReferenceError/g,"Salgylanma ýalňyşlygy").replace(/TypeError/g,"Tip ýalňyşlygy"),`Ýalňyşlyk: ${n}`}const Q3=()=>{console.count();const{darkMode:o,setDarkMode:t}=xt.useContext(t0),n=Q1(),[l,s]=xt.useState(D2),[u,h]=Mt.useState(0),[f,g]=xt.useState(()=>localStorage.getItem("inputCode")||`// Ýönekeý mysal: ululyk we konsol yazmagy görkezýär
uytgeyan san = 0;
for (uytgeyan i = 0; i < 100; i++) {
  konsol.yaz(i);
}


























`),[m,p]=xt.useState(""),[v,y]=xt.useState(!0),[E,S]=xt.useState([]),[R,O]=xt.useState(()=>localStorage.getItem("eyeSafe")==="true"),[G,z]=xt.useState(!1),B=xt.useRef(null),H=xt.useRef(null),[Z,X]=xt.useState(()=>localStorage.getItem("mathLine")==="true");xt.useEffect(()=>{const T=H.current;T&&(T.scrollTop=T.scrollHeight)},[E]),xt.useEffect(()=>{localStorage.setItem("mathLine",Z)},[Z]),xt.useEffect(()=>{localStorage.setItem("eyeSafe",R)},[R]),xt.useEffect(()=>{if(!R)return;const T=localStorage.getItem("lastEyeExercise"),Y=Date.now(),P=1200*1e3,at=T?Math.max(0,P-(Y-T)):P;console.log(at);const ht=setTimeout(()=>{z(!0),localStorage.setItem("lastEyeExercise",Date.now())},at);return()=>clearTimeout(ht)},[G,R]),xt.useEffect(()=>{o?(document.documentElement.classList.add("dark"),localStorage.theme="dark"):(document.documentElement.classList.remove("dark"),localStorage.theme="light")},[o]),xt.useEffect(()=>{const T=q3(f,l,{caseSensitive:v});p(T),localStorage.setItem("inputCode",f)},[f,l,v]),xt.useEffect(()=>{function T(Y){!Y.data||Y.data.source!=="turkmen-runtime"||S(P=>{const at={...Y.data.payload};return at.type==="error"&&(at.args=at.args.map(ht=>X3({message:ht},l))),[...P,at]})}return window.addEventListener("message",T),()=>window.removeEventListener("message",T)},[]);function J(T){Dr.push("<\/script>"),Dr.push("</body></html>");const Y=Dr.join(`
`),P=new Blob([Y],{type:"text/html"}),at=URL.createObjectURL(P);B.current&&(B.current.src=at);const ht=()=>{B.current.contentWindow.postMessage({source:"turkmen-parent",code:T},"*"),setTimeout(()=>URL.revokeObjectURL(at),2e3),B.current.removeEventListener("load",ht)};B.current.addEventListener("load",ht)}function W(){h(T=>T+1),S([]),J(m)}function nt(){navigator.clipboard.writeText(f).catch(()=>{})}function st(){const T=prompt("Export edilyan file adyny yaz"),Y=new Blob([m],{type:"text/javascript"}),P=URL.createObjectURL(Y),at=document.createElement("a");at.href=P,at.download=`${T}.js`,at.click(),URL.revokeObjectURL(P)}function ut(){const T=prompt("Export edilyan file adyny yaz"),Y=new Blob([f],{type:"text/plain"}),P=URL.createObjectURL(Y),at=document.createElement("a");at.href=P,at.download=`${T}.yedi`,at.click(),URL.revokeObjectURL(P)}function $(){const T=document.createElement("input");T.type="file",T.accept=".txt,.js,.yedi,.code",T.onchange=Y=>{const P=Y.target.files[0];if(!P)return;const at=new FileReader;at.onload=ht=>{const Nt=ht.target.result;g(Nt)},at.readAsText(P)},T.click()}function rt(T){const Y=typeof T=="string"?document.querySelector(T):T.current||T;Y&&(document.fullscreenElement?(B.current.style.zoom=.409,document.exitFullscreen().catch(()=>{})):(B.current.style.zoom=1,Y.requestFullscreen().catch(P=>console.warn("Fullscreen failed:",P))))}function it(){rt(document.querySelector(".code-big-container"))}function et(){rt(document.querySelector(".code-view-container"))}function C(){rt(document.querySelector(".code-output-container"))}function L(){z(!1),localStorage.setItem("lastEyeExercise",Date.now())}return G?j.jsx(z2,{closeFunction:L}):j.jsxs("div",{className:"w-full h-screen overflow-hidden dark:bg-[#10172a] bg-[#e8e8e8]",children:[j.jsxs("div",{className:"w-full sticky z-1",children:[j.jsxs("header",{style:{background:`${o?"linear-gradient(270deg,rgba(16, 24, 42, 1) 0%, rgba(16, 24, 42, 1) 31%, rgba(53, 68, 102, 1) 45%, rgba(53, 68, 102, 1) 52%, rgba(16, 24, 42, 1) 67%, rgba(16, 24, 42, 1) 100%)":"linear-gradient(270deg,rgba(232, 232, 232, 1) 0%, rgba(232, 232, 232, 1) 31%, rgba(252, 252, 255, 1) 45%, rgba(252, 252, 255, 1) 52%, rgba(232, 232, 232, 1) 67%, rgba(232, 232, 232, 1) 100%)"}`},className:"flex items-center flex-shrink-0 justify-between z-10 w-full px-2 py-1",children:[j.jsxs("div",{className:"flex-wrap gap-2 md:gap-4 items-center ",children:[j.jsx("button",{onClick:W,className:"p-2",title:"Run",children:j.jsx(ce,{Icon:A2,LightTextColor:"#47c624",DarkTextColor:"#3cf609"})}),j.jsx("button",{onClick:nt,className:"p-2",title:"Run",children:j.jsx(ce,{Icon:s2})}),j.jsx("button",{onClick:ut,className:"p-2",title:"Run",children:j.jsx(ce,{Icon:R2})}),j.jsx("button",{onClick:$,className:"p-2",title:"Run",children:j.jsx(ce,{Icon:O2})}),j.jsx("button",{onClick:st,className:"p-2",title:"Run",children:j.jsx(ce,{Icon:V2})}),j.jsx("button",{onClick:()=>n("/imageTo64Code"),className:"p-2",title:"Run",children:j.jsx(ce,{Icon:_2})}),j.jsx("button",{className:"p-2 rounded-lg transition-color",title:"Run",children:j.jsx(ce,{Icon:e0})}),j.jsx("button",{onClick:()=>n("/images"),className:"p-2",title:"Run",children:j.jsx(ce,{Icon:S2})})]}),j.jsx("div",{className:"w-6 h-10 me-24",children:j.jsx("img",{onClick:()=>n("/about"),className:"w-full h-full",src:o?Z1:J1,alt:"img"})}),j.jsxs("div",{className:"flex items-center",children:[j.jsx("button",{onClick:()=>O(!R),className:"p-2",title:o?"Switch to light mode":"Switch to dark mode",children:R?j.jsx(ce,{Icon:c2}):j.jsx(ce,{Icon:o2})}),j.jsx("button",{onClick:()=>X(!Z),className:"p-2",title:o?"Switch to light mode":"Switch to dark mode",children:Z?j.jsx(ce,{Icon:g2}):j.jsx(ce,{Icon:p2})}),j.jsx("button",{onClick:()=>n("/documentation"),className:"p-2",children:j.jsx(ce,{Icon:C2})}),j.jsx(B2,{}),j.jsx(F1,{checked:o,onChange:()=>t(!o)})]})]}),j.jsx(j3,{doanim:u},u)]}),j.jsx("div",{className:"w-full h-[92%] flex flex-col absolute top-16 left-0 bg-[#202937]",children:j.jsxs("div",{className:"flex flex-col md:flex-row h-full w-full",children:[j.jsxs("div",{className:"relative md:w-[65%] h-[50vh] md:h-full w-full overflow-auto group code-big-container dark:bg-[#202937] bg-white",children:[j.jsx(W1,{value:f,theme:o?e2:a2,extensions:[I1,o?$1:t2],onChange:T=>g(T)}),j.jsx(Gr,{codeBigScreen:it})]}),j.jsxs("div",{className:"w-full h-full md:w-[45%] md:h-full  border-s-4 dark:border-gray-950 border-gray-300",children:[j.jsxs("div",{className:"code-view-container overflow-hidden w-full h-[50%] group relative",children:[j.jsx("iframe",{title:"sandbox",ref:B,sandbox:"allow-scripts allow-forms allow-same-origin allow-popups allow-downloads allow-top-navigation-by-user-activation",style:{height:"100%",width:"100%",backgroundColor:`${o?"#4c5564":"#fff"}`,backgroundImage:`
    linear-gradient(to right, ${o?"rgba(200, 200, 200, 0.5)":"rgba(0, 0, 0, 0.2) "}, ${Z?"1px":"0"}, transparent 2px),
    linear-gradient(to bottom, ${o?"rgba(200, 200, 200, 0.5)":"rgba(0, 0, 0, 0.2) "}, ${Z?"1px":"0"}, transparent 2px)
  `,backgroundSize:"30px 30px",backgroundRepeat:"repeat"}}),j.jsx(Gr,{codeBigScreen:et})]}),j.jsxs("div",{ref:H,className:"code-output-container border-t-4 dark:bg-[#384152] dark:text-gray-100 bg-white border-gray-300 dark:border-gray-950  font-mono text-sm overflow-auto w-full h-[50%] group relative pb-12",children:[E.length===0?j.jsx(K2,{}):E.map((T,Y)=>j.jsx("div",{className:"border-b text-gray-800 dark:text-gray-100 dark:border-0 border-gray-200 py-1",children:T.type==="log"?j.jsxs("span",{children:[":"," ",T.args.map(P=>typeof P=="object"?JSON.stringify(P):String(P)).join(" ")]}):T.type==="error"?j.jsxs("span",{style:{backgroundColor:`${o?"":"red"}`,color:`${o?"red":"transparent"}`,textShadow:`${o?"":"2px 2px 2px rgba(255, 255, 255, 0.5)"}`,WebkitBackgroundClip:"text",MozBackgroundClip:"text",BackgroundClip:"text",fontSize:"1.4rem"},children:[" ",T.args.map(P=>typeof P=="object"?JSON.stringify(P):String(P)).join(" ")]}):j.jsxs("span",{children:[T.type,":"," ",T.args.map(P=>typeof P=="object"?JSON.stringify(P):String(P)).join(" ")]})},Y)),j.jsx(Gr,{codeBigScreen:C})]})]})]})})]})};export{Q3 as default};
